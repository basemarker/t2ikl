"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["4330"],{146203:function(e,t){t.Z={"image-wrapper":"image-wrapper-XV2NMA",imageWrapper:"image-wrapper-XV2NMA","loader-music":"loader-music-rEySnl",loaderMusic:"loader-music-rEySnl",image:"image-gONxNx","image-skeleton":"image-skeleton-svOuOO",imageSkeleton:"image-skeleton-svOuOO",loading:"loading-7lAVe1"}},630892:function(e,t,r){var n,i,a=r(133179),o=r(218571),s=r(230421),l=r(401821),u={out:"out-in",in:"in-out"},d=function(e,t,r){return function(){var n;e.props[t]&&(n=e.props)[t].apply(n,arguments),r()}},c=((n={})[u.out]=function(e){var t=e.current,r=e.changeState;return o.cloneElement(t,{in:!1,onExited:d(t,"onExited",function(){r(s.d0,null)})})},n[u.in]=function(e){var t=e.current,r=e.changeState,n=e.children;return[t,o.cloneElement(n,{in:!0,onEntered:d(n,"onEntered",function(){r(s.d0)})})]},n),m=((i={})[u.out]=function(e){var t=e.children,r=e.changeState;return o.cloneElement(t,{in:!0,onEntered:d(t,"onEntered",function(){r(s.cn,o.cloneElement(t,{in:!0}))})})},i[u.in]=function(e){var t=e.current,r=e.children,n=e.changeState;return[o.cloneElement(t,{in:!1,onExited:d(t,"onExited",function(){n(s.cn,o.cloneElement(r,{in:!0}))})}),o.cloneElement(r,{in:!0})]},i),f=function(e){function t(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state={status:s.cn,current:null},t.appeared=!1,t.changeState=function(e,r){void 0===r&&(r=t.state.current),t.setState({status:e,current:r})},t}(0,a.Z)(t,e);var r=t.prototype;return r.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){var r,n;if(null==e.children)return{current:null};if(t.status===s.d0&&e.mode===u.in)return{status:s.d0};return t.current&&(r=t.current,!(r===(n=e.children)||o.isValidElement(r)&&o.isValidElement(n)&&null!=r.key&&r.key===n.key))?{status:s.Ix}:{current:o.cloneElement(e.children,{in:!0})}},r.render=function(){var e,t=this.props,r=t.children,n=t.mode,i=this.state,a=i.status,u=i.current,d={children:r,current:u,changeState:this.changeState,status:a};switch(a){case s.d0:e=m[n](d);break;case s.Ix:e=c[n](d);break;case s.cn:e=u}return o.createElement(l.Z.Provider,{value:{isMounting:!this.appeared}},e)},t}(o.Component);f.propTypes={},f.defaultProps={mode:u.out},t.Z=f},771666:function(e,t,r){let n;r.d(t,{Z:function(){return a}});let i=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},592199:function(e,t,r){r.d(t,{S:function(){return i}});let n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function i(e,t=0){return n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]}},994964:function(e,t,r){r.d(t,{Z:()=>o});var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},i=r("771666"),a=r("592199"),o=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();let o=(e=e||{}).random||(e.rng||i.Z)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,a.S)(o)}},233246:function(e,t,r){var n=r(85728),i=r(295834),a=r(772322),o=r(2910),s=r(218571),l=r(105789),u=r.n(l),d=r(150564),c=r(146203);t.Z=(0,s.memo)(e=>{var{src:t="",draggable:r=!1,alt:l="",phType:m,className:f,wrapperStyle:v,withCredentials:_=!1,onLoad:p,loading:g,style:h,loader:y,fallbackImgSrc:b,onError:R,onMouseLeave:S,onMouseOver:T}=e,E=(0,i._)(e,["src","draggable","alt","phType","className","wrapperStyle","withCredentials","onLoad","loading","style","loader","fallbackImgSrc","onError","onMouseLeave","onMouseOver"]),[M,C]=(0,s.useState)(!1),I=(0,s.useRef)(!1),A=(0,s.useRef)([]),k=(0,s.useRef)(null),[w,P]=(0,s.useState)(t||b),D=(0,s.useMemo)(()=>{if(M)return(0,a.jsx)(a.Fragment,{});if(y)return(0,a.jsx)("div",{className:c.Z.loading,children:y});if("music"===m)return(0,a.jsx)("div",{className:c.Z["loader-music"],children:(0,a.jsx)(d.hQw,{})});else if("sound"===m)return(0,a.jsx)("div",{className:c.Z["loader-music"],children:(0,a.jsx)(d.AjX,{})});else return(0,a.jsx)(a.Fragment,{})},[y,M,m]);return(0,s.useEffect)(()=>{if(!!t){P(t);var e=()=>{var e=k.current;e&&(e.src="",e.onload=null,e.onerror=null,e=null)};return A.current.includes(t)?()=>e():(C(!1),I.current=!1,()=>e())}},[t]),(0,a.jsxs)("div",{className:u()(c.Z["image-wrapper"],f),style:v,onMouseLeave:S,onMouseOver:T,children:[D,(0,a.jsx)("img",(0,n._)({ref:k,className:c.Z.image,crossOrigin:_?"use-credentials":"anonymous",src:(0,o.C)(w,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),draggable:r,alt:l,style:h,loading:g,onLoad:e=>{C(!0),null==p||p(e),I.current=!1},onError:e=>{if(w&&A.current.push(w),C(!0),!(b&&A.current.includes(b)))null==R||R(e),I.current=!0,b&&(C(!1),I.current=!1,P(b))}},E))]})})},272444:function(e,t,r){r.d(t,{ZP:()=>u});var n,i=r("591586"),a=r("465201"),o=r("636971");class s{setItem(e,t){this._map.set(e,t)}getItem(e){this._map.get(e)}keys(){return this._map.keys()}constructor(){this._map=new Map}}class l{static set(e,t){try{var r=JSON.stringify(t);this._localStorage.setItem(e,r)}catch(e){i.t.log("JSON.stringify failed",null==e?void 0:e.message)}}static get(e){var t,r=null!==(t=this._localStorage.getItem(e))&&void 0!==t?t:"";if(null===r)return null;try{return JSON.parse(r)}catch(e){i.t.log("JSON.parse failed",null==e?void 0:e.message)}return null}static keys(){if(this._localStorage===globalThis.localStorage){var e=0;return{next:()=>{if(e<localStorage.length){var t,r=null!==(t=localStorage.key(e))&&void 0!==t?t:"";return e++,{value:r,done:!1}}return{done:!0}}}}return this._localStorage.keys()}}l._localStorage=(null===(n=r.g.navigator)||void 0===n?void 0:n.cookieEnabled)&&void 0!==r.g.localStorage?r.g.localStorage:new s;var u=new a.z6({_cacheKey:o.vw,db:l})},589214:function(e,t,r){r.d(t,{$U:()=>s,Mr:()=>o,f4:()=>l});var n=JSON.parse('{"Hv":{"NO":"345108881","b2":"15.4.0"}}'),i=r("506057"),a=r("711891"),o="undefined"!=typeof LYRA_DRAFT_VERSION?LYRA_DRAFT_VERSION:a.lr,s="undefined"!=typeof LYRA_APP_VERSION?LYRA_APP_VERSION:n.Hv.b2,l="undefined"!=typeof LYRA_SDK_VERSION?LYRA_APP_VERSION:i.VE;n.Hv.NO},430382:function(e,t,r){r.d(t,{L:function(){return n}});function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e9,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0x2540be3ff,r=Math.floor(Math.random()*(t-e+1))+e;return"".concat(String(r)).concat(Date.now())}},664892:function(e,t,r){r.d(t,{b:function(){return i},s:function(){return n}});var n=e=>{var t,r=e.match(/^(https:\/\/[^\/]*)/g);return null!==(t=null==r?void 0:r[0])&&void 0!==t?t:e},i=e=>{var t,r=e.match(/\/([^/]+\/[^/]+)~/g),n=e.match(/\/([^/]+\/[^/]+)(?=\?)/g);return(null==r?void 0:r[1])?r[1]:(null==n?void 0:n[1])?null==n?void 0:n[1]:(null===(t=e.split("?"))||void 0===t?void 0:t[0])||e}},937696:function(e,t,r){r.d(t,{o:function(){return b}});var n,i,a,o=r(876826),s=r(799108),l=r(417699),u=r(787205),d=r(292406),c=r(540457),m=r(194488),f=r(292180),v=r(608358),_=r(584072),p=r(247170),g=r(484702),h=r(337727);var y=(n=(0,o._)(function*(e){!a&&(a=e.createInstance(h.t,!0));var t=(0,_.Hp)(()=>new Promise(e=>{if(a.isReady){e();return}a.updateModelConfig(!0).finally(e)}),1e4);yield t;var r=e=>e.benefitType;return(0,d.Z)(a.modelList.map(e=>{var t,n,i;return[null==e?void 0:null===(t=e.commercialConfig)||void 0===t?void 0:t.default,...Object.values(null!==(i=null===(n=e.commercialConfig)||void 0===n?void 0:n.formatConf)&&void 0!==i?i:{})].filter(Boolean).map(r)})).map(c.Z)}),function(e){return n.apply(this,arguments)});var b=(i=(0,o._)(function*(e){var{containerService:t,needToSetValue:r=!0,ctx:n=(0,p.fC)()}=e,i=(0,v.ko)(t,u.$),a=(0,v.ko)(t,l.e),o=(0,v.ko)(t,g.N),d=Number(a.appId),c=yield y(t),_=Object.entries(s.wZ).filter(e=>e[1]===s.lK.Video).map(e=>e[0]).concat(...c),h=Object.entries(s.wZ).filter(e=>e[1]===s.lK.Image).map(e=>e[0]),b=Object.entries(s.wZ).filter(e=>e[1]===s.lK.Audio).map(e=>e[0]),R=yield i.fetchPaidStrategy(n,{appId:d,resourceSubType:"aigc",resourceBenefit:[{idType:"str",idValue:s.Zw,benefitKey:(0,m.Z)(_).map(f.Z)},{idType:"str",idValue:s.jk,benefitKey:(0,m.Z)(h).map(f.Z)},{idType:"str",idValue:s.O6,benefitKey:(0,m.Z)(b).map(f.Z)}]});if(r&&R.ok&&R.value){var{resourceStrategy:S}=R.value;S.length&&o.setPaidStrategy(S)}return R}),function(e){return i.apply(this,arguments)})},568409:function(e,t,r){r.d(t,{S:function(){return a},_:function(){return o}});var n=r(474956),i="".concat(n._g.DreaminaAiVideo,"_");function a(e){return e.replace(i,"")}function o(e){return e.startsWith(i)}},487437:function(e,t,r){function n(e){var{scrollWidth:t,clientWidth:r}=e||{};return t>r}function i(e){var{scrollHeight:t,clientHeight:r}=e||{};return t>r}function a(e){var{scrollHeight:t,clientHeight:r}=e||{};return t>r}r.d(t,{ao:function(){return n},ob:function(){return i},rw:function(){return a}})},925016:function(e,t,r){r.d(t,{H:()=>h});var n=r("85728"),i=r("929753"),a=r("772322"),o=r("2910"),s=r("889715");r("395248");var l=r("423342"),u=r("570126"),d={loadingContainer:"loadingContainer-KKS4gN",loadingContent:"loadingContent-NlUCJ0",mwebCommonGlobalModalContainer:"mwebCommonGlobalModalContainer-Iv01rQ",closeBtn:"closeBtn-fx26qs",closeIcon:"closeIcon-P_kta3",closeBtnWithHeaderImage:"closeBtnWithHeaderImage-OMV3yd",headerImageContainer:"headerImageContainer-iiNfNJ",modalMain:"modalMain-FdgVIi",modalMainWithHeaderImage:"modalMainWithHeaderImage-itv5ZU",modalTitle:"modalTitle-dzJs2G",preIcon:"preIcon-stwq6E",modalContent:"modalContent-DM9_aq"},c=r("319440");class m{static initialize(){var e=window.document.createElement("div");window.document.body.append(e),m.domContainer=u.createRoot(e)}static load(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!m.isInitialize&&(m.initialize(),m.isInitialize=!0),m.isLoading!==t){m.isLoading=t;var r=t?(0,a.jsx)("div",{className:d.loadingContainer,children:(0,a.jsx)(c.XG,{className:d.loadingContent,size:c.XJ.Big})}):null;null===(e=m.domContainer)||void 0===e||e.render(r)}}static openModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!m.isInitialize&&(m.initialize(),m.isInitialize=!0),m.isLoading&&m.load(!1);var r=l.Z[e];return null==r?void 0:r((0,n._)({className:d.mwebCommonGlobalModalContainer},t))}}m.isLoading=!1,m.isInitialize=!1;var f=r("653061"),v=r("105789"),_=r.n(v),p={success:s.QD2,info:null,confirm:null,error:s.zeQ,warning:s.u2T},g=e=>{var{action:t,modalProps:r}=e,n=p[t],{title:i}=r;return(0,a.jsxs)("div",{className:d.modalTitle,children:[n&&(0,a.jsx)(n,{className:d.preIcon}),i]})};class h extends m{static open(e){var{action:t="info",props:r,extraProps:l={}}=e,{modalMainClassname:u="",modalMainStyle:c={},modalContentClassname:m=""}=l,{content:v}=r,{headerImage:p}=l,{url:h}=null!=p?p:{},y=!!h;return super.openModal(t,(0,i._)((0,n._)({},r),{title:null,closeIcon:(0,a.jsx)("div",{className:_()({[d.closeBtn]:!0,[d.closeBtnWithHeaderImage]:y}),children:(0,a.jsx)(s.Rnl,{className:d.closeIcon})}),content:(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsx)(f.k,{className:d.headerImageContainer,src:(0,o.C)(h,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),crossOrigin:"anonymous","data-apm-action":"global-modal-header-image"}),(0,a.jsxs)("div",{className:_()({[d.modalMain]:!0,[d.modalMainWithHeaderImage]:y},u),style:c,children:[(0,a.jsx)(g,{action:t,modalProps:r}),(0,a.jsx)("div",{className:_()(d.modalContent,m),children:v})]})]})}))}static info(e,t){return this.open({action:"info",props:e,extraProps:t})}static success(e,t){return this.open({action:"success",props:e,extraProps:t})}static error(e,t){return this.open({action:"error",props:e,extraProps:t})}static warn(e,t){return this.open({action:"warning",props:e,extraProps:t})}static confirm(e,t){return this.open({action:"confirm",props:e,extraProps:t})}}},244867:function(e,t,r){r.d(t,{L:()=>f});var n=r("85728"),i=r("772322");r("395248"),r("30996");var a=r("423342"),o=r("948071"),s=r("2910"),l=r("967355"),u={commonModalContainer:"common-modal-container-A3S2yf",headImg:"head-img-B8bEcS",modalContent:"modal-content-yynSqM",title:"title-q92v_K",desc:"desc-fvgyRE",btnWrap:"btn-wrap-HeBSvK",wrapModalContainer:"wrap-modal-container-cm4UrU",closeBtn:"close-btn-lkXNIB",carousel:"carousel-dCaBzW",indicator:"indicator-G2adeW",arrowButton:"arrowButton-FrTLCv"},d=r("653061"),c=r("889715"),m=e=>{var{modalTitle:t,modalDesc:r,headerImgUrls:a,okButtonProps:m,modalBottomSlot:f,cancelButtonProps:v}=e,_=a.length;return(0,i.jsxs)("div",{className:u.commonModalContainer,children:[(0,i.jsx)("div",{className:u.headImg,children:1===_?(0,i.jsx)(d.k,{lazy:!1,src:null==a?void 0:a[0],alt:"",draggable:"false"}):(0,i.jsx)(o.Z,{showArrow:"hover",className:u.carousel,indicatorClassName:u.indicator,icons:{next:(0,i.jsx)(l.J,{type:"tertiary",className:u.arrowButton,PrevIcon:c.AQS}),prev:(0,i.jsx)(l.J,{type:"tertiary",className:u.arrowButton,PrevIcon:c.USi})},children:a.map((e,t)=>(0,i.jsx)("div",{children:(0,i.jsx)(d.k,{loading:"eager",lazy:!1,src:(0,s.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),draggable:"false"})},t))})}),(0,i.jsxs)("div",{className:u.modalContent,children:[(0,i.jsx)("div",{className:u.title,children:t}),(0,i.jsx)("div",{className:u.desc,children:r}),f,(0,i.jsxs)("div",{className:u.btnWrap,children:[v&&(0,i.jsx)(l.J,(0,n._)({type:"tertiary"},v)),m&&(0,i.jsx)(l.J,(0,n._)({},m))]})]})]})},f=e=>{var t,r,o=null,{innerModalProps:s,outerModalProps:l={},needCloseWhenClickBtn:d=!0,otherModalProps:f}=e,{modalWidth:v=480,modalBorderRadius:_=16,modalStyle:p,modalMaskStyle:g}=l,h=null===(t=s.okButtonProps)||void 0===t?void 0:t.onClick;s.okButtonProps&&(s.okButtonProps.onClick=e=>{null==h||h(e),d&&(null==o||o.close())});var y=null===(r=s.cancelButtonProps)||void 0===r?void 0:r.onClick;return s.cancelButtonProps&&(s.cancelButtonProps.onClick=e=>{null==y||y(e),d&&(null==o||o.close())}),o=a.Z.info((0,n._)({icon:null,closable:!0,maskClosable:!1,maskStyle:(0,n._)({background:"var(--mask-60)"},g),style:(0,n._)({width:v,borderRadius:_,overflow:"hidden"},p),closeIcon:(0,i.jsx)(c.Rnl,{className:u.closeBtn}),className:u.wrapModalContainer,title:null,footer:null,content:(0,i.jsx)(m,(0,n._)({},s))},f))}},293419:function(e,t,r){r.d(t,{R:function(){return n}});var n={id:"dreamina-lip-sync-form-data",version:1,tables:[r(465117).v]}},465117:function(e,t,r){r.d(t,{v:function(){return n}});var n={name:"dreamina-lip-sync-form-data",key:"id",index:[{name:"createTime",unique:!1},{name:"updateTime",unique:!1}]}},471946:function(e,t,r){r.d(t,{BB:function(){return u},Cx:function(){return c},Yh:function(){return m},_i:function(){return f},gp:function(){return l}});var n=r(733787),i=r(224671),a=r(549654),o=r(613983),s=r(626863);function l(e){return e===o.Qp.firstFrame?o.Qp.lastFrame:o.Qp.firstFrame}function u(e){return Object.entries(n.IM).map(t=>{var[r,n]=t;return{key:r,diff:Math.abs(e-n)}}).sort((e,t)=>e.diff-t.diff)[0].key}class d{getMotion(e){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.motionType,e)||(0,s.ry)(this._defaultModel,i.EG.motionType,e)?e:this._isModelAvailable?this._currentModelParams.motion:this._defaultModelParams.motion}getRatio(e){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.ratio,e)||(0,s.ry)(this._defaultModel,i.EG.ratio,e)?null!=e?e:this._currentModelParams.ratio:this._isModelAvailable?this._currentModelParams.ratio:this._defaultModelParams.ratio}getSeed(e){return this._isModelAvailable?e:this._defaultModelParams.seed}getOriginDurationMs(e,t){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.originDurationMs,e,t)||(0,s.ry)(this._defaultModel,i.EG.originDurationMs,e,t)?null!=e?e:this._currentModelParams.originDurationMs:this._defaultModelParams.originFps!==t?(0,s.t$)(this._defaultModel,t):this._defaultModelParams.originDurationMs}getOriginFps(e){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.originFps,e)||(0,s.ry)(this._defaultModel,i.EG.originFps,e)?null!=e?e:this._currentModelParams.originFps:this._isModelAvailable?this._currentModelParams.originFps:this._defaultModelParams.originFps}getMotionIntensity(e){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.motionIntensity,e)||(0,s.ry)(this._defaultModel,i.EG.motionIntensity,e)?null!=e?e:this._currentModelParams.motionIntensity:this._isModelAvailable?this._currentModelParams.motionIntensity:this._defaultModelParams.motionIntensity}constructor(e,t,r,n,i){this._isModelAvailable=e,this._currentModelParams=t,this._defaultModelParams=r,this._currentModel=n,this._defaultModel=i}}class c extends d{getSpeed(e){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.motionSpeed,e)||(0,s.ry)(this._defaultModel,i.EG.motionSpeed,e)?a.E[e]:this._isModelAvailable?this._currentModelParams.speed:this._defaultModelParams.speed}getBoximatorParams(e){if(this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.boximatorParams,e)||(0,s.ry)(this._defaultModel,i.EG.boximatorParams,e))return e?{boxes:e.boxes.map(e=>({color:e.color,boundingBox:e.boxes.map(e=>({boxEdgeType:e.edgeType,vertex:e.vertexs})),motionPath:e.motionPath,prompt:e.prompt})),draft:e.draft,boximatorImage:e.boximatorImage,draftFile:e.draftFile}:void 0;return this._isModelAvailable?this._currentModelParams.boximatorParams:this._defaultModelParams.boximatorParams}}class m extends d{getSpeed(e){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.motionSpeed,e?a.o[e]:void 0)||(0,s.ry)(this._defaultModel,i.EG.motionSpeed,e?a.o[e]:void 0)?e:this._isModelAvailable?this._currentModelParams.speed:this._defaultModelParams.speed}getBoximatorParams(e){return this._isModelAvailable&&(0,s.ry)(this._currentModel,i.EG.boximatorParams,e)||(0,s.ry)(this._defaultModel,i.EG.boximatorParams,e)?e:this._isModelAvailable?this._currentModelParams.boximatorParams:this._defaultModelParams.boximatorParams}}function f(e,t){var r=!0;return!!((r=(0,s.ry)(e,i.EG.motionType,t.motionType))&&(r=(0,s.ry)(e,i.EG.ratio,t.videoRatio))&&(r=(0,s.ry)(e,i.EG.motionSpeed,a.o[t.motionSpeed]))&&(r=(0,s.ry)(e,i.EG.originDurationMs,t.originDurationMs,t.originFps))&&(r=t.motionType&&[n.H7.StillShot,n.H7.Default].includes(t.motionType)||(0,s.ry)(e,i.EG.motionIntensity,t.motionIntensity)))&&(r=(0,s.ry)(e,i.EG.boximatorParams))}},337727:function(e,t,r){r.d(t,{t:()=>g});var n=r("876826"),i=r("789786"),a=r("843698"),o=r("874800"),s=r("224671"),l=r("549654"),u=r("733787"),d=r("14606"),c=r("90075"),m=r("490165"),f=r("260963"),v=r("272444"),_={icon:{imageUrl:""},modelNameStarlingKey:"VideoModel_AILab_v12",modelTipStarlingKey:"VideoModel_desc_AILab_v12",options:[{key:s.EQ.inputMediaType,valueType:"enum",enumVal:{enumType:"string",stringValue:["prompt","first_frame","end_frame"],defaultValIdx:0},forbiddenDisplay:!1},{key:s.EQ.frames,valueType:"enum",enumVal:{enumType:"int",intValue:[24,48,72,96],defaultValIdx:0},forbiddenDisplay:!1},{key:s.EQ.fps,valueType:"enum",enumVal:{enumType:"int",intValue:[8,12],defaultValIdx:0},forbiddenDisplay:!1},{key:s.EQ.lensMotionType,valueType:"enum",enumVal:{enumType:"string",stringValue:["Still","PanLeft","PanRight","TiltUp","TiltDown","HorizontalLeft","HorizontalRight","VerticalUp","VerticalDown","ZoomIn","ZoomOut","RotateClockwise","RotateAnticlockwise"],defaultValIdx:0},forbiddenDisplay:!1},{key:s.EQ.cameraStrength,valueType:"enum",enumVal:{enumType:"string",stringValue:["0","1","2"],defaultValIdx:0},forbiddenDisplay:!1},{key:s.EQ.videoAspectRatio,valueType:"enum",enumVal:{enumType:"string",stringValue:["21:9","16:9","4:3","1:1","3:4","9:16"],defaultValIdx:0},forbiddenDisplay:!1},{key:s.EQ.boximator,forbiddenDisplay:!1},{key:s.EQ.motionSpeed,valueType:"enum",enumVal:{enumType:"string",stringValue:["Low","Moderate","High"],defaultValIdx:0},forbiddenDisplay:!1},{key:s.EQ.supportExtend,forbiddenDisplay:!1}],commercialConfig:{default:{resourceSubType:"aigc",resourceIdType:"str",resourceId:"generate_video",benefitType:"basic_video_operation_std_2"},format:"{fps}",formatConf:{12:{resourceSubType:"aigc",resourceIdType:"str",resourceId:"generate_video",benefitType:"basic_video_operation_smooth_2"}}},modelReqKey:"dreamina_ailab_generate_video_model_v1.2"};s.EQ.inputMediaType,s.EQ.frames,s.EQ.fps,s.EQ.lensMotionType,s.EQ.cameraStrength,s.EQ.videoAspectRatio,s.EQ.motionSpeed,s.EQ.supportExtend;var p=r("626863");class g extends o.JT{static forceUpdateModelConfig(){g._managerInstanceList.forEach(e=>{e.updateModelConfig(!0)})}dispose(){var e=g._managerInstanceList.indexOf(this);-1!==e&&g._managerInstanceList.splice(e,1),super.dispose()}get isReady(){return this._isReady}get modelList(){return this.observableData.modelList}get defaultModel(){return this._isStoryMode?this._getStoryDefaultModel():this.observableData.defaultModel}get forbiddenDisplay(){return this.observableData.forbiddenDisplay}get featureConf(){return this.observableData.featureConf}get hasNewModel(){return this.observableData.hasNewModel}get cacheKey(){var e,t=(null===(e=this._accountService)||void 0===e?void 0:e.hasLogin)?this._accountService.userProfile.uid:"un-login-local";return"".concat("video-model-list-cache","-").concat(t)}setStoryMode(e){this._isStoryMode=e}getModelByReqKey(e){return this.observableData.modelMap[e]}checkIsModelAvailable(e){if(this.forbiddenDisplay&&e!==this.defaultModel.modelReqKey)return!1;if(""===e)return!0;var t=e?this.getModelByReqKey(e):void 0;return!(0,p.Zm)(t)&&!!t}updateModelConfig(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,n._)(function*(){var r=yield t._mWebCommonConfigService.repository.getVideoCommonConfig(e,{scene:"generate_video"});if(r.ok){var{modelList:n,defaultModelIdx:i,forbiddenDisplay:a,featureConf:o}=r.value,s=n,l=a;(!n||0===n.length)&&(s=[_],l=!0);var u=s.reduce((e,t)=>(e[t.modelReqKey]=t,e),{}),d=v.ZP.get(t.cacheKey),c=!1;d&&(c=s.some(e=>!d.includes(e.modelReqKey))),v.ZP.set(t.cacheKey,s.map(e=>e.modelReqKey)),(0,f.z)(()=>{t.observableData.modelList=s,t.observableData.modelMap=u,t.observableData.forbiddenDisplay=l,t.observableData.featureConf=o,t.observableData.defaultModel=s[null!=i?i:0],t.observableData.hasNewModel=c,t._updateIsReady()})}})()}_updateIsReady(){if(!this._isReady)this._isReady=!0,this._onIsReady.fire()}requestModelBetaTest(e){return this._dreaminaBetaTestDataService.submitFeatureBetaTestSurvey(e)}updateNewModelTips(e){(0,f.z)(()=>{this.observableData.hasNewModel=e})}getModelDefaultParam(e){var t,r,n,i,a,o,d=this.getModelByReqKey(e);if(!d)return{};var c=null===(t=(0,p.MR)(s.EQ.videoAspectRatio,d))||void 0===t?void 0:t.default,m=null===(r=(0,p.MR)(s.EQ.motionSpeed,d))||void 0===r?void 0:r.default,f=null===(n=(0,p.MR)(s.EQ.cameraStrength,d))||void 0===n?void 0:n.default,v=null===(i=(0,p.MR)(s.EQ.fps,d))||void 0===i?void 0:i.default,_=null===(a=(0,p.MR)(s.EQ.frames,d))||void 0===a?void 0:a.default,g=null===(o=(0,p.MR)(s.EQ.lensMotionType,d))||void 0===o?void 0:o.default;return{prompt:"",firstFrame:void 0,lastFrame:void 0,ratio:c,speed:m?l.E[m]:m,originDurationMs:_/v*1e3,originFps:v,motionIntensity:g===u.H7.StillShot?void 0:f,motion:g,useLastFrame:!1,seed:void 0,batchNumber:1,boximatorParams:void 0,modelReqKey:d.modelReqKey}}_initModelCache(){!v.ZP.get(this.cacheKey)&&v.ZP.set(this.cacheKey,this.modelList.map(e=>e.modelReqKey))}_getStoryDefaultModel(){var e;return null!==(e=this.getModelByReqKey(_.modelReqKey))&&void 0!==e?e:_}constructor(e=!1,t,r,n){super(),this.forceUpdate=e,this._mWebCommonConfigService=t,this._accountService=r,this._dreaminaBetaTestDataService=n,this._isReady=!1,this._isStoryMode=!1,this._onIsReady=new a.Q,this.onIsReady=this._onIsReady.event;this.observableData=(0,f.LO)({modelList:[_],modelMap:{[_.modelReqKey]:_},defaultModel:_,forbiddenDisplay:!0,featureConf:{},hasNewModel:!1}),this._register(this._accountService.onDidLogin(()=>{this._isReady=!1,this._initModelCache(),this.updateModelConfig(!0)})),this._initModelCache(),this.updateModelConfig(e),g._managerInstanceList.push(this)}}g._managerInstanceList=[],g=(0,i.gn)([(0,i.fM)(1,d.A),(0,i.fM)(2,m.D),(0,i.fM)(3,c.S),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[Boolean,void 0===d.A?Object:d.A,void 0===m.D?Object:m.D,void 0===c.S?Object:c.S])],g)},923401:function(e,t,r){r.d(t,{$s:function(){return d},tQ:function(){return c}});var n,i=r(876826),a=r(789786),o=r(969015),s=r(490165),l=r(855421),u=r(417699);var d=((n={}).imageCustomSize="image_custom_size",n.enableIM="enable_im",n.imagePostEditEnable="post_edit_enable",n.draftGen="draft_gen",n.enableRuntimePrefetch="web_runtime_prefetch_enable",n.enableRuntimePrefetchExtraFeed="web_runtime_prefetch_extra_feed_enable",n.virtualListRenderStrategy="virtualListRenderStrategy",n.lipSyncHDModel="lip_sync_hd_enable",n.deepSeekEntrance="deepseek_entrance",n);class c{get _isOverSea(){return this._environmentService.isOversea}initAndExposeAbTest(){this._teaAdapterService.getABTestVar("enable_im",!1).then(e=>{this._abGroupResult.enable_im=e,this._onDidChangeConfiguration.fire({changedConfig:{[o.C0.AB_TEST]:{enable_im:e}},source:o.C0.AB_TEST,previousConfig:{[o.C0.AB_TEST]:{}},affectedSections:new Set([""])})}),this._teaAdapterService.getABTestVar("draft_gen",!1).then(e=>{this._abGroupResult.draft_gen=e,this._onDidChangeConfiguration.fire({changedConfig:{[o.C0.AB_TEST]:{draft_gen:e}},source:o.C0.AB_TEST,previousConfig:{[o.C0.AB_TEST]:{}},affectedSections:new Set([""])})}),this._teaAdapterService.getABTestVar("deepseek_entrance",!1).then(e=>{this._abGroupResult.deepseek_entrance=e,this._onDidChangeConfiguration.fire({changedConfig:{[o.C0.AB_TEST]:{deepseek_entrance:e}},source:o.C0.AB_TEST,previousConfig:{[o.C0.AB_TEST]:{}},affectedSections:new Set([""])})}),["post_edit_enable","web_runtime_prefetch_enable","web_runtime_prefetch_extra_feed_enable"].forEach(e=>{this._teaAdapterService.getABTestVar(e,!1).then(t=>{this._abGroupResult[e]=t})})}getBooleanRecommendTestValue(){if(this._isOverSea)return Promise.resolve(false);if(this._getLocalDreaminaRecommend())return Promise.resolve(true);var e,t,r=null===(e=window)||void 0===e?void 0:e._libra_server_abtest,n=null==r?void 0:null===(t=r.dreamina_recommend)||void 0===t?void 0:t.all_tab_use_rec;return void 0===n?Promise.resolve(false):(this._setLocalDreaminaRecommend(n),Promise.resolve(!!n))}_getLocalDreaminaRecommend(){try{var e,t,r=null!==(t=null===(e=this._accountService)||void 0===e?void 0:e.userProfile)&&void 0!==t?t:{};if("{}"===JSON.stringify(r)){var n=window.localStorage.getItem("dreamina_recommend_hit_not_login");return null!==n&&JSON.parse(n)}var{webId:i=""}=null!=r?r:{};if(!i)return!1;var a=window.localStorage.getItem("dreamina_recommend_hit_".concat(i));return l.t.log("userProfile",i,a),null!==a&&JSON.parse(a)}catch(e){return!1}}_setLocalDreaminaRecommend(e){try{var t,r,n=null!==(r=null===(t=this._accountService)||void 0===t?void 0:t.userProfile)&&void 0!==r?r:{};if("{}"===JSON.stringify(n)&&e){window.localStorage.setItem("dreamina_recommend_hit_not_login",JSON.stringify(e));return}var{webId:i=""}=null!=n?n:{};i&&e&&window.localStorage.setItem("dreamina_recommend_hit_".concat(i),JSON.stringify(e))}catch(e){return!1}}constructor(e,t,r,n){var a,o=this;this._teaAdapterService=e,this._onDidChangeConfiguration=t,this._environmentService=r,this._accountService=n,this._abGroupResult={},this.getBooleanAbTestValue=(e,t)=>{var r,n=null===(r=window)||void 0===r?void 0:r._libra_abtest;return!!((null==n?void 0:n[e])||this._abGroupResult[e]||t)},this.getAbTestValue=(a=(0,i._)(function*(e,t){var r,n,i=null===(n=window)||void 0===n?void 0:null===(r=n._libra_abtest)||void 0===r?void 0:r[e];return void 0===i&&(i=yield o._teaAdapterService.getABTestVar(e,t)),i||t}),function(e,t){return a.apply(this,arguments)}),this.getBooleanAbTestValueAsync=(e,t)=>{var r,n,i=null===(n=window)||void 0===n?void 0:null===(r=n._libra_server_abtest)||void 0===r?void 0:r.dreamina_generate_image;return(null==i?void 0:i[e])===void 0?this._teaAdapterService.getABTestVar(e,!!t):Promise.resolve(!!((null==i?void 0:i[e])||this._abGroupResult[e]||t))}}}c=(0,a.gn)([(0,a.fM)(2,u.e),(0,a.fM)(3,s.D),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof ITeaAdapterService?Object:ITeaAdapterService,"undefined"==typeof Emitter?Object:Emitter,void 0===u.e?Object:u.e,void 0===s.D?Object:s.D])],c)},462537:function(e,t,r){r.d(t,{R:function(){return n}});var n=(0,r(971245).yh)("dragUploadFileService")},747086:function(e,t,r){r.d(t,{b:function(){return n}});var n=(0,r(971245).yh)("tcc-service")},357217:function(e,t,r){r.d(t,{Nd:function(){return s},St:function(){return o},ZI:function(){return u},hJ:function(){return l}});var n,i,a,o=((n={}).CreatorFission="dreamina_creator_fission",n);var s=((i={}).FissionS30Model="creator_fission_s30_model",i);var l=((a={}).ModelCampaignCodeStart="cf_s30_model_web_cold_start",a.ModelCampaignWebTag="cf_s30_model_web_tab",a),u={Invite:"invite"}},341245:function(e,t,r){r.d(t,{U:function(){return n}});var n=(0,r(971245).yh)("ug-share-service")},112325:function(e,t,r){r.d(t,{R:function(){return i}});var n=r(337727),i=e=>{if(e.popup&&e.popup.length>0){var t=e.popup[0];return"invitee_fail_popup"===t.key?{ok:!1,content:t.content,title:t.title}:(n.t.forceUpdateModelConfig(),{ok:!0,content:t.content,title:t.title})}return{ok:!1,content:""}}},17248:function(e,t,r){r.d(t,{O:function(){return m},Y:function(){return c}});var n,i=r(876826),a=r(54876),o=r(357217),s=r(341245),l=r(608358),u=r(562092),d=r(584072),c=(e,t)=>{var r=(0,l.ko)(t,s.U);if(!!r.isEnabled)switch(e){case o.hJ.ModelCampaignCodeStart:case o.hJ.ModelCampaignWebTag:var n,i,d,c,m,f=r.ugResourceManager.getResourceMaterialValue(e);if(!f)return;var v={canShow:f.canShow,showTag:null!==(i=f.showTag)&&void 0!==i?i:a.m.CampaignEnd,imageUrls:null!==(c=null===(n=(0,u.D)(null!==(d=f.material)&&void 0!==d?d:"{}"))||void 0===n?void 0:n.image_urls)&&void 0!==c?c:[]},_=(0,u.D)(null!==(m=f.extra)&&void 0!==m?m:"{}");return v.inviteTotalLimit=null==_?void 0:_.invite_total_limit,v.inviteRewardLimit=null==_?void 0:_.invite_reward_limit,v.modelName=null==_?void 0:_.model_name,v.modelNameStarlingKey=null==_?void 0:_.model_name_starling_key,v.modelReqKey=null==_?void 0:_.model_req_key,v.inviteCode=null==_?void 0:_.invite_code,v.shareUrl=null==_?void 0:_.share_url,v;default:return}};var m=(n=(0,i._)(function*(e,t){var{promise:r,resolve:n}=(0,d.PQ)(),i=(0,l.ko)(t,s.U);if(!i.isEnabled){n();return}return i.ugResourceManager.isReady?n():i.ugResourceManager.onIsReadyChange(()=>{n()}),yield r,c(e,t)}),function(e,t){return n.apply(this,arguments)})},626863:function(e,t,r){r.d(t,{$L:function(){return m},F6:function(){return f},FL:function(){return T},MR:function(){return p},QQ:function(){return R},RK:function(){return h},Um:function(){return _},Zm:function(){return b},ry:function(){return g},t$:function(){return y},tu:function(){return S},zl:function(){return v}});var n=r(85728),i=r(929753),a=r(224671),o=r(733787),s=r(150615),l=r(881607),u=r(471946),d=r(187901),c=r(552786);function m(e,t){if(!t)return null;var r=t.options.findIndex(t=>t.key===e);return r<0?null:t.options[r]}function f(e,t){if(!t)return!0;var r=m(e,t);return!r||r.forbiddenDisplay}function v(e){var{featureKey:t,featureConf:r}=e;if(!!t&&!!r){var n=r[(0,l.zW)(t)];return(0,d._)({configList:[n]})[n.featureKey]}}function _(e){var{status:t}=e;return t===c.Ve.BETA_INAVAILABLE}function p(e,t){var r=m(e,t);if(!!r){if("enum"===r.valueType){if(!r.enumVal)return;var a,o,s,l,u=r.enumVal,d=null!==(a=u.defaultValIdx)&&void 0!==a?a:0;switch(u.enumType){case"string":return(0,i._)((0,n._)({},u),{value:u.stringValue,default:null===(o=u.stringValue)||void 0===o?void 0:o[d]});case"int":return(0,i._)((0,n._)({},u),{value:u.intValue,default:null===(s=u.intValue)||void 0===s?void 0:s[d]});case"double":return(0,i._)((0,n._)({},u),{value:u.doubleValue,default:null===(l=u.doubleValue)||void 0===l?void 0:l[d]});default:return u}}return r.slideBarVal||void 0}}function g(e,t,r,n){if(!e)return!1;var i=m(t,e);if(!i)return!r;if(!i.valueType)return!0;if(!r)return!1;if("enum"===i.valueType){var o,s=null===(o=p(t,e))||void 0===o?void 0:o.value;if(!s)return!1;if(t===a.EQ.frames&&n)return!!n&&!!s.map(e=>e/n*1e3).filter(e=>e>2e3).find(e=>e===r);return!!s.find(e=>e===r)}return!0}function h(e,t){var r,n=null===(r=p(a.EQ.inputMediaType,e))||void 0===r?void 0:r.value;return!!n&&!!n.find(e=>e===t)}function y(e,t){if(!t)return;var r,n=null===(r=p(a.EQ.frames,e))||void 0===r?void 0:r.value;if(!!n)return n.map(e=>e/t*1e3).filter(e=>e>2e3)[0]}function b(e){return(null==e?void 0:e.modelStatus)===a.fs.NoCredits}function R(e,t){var r,n=(0,u.BB)(e.width/e.height),i=null===(r=p(a.EQ.videoAspectRatio,t))||void 0===r?void 0:r.value;return!!i&&!!i.find(e=>e===n)}function S(e){var t,r,n,i,l,u,{model:d,featureConf:c,useImage:p,useLastFrame:g,useBoximator:h,motion:y,firstFrame:S,lastFrame:T}=e,E=v({featureKey:d.featureKey,featureConf:c});if(b(d))return{isAvailable:!1,modelUnavailableTip:s.ZP.t("dre_model_unavail_feedback_toast_text",{},"Model currently not available.")};if(E&&_(E)&&E.isApply)return{isAvailable:!1,modelUnavailableTip:s.ZP.t("model_hover_in_application_queue",{},"Already apply permission, wait for approve")};var M=m(a.EQ.inputMediaType,d);if(p&&(null==M?void 0:null===(r=M.enumVal)||void 0===r?void 0:null===(t=r.stringValue)||void 0===t?void 0:t.length)===1&&(null==M?void 0:null===(i=M.enumVal)||void 0===i?void 0:null===(n=i.stringValue)||void 0===n?void 0:n.includes(a.On.prompt)))return{isAvailable:!1,modelUnavailableTip:s.ZP.t("model_hover_i2v_not_supported",{string0:s.ZP.t(d.modelNameStarlingKey,{},d.modelName)},"{string0} not support  generate video by image")};if(p&&g&&!(null==M?void 0:null===(u=M.enumVal)||void 0===u?void 0:null===(l=u.stringValue)||void 0===l?void 0:l.includes(a.On.endFrame)))return{isAvailable:!1,modelUnavailableTip:s.ZP.t("model_hover_feature_conflict",{string0:s.ZP.t("video_last_frame_control"),string1:s.ZP.t(d.modelNameStarlingKey,{},d.modelName)},"Already use {string0},not support {string1} model")};var C=p&&(null==S?void 0:S.image)&&!R(S.image,d),I=p&&(null==T?void 0:T.image)&&!R(T.image,d);if(C||I)return{isAvailable:!1,modelUnavailableTip:s.ZP.t("model_list_hover_ratio_not_supported",{string0:s.ZP.t(d.modelNameStarlingKey,{},d.modelName)},"{string0} \u6682\u4E0D\u652F\u6301\u5F53\u524D\u6BD4\u4F8B\u7684\u53C2\u8003\u56FE")};var A=f(a.EQ.boximator,d);if(h&&A)return{isAvailable:!1,modelUnavailableTip:s.ZP.t("model_hover_feature_conflict",{string0:s.ZP.t("box_button_entrance",{},"Motion Canvas"),string1:s.ZP.t(d.modelNameStarlingKey,{},d.modelName)})};var k=f(a.EQ.cameraStrength,d),w=f(a.EQ.lensMotionType,d);return y&&y!==o.H7.StillShot&&k&&w?{isAvailable:!1,modelUnavailableTip:s.ZP.t("model_hover_feature_conflict",{string0:s.ZP.t("video_camera_control",{},"Camera Control"),string1:s.ZP.t(d.modelNameStarlingKey,{},d.modelName)})}:{isAvailable:!0,modelUnavailableTip:""}}function T(e){return(null==e?!void 0:!e.options)||!!e.options.find(e=>e.key===a.EQ.supportExtend)}},951729:function(e,t,r){r.d(t,{W:function(){return a},Y:function(){return o}});var n,i=r(971245);var a=((n={})[n.CAPACITY_INSUFFICIENT=1]="CAPACITY_INSUFFICIENT",n[n.NETWORK_ERROR=2]="NETWORK_ERROR",n[n.DRAFT_NOT_FOUND=3]="DRAFT_NOT_FOUND",n[n.DRAFT_VERSION_CONFLICT=4]="DRAFT_VERSION_CONFLICT",n[n.DRAFT_TYPE_ERROR=5]="DRAFT_TYPE_ERROR",n[n.NOT_PERMISSION=6]="NOT_PERMISSION",n[n.DRAFT_DUPLICATE_CREATION=7]="DRAFT_DUPLICATE_CREATION",n[n.DELETED_PACKAGE=9]="DELETED_PACKAGE",n[n.DRAFT_MATERIAL_LOSS=10]="DRAFT_MATERIAL_LOSS",n[n.ERR_LOGIN=11]="ERR_LOGIN",n[n.SERVER_ERROR=12]="SERVER_ERROR",n[n.DATA_ERROR=13]="DATA_ERROR",n),o=(0,i.yh)("draft-full-save")},509320:function(e,t,r){r.d(t,{W:function(){return o},c:function(){return a}});var n,i=r(971245);var a=((n={}).CancelBtn="CancelBtn",n.CancelLable="CancelLable",n.ConfirmBtn="ConfirmBtn",n.ConfirmLabel="ConfirmLabel",n.CloseIcon="CloseIcon",n.VisibleChange="VisibleChange",n.ClickMask="ClickMask",n.ClickFocus="ClickFocus",n.ClickTarget="ClickTarget",n),o=(0,i.yh)("guide")},945873:function(e,t,r){r.d(t,{H:function(){return n}});var n=(0,r(971245).yh)("permission-service")},930921:function(e,t,r){r.d(t,{sh:function(){return a}});var n=r(562092),i=r(474956);function a(e,t,r){var a,o,s,l,u,d,c,m,f,v,_,p,g,h,y,b=(0,n.D)(t.Extra),R=(0,n.D)(t.SdkExtra),S=(0,n.D)(null!==(p=t.ContentFile)&&void 0!==p?p:"");var T=(a=r,o=t,null!=a?a:"".concat(function(e){if(!e)return"";var t=e.split("/");return t.pop(),t.join("/")}(null===(s=o.FileUrl.UrlList)||void 0===s?void 0:s[0]),"/"));var E=(l=T,(_=null!==(v=null!==(f=null!==(m=null!==(c=null!==(d=(u=b).web_icon)&&void 0!==d?d:u.hover_icon)&&void 0!==c?c:u.preview_cover)&&void 0!==m?m:u.track_thumbnail)&&void 0!==f?f:u.canvas_cover)&&void 0!==v?v:"")?"".concat(l).concat(_):""),M=(t.Labels?(0,n.D)(t.Labels):[]).map(e=>String(e.id)),C=Object.values(t.ModelNames?JSON.parse(t.ModelNames):{}).reduce((e,t)=>[...e,...t],[]);return{common:{key:function(e,t){var{ResourceId:r,EffectId:n}=t;if(e===i._g.TextGlow)return"".concat(e,"_").concat(r.toString(),"_").concat(r.toString());return"".concat(e,"_").concat(r.toString(),"_").concat(n.toString())}(e,t),resourceId:t.ResourceId.toString(),effectId:t.EffectId.toString(),name:t.Name,isBusiness:null!==(g=b.is_business)&&void 0!==g&&g,md5:t.FileUrl.Uri,isVip:null!==(h=b.is_vip)&&void 0!==h&&h,package:{uri:t.FileUrl.Uri,urlList:t.FileUrl.UrlList},icon:{uri:t.IconUrl.Uri,urlList:t.IconUrl.UrlList},sdkVersion:t.SdkVersion,requirements:t.Requirements,modelNames:C,previewUrl:E||t.IconUrl.UrlList[0],source:t.Source,panel:t.Panel,isPrefab:null!==(y=b.is_prefab)&&void 0!==y&&y,labels:M},extra:b,sdkExtra:R,urlPrefix:T,contentFile:S}}},918046:function(e,t,r){r.d(t,{es:function(){return m},ey:function(){return c}});var n=r(85728),i=r(929753),a=r(930921),o=r(474956),s=r(294202),l=r(562092),u=r(664892),d=r(589214);function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r?function(e){var{common_attr:t,font_icon:r}=e,n=t.item_url||t.download_info.url,i=(null==r?void 0:r.ImageUrl)||t.cover_url.small;return{key:t.id,resourceId:t.id,effectId:t.id,md5:t.md5||t.id,name:t.title,isBusiness:!1,isVip:!1,package:{uri:(0,u.s)(n),urlList:[n]},icon:{uri:(0,u.s)(t.cover_url.small),urlList:[t.cover_url.small]},isFromBrand:!0,source:s.Hw.BRAND,sdkVersion:d.f4,previewUrl:i,isDefault:e.IsDefault,userId:t.user_id,createTime:t.create_time,isPrefab:!1}}(e):function(e,t){var r,{common:s,extra:l,urlPrefix:u}=(0,a.sh)(o._g.Font,e,t),d=l.light_icon;return r=d?{uri:d,urlList:["".concat(u).concat(d)]}:{uri:"".concat(s.effectId,".svg"),urlList:["https://sf16-web-tos-buz.capcutstatic.com/obj/capcut-web-buz-sg/loki-font-svg/".concat(s.effectId,".svg")]},(0,i._)((0,n._)({},s),{icon:r})}(e,t)}var m=e=>{var t,r,n,{id:i,effect_id:a,title:o,extra:u,md5:c,item_urls:m,cover_url:f}=e.common_attr,v=(0,l.D)(u),_=/^(https?:\/\/.*\/)(.*)/g.exec(null!==(t=null==m?void 0:m[0])&&void 0!==t?t:""),p=null!==(r=null==_?void 0:_[1])&&void 0!==r?r:"";return{key:i,resourceId:i,effectId:a,md5:c,name:o,isBusiness:!1,isVip:!1,package:{uri:(null==m?void 0:m.length)?m[0].split(p)[1]:"",urlList:m},icon:{uri:f.small.split(p)[1],urlList:[f.small]},isFromBrand:!1,source:s.Hw.LOKI,sdkVersion:d.f4,previewUrl:v.web_icon?"".concat(p).concat(v.web_icon):"",sourceFrom:"dreamina",isArtFont:null!==(n=v.is_ai_artist)&&void 0!==n&&n}}},54876:function(e,t,r){r.d(t,{m:function(){return i}});var n,i=((n={})[n.CampaignOpen=1]="CampaignOpen",n[n.CampaignClosing=2]="CampaignClosing",n[n.CampaignEnd=3]="CampaignEnd",n[n.CampaignAwatingReward=11]="CampaignAwatingReward",n)},647990:function(e,t,r){r.d(t,{$:function(){return n}});var n=(0,r(971245).yh)("dreamina-lip-sync-detection-data-service")},123944:function(e,t,r){r.d(t,{s:()=>y});var n=r("876826"),i=r("789786"),a=r("523197"),o=r("836413"),s=r("346526"),l=r("643590"),u=r("904337"),d=r("416105"),c=r("875649"),m=r("820266"),f=r("927457"),v=r("804274"),_={CREATE_REALMAN_AVATAR:"/mweb/v1/create_realman_avatar",PRE_PROCESS:"/mweb/v1/video_generate/pre_process",GET_GENERATE_TASK:"/mweb/v1/mget_generate_task",GET_PRE_PROCESS_TASK:"/mweb/v1/video_generate/mget_pre_process_result"},p=r("262238"),g=r("442452"),h=()=>{var e=new l.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0});return(0,u.$)(e),(0,d.mH)(e),(0,c.i3)(e),(0,s.V)(e),e};class y{get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=h()),this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:g.Y.DEFAULT,path:e})}createRealmanAvatar(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(_.CREATE_REALMAN_AVATAR),{input_list:[{image_uri:e.imageUri,task_id:e.taskId,submit_id:(0,a.Rl)(),mode:p.Mw.Default},{image_uri:e.imageUri,task_id:e.taskId,submit_id:(0,a.Rl)(),mode:p.Mw.Loopy}]});return(0,o.oW)((0,m.b)(r.data))}catch(e){return(0,f.m)(e,-1,"create realman avatar error")}})()}preProcess(e){var t=this;return(0,n._)(function*(){try{var r,n,i=Array.from(null!==(n=null===(r=e.submitIdToMode)||void 0===r?void 0:r.entries())&&void 0!==n?n:[]).filter(e=>{var[t,r]=e;return void 0!==r}).map(t=>{var[r,n]=t;return{submit_id:r,scene:p.fl.ImageCreateAvatar,image_create_avatar:{image:{image_uri:e.imageUri},mode:n}}}),a=yield t._networkClient.post(t._getApi(_.PRE_PROCESS),{input_list:i});return(0,o.oW)((0,m.b)(a.data))}catch(e){return(0,f.m)(e,-1,"detect lip sync process error")}})()}queryTask(e){var t=this;return(0,n._)(function*(){try{var r=(0,m.X)(e),n=yield t._networkClient.post(t._getApi(_.GET_GENERATE_TASK),r);if("0"!==n.ret)return(0,o.wf)(Number(n.ret),n.errmsg,{logId:n.logid});var i=(0,m.b)(n.data.task_map,v.zW);return(0,o.oW)({taskMap:i,logId:n.logid})}catch(e){return(0,f.m)(e,-1,"aigc query task error")}})()}pollLipSyncPreProcessStatus(e){var t=this;return(0,n._)(function*(){try{var r=(0,m.X)(e),n=yield t._networkClient.post(t._getApi(_.GET_PRE_PROCESS_TASK),r),i=(0,m.b)(n.data);return(0,o.oW)({data:i,error:null})}catch(e){return(0,f.m)(e,-1,"get preprocess task error")}})()}constructor(e){this._httpApiSettingService=e}}y=(0,i.gn)([(0,i.fM)(0,g.x),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===g.x?Object:g.x])],y)},639643:function(e,t,r){r.d(t,{B:function(){return l},e:function(){return u}});var n,i=r(876826),a=r(789786),o=r(719800),s=r(123944);var l=((n={})[n.Cancel=10001e3]="Cancel",n[n.CreateError=10004e3]="CreateError",n[n.Timeout=10005e3]="Timeout",n);class u{createRealmanAvatar(e){var t=this;return(0,i._)(function*(){return t._lipSyncRepository.createRealmanAvatar(e)})()}preProcess(e){var t=this;return(0,i._)(function*(){return t._lipSyncRepository.preProcess(e)})()}queryTask(e){var t=this;return(0,i._)(function*(){return t._lipSyncRepository.queryTask(e)})()}pollLipSyncPreProcessStatus(e){var t=this;return(0,i._)(function*(){return t._lipSyncRepository.pollLipSyncPreProcessStatus(e)})()}constructor(e){this._instantiationService=e,this._lipSyncRepository=this._instantiationService.createInstance(s.s)}}u=(0,a.gn)([(0,a.fM)(0,o.T),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===o.T?Object:o.T])],u)},271177:function(e,t,r){r.d(t,{b:function(){return n}});var n=(0,r(971245).yh)("dreamina-tone-data-service")},369440:function(e,t,r){r.d(t,{m:function(){return n}});var n=(0,r(971245).yh)("dreamina-tts-data-service")},401492:function(e,t,r){r.d(t,{Y:function(){return a},z:function(){return o}});var n,i,a=((n={})[n.VideoLipSyncPreProcess=0]="VideoLipSyncPreProcess",n[n.ImageFaceDetect=1]="ImageFaceDetect",n[n.ImageCreateAvatar=2]="ImageCreateAvatar",n[n.VideoTemplateImageDetect=3]="VideoTemplateImageDetect",n[n.VideoTemplateVideoDetect=4]="VideoTemplateVideoDetect",n);var o=((i={})[i.Init=0]="Init",i[i.Processing=10]="Processing",i[i.Success=20]="Success",i[i.Fail=30]="Fail",i[i.TnsFail=40]="TnsFail",i)},58425:function(e,t,r){r.d(t,{c:function(){return n}});var n=(0,r(971245).yh)("dreamina-video-generation-proprocessing-data-service")},463922:function(e,t,r){r.d(t,{q:function(){return n}});var n=(0,r(971245).yh)("permission-data-service")},233307:function(e,t,r){r.d(t,{Gu:function(){return u},_5:function(){return l},lh:function(){return s},tx:function(){return d}});var n,i,a,o=r(971245);var s=((n={})[n.Waiting=0]="Waiting",n[n.Loading=1]="Loading",n[n.Completed=2]="Completed",n[n.Error=3]="Error",n);var l=((i={})[i.Eager=0]="Eager",i[i.Idle=1]="Idle",i);var u=((a={})[a.Memory=0]="Memory",a[a.Cache=1]="Cache",a[a.Online=2]="Online",a),d=(0,o.yh)("resource-download")},61556:function(e,t,r){r.d(t,{x:function(){return l},y:function(){return u}});var n=r(876826),i=r(843698),a=r(836413),o=r(56935),s=r(396766);function l(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((i,o)=>{if(!!t)r?e.startImmediately(n):e.start(!1,n),e.onReady(e=>{i((0,a.oW)(e))}),e.onError(e=>{o(e)})})}class u{onError(e){if(this.status===s.G.complete)return{dispose:()=>{}};if(this.status!==s.G.error)return this._errorEmitter.event(e);var t=!1;return setTimeout(()=>{if(!t){if(this.status!==s.G.error)return this._errorEmitter.event(e);(0,o.Y2)(this.error),e(this.error)}}),{dispose:()=>{t=!0}}}onReady(e){if(this.status!==s.G.complete)return this._readyEmitter.event(e);var t=!1;return setTimeout(()=>{if(!t)e(this.value)}),{dispose:()=>{t=!0}}}start(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,n._)(function*(){if(r._isStartByImmediately=!!r._isStartByImmediately||e,-1!==[s.G.init,s.G.error].indexOf(r.status))try{r.status=s.G.fetching,r._isTokenDisposed=!1;var n=yield r.loadResource(e,t);if(r.status!==s.G.fetching)return;if(r.status=s.G.complete,r._isTokenDisposed)return;r._readyEmitter.fire(n)}catch(e){if(r.status!==s.G.fetching)return;if(r.status=s.G.error,r.error=e,r._isTokenDisposed)return;r._errorEmitter.fire(e)}})()}startImmediately(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.start(!0,e)}cancel(){return -1!==[s.G.fetching].indexOf(this.status)&&!this._isStartByImmediately&&(this._isTokenDisposed=!0,this.status=s.G.init,!0)}constructor(){this._isTokenDisposed=!1,this._isStartByImmediately=!1,this.status=s.G.init,this._errorEmitter=new i.Q,this._readyEmitter=new i.Q}}},665e3:function(e,t,r){r.d(t,{Z:function(){return c},i:function(){return m}});var n=r(876826),i=r(91849),a=r(584072),o=r(843698),s=r(836413),l=r(56935),u=r(184564),d=r(564008);function c(e){return new Promise((t,r)=>{e.status===i.n.error&&e.restart(),e.onReady(e=>{t((0,s.oW)(e))}),e.onError(e=>{r(e)})})}class m{get resourceType(){return this.value.type}onResourceCreated(){(0,u.R)(this.value)?this._doResourceReady(this.value):this._tryCompleteResource()}onReady(e){if(this.status!==i.n.complete)return this._resourceReadyEmitter.event(e);var t=!1;return setTimeout(()=>{if(!t)(0,l.Y2)((0,u.R)(this.value)),e(this.value)}),{dispose:()=>{t=!0}}}onError(e){if(this.status===i.n.complete)return{dispose:()=>{}};if(this.status!==i.n.error)return this._resourceErrorEmitter.event(e);var t=!1;return setTimeout(()=>{if(!t){if(this.status!==i.n.error)return this._resourceErrorEmitter.event(e);(0,l.Y2)(this.error),e(this.error)}}),{dispose:()=>{t=!0}}}restart(){(0,l.Y2)(this.status===i.n.error),this._tryCompleteResource()}_tryCompleteResource(){var e=this;return(0,n._)(function*(){var t=yield e._fetchResourceDetail();if(!t.ok){e._onHandleResourceError(t.cause);return}e._onHandleResourceReady(t.value)})()}_doResourceReady(e){this.status=i.n.complete,this._resourceReadyEmitter.fire(e),this._onResourceReadyDefer.resolve(e)}_getResourceTokenSync(e,t,r){var n=t();if(n)return n;if((0,u.R)(this.value)){var i=e(this.value);return r(i),i}var a=new d.R(()=>new Promise(t=>{var n=this.onReady(n=>{var i=e(n);r(i),t(i)});this.onError(()=>n.dispose())}));return r(a),a}_getResourceTokenSyncWithCondition(e,t,r,i){var a=t();if(a)return a;var o=new d.R(()=>{var t;return new Promise((t=(0,n._)(function*(t){var n=e((yield i.promise));if(!!n)r(n),t(n)}),function(e){return t.apply(this,arguments)}))});return r(o),o}_getResourceTokenAsync(e,t,r){var i=this;return(0,n._)(function*(){var n=t();if(n)return n;if((0,u.R)(i.value)){var a=e(i.value);return r(a),a}if(yield i._onResourceReadyDefer.promise,n=t())return n;(0,l.Y2)((0,u.R)(i.value));var o=e(i.value);return r(o),o})()}_onHandleResourceReady(e){this.value=Object.assign(this.value,e),(0,u.K)(this.value),this._doResourceReady(e)}_onHandleResourceError(e){this.status=i.n.error,this.error=e,this._resourceErrorEmitter.fire(e)}_fetchResourceDetail(){var e=this;return(0,n._)(function*(){(0,l.Y2)(e.status===i.n.init||e.status===i.n.error);try{e.status=i.n.fetching;var t=yield e.doFetch();return(0,l.Y2)(Object.keys(t).length>1,"resource is not full resource. ".concat(t)),(0,s.oW)(t)}catch(t){return e.status=i.n.error,(0,s.Mx)(-1,"fetch resource detail fail.",t)}})()}constructor(e,t){this.key=e,this.status=i.n.init,this._resourceReadyEmitter=new o.Q,this._resourceErrorEmitter=new o.Q,this._onResourceReadyDefer=(0,a.PQ)(),this.value=t}}},564008:function(e,t,r){r.d(t,{R:function(){return s}});var n=r(876826),i=r(584072),a=r(56935),o=r(396766);class s{get status(){return this._targetValue?o.G.complete:o.G.init}get value(){var e;return null!==(e=this._targetValue)&&void 0!==e?e:void 0}onReady(e){if(this._targetToken)return this._targetToken.onReady(e);var t=!1,r=this;return setTimeout((0,n._)(function*(){if(yield r._onTargetReadyDefer.promise,!t)(0,a.Y2)(r._targetToken),r._targetToken.onReady(e)})),{dispose:()=>{t=!0}}}onError(e){if(this._targetToken)return this._targetToken.onError(e);var t=!1,r=this;return setTimeout((0,n._)(function*(){if(yield r._onTargetReadyDefer.promise,!t)(0,a.Y2)(r._targetToken),r._targetToken.onError(e)})),{dispose:()=>{t=!0}}}start(e){if(this._targetToken)return this._targetToken.start(e);this._doTargetStart(e)}startImmediately(){return this._targetToken?this._targetToken.startImmediately():this._doTargetStartImmediately()}cancel(){if(this._targetToken)return this._targetToken.cancel();var e=this._isStartBeforeReady;return this._isStartBeforeReady=!1,e}_doTargetStart(e){var t=this;return(0,n._)(function*(){t._isStartImmediately=!!t._isStartImmediately||null!=e&&e,t._isStartBeforeReady=!0,yield t._onTargetReadyDefer.promise,t._isStartBeforeReady&&((0,a.Y2)(t._targetToken),t._targetToken.start(t._isStartImmediately))})()}_doTargetStartImmediately(){var e=this;return(0,n._)(function*(){yield e._onTargetReadyDefer.promise,(0,a.Y2)(e._targetToken),e._targetToken.startImmediately()})()}_doCreateResourceToken(){var e=this;return(0,n._)(function*(){e._targetToken=yield e._resourceTokenBuilder(),e._targetValue=e._targetToken.value,e._onTargetReadyDefer.resolve(e._targetToken)})()}constructor(e){this._resourceTokenBuilder=e,this._isStartImmediately=!1,this._isStartBeforeReady=!1,this._onTargetReadyDefer=(0,i.PQ)(),this._doCreateResourceToken()}}},396766:function(e,t,r){r.d(t,{G:function(){return i}});var n,i=((n={}).init="init",n.fetching="fetching",n.complete="complete",n.error="error",n)},91849:function(e,t,r){function n(e){return void 0!==e.decryptKey}r.d(t,{d:function(){return n},n:function(){return a}});var i,a=((i={}).init="init",i.fetching="fetching",i.complete="complete",i.error="error",i)},816258:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(876826),i=r(966465);function a(e,t){return o.apply(this,arguments)}function o(){return(o=(0,n._)(function*(e,t){var r=i.Buffer.from(t,"base64"),n=yield window.crypto.subtle.importKey("raw",r,{name:"AES-CBC",length:256},!1,["decrypt"]),a=e.slice(0,16),o=e.slice(16);return crypto.subtle.decrypt({name:"AES-CBC",iv:a,length:256},n,o)})).apply(this,arguments)}},426473:function(e,t,r){r.d(t,{Y:function(){return i}});var n=r(5564);function i(e){var{tokenKey:t,decryptKey:r}=e;return r?"".concat(t,"_").concat((0,n.Cv)(r)):t}},582558:function(e,t,r){r.d(t,{_W:function(){return a},pE:function(){return o},wS:function(){return s}});var n=r(971245),i=r(184564),a=["480p","360p","540p","720p","origin"],o=["1080p","720p","540p","480p","360p","origin"],s=i.R;(0,n.yh)("user-photo-resource-service")},506057:function(e){e.exports={VE:"18.3.0"}}}]);