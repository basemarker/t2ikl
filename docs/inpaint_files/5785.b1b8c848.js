"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["5785"],{71493:function(e,t,r){r.d(t,{D:()=>w});var i=r("789786"),n=r("852603"),o=r("695581"),a=r("216342"),s=r("705309"),c=r("758261"),l=r("490165"),u=r("163142"),d=r("460029");r("395248");var _=r("423342"),v=r("608358"),h=r("562092"),p=r("150615"),m="__lvweb_user_status";function g(e){var t,r,i=JSON.stringify({uid:e.userProfile.uid,timestamp:Date.now()});localStorage.setItem(m,i);var n=()=>{var t,r;(null!==(r=(0,h.D)(null!==(t=localStorage.getItem(m))&&void 0!==t?t:"").uid)&&void 0!==r?r:"")!==e.userProfile.uid&&_.Z.error({alignCenter:!0,escToExit:!1,backspaceToExit:!1,maskClosable:!1,closeIcon:null,title:p.ZP.t("web_account_logout_title_error",{},"Account was changed"),content:p.ZP.t("web_account_logout_error",{},"Current login account has encountered an error, please refresh the page and try again."),okText:p.ZP.t("web_graphic_server_failure_refresh_page_btn",{},"Refresh"),onOk:()=>{window.location.reload()}})};null===(t=window)||void 0===t||t.addEventListener("storage",e=>{e.key===m&&n()}),null===(r=document)||void 0===r||r.addEventListener("visibilitychange",()=>{"visible"!==document.visibilityState&&n()})}var f=r("686658"),y=r("775475");r("166715");var b=r("642273"),S=e=>{var t,i,n,o=new URL(r.g.location.href),a=o.searchParams.get("need_login"),s=o.searchParams.get("uid");if(!!a){var c=(0,v.ko)(e,l.D);var u=(i=new RegExp("".concat(b.NU,"(.*)")),(null==(n=location.href.match(i))?void 0:n[1])||b.EZ.Home);if(!c.hasLogin){r.g.open("".concat(location.origin).concat(b.NU).concat(b.EZ.Login,"?redirectUrl=").concat(encodeURIComponent(u)),"_self");return}s&&s!==(null===(t=c.userProfile)||void 0===t?void 0:t.uid)&&_.Z.confirm({icon:null,focusLock:!1,title:p.ZP.t("dre_sync_switch_account_popup_title",{},"Sign out of your current account?"),content:p.ZP.t("dre_sync_switch_account_popup_desc",{},"The current Dreamina account doesn't match your CapCut account. Switch to the same account to continue syncing."),okText:p.ZP.t("dre_version_outdated_popup_desc_btn_ok",{},"Confirm"),cancelText:p.ZP.t("dre_version_outdated_popup_desc_btn_cancel",{},"Cancel"),onOk:()=>{c.logout("".concat(location.origin).concat(b.NU).concat(u))},okButtonProps:{type:"primary"}})}};class w extends n.s{_executePhase(e,t){switch(t){case o.B.UserInit:this._waitUserInitialize(e);break;case o.B.Completed:this._whenCompleted(e)}}_waitUserInitialize(e){(0,d.Ie)(u.id);var t=this._containerService.invokeFunction(e=>e.get(l.D)).initialize();this._containerService.invokeFunction(e=>e.get(c.h)).aggregate.getHasPublishAuthority();var r=(0,s.W)(t);return this._setBarrier(o.B.UserInit,r),(0,d.oe)(u.id),r.wait()}_whenCompleted(e){var t,r;t=this._containerService,(r=(0,v.ko)(t,l.D)).hasLogin?g(r):r.onDidLogin(()=>{g(r)}),r.onDidLogout(e=>{e===l.d.CurrentTab&&localStorage.setItem(m,JSON.stringify({uid:"",timestamp:Date.now()}))}),(0,f.u)(this._containerService),(0,y.K)(this._containerService),(0,y.g)(this._containerService),S(this._containerService)}constructor(e){super(),this._containerService=e,this._name="account"}}(0,i.gn)([(0,a.lI)("account-job","_waitUserInitialize"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,i.w6)("design:returntype",void 0)],w.prototype,"_waitUserInitialize",null),(0,i.gn)([(0,a.lI)("account-job","_whenCompleted"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,i.w6)("design:returntype",void 0)],w.prototype,"_whenCompleted",null)},89179:function(e,t,r){r.d(t,{V:function(){return i.V}});var i=r(395626)},880301:function(e,t,r){r.d(t,{Z:function(){return i}});var i=[{id:r(259273).$W.AbsolutePositionSlotHelpCenter,loader:()=>r.e("9410").then(r.bind(r,933980))}]},625613:function(e,t,r){r.d(t,{c:function(){return s}});var i=r(259273),n=r(39368),o={id:i.$W.TitleBarUserCenter,loader:()=>Promise.all([r.e("2175"),r.e("4889"),r.e("2707"),r.e("640"),r.e("2190"),r.e("9500")]).then(r.bind(r,81837))},a={id:i.$W.TitleBarSearch,loader:()=>Promise.all([r.e("6366"),r.e("7288")]).then(r.bind(r,236171))},s=[...(0,n.I)()?[a]:[],o]},81061:function(e,t,r){r.d(t,{yM:function(){return i}});var i={CN_APP_ID:513695,OVERSEA_APP_ID:513641}},310869:function(e,t,r){r.d(t,{o:function(){return i}});var i={INVITATION_LINK_REFRESH_TOO_FAST:1270,USER_NOT_IN_GROUP:1363,CREATE_GROUP_TOO_FAST:1269,EXCEEDED_CREATE_GROUPS_MAX_LIMIT:1287,EXCEEDED_USER_GROUPS_MAX_LIMIT:1299,INVITATION_LINK_EXPIRED:1267,ADD_GROUP_TOO_FAST:1268,EXCEEDED_GROUP_MEMBERS_MAX_LIMIT:1280,REPEAT_ADD_GROUP:1286,INVITATION_LINK_ERROR:1367,SHARE_LINK_EXPIRED:1450,GROUP_APPLY_LIMIT:1463,SAME_GROUP_APPLY_LIMIT:1464,GROUP_APPLY_PENDING:1468,GROUP_APPLY_NOT_ALLOW:1469,GROUP_APPLY_PASSED:1286,APPLY_APPROVE_NO_AUTH:1292,NOT_IN_GROUP:1291,APPROVAL_PROCESSED:1467,GROUP_MEMBER_FULL:1280,APPROVAL_EXPIRED:1470}},257212:function(e,t,r){r.d(t,{P:function(){return n},k:function(){return i}});var i={SEND_CODE_ERROR_CODE:{SENDING_FREQUENTLY:1206,EMAIL_ERROR:1044},REGISTER_ERROR_CODE:{CODE_WRONG:1704,CODE_EXPIRED:1703,LINKED_EMAIL:1023},LOGIN_ERROR_CODE:{PASSWORD_WRONG:1009,USER_NOT_EXITE:1011,USER_ACCOUNT_CANCEL:1075}},n={NO_LOGIN:1015}},852603:function(e,t,r){r.d(t,{s:function(){return n}});var i=r(874800);class n extends i.JT{get name(){return this._name}wait(e,t){var r=this._jobStore.get(t);return(null==r?void 0:r.length)?Promise.all(r.map(e=>e.wait())):Promise.resolve()}prepare(e,t){this._executePhase(e,t)}_setBarrier(e,t){!this._jobStore.has(e)&&this._jobStore.set(e,[]),this._jobStore.get(e).push(t)}constructor(...e){super(...e),this._jobStore=new Map}}},506955:function(e,t,r){r.d(t,{W:function(){return c}});var i=r(876826),n=r(216342),o=r(874800),a=r(836413),s=r(56935);class c extends o.JT{get currentPhase(){return this._currentPhase}addJob(e){(0,s.Y2)(!this._jobPools.has(e.name),"cant duplicate add job."),this._jobPools.set(e.name,e)}removeJob(e){this._jobPools.delete(e)}prepare(e,t){var{span:r}=(0,n.VL)(e,"job-scheduler","prepare-".concat(t));for(var[,i]of this._jobPools)i.prepare(e,t);r.end()}wait(e,t){var r=this;return(0,i._)(function*(){var{span:i}=(0,n.VL)(e,"job-scheduler","wait-".concat(t)),o=[];for(var[,s]of r._jobPools)o.push(s.wait(e,t));try{return yield Promise.all(o),r._currentPhase=t,(0,a.ly)()}finally{i.end()}})()}dispose(){this._jobPools.forEach(e=>e.dispose()),this._jobPools.clear(),super.dispose()}constructor(e){super(),this._currentPhase=e,this._jobPools=new Map}}},144365:function(e,t,r){r.d(t,{T:function(){return n}});var i=r(56935);class n{getDatabase(e){if(this._pool.has(e))return Promise.resolve(this._pool.get(e));if(this._connectingRequest.has(e))return this._connectingRequest.get(e);var t=this._schemas.get(e),r=new Promise((r,i)=>{var n=indexedDB.open(e,t.version);n.onupgradeneeded=()=>{try{var t=n.result;this._initTable(t,e,n.transaction)}catch(e){i(e)}},n.onerror=e=>{i(e)},n.onblocked=e=>{i(e)},n.onsuccess=()=>{try{var t=n.result;this._listenDbEvent(t),this._pool.set(e,t),r(t)}catch(e){i(e)}}}).finally(()=>{this._connectingRequest.delete(e)});return this._connectingRequest.set(e,r),r}_initTable(e,t,r){var n=this._schemas.get(t);(0,i.ZB)(n);var o=new Set;for(var a of e.objectStoreNames)o.add(a);for(var[s,c]of n.tables){if(o.has(s)){(0,i.ZB)(r,"need transaction when db upgrade.");var l=r.objectStore(s);this._createIndex(l,c.index);continue}var u=e.createObjectStore(s,{keyPath:c.key});this._createIndex(u,c.index)}}_createIndex(e,t){var r,i=new Set;for(var n of e.indexNames)i.add(n);for(var o of t){if(!i.has(o.name))e.createIndex(o.name,null!==(r=o.keyPath)&&void 0!==r?r:o.name,{unique:o.unique})}}_removeCache(e){for(var[t,r]of this._pool)if(r===e){this._pool.delete(t);return}}_listenDbEvent(e){e.onversionchange=()=>{e.close(),this._removeCache(e)},e.onabort=()=>{e.close(),this._removeCache(e)},e.onerror=()=>{e.close(),this._removeCache(e)},e.onclose=()=>{this._removeCache(e)}}constructor(e){this._schemas=e,this._pool=new Map,this._connectingRequest=new Map}}},547725:function(e,t,r){r.d(t,{T:function(){return o},r:function(){return a}});var i=r(876826),n=r(947259);function o(e,t,r){var o,a=r.value;var s=(o=(0,i._)(function*(t){for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];var o=yield e.reopenDatabase.apply(t);return o.ok?a.apply(t,i):o}),function(e){return o.apply(this,arguments)});return r.value=(0,i._)(function*(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=yield a.apply(this,r);if(o.ok||!o.cause)return o;switch(o.cause.name){case"QuotaExceededError":e.readyCleanup.apply(this),yield(0,n.D)(500);var c=yield s(this,...r);if(!c.ok)return o;return c;case"InvalidStateError":var l=yield s(this,...r);if(!l.ok)return o;return l;default:return o}}),r}function a(e,t,r){var o=r.value;return r.value=(0,i._)(function*(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=yield o.apply(this,r);if(a.ok||!a.cause)return a;if("QuotaExceededError"===a.cause.name){e.readyCleanup.apply(this),yield(0,n.D)(500);var s=yield o.apply(this,r);return s.ok?s:a}return a}),r}},268119:function(e,t,r){r.d(t,{h:function(){return x}});var i=r(876826),n=r(85728),o=r(929753),a=r(772322);r(702722),r(395248),r(181382);var s=r(498697),c=r(423342),l=r(370640),u=r(725798),d=r(66003),_=r(782148),v=r(150615),h=r(889715),p=r(105789),m=r.n(p),g=r(967355),f=r(603521),y=r(218571),b=r(510951),S=r(316679),w=r(95581),E=r(417442),I=r(867929),C=r(369617),P=r(417699),A=r(178589),T=r(48252),k=(0,u.Pi)(e=>{var{closeModal:t,containerService:r,act_key:c,act_name:u,onPublish:p}=e,[E,k]=(0,y.useState)(!1),[x]=(0,y.useState)(()=>r.createInstance(b.B,(0,o._)((0,n._)({},e),{act_key:c,act_name:u}))),{isOversea:R}=(0,d.G)(P.e),O=(0,d.G)(A.e);(0,y.useEffect)(()=>{var e=null==O?void 0:O.onKeepAliveChange(e=>{e.status===T.G.InActivated&&t()});return()=>{e.dispose()}},[]),(0,y.useEffect)(()=>()=>{x.dispose()},[x]);var D=e=>{if("success"===e){t();return}if(x.reportPublishStatus({status:"cancel"}),x.isEmpty||"redirect"===e){t();return}w.h.confirm({title:v.ZP.t("duanpian_confirm_closing_publish_popup",{},"Confirm Closing Publish Popup"),content:v.ZP.t("duanpian_after_click_content_will_not_be_saved",{},"After Click Content Will Not Be Saved"),icon:null,okText:v.ZP.t("duanpian_confirm",{},"Confirm"),cancelText:v.ZP.t("duanpian_cancel",{},"Cancel"),onOk:()=>{t()}})};return(0,a.jsxs)("div",{className:_.Z.masterpieceModal,children:[(0,a.jsxs)("div",{className:_.Z.masterpieceModalHeader,children:[(0,a.jsx)("div",{className:_.Z.title,children:(0,a.jsx)("span",{children:v.ZP.t("duanpian_publish_your_work_to_let_more_people_see",{},"Publish Your Work to Let More People See")})}),(0,a.jsx)(h.Rnl,{className:_.Z.closeBtn,onClick:()=>D("cancel")})]}),(0,a.jsxs)("div",{"data-no-autofocus":!0,className:_.Z.contentContainer,children:[(0,a.jsxs)("div",{className:_.Z.contentWrapper,children:[(0,a.jsx)("div",{className:_.Z.leftContainer,children:(0,a.jsxs)("div",{className:_.Z.videoItem,children:[(0,a.jsx)("div",{className:_.Z.label,children:v.ZP.t("duanpian_my_works",{},"My Works")}),(0,a.jsx)("div",{className:_.Z.videoControll,children:(0,a.jsx)(f.Z,{data:x.observableData.videoState,publishManager:x,onSelectLocalFile:()=>x.selectLocalFile(I.Z.Publish),onSelectDreaminaStory:()=>{x.selectDreaminaStory({onGoCreate:()=>{D("redirect")}})},onDropFile:x.handleFileDrop,onCancel:x.cancel})})]})}),(0,a.jsxs)("div",{className:_.Z.rightContainer,children:[(0,a.jsxs)("div",{className:_.Z.item,children:[(0,a.jsx)("div",{className:_.Z.label,children:v.ZP.t("duanpian_work_cover",{},"Work Cover")}),(0,a.jsx)("div",{className:_.Z.controll,children:(0,a.jsx)(S.Z,{data:x.observableData.coverState,publishManager:x,videoData:x.observableData.videoState,onSelectLocalFile:x.selectCover,onClear:x.resetCover})})]}),(0,a.jsxs)("div",{className:_.Z.item,children:[(0,a.jsx)("div",{className:_.Z.label,children:v.ZP.t("duanpian_work_title",{},"Work Title")}),(0,a.jsx)("div",{className:_.Z.controll,children:(0,a.jsx)(l.Z,{size:"large",value:x.observableData.title,onChange:e=>x.setTitle(e),placeholder:v.ZP.t("duanpian_enter_work_title",{},"Enter Work Title"),maxLength:{length:R?80:40,errorOnly:!1}})})]}),(0,a.jsxs)("div",{className:_.Z.item,children:[(0,a.jsx)("div",{className:_.Z.label,children:v.ZP.t("duanpian_work_description",{},"Work Description")}),(0,a.jsx)("div",{className:_.Z.controll,children:(0,a.jsx)("div",{className:m()(_.Z.textareaWrapper,E&&_.Z.isFocus),children:(0,a.jsx)(l.Z.TextArea,{value:x.observableData.desc,onChange:e=>x.setDesc(e),maxLength:R?1e3:500,showWordLimit:!0,placeholder:v.ZP.t("duanpian_enter_work_description",{},"Enter Work Description"),onFocus:()=>k(!0),onBlur:()=>k(!1)})})})]}),(0,a.jsxs)("div",{className:_.Z.row,children:[(0,a.jsx)("div",{className:_.Z.title,children:v.ZP.t("dre_ai_shorts_allow_download_switch",{},"Allow people to download")}),(0,a.jsx)("div",{className:_.Z.content,children:(0,a.jsx)(s.Z,{size:"small",className:_.Z.switch,checked:x.observableData.downloadable,onChange:e=>x.setDownloadable(e)})})]})]})]}),(0,a.jsx)("div",{className:_.Z.publishContainer,children:(0,a.jsx)("div",{className:_.Z.publishButtonContainer,children:(0,a.jsx)(g.J,{className:m()(_.Z.publishButton,_.Z.btn),text:v.ZP.t("duanpian_publish",{},"Publish"),disabled:!x.canSubmit,loading:x.observableData.isSubmiting,onClick:(0,i._)(function*(){if(x.reportPublishPage("publish"),(yield x.submit()).ok){C.s.success(v.ZP.t("result_toast_publish_success",{},"Publish Successful")),D("success"),null==p||p();return}C.s.warning(v.ZP.t("result_toast_publish_fail_retry",{},"Couldn\u2019t post. Try again."))})})})})]})]})});function x(e){var t,{containerService:r,act_key:i,act_name:s,page:l,channel:u,authorType:v}=e;(0,E.Oc)(r,{action:"show",type:"story",activity_id:i,activity:s,content_id:void 0,picture_cnt:0,page:l,channel:u,author_type:v}),t=c.Z.confirm({wrapClassName:_.Z.masterpieceModalWrapper,title:null,footer:null,simple:!1,escToExit:!1,icon:null,closable:!1,maskClosable:!1,autoFocus:!1,content:(0,a.jsx)(d.$,{instantiationService:r,children:(0,a.jsx)(k,(0,o._)((0,n._)({},e),{closeModal:()=>{null==t||t.close(),t=void 0},containerService:r,act_key:i}))})})}},989390:function(e,t,r){r.d(t,{B:function(){return c}});var i=r(490165),n=r(608358),o=r(70137),a=r(484702),s=r(247170),c=e=>{var t=(0,n.ko)(e,o.aG),r=(0,n.ko)(e,i.D),c=(0,n.ko)(e,a.N);if(!!r.hasLogin&&!c.isInFreemiumStage&&!!c.isReady)t.creditReceiveManager.receiveCredit((0,s.fC)())}},846008:function(e,t,r){r.d(t,{R:function(){return o}});var i=r(426572),n=r(335737);function o(e,t,r){var o,a,s,c,l=null!==(c=null===(s=e.currentKeepAliveData)||void 0===s?void 0:s.routeId)&&void 0!==c?c:"N/A";var u=(o=t.resolveSource,a=r,"custom"!==o&&a?(0,i.Ul)(a)?"customtiming":"elementtiming":"custom");return(0,n.d)(r,{createPid:t.createPid||l,resolveSource:u,resolveTime:t.resolveTime})}},754089:function(e,t,r){r.d(t,{a:function(){return i}});function i(e,t){var r=new URL(globalThis.location.href);t?r.searchParams.set(e,t):r.searchParams.delete(e),globalThis.history.replaceState({},"",r)}},839694:function(e,t,r){r.d(t,{SV:function(){return u},Sc:function(){return c},r:function(){return _},t2:function(){return d},zh:function(){return l}});var i,n,o,a,s=r(971245);var c=((i={}).Inspiration="inspiration",i.ShortFilm="shortFilm",i.Asset="asset",i);var l=((n={}).Start="start",n.Interpage="interpage",n.Suggestion="suggestion",n.Result="result",n.SearchError="searchError",n);var u=((o={}).SearchInit="searchInit",o.Searching="searching",o.SearchDone="searchDone",o.SearchFail="searchFail",o);var d=((a={}).Feed="feed",a.Asset="asset",a),_=(0,s.yh)("search_store_service")},36604:function(e,t,r){r.d(t,{p:function(){return _}});var i=r(772322);r(109163);var n=r(372675),o=r(590839),a=r(259273),s=r(642273),c=r(150615),l=r(708274),u=r(848303),d=r(889715),_={[o.a.PageRoute]:[{id:a.Sj.Activity,path:s.EZ[a.Sj.Activity],layoutConfiguration:{hideSideMenu:!1,hideTitleBar:!1},skeleton:()=>null}],[o.a.SideMenu]:[{id:a.Sj.Activity,title:()=>(0,i.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,i.jsx)(n.Z,{content:c.ZP.t("dreamina_activity_tab_name",{},"Activity"),checkOverflow:!0,children:(0,i.jsx)("span",{style:{maxWidth:104,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:8},children:c.ZP.t("dreamina_activity_tab_name",{},"Activity")})})}),tooltips:()=>c.ZP.t("dreamina_activity_tab_name",{},"Activity"),icon:e=>{var{selected:t,isHover:r}=e;return t||r?(0,i.jsx)(d.hCh,{}):(0,i.jsx)(d.l$m,{fill:u.Z.pageIconColor})},group:l.Bl.Main,position:"top",order:a.us.Activity}]}},776486:function(e,t,r){r.d(t,{E:function(){return g},p:function(){return S}});var i=r(772322);r(109163);var n=r(372675),o=r(590839),a=r(259273),s=r(642273),c=r(889715),l=r(150615),u=r(708274);r(673652);var d=r(185617),_=r(724614),v=r(554995),h=r(552786),p=r(848303),m=r(193931),g={maxWidth:r(104798).M,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:12},f=(0,v.b)(),y=e=>{var t=null==f?void 0:f[e];return[h.em.GENERATE_VIDEO,h.em.GENERATE_IMAGE,h.em.GENERATE_AUDIO,h.em.DREAMINA_LIP_SYNC,h.em.DREAMINA_ACTION_COPY].includes(e)&&!(0,_.H)()?{showIcon:!1,disabled:!1}:t?(0,m.Dx)({featureDataReady:!!t,featureData:t}):{showIcon:!0,disabled:!0}},b=null==f?void 0:f[h.em.GENERATE_AUDIO];b&&[h.Ve.UNAVAILABLE].includes(b.status),!b||b&&(b.status,h.Ve.RELEASED);var S={[o.a.PageRoute]:[{id:a.Sj.ImageGenerate,path:s.EZ[a.Sj.ImageGenerate],isNeedCache:!d.lY,skeleton:()=>null,layoutConfiguration:{hideSideMenu:!0}},{id:a.Sj.VideoGenerate,path:s.EZ[a.Sj.VideoGenerate],isNeedCache:!d.lY,skeleton:()=>null,layoutConfiguration:{hideSideMenu:!0}},{id:a.Sj.LipSync,path:s.EZ[a.Sj.LipSync],isNeedCache:!d.lY,skeleton:()=>null,layoutConfiguration:{hideSideMenu:!0}},{id:a.Sj.ActionCopy,path:s.EZ[a.Sj.ActionCopy],isNeedCache:!d.lY,skeleton:()=>null,layoutConfiguration:{hideSideMenu:!0}},{id:a.Sj.AudioGenerate,path:s.EZ[a.Sj.AudioGenerate],isNeedCache:!d.lY,skeleton:()=>null,layoutConfiguration:{hideSideMenu:!0}}],[o.a.SideMenu]:[{id:a.Sj.ImageGenerate,group:u.Bl.UserTools,className:y(h.em.GENERATE_IMAGE).disabled?"sidebar_disable":"",title:()=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.Z,{content:l.ZP.t("dre_home_image_entry_text_image_to_image",{},"Text/Image to image"),checkOverflow:!0,children:(0,i.jsx)("span",{style:g,children:l.ZP.t("dre_home_image_entry_text_image_to_image",{},"Text/Image to image")})}),y(h.em.GENERATE_IMAGE).showIcon?(0,i.jsx)(c.XH3,{className:"icon-display-beta",style:{width:42,height:20}}):null]}),tooltips:()=>l.ZP.t("dre_home_image_entry_text_image_to_image",{},"Text/Image to image"),icon:e=>{var{selected:t,isHover:r}=e;return t||r?(0,i.jsx)(c.puD,{}):(0,i.jsx)(c.ZgL,{fill:p.Z.pageIconColor})},position:"top",order:a.us.Platform},{id:a.Sj.VideoGenerate,group:u.Bl.UserTools,position:"top",className:y(h.em.GENERATE_VIDEO).disabled?"sidebar_disable":"",title:()=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.Z,{content:l.ZP.t("dre_home_video_entry_text_image_to_video",{},"Text/Image to video"),checkOverflow:!0,children:(0,i.jsx)("span",{style:g,children:l.ZP.t("dre_home_video_entry_text_image_to_video",{},"Text/Image to video")})}),y(h.em.GENERATE_VIDEO).showIcon?(0,i.jsx)(c.XH3,{className:"icon-display-beta",style:{width:42,height:20}}):null]}),tooltips:()=>l.ZP.t("dre_home_video_entry_text_image_to_video",{},"Text/Image to video"),icon:e=>{var{selected:t,isHover:r}=e;return t||r?(0,i.jsx)(c.AC8,{}):(0,i.jsx)(c.i9Z,{fill:p.Z.pageIconColor})},order:a.us.VideoGenerate},{id:a.Sj.AudioGenerate,group:u.Bl.UserTools,position:"top",className:y(h.em.GENERATE_AUDIO).disabled?"sidebar_disable":"",title:()=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.Z,{content:l.ZP.t("ai_music_generate",{},"Text to music"),checkOverflow:!0,children:(0,i.jsx)("span",{style:g,children:l.ZP.t("ai_music_generate",{},"Text to music")})}),y(h.em.GENERATE_AUDIO).showIcon?(0,i.jsx)(c.XH3,{className:"icon-display-beta",style:{width:42,height:20}}):null]}),tooltips:()=>l.ZP.t("ai_music_generate",{},"Text to music"),icon:e=>{var{selected:t,isHover:r}=e;return t||r?(0,i.jsx)(c.P_V,{}):(0,i.jsx)(c.Xey,{stroke:p.Z.pageIconColor,fill:p.Z.pageIconColor})},order:a.us.AudioGenerate},{id:a.Sj.ImageEdit,className:y(h.em.GENERATE_IMAGE).disabled?"sidebar_disable":"",title:()=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.Z,{content:l.ZP.t("frame_change_canva_edit",{},"Canvas editor"),checkOverflow:!0,children:(0,i.jsx)("span",{style:g,children:l.ZP.t("frame_change_canva_edit",{},"Canvas editor")})}),y(h.em.GENERATE_IMAGE).showIcon?(0,i.jsx)(c.XH3,{className:"icon-display-beta",style:{width:42,height:20}}):null]})},{id:a.Sj.LipSync,group:u.Bl.UserTools,position:"top",className:y(h.em.DREAMINA_LIP_SYNC).disabled?"sidebar_disable":"",title:()=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.Z,{content:l.ZP.t("dre_home_video_entry_talking_avatar",{},"\u5BF9\u53E3\u578B"),checkOverflow:!0,children:(0,i.jsx)("span",{style:g,children:l.ZP.t("dre_home_video_entry_talking_avatar",{},"\u5BF9\u53E3\u578B")})}),y(h.em.DREAMINA_LIP_SYNC).showIcon?(0,i.jsx)(c.XH3,{className:"icon-display-beta",style:{width:42,height:20}}):null]}),tooltips:()=>l.ZP.t("dre_home_video_entry_talking_avatar",{},"\u5BF9\u53E3\u578B"),icon:e=>{var{selected:t,isHover:r}=e;return(t||r)&&!y(h.em.DREAMINA_LIP_SYNC).disabled?(0,i.jsx)(c.ywS,{}):(0,i.jsx)(c.ZvX,{stroke:p.Z.pageIconColor,fill:p.Z.pageIconColor})},order:a.us.LipSync},{id:a.Sj.ActionCopy,group:u.Bl.UserTools,position:"top",className:y(h.em.DREAMINA_ACTION_COPY).disabled?"sidebar_disable":"",title:()=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.Z,{content:l.ZP.t("dre_home_video_entry_micmic_avatar",{},"AI Motion"),checkOverflow:!0,children:(0,i.jsx)("span",{style:g,children:l.ZP.t("dre_home_video_entry_micmic_avatar",{},"AI Motion")})}),y(h.em.DREAMINA_ACTION_COPY).showIcon?(0,i.jsx)(c.XH3,{className:"icon-display-beta",style:{width:42,height:20}}):null]}),tooltips:()=>l.ZP.t("dre_home_video_entry_micmic_avatar",{},"AI Motion"),icon:e=>{var{selected:t,isHover:r}=e;return(t||r)&&!y(h.em.DREAMINA_ACTION_COPY).disabled?(0,i.jsx)(c.hv_,{}):(0,i.jsx)(c.uPV,{stroke:p.Z.pageIconColor,fill:p.Z.pageIconColor})},order:a.us.ActionCopy}]}},277007:function(e,t,r){r.d(t,{X:function(){return E}});var i=r(876826),n=r(789786),o=r(224671),a=r(433965),s=r(434712),c=r(655901),l=r(340733),u=r(178589),d=r(259273),_=r(260963),v=r(165460),h=r(648326),p=r(498973),m=r(475578),g=r(247465),f=r(970419),y=r(803625),b=r(836413),S=r(530989),w=r(325563);class E{get store(){return this._store}_getHasPublishAuthority(){var e=this;return(0,i._)(function*(){var t=yield e._userPublishAuthorityService.getHasPublishAuthority(o.$7.PublishImage);(0,_.z)(()=>{e._store.hasPublishAuthority=t})})()}restoreFromUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Q8.Default,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this;return(0,i._)(function*(){var i=(0,y.VO)(),n=(0,y.ib)();if(!i||!n)return(0,b.wf)(-1,"miss parameter");var o=r._serverInjectedDataService.getData(d.Sj.WorkDetailPage);if(o){r._serverInjectedDataService.clearData(d.Sj.WorkDetailPage);var{workDetail:a}=o;if(a.ok&&a.value.commonAttr.id===i){var s,u,_=a.value.__cacheSyncToken,h=a.value.__logId;if(s=a.value,_&&h){var p=yield S.Li.decryptIV(_,h);yield(0,c.B0)(S.Li.decrypt.bind(S.Li),s,p)}var m=null!==(u=a.value.__setCookie)&&void 0!==u?u:"",f=yield S.sn.getSignOptions({cookie:m});yield(0,l.H8)(S.sn.sign.bind(S.sn),s,f),s.fromSSR=!0}}!s&&(s=(0,v.ZB)({itemId:i,coverUrl:"",itemType:(0,v.WI)(n),secUid:t}));var w=(0,g.q)(s);return r.setImageItems([w],0,0,e),(0,b.ly)()})()}setImageItems(e,t,r,i){(0,_.z)(()=>{this._store.collectionIndex=t,this._store.itemIndex=r,this._store.templateSource=i,this._store.reportTemplateParams={template_source:i,type:m.px.Image},this._store.itemList=e})}_updateStore(e){var t=this;return(0,i._)(function*(){var{collectionIndex:r=0,itemIndex:i=0,reportTemplateParams:{template_source:n=o.Q8.Default}={},reportTemplateParams:a}=null!=e?e:{},s=t._getItemList(n);if(!s.length){yield t.restoreFromUrl();return}(0,_.z)(()=>{t._store.collectionIndex=r,t._store.itemIndex=i,t._store.templateSource=n,t._store.reportTemplateParams=a,t._store.itemList=s})})()}_getIsFromFeed(e){return!!e&&(!![o.Q8.Home,o.Q8.Explore,o.Q8.OthersProfile,o.Q8.PersonalPage].includes(e)||!1)}_updateLocationState(e){var t=this;return(0,i._)(function*(){var{secUid:r,reportTemplateParams:{template_source:i=o.Q8.Default}={}}=null!=e?e:{};if(!e||!t._getIsFromFeed(i)){yield t.restoreFromUrl(i,r);return}yield t._updateStore(e)})()}loadMore(){var e=this;return(0,i._)(function*(){var{templateSource:t}=e._store;if(!!e._getIsFromFeed(e._store.templateSource)){var r={hasPublishAuthority:e._store.hasPublishAuthority};switch(t){case o.Q8.Explore:case o.Q8.Home:var i,n=null===(i=h.p.getCommunityStoreInstance(e._containerService))||void 0===i?void 0:i.activeInstance;if(!(null==n?void 0:n.hasMore))return;yield null==n?void 0:n.getDataList({});break;case o.Q8.OthersProfile:case o.Q8.PersonalPage:var a,s,c,l=e._store.itemList[0];yield null===(c=p.e.getHomePageStoreInstance(e._containerService,r))||void 0===c?void 0:null===(s=c.activeTabInstance)||void 0===s?void 0:null===(a=s.activeInstance)||void 0===a?void 0:a.getDataList({secUid:l.author.secUid})}var u=e._getItemList(e._store.templateSource);(0,_.z)(()=>{e._store.itemList=u})}})()}_getItemList(e){var t=[];switch(e){case o.Q8.Explore:case o.Q8.Home:t=null!==(n=null===(i=h.p.getCommunityStoreInstance(this._containerService))||void 0===i?void 0:null===(r=i.activeInstance)||void 0===r?void 0:r.itemList)&&void 0!==n?n:[];break;case o.Q8.OthersProfile:case o.Q8.PersonalPage:var r,i,n,s,c,l,u,d={hasPublishAuthority:this._store.hasPublishAuthority};t=null!==(u=null===(l=p.e.getHomePageStoreInstance(this._containerService,d))||void 0===l?void 0:null===(c=l.activeTabInstance)||void 0===c?void 0:null===(s=c.activeInstance)||void 0===s?void 0:s.itemList.filter(e=>!(0,a.w3)(e)))&&void 0!==u?u:[]}return t}constructor(e,t,r,i){this._containerService=e,this._platformUiConfigurationService=t,this._userPublishAuthorityService=r,this._serverInjectedDataService=i,this._store=(0,_.LO)({collectionIndex:0,itemIndex:0,reportTemplateParams:{template_source:o.Q8.Default,type:m.px.Image},templateSource:o.Q8.Default,itemList:[],hasPublishAuthority:!1}),this._getHasPublishAuthority()}}E=(0,n.gn)([(0,n.fM)(0,s.t),(0,n.fM)(1,u.e),(0,n.fM)(2,w.v),(0,n.fM)(3,f.G),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.t?Object:s.t,void 0===u.e?Object:u.e,void 0===w.v?Object:w.v,void 0===f.G?Object:f.G])],E)},109845:function(e,t,r){r.d(t,{W:function(){return a}});var i=r(85728),n=r(379311);class o{getEventParams(){return(0,i._)({},this._params)}constructor(e){this._params=e,this.eventName="long-animation-frame"}}function a(e,t){(0,n.S$)(e,o,[t])}},266521:function(e,t,r){r.d(t,{U:function(){return a}});var i=r(85728),n=r(379311);class o{getEventParams(){var{pid:e,routeChangeTime:t,customParams:r,resolveTime:n,loadType:o}=this._params;return(0,i._)({pid:e,value:n-t,loadType:o},null!=r?r:{})}constructor(e){this._params=e,this.eventName="spa_load"}}function a(e,t){(0,n.S$)(e,o,[t])}},847253:function(e,t,r){r.d(t,{R:function(){return o}});var i=r(874800);r(568664);var n=r(693125);class o extends i.JT{get pageGenerate(){var e=this._getComputedStyle();return{getParamsContainerWidth:t=>this._getCssVariable(e,t||"--mweb-generate-params-container-width",n.x.Number)}}getCssVariable(e){return window.document.body.style.getPropertyValue(e)}setCssVariable(e,t){window.document.body.style.setProperty(e,t.toString())}_getCssVariable(e,t,r){var i=e.getPropertyValue(t);return r===n.x.Number?parseFloat(i):i}_getComputedStyle(){return getComputedStyle(window.document.body)}}},45347:function(e,t,r){r.d(t,{l:function(){return i}});class i{getService(){return this.service}setNextHandler(e){this.nextHandler=e}handle(e){return this._handle(e,this.getService())}constructor(e){this.service=e,this.nextHandler=null}}},865623:function(e,t,r){r.d(t,{e:function(){return n}});var i=r(276879),n=()=>{var e=new URLSearchParams(globalThis.location.search);return{[i.R.recordId]:e.get(i.R.recordId),[i.R.itemId]:e.get(i.R.itemId)}}},997825:function(e,t,r){r.d(t,{dV:function(){return o},f$:function(){return n},uk:function(){return a}});var i=r(940140),n=5,o="browser",a={SaveDraftUrl:{hostNameType:i.b_.Default,url:"/lv/v1/editor/plane_draft/save"}}},358093:function(e,t,r){r.d(t,{x:function(){return c}});var i=r(818398),n=r.n(i),o=r(598879),a=r(591586),s=r(974501);function c(e){var t,r="",i=[],c=[],l=Date.now(),u="";try{c=e.package_assets.map(e=>({md5:e.md5,size:e.size,sourcePath:e.source_path,meta:e.meta?JSON.parse(e.meta):void 0})),l=(t=JSON.parse(e.package_meta)).createSource.createTime,r=t.draft.name,i=e.referenced_assets.map(e=>n().parse(e)).map(e=>{var t,r,i,n=e.preview_url.bucket_key_1080p||e.origin_download_link;if(e.image_transcode_info&&(i={},Object.keys(e.image_transcode_info).forEach(t=>{if(!e.image_transcode_info[t])return;var{preview_url:r,width:a,height:s}=e.image_transcode_info[t];if(!!r&&!!a&&!!s&&!!(0,o.jv)(r)){if(t.includes("origin")){n=r;return}i["".concat(a,"x").concat(s)]={width:a,height:s,full_url:r,aesKey:e.preview_key}}})),e.preview_url&&!Object.keys(null!=i?i:{}).length){var a={"360p":{width:360,height:360},"480p":{width:480,height:480},"720p":{width:720,height:720},"1080p":{width:1080,height:1080}};Object.keys(e.preview_url).forEach(t=>{if(!!e.preview_url[t]){var{width:r=0,height:n=0}=a[t.replace("bucket_key_","")];r&&n&&(i["".concat(r,"x").concat(n)]={width:r,height:n,full_url:e.preview_url[t],aesKey:e.preview_key})}})}var c=(null===(t=e.preview_url)||void 0===t?void 0:t.bucket_key_360p)?{url:null===(r=e.preview_url)||void 0===r?void 0:r.bucket_key_360p,key:e.preview_key}:(0,s.i)(e.width,e.height);return{assetId:e.asset_id.toString(),name:e.filename,sourcePath:e.source_path,aesKey:e.preview_key,sourceUrl:e.origin_download_link,meta:e.meta?JSON.parse(e.meta):{},originUrl:n,transcode:i,md5:e.md5,cover:c,size:e.size,mime:e.mime,width:e.width,height:e.height,subType:e.subType}}),u=e.bizz_owner_id}catch(e){a.t.error("draft-api-helper parse json error",e)}return{draftTitle:r,draftCreateTime:l,draftUsedEverAsserts:i,draftAllEverAsserts:c,draftData:e.template_data,token:e.package_id,materials:e.materials,allowToEdit:e.allow_to_edit,draftOwner:u}}},131827:function(e,t,r){r.d(t,{b:function(){return i}});var i={GET_MATERIAL_LIST:"/lv/v1/asset/list",GET_MATERIALS_BY_IDS:"/lv/v1/asset/detail",COPY_ASSET:"/lv/v1/asset/copy",DELETE_MATERIALS:"/lv/v1/asset/delete",QUERY_PROCESS:"/lv/v1/asset/query_process",CREATE_ASSET:"/lv/v1/asset/create",GET_ASSET_QUERY:"/lv/v1/asset/query",LABEL_AS_EXPORTED:"/lv/v1/asset/label_as_exported",PROMOTE_ASSET:"/lv/v1/ever_photo/promote_asset",RENAME_ASSET:"/lv/v1/asset/rename"}},328631:function(e,t,r){r.d(t,{J:function(){return c}});var i=r(843698),n=r(191902),o=r(32138),a=n.V5?"metaKey":"ctrlKey",s=["INPUT","TEXTAREA","SELECT"];class c{get cmdKeyHadDown(){return this._cmdKeyHadDown}get isKeybindingDisabled(){return this._isKeybindingDisabled}getOrCreateContext(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(this._contextMap.has(e))return this._contextMap.get(e);var i=new o.b(this,e,{useCapture:t,skipCondition:this._skipCondition,tagBlacklist:r?s:[]});return this._contextMap.set(e,i),i}removeContext(e){this._contextMap.has(e.targetNode)&&this._contextMap.delete(e.targetNode)}dispose(){document.removeEventListener("keydown",this._cmdKeyDownListener,!0),document.removeEventListener("keyup",this._cmdKeyDownListener,!0),window.removeEventListener("blur",this._resetCmdKeyDownState)}disableKeybinding(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blocklist";this._whitelistOrBlocklistKeys=e,this._keysMode=t,this._isKeybindingDisabled=!0}restoreKeybinding(){this._whitelistOrBlocklistKeys=void 0,this._keysMode=void 0,this._isKeybindingDisabled=!1}constructor(){this._serviceBrand=void 0,this._contextMap=new Map,this._whitelistOrBlocklistKeys=void 0,this._keysMode=void 0,this._isKeybindingDisabled=!1,this._cmdKeyHadDown=!1,this._cmdKeyDown=new i.Q,this.onCmdKeyDown=this._cmdKeyDown.event,this._cmdKeyDownListener=e=>{!!e[a]!==this._cmdKeyHadDown&&(this._cmdKeyHadDown=!this._cmdKeyHadDown,this._cmdKeyDown.fire(this._cmdKeyHadDown))},this._resetCmdKeyDownState=()=>{this._cmdKeyHadDown=!1,this._cmdKeyDown.fire(this._cmdKeyHadDown)},this._skipCondition=(e,t)=>{var r,i,n=t+e;return this._isKeybindingDisabled&&("whitelist"===this._keysMode&&(null===(r=this._whitelistOrBlocklistKeys)||void 0===r?void 0:r.includes(n))||"blocklist"===this._keysMode&&!(null===(i=this._whitelistOrBlocklistKeys)||void 0===i?void 0:i.includes(n)))},document.addEventListener("keydown",this._cmdKeyDownListener,!0),document.addEventListener("keyup",this._cmdKeyDownListener,!0),window.addEventListener("blur",this._resetCmdKeyDownState)}}},697294:function(e,t,r){r.d(t,{B:function(){return o},x:function(){return s}});var i=r(876826),n=r(836413);function o(e,t){return a.apply(this,arguments)}function a(){return(a=(0,i._)(function*(e,t){var r=e.createInstance(t),i=yield r.getVodToken();return i.ok?(0,n.oW)(i.value.spaceName):i})).apply(this,arguments)}function s(e,t){t instanceof AbortSignal?t.aborted?e.cancel():t.addEventListener("abort",()=>{e.cancel()}):t.onCancellationRequested(()=>{e.cancel()})}},726019:function(e,t,r){r.d(t,{J:function(){return i}});var i={GET_MUSIC_COLLECTIONS:"/lv/v1/get_collections",GET_RECOMMEND_MUSIC:"/lv/v1/get_recommend_songs",GET_SOUND_EFFECT_COLLECTIONS:"/lv/v1/music/get_music_effect_collections",GET_COLLECTION_SONGS:"/lv/v1/get_collection_songs",SEARCH_SONGS:"/lv/v1/music/search/songs"}},504869:function(e,t,r){r.d(t,{x:function(){return f}});var i=r(876826),n=r(85728),o=r(789786),a=r(836413),s=r(346526),c=r(636601),l=r(643590),u=r(875649),d=r(416105),_=r(243494),v=r(119850),h=r(927457),p=r(884038),m=r(936226),g=r(813800);class f{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new l.y().build(l.D),(0,u.i3)(e),(0,d.mH)(e),(0,s.V)(e),e)}return this._networkClientInstance}getAlbumSongs(e){var t=this;return(0,i._)(function*(){var r=e instanceof _.yt?e.config:e;try{var i,o,s=yield t._networkClient.post(t._api,(0,n._)({app_id:v.kJ,region:t._capcutAccountService.userProfile.region,id:r.id},t._getTokenParams(e))),c=Number(null!==(i=s.ret)&&void 0!==i?i:0),l=null!==(o=s.errmsg)&&void 0!==o?o:"";if(0!==c)return(0,a.wf)(null!=c?c:-1,null!=l?l:"");var u=t._convertResponseToQueryToken(e,s);return(0,a.oW)(u)}catch(e){return(0,h.m)(e,-1,"getMusicAlbums api error")}})()}_getTokenParams(e){var t,r;return(0,_.ky)(e)?{offset:e.offset,count:null!==(t=e.config.limit)&&void 0!==t?t:50}:{offset:0,count:null!==(r=e.limit)&&void 0!==r?r:50}}_convertResponseToQueryToken(e,t){var r,i,n=e instanceof _.yt?e.config:e,o=null!==(i=null===(r=t.data.songs)||void 0===r?void 0:r.map(e=>(0,g.y3)(e)))&&void 0!==i?i:[],a=e instanceof _.yt?e.offset:0,s=t.data.has_more,c=a+o.length;return(0,_.ib)(n,{list:o},{hasMore:s,offset:c})}get _api(){return"".concat(c._L.getVar("web_domain")).concat(p.J.GET_COLLECTION_SONGS)}constructor(e){this._capcutAccountService=e}}f=(0,o.gn)([(0,o.fM)(0,m.Gw),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===m.Gw?Object:m.Gw])],f)},552107:function(e,t,r){r.d(t,{F:function(){return p}});var i=r(876826),n=r(789786),o=r(836413),a=r(346526),s=r(636601),c=r(643590),l=r(875649),u=r(416105),d=r(119850),_=r(927457),v=r(884038),h=r(936226);class p{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new c.y().build(c.D),(0,l.i3)(e),(0,u.mH)(e),(0,a.V)(e),e)}return this._networkClientInstance}getSoundEffectAlbums(){var e=this;return(0,i._)(function*(){try{var t,r,i=yield e._networkClient.post(e._api,{app_id:d.kJ,region:e._capcutAccountService.userProfile.region}),n=Number(null!==(t=i.ret)&&void 0!==t?t:0),a=null!==(r=i.errmsg)&&void 0!==r?r:"";if(0!==n)return(0,o.wf)(null!=n?n:-1,null!=a?a:"");var s=e._convertResponseToCollectionData(i);return(0,o.oW)(s)}catch(e){return(0,_.m)(e,-1,"getMusicAlbums api error")}})()}_convertResponseToCollectionData(e){var{data:t}=e;return{albums:t.collections.map(e=>{var t=Object.values(e.cover_url).map(e=>this._parseUrlToTranscodeInfo(e));return{id:e.id,name:e.name,coverUrl:e.cover_url.large,transcodeInfo:t}})}}_parseUrlToTranscodeInfo(e){var t,r,i=e.match(/_(\d+)x(\d+)\./);return{url:e,width:Number(null!==(t=null==i?void 0:i[1])&&void 0!==t?t:0),height:Number(null!==(r=null==i?void 0:i[2])&&void 0!==r?r:0)}}get _api(){return"".concat(s._L.getVar("web_domain")).concat(v.J.GET_SOUND_EFFECT_COLLECTIONS)}constructor(e){this._capcutAccountService=e}}p=(0,n.gn)([(0,n.fM)(0,h.Gw),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===h.Gw?Object:h.Gw])],p)},870421:function(e,t,r){r.d(t,{r:function(){return S}});var i=r(876826),n=r(85728),o=r(929753),a=r(789786),s=r(936226),c=r(636601),l=r(643590),u=r(875649),d=r(927457),_=r(836413),v=r(346526),h=r(514689),p=r(150615),m=r(969015),g=r(294202),f=r(319909),y=r(280166),b=r(589214);class S{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new l.y().build(l.D),(0,u.i3)(e),(0,v.V)(e),e)}return this._networkClientInstance}batchGetResources(e){var t=this;return(0,i._)(function*(){try{var r,i,n=t._convertBatchGetResourcesParamsToRequest(e),o=yield t._doBatchGetResource(n),a=null===(r=o.BaseResp)||void 0===r?void 0:r.StatusCode,s=null===(i=o.BaseResp)||void 0===i?void 0:i.StatusMessage;if(0!==a)return(0,_.wf)(null!=a?a:-1,null!=s?s:"");var c=t.parseEffectsToResources(o.data);return(0,_.oW)({list:c})}catch(e){return(0,d.m)(e,-1,"batchGetResourcesByIds api error")}})()}_doBatchGetResource(e){return this._networkClient.post(this._batchApi,e,{withCredentials:!0})}_convertBatchGetResourcesParamsToRequest(e){var t=this._configurationService.abTestManager.getBooleanAbTestValue(f.o.NewTransitionEffectEnabled),r=this._environmentService.isAutoTest||t?g.Nb.New:g.Nb.Old,i=(0,o._)((0,n._)({appVersion:this._environmentService.appVersion,sdkVersion:b.f4,lang:p.ZP.language,region:this._accountService.userProfile.region},e.enterFrom?{enter_from:e.enterFrom}:void 0),{list:[{type:this._configurationService.resourcePanel[this.resourceType],ids:e.ids,appVersion:this._environmentService.appVersion}],cc_web_version:r}),a=this.buildCustomRequest(e);return(0,n._)({},i,a)}buildCustomRequest(e){return{}}get _batchApi(){return"".concat(c._L.getVar("web_domain")).concat(h.bl.GET_RESOURCE_BY_ID)}constructor(e,t,r){this._accountService=e,this._configurationService=t,this._environmentService=r}}S=(0,a.gn)([(0,a.fM)(0,s.Gw),(0,a.fM)(1,m.Ui),(0,a.fM)(2,y.Y),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===s.Gw?Object:s.Gw,void 0===m.Ui?Object:m.Ui,void 0===y.Y?Object:y.Y])],S)},687550:function(e,t,r){function i(e){var{publish_web_template:t,business_template_publish:r}=e;return{publishWebTemplatePermission:t,publishBusinessTemplatePermission:r}}function n(e){return i(e.data.permission_map)}r.d(t,{P:function(){return n},n:function(){return i}})},63187:function(e,t,r){r.d(t,{c:()=>d});var i=r("876826"),n=r("789786"),o=r("643590"),a=r("416105"),s=r("875649"),c=r("442452"),l=r("689739"),u={url:"/lv/v1/upload_sign"};class d{getImageXToken(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key_version:"v5",biz:"effect_resource_v5"},t=this;return(0,i._)(function*(){var r=t._httpApiSettingService.getRequestURL({domainType:c.Y.DEFAULT,path:u.url}),i=yield t._networkClient.post(r,{key_version:e.key_version,biz:e.biz},{headers:{loc:t._httpApiSettingService.userLocationInfo.region}});return{key:i.key,sign:i.sign,accessKeyId:i.access_key_id,secretAccessKey:i.secret_access_key,sessionToken:i.session_token,expiredTime:i.expired_time,currentTime:i.current_time,spaceName:i.space_name}})()}constructor(e){var t;this._httpApiSettingService=e,this._networkClient=(t=new o.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,a.mH)(t),(0,s.e_)(t),t)}}(0,n.gn)([(0,l.K)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof GetImageXTokenOptions?Object:GetImageXTokenOptions]),(0,n.w6)("design:returntype",Promise)],d.prototype,"getImageXToken",null),d=(0,n.gn)([(0,n.fM)(0,c.x),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===c.x?Object:c.x])],d)},804883:function(e,t,r){r.d(t,{b:function(){return i}});var i={SUBMIT_ARTWORK:"/competition/v1/submit_artwork",PREVIEW_VIDEO:"/competition/v1/preview_video"}},329220:function(e,t,r){r.d(t,{S:function(){return s}});var i=r(789786),n=r(874800),o=r(930578),a=r(719800);class s extends n.JT{fetchActionTemplates(){return this._actionTemplateRepository.getResources({})}constructor(e){super(),this._actionTemplateRepository=e.createInstance(o.s)}}s=(0,i.gn)([(0,i.fM)(0,a.T),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===a.T?Object:a.T])],s)},282148:function(e,t,r){r.d(t,{b:function(){return i},l:function(){return n}});var i={CAMPAIGN_DETAIL:"/invite_fission/portal",CLAIM_REWARD:"/invite_fission/dreamina_creator/claim_reward",FISSION_DETAIL:"/invite_fission/dreamina_creator/landing_page",RESUME_INVITE_CODE:"/invite_fission/invite",COMMON_RESOURCE:"/dreamina/web/resource"},n={cn:"/luckycat/cn/jianying/campaign/v1",oversea:"/luckycat/i18n/capcut/campaign/v1"}},282473:function(e,t,r){r.d(t,{f:function(){return a},j:function(){return o}});var i,n,o=((i={})[i.DreaminaImage=1]="DreaminaImage",i);var a=((n={})[n.notInvited=0]="notInvited",n[n.invited=1]="invited",n)},829509:function(e,t,r){r.d(t,{B:()=>f});var i=r("789786"),n=r("876826"),o=r("836413"),a=r("346526"),s=r("643590"),c=r("416105"),l=r("875649"),u=r("820266"),d=r("927457"),_=r("494050"),v=r("442452"),h=r("490165"),p=r("879976");class m{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,p.V)(e),(0,c.mH)(e),(0,l.i3)(e),(0,a.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:v.Y.DEFAULT,path:e})}getUserStoryList(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(_.b.GET_STORY_LIST),e);if("0"!==r.ret)return(0,o.wf)(Number(r.ret),r.errmsg);return(0,o.oW)((0,u.b)(r.data))}catch(e){return(0,d.m)(e,-1,"get user story error")}})()}createStory(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(_.b.CREATE_STORY),(0,u.X)(e));if("0"!==r.ret)return(0,o.wf)(Number(r.ret),r.errmsg);return(0,o.oW)((0,u.b)(r.data))}catch(e){return(0,d.m)(e,-1,"create user story error")}})()}updateStory(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(_.b.UPDATE_STORY),(0,u.X)(e));if("0"!==r.ret)return(0,o.wf)(Number(r.ret),r.errmsg);return(0,o.ly)()}catch(e){return(0,d.m)(e,-1,"create user story error")}})()}deleteStory(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(_.b.DELETE_STORY),(0,u.X)(e));if("0"!==r.ret)return(0,o.wf)(Number(r.ret),r.errmsg);return(0,o.ly)()}catch(e){return(0,d.m)(e,-1,"create user story error")}})()}getStoryByIds(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(_.b.GET_STORY_BY_ID),(0,u.X)(e));if("0"!==r.ret)return(0,o.wf)(Number(r.ret),r.errmsg);return(0,o.oW)((0,u.b)(r.data))}catch(e){return(0,d.m)(e,-1,"create user story error")}})()}constructor(e,t){this._httpApiSettingService=e,this._accountService=t}}m=(0,i.gn)([(0,i.fM)(0,v.x),(0,i.fM)(1,h.D),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===v.x?Object:v.x,void 0===h.D?Object:h.D])],m);var g=r("719800");class f{getUserStoryList(e){return this._dreaminaStoryAssetRepository.getUserStoryList(e)}createStory(e){return this._dreaminaStoryAssetRepository.createStory(e)}updateStory(e){return this._dreaminaStoryAssetRepository.updateStory(e)}deleteStory(e){return this._dreaminaStoryAssetRepository.deleteStory(e)}getStoryByIds(e){return this._dreaminaStoryAssetRepository.getStoryByIds(e)}updateStoryById(e){return this._dreaminaStoryAssetRepository.updateStory(e)}constructor(e){this._instantiationService=e,this._dreaminaStoryAssetRepository=this._instantiationService.createInstance(m)}}f=(0,i.gn)([(0,i.fM)(0,g.T),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===g.T?Object:g.T])],f)},480451:function(e,t,r){r.d(t,{e:function(){return v}});var i=r(876826),n=r(789786),o=r(836413),a=r(346526),s=r(643590),c=r(875649),l=r(927457),u=r(942696),d=r(442452),_=r(280166);class v{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new s.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,c.i3)(t),(0,a.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:d.Y.DEFAULT,path:e})}getShortLink(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(u.b.GET_SHORT_LINK_FOR_WORK),{campaign_key:"jimeng_web_share",category:"share",resource_gen_data:{long_to_short_url:e.long_url},extra:"",item_id:""});if(0!==r.err_no)return(0,o.wf)(r.err_no,r.err_tips);return(0,o.oW)({short_url:r.data.resource_data.long_to_short_url})}catch(e){return(0,l.m)(e,-1,"get short link error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}v=(0,n.gn)([(0,n.fM)(0,d.x),(0,n.fM)(1,_.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===d.x?Object:d.x,void 0===_.Y?Object:_.Y])],v)},653428:function(e,t,r){r.d(t,{C:function(){return a}});var i=r(789786),n=r(434712),o=r(66176);class a{transferAiPhoto(e){return this._transferAiMaterialsRepository.transferAiPhoto(e)}constructor(e){this._containerService=e,this._transferAiMaterialsRepository=this._containerService.createInstance(o.i)}}a=(0,i.gn)([(0,i.fM)(0,n.t),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===n.t?Object:n.t])],a)},779395:function(e,t,r){r.d(t,{Y:function(){return S}});var i=r(876826),n=r(85728),o=r(929753),a=r(789786),s=r(836413),c=r(346526),l=r(643590),u=r(904337),d=r(416105),_=r(875649),v=r(820266),h=r(804274),p=r(927457),m=r(660149),g=r(280166),f=r(442452),y=r(535823),b=r(879976);class S{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new l.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,b.V)(e),(0,u.$)(e),(0,d.mH)(e),(0,_.i3)(e),(0,c.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:f.Y.DEFAULT,path:e})}submitTask(e,t){var r=this;return(0,i._)(function*(){try{var i=r._environmentService.appId,a=(0,v.X)(e),c=yield r._networkClient.post(r._getApi(m.b.GENERATE_VIDEO),(0,o._)((0,n._)({},a),{http_common_info:{aid:i}}),{params:(0,n._)({aid:i},t)}),l=(0,y.ZF)((0,v.b)(c.data.aigc_data,h.zW));return l.generateId=c.logid,(0,s.oW)(l)}catch(e){return(0,p.P)(e)}})()}queryTask(e){var t=this;return(0,i._)(function*(){try{var r=(0,v.X)(e),i=yield t._networkClient.post(t._getApi(m.b.QUERY_TASK_BY_HISTORY_ID),r),n={};return Object.keys(i.data).forEach(e=>{var t=i.data[e];if(!!t)n[e]=(0,y.ZF)((0,v.b)(t,h.zW))}),(0,s.oW)({taskMap:n,logId:i.logid})}catch(e){return(0,p.P)(e)}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}S=(0,a.gn)([(0,a.fM)(0,f.x),(0,a.fM)(1,g.Y),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===f.x?Object:f.x,void 0===g.Y?Object:g.Y])],S)},209020:function(e,t,r){r.d(t,{Z:function(){return w}});var i=r(876826),n=r(85728),o=r(929753),a=r(295834),s=r(789786),c=r(836413),l=r(346526),u=r(643590),d=r(904337),_=r(416105),v=r(875649),h=r(820266),p=r(804274),m=r(927457),g=r(442452),f=r(660149),y=r(535823),b=r(879976),S=r(869919);class w{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new u.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,b.V)(e),(0,d.$)(e),(0,_.mH)(e),(0,v.i3)(e),(0,l.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:g.Y.DEFAULT,path:e})}submitVideoBGMTask(e,t){var r=this;return(0,i._)(function*(){try{var i=(0,n._)({scene:S.zk.BGM},e),o=yield r._networkClient.post(r._getApi(f.b.VIDEO_BGM_TASK_SUBMIT),r._formatSubmitParams(i),{params:(0,n._)({},t)});if("0"!==o.ret)return(0,c.wf)(Number(o.ret),o.errmsg);return(0,c.oW)((0,y.ZF)((0,h.b)(o.data,p.zW)))}catch(e){return(0,m.P)(e)}})()}mixAudioVideoTask(e,t){var r=this;return(0,i._)(function*(){try{var i=yield r._networkClient.post(r._getApi(f.b.MIX_AUDIO_VIDEO_TASK),(0,h.X)(e),{params:(0,n._)({},t)});if("0"!==i.ret)return(0,c.wf)(Number(i.ret),i.errmsg);return(0,c.oW)((0,y.ZF)((0,h.b)(i.data,p.zW)))}catch(e){return(0,m.P)(e)}})()}batchMixAudioVideoTask(e,t){var r=this;return(0,i._)(function*(){try{var i=yield r._networkClient.post(r._getApi(f.b.BATCH_MIX_AUDIO_VIDEO_TASK),(0,h.X)(e),{params:(0,n._)({},t)});if("0"!==i.ret)return(0,c.wf)(Number(i.ret),i.errmsg);var o=(0,h.b)(i.data,p.zW),a=Object.keys(o.resultMap),s={};return a.forEach(e=>{o.resultMap[e]&&(s[e]=(0,y.ZF)(o.resultMap[e]))}),(0,c.oW)({resultMap:s,submitResultMap:o.submitResultMap})}catch(e){return(0,m.P)(e)}})()}updateVideoDefaultBGM(e){var t=this;return(0,i._)(function*(){try{var r=(0,n._)({scene:S.zk.BGM},e),i=yield t._networkClient.post(t._getApi(f.b.UPDATE_VIDEO_DEFAULT_BGM),(0,h.X)(r));if("0"!==i.ret)return(0,c.wf)(Number(i.ret),i.errmsg);return(0,c.ly)()}catch(e){return(0,m.P)(e)}})()}_formatSubmitParams(e){var{v2vOpt:t}=e,r=(0,a._)(e,["v2vOpt"]);return(0,o._)((0,n._)({},(0,h.X)(r)),{v2v_opt:t?(0,h.X)(t):void 0})}constructor(e){this._httpApiSettingService=e}}w=(0,s.gn)([(0,s.fM)(0,g.x),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===g.x?Object:g.x])],w)},484876:function(e,t,r){r.d(t,{r:function(){return i}});var i=[{width:288,height:288},{width:360,height:360},{width:720,height:720},{width:1080,height:1080}]},675401:function(e,t,r){r.d(t,{O:()=>h});var i=r("789786"),n=r("719800"),o=r("874800"),a=r("876826"),s=r("643590"),c=r("875649"),l=r("416105"),u=r("927457"),d=r("836413"),_=r("442451");class v{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.y().build(s.D),(0,c.i3)(e),(0,l.mH)(e),e)}return this._networkClientInstance}getUserProfile(e){var t=this;return(0,a._)(function*(){try{var r,i,n=yield t._networkClient.post(t._api,{uid:e.uid,need_grade:!1}),o=Number(null!==(r=n.ret)&&void 0!==r?r:0),a=null!==(i=n.errmsg)&&void 0!==i?i:"";if(0!==o)return(0,d.wf)(null!=o?o:-1,null!=a?a:"");var s=t._convertResponseToUserData(n);return(0,d.oW)(s)}catch(e){return(0,u.m)(e,-1,"getUserProfile api error")}})()}_convertResponseToUserData(e){var{data:t}=e;return{useId:t.user.user_id,nickName:t.user.nick_name,career:t.user.career,avatarUrl:{large:t.user.avatar_urls.avatar_url_large,medium:t.user.avatar_urls.avatar_url_medium,small:t.user.avatar_urls.avatar_url_small}}}get _api(){return _.g.BASE_URL+_.R.GET_USER_PROFILE}}class h extends o.JT{getUserProfile(e){return this._getUserProfileRepository.getUserProfile(e)}constructor(e){super(),this._instantiationService=e,this._serviceBrand=void 0,this._getUserProfileRepository=e.createInstance(v)}}h=(0,i.gn)([(0,i.fM)(0,n.T),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===n.T?Object:n.T])],h)},684452:function(e,t,r){r.d(t,{A:function(){return l}});var i=r(789786),n=r(936226),o=r(721434),a=r(897727),s=r(878891),c=r(280166);class l extends s.k{get resourceType(){return a.g.Video}parseHeycanResponseDataToResources(e){return(0,o.Mk)(e)}buildCustomRequest(){return{loki_optional:{app_version:this._environmentService.appVersion,device_platform:"web"},pack_optional:{need_thumb:!0}}}constructor(e={},t,r){super(e,t),this._environmentService=r}}l=(0,i.gn)([(0,i.fM)(1,n.Gw),(0,i.fM)(2,c.Y),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof ICollectionResourcesRepositoryParam?Object:ICollectionResourcesRepositoryParam,void 0===n.Gw?Object:n.Gw,void 0===c.Y?Object:c.Y])],l)},322289:function(e,t,r){r.d(t,{O:function(){return o}});var i=r(85728);class n{build(){return this._contextParams}constructor(e){this._contextParams=e}}class o{reportBusinessEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,i._)({},this._contextParamsBuilder.build(),t);this._reportService.reportBusinessEvent(e,n,r)}reportBusinessEventByServer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._reportService.reportBusinessEventByServer(e,t)}reportBusinessExitEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,i._)({},this._contextParamsBuilder.build(),t);this._reportService.reportBusinessExitEvent(e,n,r)}reportDevEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,i._)({},this._contextParamsBuilder.build(),t);this._reportService.reportDevEvent(e,r)}reportDevError(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};Object.entries(this._contextParamsBuilder.build()).forEach(e=>{var[t,r]=e;i[t]=String(r)}),Object.entries(r).forEach(e=>{var[t,r]=e;i[t]=r}),this._reportService.reportDevError(e,t,i)}constructor(e,t){this._reportService=t,e.build&&"function"==typeof e.build?this._contextParamsBuilder=e:this._contextParamsBuilder=new n(e)}}}}]);