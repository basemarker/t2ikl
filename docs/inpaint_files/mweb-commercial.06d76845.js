"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["7570"],{847299:function(e,r,t){t.r(r),t.d(r,{CommerceInfo:()=>en});var n=t("772322"),i=t("218571"),a=t("733437"),s=t("217448"),o=t("16839"),c=t("529531"),d=t("799108"),l=t("522692"),u=t("66003"),p=t("293793"),v=t("52533"),m=t("150615"),_=t("196451"),g=t("405013"),h=t("487736"),y=t("71129"),f=t("434712"),P=t("671235"),x=t("44938"),C=t("246940"),b=e=>{var{shouldShowPopup:r,show:t}=e,n=(0,p.default)(t);(0,i.useEffect)(()=>{if(!!r){var e=x.u.vipExpiryTooltipShowedTime,t=Number(C.T.getItem(e)),i=t&&!isNaN(t)?new Date(t):void 0,a=Date.now(),s=new Date(a),o=Math.abs(a-t)/1e3/3600;((0,v.Z)(i)||s.getDate()!==(null==i?void 0:i.getDate())||o>24)&&(n(),C.T.setItem(e,a.toString()))}},[])},I=t("839141"),w=t("49176"),k={container:"container-wXlJx3",icon:"icon-pFC9E5",vipText:"vipText-rVOAYv",topLevel:"topLevel-ssqJxr"};function j(e){var r,{isVip:t,level:i,onClick:a}=e,s=e=>!!e&&[I.d.Standard,I.d.Artisan,I.d.Maestro].includes(e);return(0,n.jsxs)("div",{className:k.container,onClick:()=>{null==a||a()},children:[t?(0,n.jsx)(w.Z,{className:k.icon,size:16,level:i}):null,(r=(0,d.sG)({level:i}),t&&s(i)?(0,n.jsx)("div",{className:"".concat(k.vipText," ").concat(i===I.d.Maestro?k.topLevel:""),children:r}):(0,n.jsx)("div",{className:k.vipText,children:m.ZP.t("dre_m10n_upgrade_for_credits_btn",{},"Upgrade to get credits")}))]})}var O={renewalBtn:"renewalBtn-aqKgkw",timeoutTooltips:"timeoutTooltips-FU25qV",infoTooltips:"infoTooltips-N5hApU",vipTagWrapper:"vipTagWrapper-zEGjje"},S=t("231194"),A=t("603026"),N=t("70137"),R=e=>{var r,t,{reportStatus:l,tooltipZIndex:x}=e,C=(0,c.p)(),I=(0,u.G)(f.t),w=(0,u.G)(A.K),k=(0,u.G)(s.q),R=(0,i.useRef)(null),M=(0,i.useRef)(null),{isVip:V,vipInfo:E,currentVipLevel:L}=null!==(r=(0,a.k)(k,e=>({isVip:e.isVip,vipInfo:e.vipInfo,currentVipLevel:e.currentVipLevel})))&&void 0!==r?r:{},D=(0,i.useRef)(E),Z=(0,u.G)(N.aG),{receiveCreditResult:B}=null!==(t=(0,a.k)(Z,e=>({receiveCreditResult:e.creditReceiveManager.receiveCreditResult})))&&void 0!==t?t:{},U=()=>{(0,_.U)({containerService:I,reportParam:{source:y.s.CLICK_TOP_ACCOUNT_BUTTON_JOIN_VIP}})},G=()=>{(0,_.U)({containerService:I,reportParam:{source:y.s.CLICK_TOP_ACCOUNT_BUBBLE_RENEW_VIP}})},F=(0,i.useMemo)(()=>{var{endTime:e=0}=null!=E?E:{},r=Math.ceil((e-Math.floor(new Date().getTime()/1e3))/d.Nf);return r>0?r:void 0},[E]),W=(0,i.useMemo)(()=>{var{endTime:e=0,currentAutoRenewPlan:r,curVipLevel:t}=null!=E?E:{},i=Math.floor(new Date().getTime()/1e3),a=V&&e&&e>i,s=(0,g.vc)("yyyy-MM-dd hh:mm",1e3*e);if(!V||i>e)return 0===e?m.ZP.t("dre_m10n_not_pro_member",{},"You haven't subscribed yet"):m.ZP.t("dre_m10n_sub_expired_desc",{date:s},"Your subscription has expired on {date}. ");if(r&&r.level===t)return m.ZP.t("dre_m10n_upgrade_plans_auto_renew_toast",{string0:(0,g.vc)("yyyy-MM-dd hh:mm",1e3*r.nextRenewalTime)},"Renews on {string0} ");if(a)return(0,n.jsx)(n.Fragment,{children:m.ZP.t("dre_m10n_sub_expire_date_renew",{date:s,strong0:e=>(0,n.jsx)("span",{className:O.renewalBtn,onClick:G,children:e},e),renew:m.ZP.t("dre_m10n_sub_expire_date_renew_placeholder",{},"Renew")},"Your subscription will expire on {date}. <strong0>{renew}</strong0>")})},[E,V]);b({shouldShowPopup:(0,i.useMemo)(()=>{if(!F||F>5||!(null==B?void 0:B.ok))return!1;var{isFirstReceive:e,hasPopup:r}=B.value;return!e&&r},[B,F]),show:()=>{if(W){var e;null===(e=R.current)||void 0===e||e.show(W,3e3)}}});var Y=(0,p.default)(e=>{var r,{endTime:t,flag:n,curVipLevel:i}=null!=e?e:{},{endTime:a,flag:s,curVipLevel:o}=null!==(u=D.current)&&void 0!==u?u:{},c=t&&a&&t>a,l=i&&o!==i;if(!s&&n)null===(p=M.current)||void 0===p||p.show(m.ZP.t("dre_m10n_subscribed_credits",{},"Subscribed to 1-month plan"),3e3);else if(c&&l){var u,p,v,_,g,h,{vipPriceList:y}=w,f=y.find(e=>e.level===i);null===(g=M.current)||void 0===g||g.show(m.ZP.t("dre_m10n_upgrade_for_credits_toast",{string0:(0,d.sG)({level:i}),number0:null!==(h=null==f?void 0:null===(_=f.vipBenefitPackage)||void 0===_?void 0:null===(v=_.userCredit)||void 0===v?void 0:v.amount)&&void 0!==h?h:""},"You\u2019ve upgraded to {string0} and got {number0} subscription credits"),3e3)}else c&&(null===(r=M.current)||void 0===r||r.show(m.ZP.t("dre_m10n_renew_credits",{},"Renewed to 1-month plan"),6e3));D.current=e});return(0,i.useEffect)(()=>{var e=null==k?void 0:k.onVipInfoChange(Y);return()=>{null==e||e.dispose()}},[Y,k]),(0,i.useEffect)(()=>{(0,o._)(I,{name:o.Qy.Vip,action:o.xg.Show,status:l,creditNow:C})},[]),(0,n.jsx)(S.i,{waitingContextViewIds:[h.M.VIP_MODAL,h.M.CREDIT_MODAL,h.M.NoviceQuestionnaire],style:{zIndex:null!=x?x:1e3},ref:M,children:(0,n.jsx)(S.i,{waitingContextViewIds:[h.M.VIP_MODAL,h.M.CREDIT_MODAL,h.M.NoviceQuestionnaire],style:{zIndex:null!=x?x:1e3},ref:R,className:O.timeoutTooltips,children:(0,n.jsx)(P.b,{trigger:"hover",content:W,disabled:(0,v.Z)(W),className:O.infoTooltips,style:{zIndex:null!=x?x:1e3},children:(0,n.jsx)("div",{className:O.vipTagWrapper,onClick:()=>{null==U||U(),(0,o._)(I,{name:o.Qy.Vip,action:o.xg.Click,status:l,creditNow:C})},children:(0,n.jsx)(j,{isVip:V,level:L})})})})})},M=t("85728"),V=t("889715"),E=t("834634"),L=t("381417"),D=t("986831");t("972297");var Z=t("746022"),B=t("2910"),U="firstTimePopover-kzcghf",G="text-slai40",F="link-OEpZDQ",W="creditWrapper-YzuJJd",Y="creditContainer-rcdk1f",K="icon-uJebbB",z="credit-LTYPt_",J="creditPlus-f8mjcI",H=t("259435"),Q=t("932616"),q=(0,i.forwardRef)((e,r)=>{var{children:t}=e,[a,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)(100),l=(0,u.G)(f.t),p=(0,Q.h)(),v=(0,i.useMemo)(()=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:G,children:m.ZP.t("dre_m10n_daily_credits_desc",{number0:o,number1:d.CU,learn_more:(0,n.jsx)("a",{href:(0,B.C)(p,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),target:"_blank",rel:"noreferrer",className:F,children:m.ZP.t("dre_m10n_daily_credits_desc_more",{},"Learn more")})},"You can get {number0} credits for free on Dreamina every day. They are valid for {number1} hours. {learn_more}")}),(0,n.jsx)("div",{className:W,children:(0,n.jsxs)("div",{className:Y,children:[(0,n.jsx)("span",{className:K,children:(0,n.jsx)(V.YzG,{})}),(0,n.jsx)("span",{className:J,children:"+"}),(0,n.jsx)("span",{className:z,children:o})]})})]}),[p,o]),_=(0,i.useCallback)(e=>{c(e),s(!0)},[]),g=(0,i.useCallback)(e=>{var r=(0,H.X)(l,h.M.NoviceQuestionnaire);r?r.onUnmount(()=>{_(e)}):_(e)},[]);return(0,i.useImperativeHandle)(r,()=>({show:g})),(0,n.jsx)(Z.Z,{title:m.ZP.t("dre_m10n_daily_credits_title",{},"Claim daily free credits"),className:U,popupVisible:a,showArrow:!0,content:v,trigger:"click",onVisibleChange:e=>{!e&&s(!1)},triggerProps:{popupAlign:{bottom:[-48,4]},getDocument:()=>document.querySelector(".global-mweb-container")},children:t})}),X={creditWrapper:"creditWrapper-ah2ugk",credit:"credit-PT69uS",creditIcon:"creditIcon-XET1gx",creditText:"creditText-ycuY4N",expiringTooltipContentNum:"expiringTooltipContentNum-E1AqYr"},$=t("914026"),ee=t("292406"),er=e=>{var r,{reportStatus:t,tooltipZIndex:s}=e,v=(0,c.p)(),_=(0,u.G)(f.t),g=(0,u.G)(N.aG),y=(0,i.useRef)(null),x=(0,i.useRef)(null),C=(0,l.Z)(),b=(0,i.useMemo)(()=>({creditNow:v,status:t}),[t,v]),{expiringCreditInfoList:I,isFirstReceived:w,creditsDetailArr:k,receiveCreditResult:j,hasShow:O}=null!==(r=(0,a.k)(g,e=>{var r;return{expiringCreditInfoList:e.expiringCreditInfoList,isFirstReceived:e.isFirstReceived,receiveCreditResult:e.creditReceiveManager.receiveCreditResult,hasShow:e.creditReceiveManager.hasShow,creditsDetailArr:(0,ee.Z)(Object.values(null!==(r=e.creditsDetail)&&void 0!==r?r:{})).map(e=>({expireTime:e.creditsLifeEnd,creditAmount:e.residualCredits}))}}))&&void 0!==r?r:{},A=(0,i.useMemo)(()=>{var e,r=Math.floor(new Date().getTime()/1e3),t=(null==I?void 0:I.length)?I:k,n=null!==(e=null==t?void 0:t.reduce((e,t)=>{var{expireTime:n,creditAmount:i}=t,a=n-r<3600*d.CU;return n>r&&a?i+e:e},0))&&void 0!==e?e:0;return Math.min(isNaN(n)?0:n,v)},[I,v,k]),R=(0,i.useMemo)(()=>(0,n.jsxs)("div",{className:X.expiringTooltipContent,children:[m.ZP.t("dre_m10n_daily_credits_expire",{strong1:e=>e,num1:(0,n.jsx)("span",{style:{padding:"0px 2px"},className:X.expiringTooltipContentNum,children:A}),num:(0,n.jsx)("span",{style:{padding:"0px 2px"},className:X.expiringTooltipContentNum,children:A})},"{num} credits will expire"),m.ZP.t("dre_m10n_daily_credits_expire_hour",{num:(0,n.jsx)("span",{style:{padding:"0px 2px"},children:d.CU})},"in {num} hours")]}),[A]),Z=(0,p.default)((e,r,t,n,i)=>{var a,s,o;if(!(Date.now()/1e3-i.createTime>180))e===D.h.ADD&&r===E.v.DAILY_ISSUED&&w?null===(a=x.current)||void 0===a||a.show(t):e===D.h.ADD&&r===E.v.DAILY_ISSUED?null===(s=y.current)||void 0===s||s.show(m.ZP.t("dre_m10n_daily_credits_toast",{num:t},"You\u2019ve got {num} daily free credits"),3e3):e===D.h.ADD&&r===E.v.ONEOFF_PURCHASE?null===(o=y.current)||void 0===o||o.show(m.ZP.t("dre_m10n_purchase_credits_toast",{num:t},"Purchased {num} credits"),3e3):r===E.v.VIP_ISSUED&&(0,$.R)(_,!0)}),{creditReceiveManager:B}=g;return(0,i.useEffect)(()=>{if(!!j&&!C){if(j.ok&&!O){var e,r,{isFirstReceive:t,hasPopup:n,receiveQuota:i}=j.value;t?(B.setHasShow(),null===(e=x.current)||void 0===e||e.show(i)):!n&&(B.setHasShow(),null===(r=y.current)||void 0===r||r.show(m.ZP.t("dre_m10n_daily_credits_toast",{num:i},"You\u2019ve got {num} daily free credits"),3e3))}}},[j]),(0,i.useEffect)(()=>{if(!C){var e=null==g?void 0:g.onLocalCreditChange(Z);return()=>{null==e||e.dispose()}}},[g,Z,C]),(0,i.useEffect)(()=>{(0,o._)(_,(0,M._)({name:o.Qy.Credit,action:o.xg.Show},b))},[]),(0,n.jsx)(S.i,{waitingContextViewIds:[h.M.VIP_MODAL,h.M.CREDIT_MODAL,h.M.NoviceQuestionnaire],ref:y,style:{zIndex:null!=s?s:1e3},children:(0,n.jsx)(q,{ref:x,children:(0,n.jsx)(P.b,{style:{zIndex:null!=s?s:1e3},content:R,trigger:"hover",disabled:A<=0,children:(0,n.jsx)("div",{className:X.creditWrapper,onClick:()=>{(0,L.Hp)({containerService:_}),(0,o._)(_,(0,M._)({name:o.Qy.Credit,action:o.xg.Click},b))},children:(0,n.jsxs)("div",{className:X.credit,children:[(0,n.jsx)(V.xUc,{className:X.creditIcon}),(0,n.jsx)("span",{className:X.creditText,children:null!=v?v:0})]})})})})})},et={creditWrapper:"creditWrapper-J_e3sK",divider:"divider-CsKMLZ"},en=e=>{var r,{tooltipZIndex:t,supportSmallScreen:p}=e,v=(0,c.p)(),m=(0,u.G)(s.q),_=(0,l.Z)(),{isVip:g,isVipReady:h}=null!==(r=(0,a.k)(m,e=>({isVip:e.isVip,isVipReady:e.isVipReady})))&&void 0!==r?r:{},y=(0,i.useMemo)(()=>g?v<d.cf?o.r7.ToAddCredits:o.r7.EnoughCredits:o.r7.ToJoinVIP,[g,v]);return h||_?(0,n.jsxs)("div",{style:{pointerEvents:_?"none":"all"},className:et.creditWrapper,children:[(0,n.jsx)(er,{tooltipZIndex:t,reportStatus:y}),!_&&!p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:et.divider}),(0,n.jsx)(R,{tooltipZIndex:t,reportStatus:y})]})]}):null}},340471:function(e,r,t){t.d(r,{Q:()=>q});var n,i=t("772322");t("395248");var a=t("423342"),s={closeBtn:"closeBtn-SBGJLs",changePlanModal:"changePlanModal-oh7pNo",container:"container-eHLMeQ",desc:"desc-L7tYE6",changeDetails:"changeDetails-QqAn57",changeBtn:"changeBtn-by6YBi",autoRenewDesc:"autoRenewDesc-cwvVm_",changeItem:"changeItem-LVCL2Z",changeTitle:"changeTitle-u0Bnzl",changePlanContainer:"changePlanContainer-feoEuG",changePlanText:"changePlanText-gQZtIe",changePlanPriceContainer:"changePlanPriceContainer-bWei8l",changePlanPrice:"changePlanPrice-hTDTZ4",changePlanDesc:"changePlanDesc-dPOnvI",splitLine:"splitLine-AvO3dE",getCredits:"getCredits-zXi3rp",linkText:"linkText-clSkBd"},o=t("889715"),c=t("876826"),d=t("218571"),l=t("434712"),u=t("304483"),p=t("839141"),v=t("804362"),m=t("909854"),_=t.n(m),g=t("41723"),h=t.n(g),y=t("66003"),f=t("52507"),P=t("582152"),x=t("150615"),C=e=>{var{onClick:r}=e,t=(0,y.G)(l.t);return(0,i.jsxs)("div",{className:s.getCredits,children:[x.ZP.t("dre_m10n_subscription_page_change_plan_get_credits",{},"Do you want to get more credits only? "),(0,i.jsxs)("span",{style:{paddingLeft:"5px"},onClick:()=>{(0,f.s)({containerService:t,reportParam:{source:P.wE.SUBSCRIBE_PLAN_CHANGE_POPUP}}),null==r||r()},children:[x.ZP.t("dre_m10n_subscription_page_change_plan_get_credits_button",{},"Buy credits now")," "]})]})},b=t("799108"),I=t("652494"),w=e=>{var{text:r}=e;return(0,i.jsx)("span",{style:{padding:"0px 2px",fontWeight:550},children:r})};var k=((n={}).RenewUpgrade="RenewUpgrade",n.RenewDiscountUpgrade="RenewDiscountUpgrade",n.RenewLateral="RenewLateral",n.RenewDowngrade="RenewDowngrade",n.CancelRenew="CancelRenew",n.UpgradeOneOff="UpgradeOneOff",n.LateralOneOff="LateralOneOff",n.DownGradeOneOff="DownGradeOneOff",n),j=e=>{var r,{vipInfo:t,productList:n,toProductId:i}=e,a=n.find(e=>e.productId===i),{currentAutoRenewPlan:s}=t,{cycleUnit:o,level:c=p.d.None}=null!=s?s:{};if(!a)return"CancelRenew";if("un-auto"===a.priceType)switch(a.changeType){case v.N.UPGRADE:break;case v.N.DOWNGRADE:return"DownGradeOneOff";case v.N.LATERAL:return"LateralOneOff"}else{if(c&&b.KV[c]<b.KV[a.level]&&!(null===(r=t.autoRenewPlans)||void 0===r?void 0:r.find(e=>e.level===t.curVipLevel)))return"YEAR"===o?"RenewDiscountUpgrade":"RenewUpgrade";switch(a.changeType){case v.N.UPGRADE:if("YEAR"===o)return"RenewDiscountUpgrade";return"RenewUpgrade";case v.N.DOWNGRADE:return"RenewDowngrade";case v.N.LATERAL:return"RenewLateral"}}return"UpgradeOneOff"},O=(e,r)=>"CancelRenew"===e?x.ZP.t("dre_m10n_subscription_page_change_plan_popup_title2",{},"Cancel renew"):e.includes("Renew")?x.ZP.t("dre_m10n_subscription_page_change_plan_popup_title1",{},"Renew update"):x.ZP.t("dre_m10n_subscription_page_change_plan_popup_title3",{string0:(0,b.sG)({level:r})},"Purchase {string0} for 1 month"),S=e=>{var{level:r,cycleUnit:t,isOneoff:n}=e,i=(0,b.sG)({level:r}),a=(0,b.d8)(t,n);return"".concat(i,"-").concat(a)},A=(e,r)=>{var t,n,a,o,c,d,l,u,p,v,m,_,g,{preCreateRes:y,vipInfo:f,productList:P,toProductId:C}=e,b=!!(null==f?void 0:f.currentAutoRenewPlan)&&(null==f?void 0:null===(t=f.currentAutoRenewPlan)||void 0===t?void 0:t.level)===f.curVipLevel,k=P.find(e=>e.productId===C),{level:O,cycleUnit:A}=null!=k?k:{},N=j(e),R=e=>h()(1e3*e).format("YYYY-MM-DD HH:mm");switch(N){case"RenewUpgrade":case"RenewDiscountUpgrade":return(0,i.jsxs)("div",{children:[x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key1",{string0:(0,i.jsx)(w,{text:S({level:O,cycleUnit:A})}),string1:(0,i.jsx)(w,{text:R(null!==(a=null==y?void 0:null===(n=y.obtainedVipInfo)||void 0===n?void 0:n.curLevelEndTime)&&void 0!==a?a:0)})},"Your new {string0} subscription will start now. Credits left from the previous subscription will stay valid until {string1}. You can use the remaining subscription days after the new subscription ends."),!r&&(0,i.jsx)("a",{style:{marginLeft:"4px"},href:I.y.COMMERCIAL_AGREEMENT(!1),target:"_blank",rel:"noreferrer",className:s.linkText,children:x.ZP.t("dre_m10n_subscription_page_view_sub_rules",{},"View subscription rules")})]});case"RenewDowngrade":case"RenewLateral":return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key2",{string0:(0,i.jsx)(w,{text:S({level:O,cycleUnit:A})}),string1:(0,i.jsx)(w,{text:R(null!==(c=null==y?void 0:null===(o=y.upcomingVipInfo)||void 0===o?void 0:o.newProductBeginTime)&&void 0!==c?c:0)})},"Your new {string0} subscription will start on {string1}.");case"CancelRenew":return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key3",{string0:(0,i.jsx)(w,{text:R(null!==(l=null==y?void 0:null===(d=y.obtainedVipInfo)||void 0===d?void 0:d.autoRenewEndTime)&&void 0!==l?l:0)})},"Your subscription will end on {string0}.");case"UpgradeOneOff":return(0,i.jsxs)("div",{children:[x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key1",{string0:(0,i.jsx)(w,{text:S({level:O,cycleUnit:A,isOneoff:!0})}),string1:(0,i.jsx)(w,{text:R(null!==(p=null==y?void 0:null===(u=y.obtainedVipInfo)||void 0===u?void 0:u.curLevelEndTime)&&void 0!==p?p:0)})},"Your new {string0} subscription will start now. Credits left from the previous subscription will stay valid until {string1}. You can use the remaining subscription days after the new subscription ends."),!r&&(0,i.jsx)("a",{style:{marginLeft:"4px"},href:I.y.COMMERCIAL_AGREEMENT(!1),target:"_blank",rel:"noreferrer",className:s.linkText,children:x.ZP.t("dre_m10n_subscription_page_view_sub_rules",{},"View subscription rules")})]});case"LateralOneOff":if(b)return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key5",{},"Your new subscription will take effect after your current subscription ends.");return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key6",{string0:(0,i.jsx)(w,{text:S({level:O,cycleUnit:A,isOneoff:!0})}),string1:(0,i.jsx)(w,{text:R(null!==(m=null==y?void 0:null===(v=y.upcomingVipInfo)||void 0===v?void 0:v.newOneoffEndTime)&&void 0!==m?m:0)})},"Your {string0} subscription will be extended to {string1}.");case"DownGradeOneOff":if(b)return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key5",{},"Your new subscription will take effect after your current subscription ends.");return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key7",{string0:(0,i.jsx)(w,{text:S({level:O,cycleUnit:A,isOneoff:!0})}),string1:(0,i.jsx)(w,{text:R(null!==(g=null==y?void 0:null===(_=y.upcomingVipInfo)||void 0===_?void 0:_.newProductBeginTime)&&void 0!==g?g:0)})},"Your {string0} subscription will take effect on {string1}.")}},N=e=>{var r,t,n,a,s,o,c,d,l,u,{preCreateRes:p,vipInfo:v,productList:m,toProductId:_,onGetCreditsClick:g}=e,y=!!(null==v?void 0:v.currentAutoRenewPlan),f=j(e),P=e=>h()(1e3*e).format("YYYY-MM-DD HH:mm"),b=m.find(e=>e.productId===_),I="".concat(null==b?void 0:b.currencyTips).concat(null==b?void 0:b.priceTips),{level:k,cycleUnit:O}=null!=b?b:{},A=m.find(e=>{var r,t;return e.level===(null===(r=v.currentAutoRenewPlan)||void 0===r?void 0:r.level)&&e.cycleUnit===(null===(t=v.currentAutoRenewPlan)||void 0===t?void 0:t.cycleUnit)&&"auto"===e.priceType}),N="".concat(null==A?void 0:A.currencyTips).concat(null==A?void 0:A.priceTips);switch(f){case"RenewUpgrade":case"RenewDiscountUpgrade":if("YEAR"===O)return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key9",{string0:(0,i.jsx)(w,{text:S({level:k,cycleUnit:O})}),string1:(0,i.jsx)(w,{text:P(null!==(t=null==p?void 0:null===(r=p.upcomingVipInfo)||void 0===r?void 0:r.newOneoffEndTime)&&void 0!==t?t:0)}),price:(0,i.jsx)(w,{text:I})},"Your {string0} subscription will renew at {price} per year on {string1}. You can cancel the auto-renewal at any time.");return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key8",{string0:(0,i.jsx)(w,{text:S({level:k,cycleUnit:O})}),string1:(0,i.jsx)(w,{text:P(null!==(a=null==p?void 0:null===(n=p.upcomingVipInfo)||void 0===n?void 0:n.newOneoffEndTime)&&void 0!==a?a:0)}),price:(0,i.jsx)(w,{text:I})},"Your {string0} subscription will renew at {price} per month on {string1}. You can cancel the auto-renewal at any time.");case"RenewDowngrade":case"RenewLateral":return;case"CancelRenew":return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key16",{number0:(0,i.jsx)(w,{text:"".concat(null!==(o=null==A?void 0:null===(s=A.vipBenefitPackage)||void 0===s?void 0:s.userCredit.amount)&&void 0!==o?o:0)})},"You won\u2019t get {number0} subscription credits every month and can\u2019t access subscriber-only features.");case"UpgradeOneOff":if(y){if("YEAR"===O)return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key9",{string0:(0,i.jsx)(w,{text:S({level:null==A?void 0:A.level,cycleUnit:null==A?void 0:A.cycleUnit})}),string1:(0,i.jsx)(w,{text:P(null!==(d=null===(c=p.upcomingVipInfo)||void 0===c?void 0:c.curAutoRenewNextBillingTime)&&void 0!==d?d:0)}),price:(0,i.jsx)(w,{text:N})},"Your {string0} subscription will renew at {price} per year on {string1}. You can cancel the auto-renewal at any time.");return x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key8",{string0:(0,i.jsx)(w,{text:S({level:null==A?void 0:A.level,cycleUnit:null==A?void 0:A.cycleUnit})}),string1:(0,i.jsx)(w,{text:P(null!==(u=null===(l=p.upcomingVipInfo)||void 0===l?void 0:l.curAutoRenewNextBillingTime)&&void 0!==u?u:0)}),price:(0,i.jsx)(w,{text:N})},"Your {string0} subscription will renew at {price} per month on {string1}. You can cancel the auto-renewal at any time.")}return;case"LateralOneOff":case"DownGradeOneOff":return(0,i.jsx)(C,{onClick:g})}},R=e=>{var{vipInfo:r,productList:t,toProductId:n}=e,i=[],a=j(e),s=t.find(e=>e.productId===n),{currencyTips:o="",priceTips:c="",cycleUnit:d,vipPriceTips:l="",level:u}=null!=s?s:{},p=_()(l,{symbol:"",precision:(null==l?void 0:l.includes("."))?2:0}).format();if(a.includes("OneOff"))i.push({title:void 0,desc:(0,b.sG)({level:u}),price:x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key13",{price:o+p},"{price}/1-month"),priceDesc:void 0});else{var v,m,g,h,y,f=t.find(e=>{var t,n;return e.level===(null===(t=r.currentAutoRenewPlan)||void 0===t?void 0:t.level)&&e.cycleUnit===(null===(n=r.currentAutoRenewPlan)||void 0===n?void 0:n.cycleUnit)&&"auto"===e.priceType}),P=_()(null!==(g=null==f?void 0:f.priceTips)&&void 0!==g?g:"",{symbol:"",precision:(null==f?void 0:null===(v=f.priceTips)||void 0===v?void 0:v.includes("."))?2:0}).format(),C=_()(null!==(h=null==f?void 0:f.vipPriceTips)&&void 0!==h?h:"",{symbol:"",precision:(null==f?void 0:null===(m=f.vipPriceTips)||void 0===m?void 0:m.includes("."))?2:0}).format();i.push({title:x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key10",{string0:(0,b.sG)({level:null==f?void 0:f.level})},"From {string0}"),desc:(0,b.d8)(null==f?void 0:f.cycleUnit),price:(null==f?void 0:f.cycleUnit)==="YEAR"?x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key12",{price:"".concat(null==f?void 0:f.currencyTips).concat(null!=C?C:"")},"{price}/month"):x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key12",{price:"".concat(null==f?void 0:f.currencyTips).concat(null!=P?P:"")},"{price}/month"),priceDesc:(null==f?void 0:f.cycleUnit)==="YEAR"?x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key14",{price:"".concat(null==f?void 0:f.currencyTips).concat(P)},"{price}/year"):""}),i.push({title:x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key11",{string0:"CancelRenew"===a?x.ZP.t("dre_m10n_subscription_plans_free",{},"Free"):(0,b.sG)({level:u})},"To {string0}"),desc:"CancelRenew"===a?x.ZP.t("dre_m10n_subscription_page_staus_forever",{},"Forever"):(0,b.d8)(d),price:x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key12",{price:"CancelRenew"===a?"".concat(null!==(y=null==f?void 0:f.currencyTips)&&void 0!==y?y:"","0"):o+p},"{price}/month"),priceDesc:"YEAR"===d&&"CancelRenew"!==a?x.ZP.t("dre_m10n_subscription_page_change_plan_popup_key14",{price:"".concat(o).concat(c)},"{price}/year"):""})}return i},M=(e,r)=>{var t,n,a,{productList:s,toProductId:o,preCreateRes:c}=e,d=j(e),l=s.find(e=>e.productId===o),u=null==l?void 0:l.currencyTips,p=(null!==(a=null==c?void 0:null===(n=c.subscriptionChangeInfo)||void 0===n?void 0:null===(t=n.paymentAmount)||void 0===t?void 0:t.amountTips)&&void 0!==a?a:u&&(null==l?void 0:l.priceTips.includes(u)))?null==l?void 0:l.priceTips:"".concat(u).concat(null==l?void 0:l.priceTips);switch(d){case"RenewLateral":case"RenewDowngrade":case"CancelRenew":return(0,i.jsxs)("div",{children:[x.ZP.t("dre_m10n_subscription_page_change_plan_btn_key3",{},"Change Plan")," "]});case"LateralOneOff":case"UpgradeOneOff":case"DownGradeOneOff":case"RenewUpgrade":return(0,i.jsx)("div",{children:x.ZP.t("dre_m10n_subscription_page_change_plan_btn_key1",{price:p},"Pay {price}")});case"RenewDiscountUpgrade":return(0,i.jsx)("div",{children:x.ZP.t("dre_m10n_subscription_page_change_plan_btn_key1",{price:(0,i.jsxs)(i.Fragment,{children:[p,(0,i.jsxs)("span",{style:{textDecorationLine:"line-through",color:"rgba(59, 69, 89, 0.50)",marginLeft:"4px"},children:[u,null==l?void 0:l.priceTips]})]})},"Pay {price}")});default:return}},V=e=>["RenewLateral","RenewDowngrade","CancelRenew"].includes(e),E=t("417699"),L=t("967355"),D=t("914026"),Z=t("369617"),B=t("95581"),U=t("733437"),G=t("247170"),F=t("833148"),W=t("695001"),Y=t("603026"),K=t("217448"),z=e=>{var r,{onClose:t,payManager:n,toProductId:a,preCreateRes:o,mode:p,reportParam:v}=e,m=(0,y.G)(K.q),_=(0,y.G)(Y.K),g=(0,y.G)(l.t),h=(0,y.G)(u.fJ),f=(0,y.G)(E.e),[P,C]=(0,d.useState)(!1),{vipInfo:b,currentAutoRenewPlan:I}=(0,U.k)(m,e=>({vipInfo:e.vipInfo,currentAutoRenewPlan:e.currentAutoRenewPlan})),w=(0,U.k)(_,e=>e.vipPriceList),{isOversea:j}=f,{source:O}=v||{},S=(0,d.useMemo)(()=>w.find(e=>e.productId===a),[w,a]),z=R({vipInfo:b,productList:w,toProductId:a});var J=(r=(0,c._)(function*(){C(!0);var e,r,i,s,c,d,l,u=!0,v=(0,G.VM)();if(V(p)){if(p===k.CancelRenew)(0,W.yf)(g,{action:W.oF.CancelSubscribe,source:O,toProductId:a}),e=f.isOversea?yield h.cancelSubscriptionV3({appId:f.appId,subscribeId:null!==(r=null==I?void 0:I.subscribeId)&&void 0!==r?r:""}):yield h.cancelAutoVipOrder({aid:f.appId,subscribeId:null!==(i=null==I?void 0:I.subscribeId)&&void 0!==i?i:""}),yield(0,D.R)(g,!0),e.ok?(Z.s.success(x.ZP.t("dre_m10n_management_page_auto_renew_cancel_success",{},"Cancel auto renew successfully!")),(0,W.yf)(g,{action:W.oF.Success,source:O,toProductId:a})):(u=!1,0x206f538===Number(e.code)?B.h.confirm({icon:null,title:x.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_title",{},"\u6E29\u99A8\u63D0\u793A"),content:(null==I?void 0:I.payChannel)==="WX"?x.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_wechat",{},"\u672C\u6B21\u81EA\u52A8\u7EED\u8D39\u53D6\u6D88\u5931\u8D25\uFF0C\u8BF7\u6253\u5F00\u5FAE\u4FE1App\uFF0C\u70B9\u51FB\u6211 - \u670D\u52A1 - \u94B1\u5305 - \u652F\u4ED8\u8BBE\u7F6E - \u81EA\u52A8\u7EED\u8D39 - \u9009\u62E9\u3010\u5373\u68A6\u4F1A\u5458\u81EA\u52A8\u7EED\u8D39\u3011\u8FDB\u884C\u89E3\u7EA6\u64CD\u4F5C"):x.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_alipay",{},"\u672C\u6B21\u81EA\u52A8\u7EED\u8D39\u53D6\u6D88\u5931\u8D25\uFF0C\u8BF7\u6253\u5F00\u652F\u4ED8\u5B9DApp \uFF0C\u70B9\u51FB\u6211\u7684 - \u8BBE\u7F6E - \u652F\u4ED8\u8BBE\u7F6E - \u514D\u5BC6\u652F\u4ED8/\u81EA\u52A8\u6263\u6B3E - \u9009\u62E9\u3010\u5373\u68A6\u4F1A\u5458\u670D\u52A1\u3011\u8FDB\u884C\u89E3\u7EA6\u64CD\u4F5C"),okText:x.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_button",{},"\u6211\u77E5\u9053\u4E86"),footer:(e,r)=>r}):Z.s.error(x.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_toast",{},"Something went wrong. Try again later.")),(0,W.yf)(g,{action:W.oF.Failed,source:O,toProductId:a}));else{(0,W.yf)(g,{action:W.oF.ChangeSubscribe,source:O,toProductId:a});var m=yield null==n?void 0:n.switchPlan(v);yield(0,D.R)(g,!0),(null==m?void 0:m.ok)?(Z.s.success(x.ZP.t("dre_m10n_management_page_plan_change_success",{},"Subscription plan changed")),(0,W.yf)(g,{action:W.oF.Success,source:O,toProductId:a})):(u=!1,Z.s.error(x.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_toast",{},"Something went wrong. Try again later.")),(0,W.yf)(g,{action:W.oF.Failed,source:O,toProductId:a}))}}else yield(0,F.F)({containerService:g,price:null!==(l=null!==(d=null===(c=o.subscriptionChangeInfo)||void 0===c?void 0:null===(s=c.paymentAmount)||void 0===s?void 0:s.amountTips)&&void 0!==d?d:null==S?void 0:S.priceTips)&&void 0!==l?l:"0",payManager:n,productId:a}),(0,W.yf)(g,{action:W.oF.GetPaymentQRCode,source:O,toProductId:a});u&&t(),C(!1)}),function(){return r.apply(this,arguments)});return(0,d.useEffect)(()=>{(0,W.yf)(g,{action:W.oF.Show,source:O,toProductId:a})},[]),(0,i.jsxs)("div",{className:s.container,children:[(0,i.jsx)("div",{className:s.desc,children:A({vipInfo:b,productList:w,preCreateRes:o,toProductId:a},j)}),(0,i.jsx)("div",{className:s.changeDetails,children:z.map((e,r)=>(0,i.jsxs)(i.Fragment,{children:[0!==r&&(0,i.jsx)("div",{className:s.splitLine}),(0,i.jsxs)("div",{className:s.changeItem,children:[e.title&&(0,i.jsx)("div",{className:s.changeTitle,children:e.title}),(0,i.jsxs)("div",{className:s.changePlanContainer,children:[(0,i.jsx)("div",{className:s.changePlanText,children:e.desc}),(0,i.jsxs)("div",{className:s.changePlanPriceContainer,children:[(0,i.jsx)("div",{className:s.changePlanPrice,children:e.price}),e.priceDesc&&(0,i.jsx)("div",{className:s.changePlanDesc,children:e.priceDesc})]})]})]})]}))}),(0,i.jsx)(L.J,{PrevDiv:M({vipInfo:b,productList:w,preCreateRes:o,toProductId:a},j),loading:P,onClick:J,className:s.changeBtn}),(0,i.jsx)("div",{className:s.autoRenewDesc,children:N({vipInfo:b,productList:w,preCreateRes:o,toProductId:a,onGetCreditsClick:()=>{(0,W.yf)(g,{action:W.oF.ClickGetCredits,source:O,toProductId:a})}})})]})},J=t("259435"),H=t("487736"),Q=t("608358"),q=e=>{var{containerService:r,toProductId:t,payManager:n,preCreateRes:c,reportParam:d}=e,{source:l}=d||{},u=(0,G.VM)(),p=(0,Q.ko)(r,K.q),v=(0,Q.ko)(r,Y.K),m=(0,J.X)(r,H.M.VIP_MODAL),{vipInfo:_}=p,{vipPriceList:g}=v;if(!!_){var h=g.find(e=>e.productId===t);null==n||n.setCurrentProduct(u,null!=t?t:"",!1);var f=null,P=()=>{(0,W.yf)(r,{action:W.oF.Close,source:l,toProductId:t}),null==f||f.close()};null==m||m.onUnmount(()=>{P()});var x=j({vipInfo:_,productList:g,toProductId:t});f=a.Z.confirm({wrapClassName:s.changePlanModal,title:O(x,null==h?void 0:h.level),footer:null,simple:!1,escToExit:!1,icon:null,closeIcon:(0,i.jsx)(o.Rnl,{className:s.closeBtn}),closable:!0,maskClosable:!0,maskStyle:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},content:(0,i.jsx)(y.$,{instantiationService:r,children:(0,i.jsx)(z,{payManager:n,toProductId:t,preCreateRes:c,mode:x,onClose:P,reportParam:d})})})}}},52507:function(e,r,t){t.d(r,{s:()=>e0});var n,i,a=t("295834"),s=t("772322");t("395248");var o=t("423342"),c=t("218571"),d=t("66003"),l=t("954342"),u=t("876826"),p=t("85728"),v=t("929753"),m=t("608358"),_=t("582152"),g=t("789786"),h=t("387285"),y=t("434712"),f=t("414250"),P=t("1314"),x=t("417699"),C=t("523197"),b=t("216342"),I=t("56935"),w=t("37454"),k=t("377898"),j=t("460029"),O=t("217940"),S=t("260963"),A=t("880821"),N=t("603026"),R=t("70137");class M extends f.G{get _reportParams(){var e,r,t,n;return(0,p._)({creditNow:this._commercialCreditService.localCredit,selectCreditsAmount:null===(r=this.currentProduct)||void 0===r?void 0:null===(e=r.number)||void 0===e?void 0:e.toString(),payAmount:null===(t=this.currentProduct)||void 0===t?void 0:t.amount,payCurrency:null===(n=this.currentProduct)||void 0===n?void 0:n.currencyCode},this._injectReportParams)}get qrCodeUrl(){return this._orderRelatedUrl}get qrCodeLoading(){return this._isOrderLoading}reportPopup(e){var{action:r,orderId:t,payChannel:n}=e,{currentProduct:i}=this;(0,_.ZD)(this._containerService,(0,p._)({action:r,payChannel:n,orderId:t,sku:null==i?void 0:i.productId},this._reportParams))}setCurrentProduct(e,r){var t=this,n=()=>super.setCurrentProduct;return(0,u._)(function*(){yield n().call(t,e,r,!0)})()}get _isOverSea(){return this._environmentService.isOversea}_generateOrder(e){var r=this;return(0,u._)(function*(){if(!!r.currentProduct){var t,n=(0,C.Rl)();(0,j.Ie)("".concat(w.j.MAKE_ORDER_CREDIT,"_").concat(n));var i=yield r._domesticPayManager.generatePayOrder(e,{type:"credits",aid:Number((0,h.r)(r._isOverSea)),platform:7,productId:r.currentProduct.productId,goodsIdStr:r.currentProduct.goodsId,goodsType:r.currentProduct.goodsType}),a=(0,O.Y)("".concat(w.j.MAKE_ORDER_CREDIT,"_").concat(n));if((0,k.E)(r._containerService,{status:i.ok?"success":"error",duration:a,productId:r.currentProduct.productId,orderId:i.ok?i.value.orderId:"",orderType:"credit",errMsg:i.ok?void 0:i.msg,logId:i.ok?void 0:null===(t=i.cause)||void 0===t?void 0:t.log_id}),r._updateOrderError(!i.ok),i.ok)r._onGenerateOrderSuccess.fire(i.value);else{r._onGenerateOrderError.fire(i);return}var s=i.value,o=s.payParams;try{o=yield(0,A.Cq)(o)}catch(e){}return(0,S.z)(()=>{r._observableData.orderRelatedUrl=o}),s}})()}_generateTask(e){return(0,I.ZB)(this.orderInfo),this._domesticPayManager.generatePayTask(e,{type:"credits",orderId:this.orderInfo.orderId})}updateIsAgreeAgreement(e,r){var t=this,n=()=>super.updateIsAgreeAgreement;return(0,u._)(function*(){try{r&&t.reportPopup({action:_.zh.AgreeProtocol})}catch(e){}yield n().call(t,e,r)})()}_updateIsOrderLoading(e){super._updateIsOrderLoading(e),e&&this.reportPopup({action:_.zh.GetQrCode})}_updateOrderInfo(e){super._updateOrderInfo(e),this.reportPopup({action:_.zh.ShowQrCode})}_updateOrderError(e){super._updateOrderError(e),e&&this.reportPopup({action:_.zh.FailToGetQrCode})}_updateOrderFailed(e){super._updateOrderFailed(e),e&&this.reportPopup({action:_.zh.InvalidQrCode})}constructor(e,r,t,n,i){super(r,n.creditPriceList,"credit"),this._injectReportParams=e,this._containerService=r,this._environmentService=t,this._commercialGoodsService=n,this._commercialCreditService=i,this._domesticPayManager=this._containerService.createInstance(P.F)}}(0,g.gn)([(0,b.lI)("CreditsPayManager","setCurrentProduct"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,String]),(0,g.w6)("design:returntype",Promise)],M.prototype,"setCurrentProduct",null),(0,g.gn)([(0,b.lI)("CreditsPayManager","_generateOrder"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,g.w6)("design:returntype",Promise)],M.prototype,"_generateOrder",null),(0,g.gn)([(0,b.lI)("CreditsPayManager","_generateTask"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,g.w6)("design:returntype",void 0)],M.prototype,"_generateTask",null),(0,g.gn)([(0,b.lI)("CreditsPayManager","updateIsAgreeAgreement"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Boolean]),(0,g.w6)("design:returntype",Promise)],M.prototype,"updateIsAgreeAgreement",null),M=(0,g.gn)([(0,g.fM)(1,y.t),(0,g.fM)(2,x.e),(0,g.fM)(3,N.K),(0,g.fM)(4,R.aG),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof IReportParams?Object:IReportParams,void 0===y.t?Object:y.t,void 0===x.e?Object:x.e,void 0===N.K?Object:N.K,void 0===R.aG?Object:R.aG])],M);var V=t("256031"),E=t("724614"),L=t("369617"),D=t("150615"),Z=t("799108"),B=t("247170"),U=t("947259"),G=t("331925"),F=t("95581");var W=(n=(0,u._)(function*(e,r){var t,n,i={orderId:null===(t=r.orderInfo)||void 0===t?void 0:t.orderId,productId:null===(n=r.currentProduct)||void 0===n?void 0:n.productId},a=(0,m.ko)(e,R.aG),s=a.localCredit;yield(0,U._)(3e3);var o=a.localCredit;(0,G.X)(e,(0,v._)((0,p._)({},i),{orderType:"credit",confirmStatus:o>s?"success":"error"}))}),function(e,r){return n.apply(this,arguments)}),Y=e=>{var{containerService:r,reportParams:t}=e,n=(0,m.ko)(r,R.aG),i=r.createInstance(M,t),a=(0,B.VM)();return null==i||i.setCurrentProductByIndex(a,0),null==i||i.onSuccess(e=>{var t;L.s.success("\u652F\u4ED8\u6210\u529F"),n.syncRemoteCreditHistory(),W(r,i),i.reportPopup({action:_.zh.PaySuccess,payChannel:e.payChannel,orderId:null===(t=i.orderInfo)||void 0===t?void 0:t.orderId})}),null==i||i.onError(()=>{var e;L.s.warning(D.ZP.t("dre_m10n_purchase_credits_fail_toast",{},"Couldn\u2019t purchase credits. Try again later. ")),n.syncRemoteCreditHistory(),i.reportPopup({action:_.zh.PayFail,orderId:null===(e=i.orderInfo)||void 0===e?void 0:e.orderId})}),null==i||i.onGenerateOrderError(e=>{if([Z.HR.Violation,Z.HR.OverseaViolation].includes(String(e.code))){L.s.warning(D.ZP.t(e.msg,{},e.msg));return}}),i},K=e=>{var{containerService:r,reportParams:t}=e,n=(0,m.ko)(r,R.aG),i=r.createInstance(V._,t),a=(0,B.VM)();return null==i||i.setCurrentProductByIndex(a,0),null==i||i.onSuccess(e=>{var t;n.syncRemoteCreditHistory(),W(r,i),i.reportPopup({action:_.zh.PaySuccess,payChannel:e.paymentMethod,orderId:null===(t=i.orderInfo)||void 0===t?void 0:t.orderId})}),null==i||i.onError(()=>{var e;n.syncRemoteCreditHistory(),i.reportPopup({action:_.zh.PayFail,orderId:null===(e=i.orderInfo)||void 0===e?void 0:e.orderId})}),null==i||i.onGenerateOrderError(e=>{if(String(e.code)===Z.HR.HostedPageNotAvailable){F.h.confirm({icon:null,title:"\u652F\u4ED8\u5347\u7EA7\u516C\u544A",content:"\u7531\u4E8E\u7F8E\u56FD\u5730\u533A\u652F\u4ED8\u7CFB\u7EDF\u5347\u7EA7\uFF0C\u5F53\u524D\u4ED8\u8D39\u4E1A\u52A1\u6682\u65F6\u65E0\u6CD5\u8FDB\u884C\u652F\u4ED8\uFF0C\u6211\u4EEC\u9884\u8BA1\u5728\u5317\u4EAC\u65F6\u95F42025\u5E743\u670831\u65E5\u5B8C\u6210\u7CFB\u7EDF\u5347\u7EA7\uFF0C\u5728\u6B64\u671F\u95F4\u65E0\u6CD5\u8FDB\u884C\u4ED8\u8D39\uFF0C\u4E0D\u4FBF\u4E4B\u5904\u656C\u8BF7\u8C05\u89E3",okText:"OK",footer:(e,r)=>r});return}if([Z.HR.Violation,Z.HR.OverseaViolation].includes(String(e.code))){L.s.warning(D.ZP.t(e.msg,{},e.msg));return}L.s.error(D.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_toast",{},"Something went wrong. Try again later."))}),i},z=e=>(0,E.H)()?K(e):Y(e),J=t("490165"),H=t("381417");var Q=((i={}).CreditRecharge="CreditRecharge",i.VIPMode="VIPMode",i.CreditHistory="CreditHistory",i.OrderStatusMode="OrderStatusMode",i);t("246923");var q=t("25614"),X=t("2910"),$=t("733437"),ee=t("889715"),er=t("71129"),et=t("284829"),en=t("652494"),ei=t("105789"),ea=t.n(ei),es={productList:"productList-EZT3Pw",productItemWrapper:"productItemWrapper-IhYudA",selected:"selected-FIy9Do",productItemCredit:"productItemCredit-iAcW6L",productItemCreditIcon:"productItemCreditIcon-T5ArUE",productItemAmount:"productItemAmount-s_AL0W",produceItemCurrencyTips:"produceItemCurrencyTips-Q3bcp3"},eo=t("909854"),ec=t.n(eo),ed=e=>{var{creditPriceList:r,defaultProductId:t,className:n,productItemClassName:i,disabled:a=!1,onSelectProduct:o}=e,[d,l]=(0,c.useState)(null!=t?t:""),u=(e,r)=>{if(!a)l(e),o(e,r)};return(0,s.jsx)("div",{className:ea()(es.productList,n),children:null==r?void 0:r.map(e=>{var r,t=!(null==e?void 0:e.priceTips)||(null==e?void 0:null===(r=e.priceTips)||void 0===r?void 0:r.includes(e.currencyTips))?(e.amount/100).toFixed(2):null==e?void 0:e.priceTips;return(0,s.jsxs)("div",{className:ea()(es.productItemWrapper,i,{[es.selected]:e.productId===d}),onClick:()=>{var r;u(e.productId,null===(r=e.number)||void 0===r?void 0:r.toString())},children:[(0,s.jsxs)("div",{className:es.productItemCredit,children:[(0,s.jsx)(ee.YzG,{className:es.productItemCreditIcon}),e.number]}),(0,s.jsxs)("div",{className:es.productItemAmount,children:[(0,s.jsx)("span",{className:es.produceItemCurrencyTips,children:e.currencyTips}),(0,s.jsx)("span",{children:ec()(t,{symbol:"",precision:t.includes(".")?2:0}).format()})]})]},e.productId)})})},el={cnFooter:"cnFooter-H7t5uf",creditRule:"creditRule-vWqEJI",overseaFooter:"overseaFooter-aqm91x",reminder:"reminder-zKLYdL",link:"link-eCBss0"},eu=t("932616"),ep=t("626291"),ev=e=>{var{isOversea:r}=e,t=(0,eu.h)(),{region:n,lang:i}=(0,ep.M)();return r?(0,s.jsxs)("div",{className:el.overseaFooter,children:[(0,s.jsx)("div",{className:el.policyAgreement,children:D.ZP.t("dre_m10n_purchase_credits_legal",{agreement:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",className:el.link,href:en.y.USER_AGREEMENT(!0,{region:n,lang:i}),children:D.ZP.t("dre_m10n_sub_legal_tos",{},"Terms of Service")}),privacy_policy:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",className:el.link,href:en.y.PRIVACY_POLICY(!0,{region:n,lang:i}),children:D.ZP.t("my_privacy_policy_tab",{},"Privacy Policy")})},"By continuing, you have read and agree to Dreamina\u2019s {agreement}")}),(0,s.jsx)("div",{className:el.reminder,children:D.ZP.t("dre_m10n_purchase_credits_note",{},"Note: Credits cannot be used to purchase subscriptions, transferred to another account, or exchanged to cash for withdrawal. Purchased credits cannot be refunded and they are valid for 2 years.")})]}):(0,s.jsxs)("div",{className:el.cnFooter,children:[D.ZP.t("dre_m10n_purchase_credits_note",{},"Note: Credits cannot be used to purchase subscriptions, transferred to another account, or exchanged to cash for withdrawal. Purchased credits cannot be refunded and they are valid for 2 years."),(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",href:(0,X.C)(t,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),className:el.creditRule,children:D.ZP.t("dre_m10n_purchase_credits_rules",{},"Rules")})]})};t("109163");var em=t("372675"),e_=t("648757"),eg=t("405013"),eh={avatar:"avatar-ynDRXI",userInfoWrapper:"userInfoWrapper-rbjn10",userInfo:"userInfo-yy4_23",userNameWrapper:"userNameWrapper-JsW5bt",userName:"userName-dm71BE",vipTag:"vipTag-uMISpD",vipEndTimeWrapper:"vipEndTimeWrapper-KkEEUU",vipEndTime:"vipEndTime-K1FzX9",renewalsBtn:"renewalsBtn-WyFDU2"},ey=t("49176"),ef=t("217448"),eP=e=>{var{isOversea:r,userProfile:t,userNameMaxWidth:n=335,onShowVipBtnClick:i}=e,{avatar:a="",name:o=""}=null!=t?t:{},c=(0,d.G)(ef.q),{isVip:l,isVipExpired:u,currentVipLevel:p,vipInfo:v,expiredVipLevel:m}=(0,$.k)(c,e=>{var r;return{isVip:e.isVip,isVipExpired:e.isVipExpired,currentVipLevel:e.currentVipLevel,expiredVipLevel:null===(r=e.vipInfo)||void 0===r?void 0:r.expiredVipLevel,vipInfo:e.vipInfo}})||{},{endTime:_=0}=null!=v?v:{},g=(0,eg.vc)("yyyy.MM.dd",1e3*_);return(0,s.jsxs)("div",{className:eh.userInfoWrapper,children:[(0,s.jsx)(e_.q,{alt:"avatar",src:(0,X.C)(a,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),className:eh.avatar}),(0,s.jsxs)("div",{className:eh.userInfo,children:[(0,s.jsxs)("div",{className:eh.userNameWrapper,children:[(0,s.jsx)(em.Z,{content:o,checkOverflow:!0,children:(0,s.jsx)("span",{className:eh.userName,style:{maxWidth:n},children:o})}),(0,s.jsx)(ey.Z,{level:l?p:m,inactive:u,className:eh.vipIcon,size:16})]}),_?(0,s.jsx)("div",{className:eh.vipEndTimeWrapper,children:(0,s.jsx)("span",{className:eh.vipEndTime,children:D.ZP.t("dre_m10n_credits_title_expire_purchase_another",{date:g,purchase_another_1_month:(0,s.jsx)("span",{className:eh.renewalsBtn,onClick:i,children:D.ZP.t("dre_m10n_credits_title_expire_purchase_another_btn",{},"Purchase another 1 month")})},"Your subscription will expire on {date}. {purchase_another_1_month}")})}):null]})]})},ex="creditInfo-fF3xDu",eC="credit-Ly1IY1",eb="creditIcon-w8BDZA",eI=e=>{var{credit:r,handleShowHistoryClick:t}=e;return(0,s.jsxs)("div",{className:ex,children:[D.ZP.t("dre_m10n_purchase_credits_left",{},"Credits left:"),(0,s.jsxs)("div",{className:eC,onClick:t,children:[(0,s.jsx)(ee.xUc,{className:eb}),null!=r?r:0]})]})},ew={creditRechargeModal:"creditRechargeModal-ynYMKO",header:"header-JifuKt",headerDivider:"headerDivider-tQ3VEo",closeBtn:"closeBtn-yCpGAK",closeBtnIcon:"closeBtnIcon-vbs9eT",main:"main-sqbmih",mainTitle:"mainTitle-U8Tqsw",content:"content-QGfKAK",productWrapper:"productWrapper-VZuGIY",productItem:"productItem-iB7Rca",arrowDivider:"arrowDivider-xfUEfh",qrCodeWrapper:"qrCodeWrapper-hvpJWx",agreementPrivacy:"agreementPrivacy-wfC7py"},ek=e=>{var r,t,n,i,{creditPayManager:a,containerService:o,accountService:d,source:l,handleShowHistory:u,handleShowVip:p,onClose:v}=e,g=(0,m.ko)(o,R.aG),h=(0,m.ko)(o,N.K),{isOversea:y}=(0,m.ko)(o,x.e),f=(0,m.ko)(o,ef.q),P=null!==(t=null==d?void 0:d.hasLogin)&&void 0!==t&&t?null==d?void 0:d.userProfile:void 0,{isVip:C,vipInfo:b}=null!==(n=(0,$.k)(f,e=>({isVip:e.isVip,vipInfo:e.vipInfo})))&&void 0!==n?n:{},{isAgree:I}=null!==(i=(0,$.k)(a,e=>({isAgree:e.isAgreeAgreement})))&&void 0!==i?i:{},{localCredit:w}=null!=g?g:{},{creditPriceList:k}=null!=h?h:{},{endTime:j=0}=null!=b?b:{},O=()=>{null==a||a.reportPopup({action:_.zh.Show})};return(0,c.useEffect)(()=>{var e,r,t=(0,B.VM)();return O(),null==a||a.setCurrentProduct(t,null!==(r=null==a?void 0:null===(e=a.currentProduct)||void 0===e?void 0:e.productId)&&void 0!==r?r:""),q.Z.config({maxCount:1}),()=>{null==a||a.disposeCurrentTask(),q.Z.config({maxCount:void 0})}},[]),(0,s.jsxs)("div",{className:ew.creditRechargeModal,children:[(0,s.jsxs)("div",{className:ew.header,children:[(0,s.jsx)(eP,{isOversea:y,isVip:C,vipInfo:b,userProfile:P,onShowVipBtnClick:()=>{p(er.s.CLICK_RENEW_VIP_CREDITS_PAGE)}}),(0,s.jsx)(eI,{credit:w,handleShowHistoryClick:()=>{u((0,B.VM)()),null==a||a.reportPopup({action:_.zh.CheckDetail})}}),(0,s.jsx)("div",{className:ew.headerDivider}),(0,s.jsx)("div",{onClick:v,className:ew.closeBtn,children:(0,s.jsx)(ee.Rnl,{className:ew.closeBtnIcon})})]}),(0,s.jsxs)("div",{className:ew.main,children:[(0,s.jsx)("div",{className:ew.backgroundShadow}),(0,s.jsx)("div",{className:ew.mainTitle,children:"\u79EF\u5206\u8D2D\u4E70"}),(0,s.jsxs)("div",{className:ew.content,children:[(0,s.jsxs)("div",{className:ew.productWrapper,children:[(0,s.jsx)(ed,{defaultProductId:null==a?void 0:null===(r=a.currentProduct)||void 0===r?void 0:r.productId,onSelectProduct:(e,r)=>{var t=(0,B.VM)();null==a||a.setCurrentProduct(t,e),null==a||a.reportPopup({action:_.zh.SelectProduct})},creditPriceList:k}),(0,s.jsx)(ev,{isOversea:y})]}),(0,s.jsx)("img",{src:(0,X.C)("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNSIgaGVpZ2h0PSIxODAiIHZpZXdCb3g9IjAgMCA1IDE4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggb3BhY2l0eT0iMC4zIiBkPSJNMSAwTDAuOTk5OTk2IDg2LjQ2NTNMNCA5MEwwLjk5OTk5NyA5My41MzQ3TDAuOTk5OTkzIDE4MCIgc3Ryb2tlPSJ1cmwoI3BhaW50MF9saW5lYXJfNjg2XzEwNTg4MCkiIHN0cm9rZS13aWR0aD0iMC41Ii8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfNjg2XzEwNTg4MCIgeDE9IjIuNSIgeTE9IjUuNDM4MDciIHgyPSIyLjQ5OTk5IiB5Mj0iMTc0LjU2MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjRUJGOEZGIiBzdG9wLW9wYWNpdHk9IjAiLz4KPHN0b3Agb2Zmc2V0PSIwLjQ5OTk0IiBzdG9wLWNvbG9yPSIjRUJGOEZGIiBzdG9wLW9wYWNpdHk9IjAuNSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNFQkY4RkYiIHN0b3Atb3BhY2l0eT0iMCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo=",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),className:ew.arrowDivider,height:180,width:5,crossOrigin:"anonymous"}),(0,s.jsxs)("div",{className:ew.qrCodeWrapper,children:[a&&(0,s.jsx)(et.s_,{payManager:a}),(0,s.jsxs)("div",{className:ew.agreementPrivacy,children:[(0,s.jsx)("span",{children:I?"\u60A8\u5DF2\u540C\u610F":""}),(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",href:en.y.COMMERCIAL_AGREEMENT(y),children:D.ZP.t("dre_m10n_subscription_page_business_service_agreement",{},"\u300A\u201C\u5373\u68A6\u201D\u4ED8\u8D39\u670D\u52A1\u534F\u8BAE\u300B")})]})]})]})]})]})},ej="modalSwitcherWrapper-qPB4gV",eT=e=>{var{mode:r,modalMap:t}=e;return(0,s.jsx)("div",{className:ej,children:(0,s.jsx)("div",{children:t[r]})})},eO=t("259435"),eS=t("487736"),eA=t("196451"),eN=e=>{var r,{source:t,creditPayManager:n,vipPayManager:i,containerService:a,onClose:o}=e,d=(0,m.ko)(a,J.D),l=(0,m.ko)(a,x.e),p=(0,m.ko)(a,R.aG),v=l.isOversea,[_,g]=(0,c.useState)(Q.CreditRecharge),h=()=>{i.disposeCurrentTask(),g(Q.CreditRecharge)},y=e=>{(0,eO.X)(a,eS.M.VIP_MODAL)?o():(0,eA.U)({containerService:a,reportParam:{source:e}})};var f=(0,b.Tx)("SwitchableDomesticCreditModal",(r=(0,u._)(function*(e){g(Q.CreditHistory),yield Promise.all([p.changeHistoryType(e,R.Pi.NOT_LIMITED),p.syncHistoryData(e,R.Pi.CONSUMED),p.syncHistoryData(e,R.Pi.ISSUED)])}),function(e){return r.apply(this,arguments)}),"handleShowHistory"),P=(0,c.useMemo)(()=>({[Q.CreditRecharge]:(0,s.jsx)(ek,{source:t,creditPayManager:n,containerService:a,accountService:d,isOverSea:v,handleShowHistory:f,handleShowVip:y,onClose:o}),[Q.CreditHistory]:(0,s.jsx)(H.oM,{onClose:h,containerService:a,showBackBtn:!0})}),[d,a,n,h,f,y,v,o,t]);return(0,s.jsx)(eT,{mode:_,modalMap:P})},eR=t("967355"),eM=t("529531"),eV="creditRechargeModal-oFR4Qv",eE="header-SGAJam",eL="headerTitle-n4RBXb",eD="closeBtn-xg7RYx",eZ="closeBtnIcon-UiVHCb",eB="line-qM6xKL",eU="main-WZncsh",eG="productList-IbkKbL",eF="productItem-bybR_H",eW="purchaseBtn-zxgWfo",eY="price-ZE2EJd",eK="currencyTips-BQeYxZ",ez="disabled-zF4tba",eJ=t("936226"),eH={userInfoWrapper:"userInfoWrapper-w39LKY",userInfoContent:"userInfoContent-PlZkiB",avatar:"avatar-tms8Ju",userName:"userName-mupKUW",creditIcon:"creditIcon-RsH3jl",listContent:"listContent-HRi2Rs",listContainer:"listContainer-koz80I",listTitle:"listTitle-D2f9wL"},eQ=e=>{var r,t,n,{userNameMaxWidth:i=250,handleShowHistoryClick:a}=e,o=(0,d.G)(ef.q),l=(0,d.G)(eJ.Gw),u=(0,eM.p)(),{userProfile:p}=l,{avatar:v="",name:m=""}=null!=p?p:{},{isVip:_,isVipExpired:g,currentVipLevel:h,vipInfo:y,expiredVipLevel:f}=(0,$.k)(o,e=>{var r;return{isVip:e.isVip,isVipExpired:e.isVipExpired,currentVipLevel:e.currentVipLevel,expiredVipLevel:null===(r=e.vipInfo)||void 0===r?void 0:r.expiredVipLevel,vipInfo:e.vipInfo}})||{},{endTime:P=0}=null!=y?y:{},x=(0,eg.vc)("yyyy-MM-dd",1e3*P),C=(0,eg.vc)("yyyy-MM-dd",(null!==(n=null==y?void 0:null===(r=y.currentAutoRenewPlan)||void 0===r?void 0:r.nextRenewalTime)&&void 0!==n?n:0)*1e3),b=(null==y?void 0:y.currentAutoRenewPlan)&&(null==y?void 0:null===(t=y.currentAutoRenewPlan)||void 0===t?void 0:t.level)===(null==y?void 0:y.curVipLevel),I=(0,c.useMemo)(()=>[b?{title:D.ZP.t("dre_m10n_subscription_page_next_billing_day",{},"Renews on"),content:C}:void 0,!b&&P?{title:D.ZP.t("dre_m10n_subscription_page_expire_time",{},"Expires on"),content:x}:void 0,{title:D.ZP.t("dre_m10n_subscription_page_credits_left",{},"Credits left"),content:(0,s.jsxs)("div",{onClick:a,className:eH.creditIcon,children:[(0,s.jsx)(ee.YzG,{size:16}),null!=u?u:0]})}],[P,x,a,b,u,C]);return(0,s.jsxs)("div",{className:eH.userInfoWrapper,children:[(0,s.jsxs)("div",{className:eH.userInfoContent,children:[(0,s.jsx)(e_.q,{enableClick:!1,alt:"avatar",src:(0,X.C)(v,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),className:eH.avatar}),(0,s.jsx)(em.Z,{content:m,checkOverflow:!0,children:(0,s.jsx)("span",{className:eH.userName,style:{maxWidth:i},children:m})}),(0,s.jsx)(ey.Z,{level:_?h:f,inactive:g,className:eH.vipIcon,size:16})]}),(0,s.jsx)("div",{className:eH.listContent,children:I.map(e=>e&&(0,s.jsxs)("div",{className:eH.listContainer,children:[(0,s.jsx)("div",{className:eH.listTitle,children:e.title}),(0,s.jsx)("div",{className:eH.listContent,children:e.content})]},e.title))})]})},eq=e=>{var r,t,n,i,a,o,{creditPayManager:d,containerService:l,accountService:u,source:p,handleShowHistory:v,handleShowVip:g,onClose:h}=e,y=(0,m.ko)(l,N.K),{isOversea:f}=(0,m.ko)(l,x.e),P=(0,m.ko)(l,ef.q);(0,eM.p)();var{isVip:C,vipInfo:b}=null!==(t=(0,$.k)(P,e=>({isVip:e.isVip,vipInfo:e.vipInfo})))&&void 0!==t?t:{},{currentProduct:I,isVipExpiredError:w,isOrderLoading:k}=null!==(n=(0,$.k)(d,e=>({currentProduct:e.currentProduct,isVipExpiredError:e.isVipExpiredError,isOrderLoading:e.isOrderLoading})))&&void 0!==n?n:{},{creditPriceList:j}=null!=y?y:{};i=null==u?void 0:u.hasLogin;var O=()=>{null==d||d.reportPopup({action:_.zh.Show})};(0,c.useEffect)(()=>{var e,r,t=(0,B.VM)();return O(),null==d||d.setCurrentProduct(t,null!==(r=null==d?void 0:null===(e=d.currentProduct)||void 0===e?void 0:e.productId)&&void 0!==r?r:""),q.Z.config({maxCount:1}),()=>{q.Z.config({maxCount:void 0})}},[]);var S=null!==(o=null==I?void 0:I.priceTips)&&void 0!==o?o:((null!==(a=null==I?void 0:I.amount)&&void 0!==a?a:0)/100).toFixed(2);return(0,s.jsxs)("div",{className:eV,children:[(0,s.jsxs)("div",{className:eE,children:[(0,s.jsx)("div",{className:eL,children:D.ZP.t("dre_m10n_buy_credits_title",{},"Recharge Credits")}),(0,s.jsx)("div",{onClick:h,className:eD,children:(0,s.jsx)(ee.Rnl,{className:eZ})})]}),(0,s.jsx)(eQ,{handleShowHistoryClick:()=>{v((0,B.VM)()),null==d||d.reportPopup({action:_.zh.CheckDetail})}}),(0,s.jsx)("div",{className:eB}),(0,s.jsxs)("div",{className:eU,children:[(0,s.jsx)(ed,{defaultProductId:null==d?void 0:null===(r=d.currentProduct)||void 0===r?void 0:r.productId,onSelectProduct:(e,r)=>{if(!k){var t=(0,B.VM)();null==d||d.setCurrentProduct(t,e),null==d||d.reportPopup({action:_.zh.SelectProduct})}},creditPriceList:j,productItemClassName:eF,className:eG,disabled:k}),(0,s.jsx)(eR.J,{type:"secondary",className:ea()(eW,{[ez]:w}),disabled:w,loading:k,PrevDiv:(0,s.jsx)(s.Fragment,{children:D.ZP.t("dre_m10n_subscribe_purchase_btn",{price:(0,s.jsxs)("div",{className:eY,children:[(0,s.jsx)("span",{className:eK,children:null==I?void 0:I.currencyTips}),ec()(S,{symbol:"",precision:S.includes(".")?2:0}).format()]})},"Purchase ({price})")}),onClick:()=>{var e=(0,B.VM)();null==d||d.purchase(e),null==d||d.reportPopup({action:_.zh.ClickPurchase})}}),(0,s.jsx)(ev,{isOversea:f})]})]})},eX=t("867347"),e$=e=>{var r,t,{source:n,creditPayManager:i,vipPayManager:a,containerService:o,onClose:d}=e,l=(0,m.ko)(o,J.D),p=(0,m.ko)(o,x.e),v=(0,m.ko)(o,R.aG),_=p.isOversea,[g,h]=(0,c.useState)(Q.CreditRecharge),y=()=>{a.disposeCurrentTask(),i.disposeCurrentTask(),h(Q.CreditRecharge)},f=e=>{(0,eO.X)(o,eS.M.VIP_MODAL)?d():(0,eA.U)({containerService:o,reportParam:{source:e}})};var P=(0,b.Tx)("SwitchableOverseaCreditModal",(r=(0,u._)(function*(e){h(Q.CreditHistory),yield Promise.all([v.changeHistoryType(e,R.Pi.NOT_LIMITED),v.syncHistoryData(e,R.Pi.CONSUMED),v.syncHistoryData(e,R.Pi.ISSUED)])}),function(e){return r.apply(this,arguments)}),"handleShowHistory");var C=(t=(0,u._)(function*(){var e=(0,B.VM)();yield i.purchase(e)}),function(){return t.apply(this,arguments)});(0,c.useEffect)(()=>{var e=i.onGenerateOrderSuccess(()=>{h(Q.OrderStatusMode)});return()=>{e.dispose()}},[]);var I=(0,c.useMemo)(()=>({[Q.CreditRecharge]:(0,s.jsx)(eq,{source:n,creditPayManager:i,containerService:o,accountService:l,isOverSea:_,handleShowHistory:P,handleShowVip:f,onClose:d}),[Q.CreditHistory]:(0,s.jsx)(H.oM,{onClose:y,containerService:o,showBackBtn:!0}),[Q.OrderStatusMode]:(0,s.jsx)(eX.w,{containerService:o,payManager:i,showBackBtn:!0,onClose:d,onBack:y,onPayAgain:C})}),[l,v,o,i,_,a]);return(0,s.jsx)(eT,{mode:g,modalMap:I})},e0=e=>{var{containerService:r,reportParam:t}=e,{source:n}=t,i=(0,a._)(t,["source"]),{scene:c,videoDuration:u,sceneOptions:p,isFromPreview:v,isQuickPreview:m,batchNumber:_}=i,g=(0,E.H)()?(0,l.J)(r):(0,l.h)(r),h=z({containerService:r,reportParams:{source:n,scene:c,videoDuration:u,sceneOptions:p,isFromPreview:v,isQuickPreview:m,batchNumber:_}}),y=(0,eO.C)(r,eS.M.CREDIT_MODAL),f=(0,eO.X)(r,eS.M.VIP_MODAL);g.updateReportParam(i);var P=null,x=e=>{null==h||h.dispose(),g.dispose(),null==P||P.close(),y.unmount(),"boolean"==typeof e&&e&&(null==f||f.unmount())};return null==h||h.onSuccess(()=>{!(0,E.H)()&&x(!0)}),P=o.Z.confirm({footer:null,icon:null,simple:!0,closable:!1,maskClosable:!1,maskStyle:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},afterClose:x,wrapClassName:"credit-recharge-modal",content:(0,s.jsx)(d.$,{instantiationService:r,children:(0,E.H)()?(0,s.jsx)(e$,{creditPayManager:h,containerService:r,onClose:x,vipPayManager:g,source:n}):(0,s.jsx)(eN,{creditPayManager:h,containerService:r,onClose:x,vipPayManager:g,source:n})})})}},867347:function(e,r,t){t.d(r,{w:()=>Z});var n=t("876826"),i=t("85728"),a=t("929753"),s=t("772322"),o=t("218571"),c=t("105789"),d=t.n(c),l=t("150615"),u=t("889715"),p=t("608358"),v=t("405013"),m=t("344312"),_=t("256031"),g=t("2910"),h=t("652494"),y={footer:"footer-sX79sv",divider:"divider-smPDnE"},f=t("626291"),P=()=>{var{region:e,lang:r}=(0,f.M)(),t=(0,o.useMemo)(()=>[{title:l.ZP.t("dre_m10n_sub_legal_tos",{},"Terms of Service"),href:(0,g.C)(h.y.USER_AGREEMENT(!0,{region:e,lang:r}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"})},{title:l.ZP.t("my_privacy_policy_tab",{},"Privacy Policy"),href:(0,g.C)(h.y.PRIVACY_POLICY(!0,{region:e,lang:r}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"})}],[e,r]);return(0,s.jsx)("div",{className:y.footer,children:t.map((e,r)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("a",{className:y.link,rel:"noreferrer",target:"_blank",href:e.href,children:e.title}),r<t.length-1&&(0,s.jsx)("span",{className:y.divider})]}))})},x={payingContent:"payingContent-bitG3f",text:"text-YHdq96",reopen:"reopen-yqM0zb"},C=e=>{var{cashierUrl:r,onReopen:t}=e;return(0,s.jsxs)("div",{className:x.payingContent,children:[(0,s.jsx)("img",{src:(0,g.C)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABDCAYAAAAs/QNwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAApASURBVHgB5Vs9bBvJFX6zPyTlsxEaMJK7wAcvcQmSKqaRKpUpIHVs1ylOKlNJboJ0kqsUKSRXKSVVSRPIBwS4FAlEI7gmjWggQAoH0PruggsQIKbPcESR3H15783scknuLrlL3llMPmC5/7Pzvvc7M5KCAvhh68UWquEuIHbDmr3e+UPDhxWHmvfBZutlHdz+S/0GAtiq0/n4W3dgxWEVetp1AV0HsEJ7x2n+4Cf/2oUVx9wWwLh978sTVNhCeksRdbxHx1r/62+vtWFFUcgChm7wUeiQ0K5iwSGkfWDhgbdB7rGiKESAO4RDdBFChzbaMxHgKK8G9h6sKAoR0HlyvYsV1Qldi6wBxAKEBFdtfO9nr7ZhBVEsCBICB55ihQ4qJHiFskFFuwTY1t53tl+3YMVQmADlWk+AzB/IAgLZ2BW0S1Brx9//xbkHK4TCBPRqw05YgW5QAR0HqkQCWQO7RVhV9QsrOPF2VycoFibA37/eHTqqQ65A2qcsQNmA90wAOrxXHkKVSMCVIKEwAQyKAc8w0jrt0WxBhc9la4a1/gmsAEoRQIK2A9cm3zdad2yyAl0XhI7ODHTcfH9veACXHIUqwQjeL8+9ANUZEn1KcVmodFVooWzKiq4prhg77hVn3d9UXbiEKEUA4/1f9V+iHdRjAiyyBiskoTUB9AtoK/kCXe0oJ3jwz801Hy4ZSrkAgzKBLy5giiF0MD7WsQFMeqSHq9Ckayfv/gY9uGQoTUDgBs/QBQl+XBVyKpTMIMFRV4k6O8SbN3QGpzd+17tUFWN5C3BDfxT05BxAiiIQApCqRK4YsaLPuXJEB2hOwd678fvBnnd8OdJkaQLI5H2uAqUSpNQnW1XGBVIeA52DCzEJ6ERkSNW4/eqd4PTan4Yb8JbhQElQ1de1bI78OgNw4AskE4AERSVBEeUe0IOoQtlCc5+o92hW6eDaJ8Fd27IedX+kfHgLKG0B1prrh7G5mwERHzvG58kFOBBKyczHcs2KrSU65pFk4IRn107xoH769QfJ0mmwfnzuWRX3TGtZTxEphWIBnAqZWtG2pa0B5J7SlItV6PsI+lmeYQo5hdrWIU26HPW+q9rwNaA8AR/TqM+unEHUcRZU6gElBOiiCEwxpGKhga4bF9AEKNML2xxbekMbfGVDm64f9d776sgoT8DJuYeKCFBGEBKS5cRIOPb52AKUyIzWSMjoGI3AkLgXPSt78z3at2nXoUtPqTmuKn0ixs/s3xnWezWo2zbU+31okk486ustaqfF79J2NLipDhcgAL2wimciNbUeipDGHWxtFZFwulhUWuiEpnGCFEgIzG0qHHUvq6P0fJfudfkAMX7WS76ACFnYLE3AO3/pNx3lngZJ7SVNWEwczTUVm7ncA6N501uc0YtoKSITmH87B37pNKhctx7EgsIon5iAJiZs4kGk3dCQlCZwLgczpCslvH7JK09AFephZMIJc1ZGSApg2vTBmD5MdxRlyKSik/z+llRxVhtKf7ZTmgCq/71I05HJy0eUCV5qJDSOiwqzPXu5iL87FhewSxc2y1eCFSLAHvk+D4DDqPHUTqDZJ6+pxNPKdAyWiig0TcCnRd4Hg5uV8hZAVd9tFhh1EhgTZj5/Niai5nOBPGQIOUWm0j8+BeP1wXsVn0/LjwYBm2hyD4r25xFe+wbKZtzDpK+0GDHVeYCkX8XXZxEefYOO27UB3EnWD6UswPkCW9Ri/nBWhFJT1+ZG8lmVEDTRpMLRozijDXr2Ye+W2u9NPFKKABuhibOS90QH5oVKeVVlPJe0ipze+JSuH/Rvqk7azbIucE++i/nbXEgx56h2ijZxs3FTHjftRFsTfXhcC+DOIEP46JuFUPuCSuAQzgDKR+zkR+PyVU3fi45DkWY8eaZ2fESITya/2WvMHkQVtoBwCBuFNGw6Fm1JLSc1HZu+tM3jgDCOjhYJnxgzie+jWMXEpr/1eA0p0DXmG0EWtgD3c2Tte/M8GyfGiQpsuiDSEI5MMWFN3JjFN7XbhgAezSt4hEJBkITfgALCp0XuSJhZgQ2n6+ZUyGgQRfB9KIFCFjCpfTWj4aziBHF2/o4sIRds7gC73Ub5Vae5LUC0j+PaV6kS5seHScExM4nnttEGrfX2BSyGuSxAIn8AJ0kCuM9WSiNJnx+r3jKAM+5PIDO6e78+9wavX9f/8fNvdqAA5soCGMAWz7KYZUATyMKpvCxRHqeLlNxaYQ7hUc/4PLzwVCNN+HcPBq0LG7eLCs+Y6QK1z7jshZTlrOTYMvv9gtY99gJlv66l/Xw/zc95denNm3CHpt+2LVhrQAnkElA7k6LnwEpxFJUgYJlDWBP7utTk46uoBe+lPHfjeNB6HQQHcAVpctZ69O+flltYyY0BlU/xmHb3Yz/JSkVlCZh4jzXOkf1KhsYZrPUv3XCHer7Ny20hTZ+/+rFdSvuMTAsg098hwe6PdTD+WRyJGVzxcSKZKzgRvJ/xTv2PwdYrDHZDW9V5dhl4eV7BI1gAqRZQ/Qy3aFp/qrAoTUBOEUO7XI0z6n/GFmKwg5bVCmkoystvojpL+W9uq9LaZ0xZQO1z/JBKyn1coqaTKdPABy34Ya7GP6FJFxf2AiACHP33SLSgCvL3yo70vg0LYswCjPCHRYXHybw/eR/i1Nim3cx6nRdJAwDSOBVfZOoBaV3MnQU3aws8JU+njbzVoXkQW0DtBX6IQziEEsiq7c29LrnTEc0gP5kl+NW/YYtGm1t9G+6jWWnWq0lqtJBivkX1Rrv37cWX1IWA6gvcIi1mDiZmaTijmuJ1vI8kh3+QX6tffY4t1vjAonW7tZGWx6a/pCOjczKKowEsDody/Uae8EXA2rZJ25jQdi/jWVm8BNiid+4PbJpii9YG1WiubypNJs/txf2foar+aIQ3S9OZjZBvo9b24ayRGY0rWuRqW7Sq1KKSuh7PjvP3o+WTRImcEY46NM21lP9XYhfwoARMQHtaS6SwrJEZl9O0iHJvGMJGiEA5HCfbAjQrLKmp1jAUjTHotHDNnwWHgwnqNfOZmo+Epu2QTNzna2kmzub9nyppGOAuCbxB2q5L580EZ3J2L7O2MNcsI7V5Vb8VwjNYEhwKPg/J/U7oA2nz/D6MNP1knokHNvHzQCrIW6EeQdaTU1pZ0+nJ6fBoQVneSay3RSTQ/aVZgHyXBz3KGm7ToOIbVHE9U6HbIYE7i8y0JEGTKU3aNYmMe8BrCsbtxmaAcZqEmLgJC6F7jcgCF0XReLcUOBQTaJi7QbXBXYWjAKySQ+GcgRdVkNeXpZy3QkAStU8lDe9AFIxTAuBkoXXRUEvr91snIILUI4qIiCzCXE/r4P8kARGIiF0SfiftngRBCopr1vJcoPTy+FcFCm67JGgDdAYSSGwIZW5STKOXnrFK4dIRwOAITySsk7Y7NDrVawTRhCuTMSxXvKXhUhLAYBL6H6g7MpJMZAh2g9pwZB3/F1j7O+5feR7ilef4cu05ruS/6F5a/BeDzcSo7sU+1QAAAABJRU5ErkJggg==",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),className:x.icon,height:33,width:33,crossOrigin:"anonymous"}),(0,s.jsx)("div",{className:x.text,children:l.ZP.t("dre_m10n_payment_progress_desc1",{},"Payment is in progress on another page.")}),(0,s.jsx)("div",{className:x.text,children:l.ZP.t("dre_m10n_payment_progress_desc2",{reopen:(0,s.jsx)("a",{href:(0,g.C)(r,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),className:x.reopen,onClick:t,target:"_blank",rel:"noreferrer",children:l.ZP.t("dre_m10n_payment_progress_desc2_placeholder",{},"reopen")})},"If you have accidentally closed it, {reopen} it to continue.")})]})},b=t("967355"),I=t("403167"),w="wrapper-DbAw2U",k="icon-fCbVLc",j=t("369617"),O=e=>{var{content:r,className:t}=e;return(0,s.jsxs)("div",{className:d()(w,t),children:[(0,s.jsx)(u.vUr,{onClick:()=>{(0,I.u)(r),j.s.success(l.ZP.t("copy_success",{},"Copied"))},className:k}),r]})},S={payResult:"payResult-iR54DD",resultInfo:"resultInfo-RoCTRu",iconWrapper:"iconWrapper-WtWeyD",icon:"icon-qzCoxV",success:"success-lHkXTs",error:"error-oOcKf3",resultText:"resultText-FsKQHs",orderInfoList:"orderInfoList-gfVM7U",orderInfoItem:"orderInfoItem-VHzcmC",orderInfoName:"orderInfoName-hJxaZX",orderInfoContent:"orderInfoContent-O7vRJJ",price:"price-V736uo",button:"button-ke0w_Z"},A=t("733437"),N=e=>{var{success:r,orderInfo:t,payManager:n,onOk:i,onPayAgain:a}=e,{isOrderLoading:c,isVipExpired:p}=(0,A.k)(n,e=>({isOrderLoading:e.isOrderLoading,isVipExpired:e.isVipExpiredError})),v=(0,o.useMemo)(()=>{var e=[{name:l.ZP.t("dre_m10n_payment_details_amount",{},"Amount"),content:(0,s.jsx)("div",{className:S.price,children:t.amount})},{name:l.ZP.t("dre_m10n_payment_details_product",{},"Product"),content:t.productName}];return r&&e.push({name:l.ZP.t("dre_m10n_payment_details_date",{},"Payment date"),content:t.paymentDate}),e.push({name:l.ZP.t("dre_m10n_payment_details_order_number",{},"Order number"),content:t.orderId&&(0,s.jsx)(O,{content:t.orderId})}),!r&&e.push({name:l.ZP.t("dre_m10n_payment_details_error",{},"Error code"),content:t.errorCode}),e},[]);return(0,s.jsxs)("div",{className:S.payResult,children:[(0,s.jsxs)("div",{className:S.resultInfo,children:[(0,s.jsx)("div",{className:S.iconWrapper,children:r?(0,s.jsx)(u.DLY,{className:d()(S.icon,S.success)}):(0,s.jsx)(u.Rnl,{className:d()(S.icon,S.error)})}),(0,s.jsx)("div",{className:S.resultText,children:r?l.ZP.t("dre_m10n_payment_details_result_success",{},"Paid"):l.ZP.t("dre_m10n_payment_details_result_failed",{},"Couldn\u2019t pay")})]}),(0,s.jsx)("div",{className:S.orderInfoList,children:v.map((e,r)=>{var{name:t,content:n}=e;return(0,s.jsxs)("div",{className:S.orderInfoItem,children:[(0,s.jsxs)("div",{className:S.orderInfoName,children:[t," "]}),(0,s.jsx)("div",{className:S.orderInfoContent,children:n})]},r)})}),(0,s.jsx)(b.J,{type:"secondary",className:S.button,disabled:p,loading:c,text:r?l.ZP.t("dre_m10n_payment_details_ok_btn",{},"OK"):l.ZP.t("dre_m10n_payment_details_retry_btn",{},"Retry"),onClick:r?i:a})]})},R={payModal:"payModal-NONiEu",showBackBtn:"showBackBtn-mg8UaU",actions:"actions-LGOF8f",title:"title-U6lBMT",backBtn:"backBtn-BTVdmL",backBtnIcon:"backBtnIcon-NwGACU",closeBtn:"closeBtn-m9oVmw",content:"content-hGTDS8"},M=t("217448"),V=t("799108"),E=t("909854"),L=t.n(E),D={paying:m.Vq.PayWaiting,pay_success:m.Vq.PaySuccess,pay_fail:m.Vq.PayFail},Z=e=>{var r,t,c,g,h,y,f,x,b,I,w,k,{containerService:O,payManager:S,showBackBtn:E,paymentPrice:Z,onBack:B,onClose:U,onPayAgain:G}=e,F=(0,p.ko)(O,M.q),W=S instanceof _._,Y=null!==(I=W?null===(t=S.currentProduct)||void 0===t?void 0:t.amount:null===(c=S.currentProduct)||void 0===c?void 0:c.totalAmount)&&void 0!==I?I:0,{cashierUrl:K}=null!=S?S:{},z=null!==(w=null!=Z?Z:null===(g=S.currentProduct)||void 0===g?void 0:g.priceTips)&&void 0!==w?w:(Y/100).toFixed(2),[J,H]=(0,o.useState)({amount:L()(null!=z?z:"",{symbol:null===(h=S.currentProduct)||void 0===h?void 0:h.currencyTips,precision:(null==z?void 0:z.includes("."))?2:0}).format(),productName:W?l.ZP.t("dre_m10n_payment_details_product_credits",{num:null===(y=S.currentProduct)||void 0===y?void 0:y.number},"{num} credits"):(null===(f=S.currentProduct)||void 0===f?void 0:f.priceType)==="un-auto"?l.ZP.t("dre_m10n_payment_details_product_1m_plan",{},"1-month plan"):"".concat((0,V.sG)({level:null===(x=S.currentProduct)||void 0===x?void 0:x.level}),"-").concat((0,V.d8)(null===(b=S.currentProduct)||void 0===b?void 0:b.cycleUnit))}),[Q,q]=(0,o.useState)("paying"),{currentProduct:X,orderId:$,orderResult:ee}=null!==(k=(0,A.k)(S,e=>{var r;return{currentProduct:e.currentProduct,orderId:null===(r=e.orderInfo)||void 0===r?void 0:r.orderId,orderResult:e.orderResult}}))&&void 0!==k?k:{},{isVip:er}=(0,A.k)(F,e=>({isVip:e.isVip})),et=(0,o.useMemo)(()=>({source:W?m.kD.Credits:m.kD.Vip,status:D[Q],isVip:er,sku:null==X?void 0:X.productId,orderId:$}),[null==X?void 0:X.productId,W,er,Q,$]),en=(0,o.useMemo)(()=>(0,s.jsx)("div",{className:R.title,children:l.ZP.t("dre_m10n_payment_progress_title",{},"Payment details")}),[]),ei=()=>{var e;(0,m.b1)(O,(0,a._)((0,i._)({action:m.vg.Show},et),{payChannel:(null===(e=S.orderResult)||void 0===e?void 0:e.ok)?S.orderResult.value.paymentMethod:void 0}))};var ea=(r=(0,n._)(function*(){if((0,m.b1)(O,(0,i._)({action:m.vg.ClickPayAgain},et)),yield null==G?void 0:G(),S.orderError){j.s.error(l.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_toast",{},"Something went wrong. Try again later."));return}q("paying")}),function(){return r.apply(this,arguments)});return(0,o.useEffect)(()=>{ei()},[Q]),(0,o.useEffect)(()=>{var e=null==S?void 0:S.onSuccess(e=>{q("pay_success"),H(r=>{var t;return(0,a._)((0,i._)({},r),{orderId:null==e?void 0:e.orderId,paymentDate:(0,v.vc)("yyyy-MM-dd hh:mm:ss",(null!==(t=null==e?void 0:e.purchaseDate)&&void 0!==t?t:0)*1e3)})})}),r=null==S?void 0:S.onError(e=>{q("pay_fail"),H(r=>{var t,n,s,o,c;return(0,a._)((0,i._)({},r),{orderId:null===(t=S.orderInfo)||void 0===t?void 0:t.orderId,errorCode:null!==(c=null===(o=e.errorInfo)||void 0===o?void 0:null===(s=o.value)||void 0===s?void 0:null===(n=s.closeReason)||void 0===n?void 0:n.code)&&void 0!==c?c:e.code})})});return()=>{null==e||e.dispose(),null==r||r.dispose()}},[]),(0,s.jsxs)("div",{className:R.payModal,children:[(0,s.jsxs)("div",{className:d()(R.header,{[R.showBackBtn]:E}),children:[(0,s.jsxs)("div",{className:d()(R.actions),children:[E?(0,s.jsxs)("div",{className:R.backBtn,onClick:B,children:[(0,s.jsx)(u.USi,{className:R.backBtnIcon}),l.ZP.t("dre_m10n_payment_back",{},"Back")]}):en,(0,s.jsx)(u.Rnl,{className:R.closeBtn,onClick:U})]}),E&&en]}),(0,s.jsx)("div",{className:R.content,children:"paying"===Q?(0,s.jsx)(C,{cashierUrl:K,onReopen:()=>{(0,m.b1)(O,(0,i._)({action:m.vg.ClickReopenPipo},et))}}):(0,s.jsx)(N,{payManager:S,success:"pay_success"===Q,orderInfo:J,onOk:()=>{U(),(0,m.b1)(O,(0,a._)((0,i._)({action:m.vg.ClickOk},et),{payChannel:(null==ee?void 0:ee.ok)?ee.value.paymentMethod:void 0}))},onPayAgain:ea})}),(0,s.jsx)(P,{})]})}},284829:function(e,r,t){t.d(r,{s_:()=>k,yJ:()=>O});var n=t("876826"),i=t("772322");t("395248");var a=t("423342"),s=t("2910"),o=t("218571"),c=t("733437"),d=t("653061"),l=t("319440"),u=t("967355"),p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAYAAAB1PADUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfsSURBVHgB7d3hcdtGEAXgl0z+Rx340oE7EFyBkwrMVGC7AsMVxKmASAVxKiDUgV0BLx0oFSjaWL88uxw+8YEinPfN3J/VGTye1wZWBxwA4G4FbURuKvoP4OyL4zBacYxd0X8o+m+L/iMu/+/p7nuYCTmhTMoJZVJOKJP64cDPOs7v6qEd6xZPM85LcvvQzq1lwSqh+n37Cec33rd3RP83D+3/7HfUVfCS9kiSyqc8k3JCmZQTyqScUCb1A3gNp1NVJlVV2Iv+rYh3cNqRsXBV/IypZh+DrZgrnenMJlTDl6v7U0337Vec7sN9e5XEX9y3OYlvka/zRUXbcTxmDp5DM2esam5Y1Nz4lGdSTiiTckKZlBPKpB5T5V2Sjvzim60g48K5JfG56F/FB+Rj+YTjfcaKrT2hRmj8WcS/K+IvklhDXs19Kvp/k3zKMyknlEk5oUzKCWVSa78or/yMfB2rWtv6CK4y3BTxKYn1om9DXhVG/xkr9a0m1Gtwz+a9BbeWlz0718Hd5dqK40xYcUL5lGdSTiiTckKZlBPKpNiL8qiEJpzuBuuwwXI68rlUzc0MfsOPDLUu+piEUtxpuRZbLKdj2bmcoPnHT/Epz6ScUCblhDIpJ5RJVRflseY14vyuwYk1u+dJ/AZ5tRSPFTWc7n0RH5NYR35x3JBXkXFD3kcc7xpP83dVPvN3UXs0Ytk9NndF/1b0r8aTafAem95j07ScUCblhDIpJ5RJRZX3HpdvBucV8gvzqvrbIMfMzS246u8ZODNscRO4KmQojrPH8dUcawA3xi1WzKc8k3JCmZQTyqScUCYVm0FkF4FRsbxN4rF+81sSjx1DPuB4A7jt+v5Cvr41gFubuy7iN2R/RszZz0T/Dq6iq+aG9Q75XEYeZHdtxt/3j0k8rTT2yDVw61WVDTRreawdNGt5l9RGaOzAzc0eXsuzpTmhTMoJZVJOKJNSbZYRd01mF+ZRPY1JfAa3TeAA7sI/KhNmX8ttEa/GyIzlE/KKmbUBVxm/uW8vif7PwUkfAVMlVJTGQxLvRf8ObreTAdxuKuwrKYYirtgbM0ruGacbwHn+iD/DmLOgT3km5YQyKSeUSTmhTCouyplKZul3vG2QVzJRLWbjjK0PmXWyqLay7xBVXkviTDUXF9+/FPFLEi+9Ztb+OtH3v4Sak3jDshVCpaG+dXdO4htwmF8lANwcqKq5pcUczFiIT3km5YQyKSeUSTmhTIpdeung1+D2RP8/kG8evymOw1ad8RqzbM0q1qV6Eq/GzmxwPyBfK5yxju0lo9JtSTzyoH8dfMxaXgengdNFx8lUr7zv4L4X0xfFZzasQwMxVp/yTMoJZVJOKJNyQtlZNHCPVw3gNn7YQPMI0QYa6SNBC7cdljUBi46/ZR/q/6FMygllUk4ok3JCmZQTys6igavyKhtw1R9rAleZDMVx9uRxMg1cNTeQnzkWxxnJ42yK4+xAVHPwZhl2Dk4ok3JCmZQTyqTifqiWxNuBP3PoZ1/7EZwrcDfNscevdCynugdL9UhaPG3Tyf6MBtLdE7RtMZZx4c8dsJwGLDr2EcvaQTBOn/JMygllUk4ok3JCmdShp17mIj7geFFRZPsJfC76d9R7LbSif0/i8ajUVRFfSgOnmptKB6eBG9PfEO15kF2t74u+DZpqjjVCsy51SW2HZU3gxjNAwKc8k3JCmZQTyqScUCZ1qMobklgDVwlU1VxUYEzF9ayIN+TjrNbJoqpi1rIGLKfa213lGdlfVgEzlcAeGhvyc1VtAOfOjWs+5ZmUE8qknFAm5YQyqajyJqK/ahP3Tn4uKzbDvyriLYnHRvDZd5twPPZl1ZUO3durGkxiB646aThdw4kV0kPbQmMSjcdVnj0dJ5RJOaFMygllUlHljbh8M5Z909MbaCrY90TfZ+C2dByQLx3N4OYmKtrPRP94hVxWMcdr0tI5u1tBG8HZnXl80fbgDOCqvBHc3ExF/w04++I4LevsU55JOaFMygllUk4ok6ru2Iyr999xftfgboKLtbPsTsNW9J/w5fmzY73D5ZjJ+NLKylhRsaiM0FQyVRvAuaQqjzVh2SovbT7lmZQTyqScUCblhDIp9p3DsabzG053A80dmxO4KqeDw7xkuloLjCr0dRKvnh0coLkwvy7irw78LEPvBcpULA2nrXep16vWYIBmzlbRfMozKSeUSTmhTMoJZVJslbcW75Cv58UdlR3H2+J0bJVUVcAvoXnub3r4jGNFVX/0d/hWE2pAvm73B7iE2uD89sgTqkGTUOyvbOIf59EJ5VOeSTmhTMoJZVJOKJNa+0V53DX4MonHxXf2jBzz5oLwoojvklis5f2C07Xi+DcHxsOo5iCquezuV6oyXntCxQQMSTwmYcbpZqLvLTSfuUH+nW6w7O2+1VzGAnnHkXzKMyknlEk5oUzKCWVS7EV5v28/4XSqvTqjyhuT+Bb5OlxUYVmVE1VVS+KK7zoUY5nB3RFaiTl4jdNJ3tL+mCqv43Lcok7OlsSuDvRtWE47MvYYV1h27BSf8kzKCWVSTiiTckKZVHVR3vA0G2awlcYH5Gt51XH+RH4R34r+zBw0sv9Q9K/GHpXcqyQe65ZZNRprc9kNeW/xZZ/Nr8XcZGt5lbQyPlTlNVw+tsK5Ape0DZwGTiP6Hhp7T2L/FH1vi/7sr3IakvH7lGdSTiiTckKZlBPKpP4F1kw7bu9v4vwAAAAASUVORK5CYII=",v=t("889715"),m=t("652494"),_=t("417699"),g=t("105789"),h=t.n(g),y=t("66003"),f=t("247170"),P=t("150615"),x=t("909854"),C=t.n(x),b={wrapper:"wrapper-a2JfFr",qrcodeWrapper:"qrcode-wrapper-SOeZ3W",qrcodeNoBorder:"qrcodeNoBorder-TgDq2m",qrcode:"qrcode-gNTkxl",qrcodeImgTop:"qrcode-img-top-ycNcII",qrcodeHide:"qrcode-hide-ZDD_kb",qrcodeImg:"qrcode-img-JQuUkf",mask:"mask-aKOeNa",lockedMask:"locked-mask-iL03x1",agreementButton:"agreement-button-LwBRL0",whiteButton:"white-button-XngYAU",payText:"pay-text-sEL_QY",payPng:"pay-png-XWHiRA",agreementF:"agreementF-kv5jwp",agreementS:"agreementS-ZtzSNl",loadingText:"loading-text-P32Jg6",errText:"err-text-aBvR7c",vipText:"vip-text-zcA9Al",warnIcon:"warn-icon-AWTZsB",closeBtn:"closeBtn-ReU72G",qrCodeModal:"qrCodeModal-kwHuEY",qrCodeContainer:"qrCodeContainer-VXRE6k",modalTitle:"modalTitle-WaeEW2",agreementPrivacy:"agreementPrivacy-cKERkh"},I=t("604201"),w=e=>{var{isLoading:r,isError:t,isAgree:n,isVipExpired:a,isOrderFailed:s,handleResetCode:o,handleAgree:c}=e,{isOversea:d}=(0,y.G)(_.e),p=(0,i.jsxs)("div",{className:b.lockedMask,children:[(0,i.jsx)(l.XG,{size:l.XJ.Big}),(0,i.jsx)("div",{className:b.loadingText,children:"\u4E8C\u7EF4\u7801\u83B7\u53D6\u4E2D..."})]});return s&&!r&&(p=(0,i.jsxs)("div",{className:b.lockedMask,children:[(0,i.jsx)("div",{className:b.errText,children:"\u4E8C\u7EF4\u7801\u5DF2\u5931\u6548"}),(0,i.jsx)(u.J,{className:b.whiteButton,onClick:o,text:"\u5237\u65B0\u4E8C\u7EF4\u7801"})]})),t&&!r&&(p=(0,i.jsxs)("div",{className:b.lockedMask,children:[(0,i.jsx)("div",{className:b.errText,children:"\u4E8C\u7EF4\u7801\u83B7\u53D6\u5931\u8D25"}),(0,i.jsx)(u.J,{className:b.whiteButton,onClick:o,text:"\u91CD\u65B0\u83B7\u53D6"})]})),!n&&(p=(0,i.jsxs)("div",{className:b.lockedMask,children:[(0,i.jsx)("div",{className:b.agreementF,children:"\u652F\u4ED8\u524D\u8BF7\u9605\u8BFB"}),(0,i.jsx)("a",{href:m.y.COMMERCIAL_AGREEMENT(d),className:b.agreementS,target:"_blank",rel:"noreferrer",children:P.ZP.t("dre_m10n_subscription_page_business_service_agreement",{},"\u300A\u201C\u5373\u68A6\u201D\u4ED8\u8D39\u670D\u52A1\u534F\u8BAE\u300B")}),(0,i.jsx)(u.J,{className:b.agreementButton,onClick:()=>{c()},text:"\u540C\u610F\u5E76\u652F\u4ED8"})]})),a&&(p=(0,i.jsxs)("div",{className:b.lockedMask,children:[(0,i.jsx)(v.lHv,{className:b.warnIcon,size:16}),(0,i.jsx)("div",{className:b.vipText,children:"\u4F1A\u5458\u5DF2\u5230\u671F \u65E0\u6CD5\u5145\u503C\u79EF\u5206"})]})),(0,i.jsx)("div",{className:b.mask,children:p})},k=e=>{var r,t,{payManager:a,hideWechatCode:l,hideAliPayCode:u}=e,{isLoading:v,coverUrl:m,isError:_,isAgree:g,isVipExpired:y,isOrderFailed:P}=(0,c.k)(a,e=>({isLoading:e.qrCodeLoading,coverUrl:e.qrCodeUrl,isError:e.orderError,isAgree:e.isAgreeAgreement,isVipExpired:e.isVipExpiredError,isOrderFailed:e.isOrderFailed})),[x,C]=(0,o.useState)(!1),I=!v&&g&&!_&&!y&&!P&&x,k=null!==(t=I?m:p)&&void 0!==t?t:p;(0,o.useEffect)(()=>{C(!1)},[m]);var j=(r=(0,n._)(function*(e){try{var r,t;yield null===(t=e.target)||void 0===t?void 0:null===(r=t.decode)||void 0===r?void 0:r.call(t)}catch(e){}C(!0)}),function(e){return r.apply(this,arguments)});return(0,i.jsxs)("div",{className:b.wrapper,children:[(0,i.jsx)("div",{className:h()(b.qrcodeWrapper,I&&b.qrcodeNoBorder),children:(0,i.jsxs)("div",{style:{background:I?"#fff":"none"},className:b.qrcode,children:[(0,i.jsx)(d.k,{crossOrigin:"anonymous",onLoad:j,className:h()(b.qrcodeImg,b.qrcodeImgTop,!I&&b.qrcodeHide),src:(0,s.C)(m,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),alt:"qr_code_cover_url"}),!I&&(0,i.jsx)(d.k,{crossOrigin:"anonymous",className:b.qrcodeImg,src:(0,s.C)(k,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),alt:"qr_code_cover_url"}),!I&&(0,i.jsx)(w,{handleAgree:()=>{var e=(0,f.VM)();C(!1),a.updateIsAgreeAgreement(e,!0)},isAgree:g,isError:_,isLoading:v,handleResetCode:()=>{var e,r,t=(0,f.VM)();a.setCurrentProduct(t,null!==(r=null===(e=a.currentProduct)||void 0===e?void 0:e.productId)&&void 0!==r?r:"")},isVipExpired:y,isOrderFailed:P})]})}),(0,i.jsxs)("div",{className:b.payText,children:["\u8BF7\u626B\u7801\u5B8C\u6210\u652F\u4ED8",u?null:(0,i.jsx)(d.k,{className:b.payPng,src:(0,s.C)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASLSURBVHgB7VdpaBxVHP+9mdl712azNmmb08SjNtp4EZSW2GKEUisoGKNfbBUrooIFFcSaGMQP4oltFS2FpiAoifpB8KiKGrQaolUxkTQlpGmJNUn3SJpuZ3fneP5nNnslu9l1TT61v50Z3pv33v9+v3kLXOhguQY6O7nQee3ZJmj6WhQtnSt2zsYj93p7c07J9lLoDnRwxp7kHKVYEvDTpOlNtPpey2uA2DO9X+P6TiwDRM4PaG2+DNlCRufj0FMalke5AY2xh4Wemfb0dxkRYN3BcQ5UoADcXcGwvoRmQ8f3kxy9frGQZWAMQf6XdyU6mW70pcSA9MmZW1W1MOUG2qptaKt0mO3n9WkygBe0zqgrS81YkwL0Gf1kClRNrESRYLk3U1YoLk9yZ0kp03TLvJLAWg9HW5WIRHANHznjZuOaS1JzN5dJkJhqJlQwAmvOYcaFPSM6AjHkhIRFIDEBXqsNieCm++kQUwY4BAklViGrDEGIzplehAGDZzl2/SFnHVvtcKDOZTHbn09E8NKQGR/8V0j5JpTbgTcajWJjGfJvLk0tvYeK8eoVOtJjNBZWsHtAySc+vwFRDfhqkh6knSWedH09paS/MW3bUWvFppVWc92+ETX5/n8ZME1OHBqL5ZtGyjg6GpxzPY7ucaWghEiLiWzyCdhaJqLWLZpCIxrD8VkFv4V0DM1qmIwKSPi4bY0Fdc54CvqCMfwwpZusU5QBVS4B+6634c7VNiAZ5oQwu6lSpefPlIbv/Co+Ox3D01fak+vfHomRblZcBASiqm+a3fDLMWzvC+MLUhKIcGIIjoYSCTd4BeIGG1rKrWgui98d65zJ9SdlDR+MRYkDCqPmBQa0Vlswq2jYciSKWZWb3GmEUqMI/Dmjm3fXmIoap4wHqkXsrLNRxCzJ9TUOEcN3eHF4IoaDozKOzsTTxHOEYwF7bF0l4dVjpFzhc+nNnseT53W8OxqDzBeO17tEPFbvwC+3l2J0iwt7KZ23XSoSYenIGwGiLrik/MWzxs7w6UYPrnDHRbwyFMbAOY5H66zY4LMm59W6LXjcuOuBAO3p32c4+v0ydifUzRd8mAqqvcGOWmd2amUUy23lwJHNbtzolcz4vDgYxrNEOu9TajZ+G8Z1XwbRdUJGUMn02GcT0ULfjefWeVLykq1u/w6y56BEH5L+Fjd8FIVDp6LondIwToXlpv5NVIT3UY00UwEK9POTR+2DMt47oWTNcSXtprtWidh1lZNom6V/NR+kXdKV1QCj6aWaer3Rju2X2UnN/HRw8ozjnWEZe6gGzsSQl+4MCbf4GJ64nLZ2BW1t+dz9Hs+KD42x1IFEDg2rDp/ZDhH7PfRrBC8fl7GBvG4k3ndLIk6dV3E0pOJHOnzMKJncvxgM+34KcLojqHbGsN4Wmkg3bm4WnYM/CvmX7iScA4yP0+m4KtFNVRpjZAF7C8sOMUPHghgKPYH9OmfLczJm/AB5n/tYbkBv9T0CSXiGmPxvLI1W4xeEwF6Yrzw+ugiknn82qbBVELFbUCxE/RgG9vbTfz0dF5EF/wJaSZkpLpQGOQAAAABJRU5ErkJggg==",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),alt:"zhifubao_cover_url",crossOrigin:"anonymous"}),l?null:(0,i.jsx)(d.k,{className:b.payPng,src:(0,s.C)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARASURBVHgB7VZtTFtVGH7OvZcCsxSCbomZjA3Yh9EwTUz4YSLbcCTMyWAUFN0yg5hMM5mJi9MYQ5jxI2qWMF38YbYE52B8yoSMDWEhkIhxS8QJbHNgiy1xC2w0bfhoe+85nnuxTWG3DRS6P9uTfpzz3ve8z/Oej/ce4H4HQRhIrclOkmWazmLwMAPzKAy3TUrcjWvFzVYsEgsSsOXHvASLMr2HQtlFGc0gBHFMG+r7nQ0kQHBzQb2EijUmQ2xbf95Z25IEbGjZtnpqipVRgeznpCYsAoQQxoVVRQlKhTW/yxrUL9iDdQ05B2TmraCEJmIJIEyYEQXy8UjBz5/qPtczrq3NqvSKrAzLCBGkURDjSq35zY5AuzDfMblpe/Vyk6tQwApAp5rKfz1mCiogqX7rEZnSYkQA8aIR7z9RsvXdzSVHA+3+JVhzJnsnlZQWpu3p5cOm+BS8kVYAc3I2z5bA6Z1E5eDpvPKn95+dK6D++WGF0BQsAwjPIWNlOg4+vhfPrnxKI3HLHhz/qw4nhhsx6Z60xrqS06+/ftIlqQMeq8/MkTl5WFUpAA9JMShckw0z/25O3AgtPy6m/WYvyvu+gX361qyjgLXehNEXeataE0BI1D4CelfAGDEae9flot56AQ7ZGZQ4XjLitbRdKOVTnWCIg29ir9y5jk/6v8MvY3/MTksAvIon1y+An/VNeks/I7tRuj6PB8/Fnu4PYJmyzyWOMuHA+iIUp+yEyWD0V0Wn14Wjgz/glOUneKlX97BTQchQ/zUBfJT+2vOBjbYOvL3hFbRuO44vBk7g3L89SIp9FK+m7MALqzOxQor1x1c3cK3lPL4arMJN93jIMssoS/yfgu+BhiyZDxb1HBN5lr05ZziRwU9C5oVWs748PoAjV75F38S1Bb1h+IlgNnOnoNUBQtlYMMc7XidqLK3+/nzycbcDZb99jt3dB9HnWBi5CsrY+KwQNSiBJZTzaes5sHl7xOWZxLGr1chs34dmewcWC5EIo34BMhG7QznfcFnRPXZZa6tL0Dbagx0X38SXV09qhSUsMKYF1DahUY6umY6aOczf9UH9P/r9axx+sgRVQy3ovd3nvwOECxHS9wiMkdSwvZFfOHbjHkCgpMdW1Pmc1vYZo0XpPa7GgQhDIJySim/5+77GUH7bsIEYPkSkQckh28vt/b7unLM/UTd0Kf6lVH6ZwpYlLXAQ8LgV9sLOzwJtdxUfZ93fXY8Ub3TxDZkFnQtLWMRqICIespvnkusKUDFRO9SbUJQm8SOXiSWTk0sGQvJHCjoa9J5LIcauQrikjIB/ugSIlTZze3Mo36ACFFAte8bLpEBxkTF2ik+lkV+3n+G1O5lAzOC1IJbb1Sme5vYR3v9TIawrgZLWgcKOf7AQsXrG1Kb8VR7qvMWzcEgs6h2r+XwVIgTdGeBZeCQYclcoxgsDRfUePEAE8R9ew5SXgw0L3gAAAABJRU5ErkJggg==",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),alt:"wechat_cover_url",crossOrigin:"anonymous"})]})]})},j=e=>{var r,t,n,{price:a,payManager:s}=e,{isAgree:o}=null!==(t=(0,c.k)(s,e=>({isAgree:e.isAgreeAgreement})))&&void 0!==t?t:{},{isOversea:d}=(0,y.G)(_.e),l=null!==(n=null===(r=s.currentProduct)||void 0===r?void 0:r.limitPayChannel)&&void 0!==n?n:["alipay","wx"],u=!l.includes("wx"),p=!l.includes("alipay");return(0,i.jsxs)("div",{className:b.qrCodeContainer,children:[(0,i.jsxs)("div",{className:b.modalTitle,children:["\u626B\u7801\u652F\u4ED8",(0,i.jsx)("span",{children:C()(a,{symbol:"",precision:a.includes(".")?2:0}).format()}),"\u5143"]}),(0,i.jsx)(k,{hideAliPayCode:p,hideWechatCode:u,payManager:s}),(0,i.jsxs)("div",{className:b.agreementPrivacy,children:[(0,i.jsx)("span",{children:o?"\u60A8\u5DF2\u540C\u610F":""}),(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:m.y.COMMERCIAL_AGREEMENT(d),children:P.ZP.t("dre_m10n_subscription_page_business_service_agreement",{},"\u300A\u201C\u5373\u68A6\u201D\u4ED8\u8D39\u670D\u52A1\u534F\u8BAE\u300B")})]})]})},O=e=>{var r,{containerService:t,price:n,payManager:s,productId:o}=e,c=(0,f.VM)();return s.updateIsAgreeAgreement(c,!1),s.setCurrentProduct(c,o),s.onSuccess(()=>{null==r||r.close()}),r=a.Z.confirm({wrapClassName:b.qrCodeModal,maskStyle:{backdropFilter:"blur(10px)",WebkitBackdropFilter:"blue(10px)"},title:null,footer:null,simple:!1,escToExit:!1,afterClose:()=>{null==r||r.close(),s.reportPopup({action:I.c.CloseQrCodeModal}),s.disposeCurrentTask()},icon:null,closeIcon:(0,i.jsx)(v.Rnl,{className:b.closeBtn}),closable:!0,maskClosable:!1,content:(0,i.jsx)(y.$,{instantiationService:t,children:(0,i.jsx)(j,{price:n,payManager:s})})})}},833148:function(e,r,t){t.d(r,{F:()=>P});var n,i,a=t("876826"),s=t("85728"),o=t("929753"),c=e=>e.isOversea,d=e=>!e.isOversea,l=t("772322");t("395248");var u=t("423342"),p=t("66003"),v=t("247170"),m="pipoModal-yo0HDZ",_=t("867347"),g=t("259435"),h=t("487736");var y=(n=(0,a._)(function*(e){var r,t,{productId:n,payManager:i,price:s,containerService:o}=e,c=(0,v.VM)();i.setCurrentProduct(c,n);var d=(0,g.X)(o,h.M.VIP_MODAL);if(yield i.purchase(c),!i.orderError){var y=()=>{var e;null==t||t.close(),i.disposeCurrentTask(),(null===(e=i.orderResult)||void 0===e?void 0:e.ok)&&(null==d||d.unmount())};var f=(r=(0,a._)(function*(){yield i.purchase(c)}),function(){return r.apply(this,arguments)});return t=u.Z.confirm({wrapClassName:m,maskStyle:{backdropFilter:"blur(10px)",WebkitBackdropFilter:"blue(10px)"},title:null,footer:null,simple:!1,escToExit:!1,afterClose:y,icon:null,closeIcon:null,closable:!0,maskClosable:!1,content:(0,l.jsx)(p.$,{instantiationService:o,children:(0,l.jsx)(_.w,{paymentPrice:s,containerService:o,payManager:i,onClose:y,onPayAgain:f})})})}}),function(e){return n.apply(this,arguments)}),f=t("284829");var P=(i=(0,a._)(function*(e){var{payManager:r}=e;c(r)?yield y((0,o._)((0,s._)({},e),{payManager:r})):d(r)&&(0,f.yJ)((0,o._)((0,s._)({},e),{payManager:r}))}),function(e){return i.apply(this,arguments)})},196451:function(e,r,t){t.d(r,{U:()=>ek});var n,i=t("876826"),a=t("295834"),s=t("772322");t("395248");var o=t("423342"),c={domesticModalWrapper:"domesticModalWrapper-T5aioo",fadeTransition:"fadeTransition-dVG8A1",baseTransition:"baseTransition-wnJwjV",domesticModal:"domesticModal-T20_gt"},d=t("604201"),l=t("889715"),u=t("218571"),p={wrapper:"wrapper-vP5f6E",closeBtn:"closeBtn-Xk3UZ0",closeBtnIcon:"closeBtnIcon-cdlWRP"},v=t("66003"),m=t("562092"),_=t("85728"),g=t("929753"),h=t("434712"),y=t("839141");t("109163");var f=t("372675"),P=t("932119"),x=t("304483"),C=t("967355"),b=t("909854"),I=t.n(b),w=t("799108"),k=t("49176"),j=t("804362"),O=t("150615");var S=((n={}).CurrentPlan="CurrentPlan",n.SwitchFree="SwitchFree",n.ManageSubscription="ManageSubscription",n.Upgrade="Upgrade",n.SubscribeTo="SubscribeTo",n.Purchase="Purchase",n),A=e=>{var{isFreeItem:r,goodsInfo:t,userInfo:n}=e,{changeType:i,level:a,priceType:s,cycleUnit:o}=t,{currentAutoRenewPlan:c,flag:d}=null!=n?n:{};return"un-auto"===s?"Purchase":r&&!d?"CurrentPlan":(null==c?void 0:c.cycleUnit)===o&&c.level===a?"ManageSubscription":r?"SwitchFree":i===j.N.UPGRADE?"Upgrade":"SubscribeTo"},N=e=>{var{goodsInfo:r,userInfo:t,isFreeItem:n}=e,{flag:i}=null!=t?t:{},{level:a}=r;switch(A(e)){case"Purchase":if(n){if(i)return O.ZP.t("dre_m10n_subscription_page_btn_switch",{string0:O.ZP.t("dre_m10n_subscription_plans_free",{},"Free")},"Subscribe to {string0}");return O.ZP.t("dre_m10n_subscription_page_btn_current_plan",{},"Current plan")}return O.ZP.t("dre_m10n_subscription_page_btn_purchase",{},"Purchase");case"CurrentPlan":return O.ZP.t("dre_m10n_subscription_page_btn_current_plan",{},"Current plan");case"ManageSubscription":return O.ZP.t("dre_m10n_subscription_page_btn_manage_subscription",{},"Manage subscription");case"SwitchFree":return O.ZP.t("dre_m10n_subscription_page_btn_switch",{string0:O.ZP.t("dre_m10n_subscription_plans_free",{},"Free")},"Subscribe to {string0}");case"Upgrade":if("YEAR"===r.cycleUnit)return O.ZP.t("dre_m10n_subscription_page_btn_subcribe_yearly",{string0:(0,w.J2)({level:a})},"Upgrade to {string0} yearly");return O.ZP.t("dre_m10n_subscription_page_btn_subcribe_monthly",{string0:(0,w.J2)({level:a})},"Upgrade to {string0} monthly");default:if("YEAR"===r.cycleUnit)return O.ZP.t("dre_m10n_subscription_page_btn_switch_yearly",{string0:(0,w.J2)({level:a})},"Switch to {string0} yearly");return O.ZP.t("dre_m10n_subscription_page_btn_switch_monthly",{string0:(0,w.J2)({level:a})},"Switch to {string0} monthly")}},R=e=>{var r=A(e),{userInfo:t,goodsInfo:n}=e,{currentAutoRenewPlan:i}=null!=t?t:{};switch(r){case"CurrentPlan":return!0;case"SwitchFree":if("un-auto"===n.priceType)return!0;return!i;case"Upgrade":case"SubscribeTo":return(null==i?void 0:i.cycleUnit)==="YEAR"&&"MONTH"===n.cycleUnit;case"Purchase":return 0===n.totalAmount;default:return!1}},M=t("417699"),V=t("733437"),E=t("105789"),L=t.n(E),D=t("340471"),Z=t("779166"),B=t("231194"),U=t("833148"),G=t("236242"),F=t("695001"),W={priceListItem:"priceListItem-vpKum7",btnContainer:"btnContainer-oeKPTu",autoRenewDesc:"autoRenewDesc-MfNfE2",selectedItem:"selectedItem-Vf9c5S",selectedMask:"selectedMask-zUUyBh",priceTopWrapper:"priceTopWrapper-snWRdu",priceTop:"priceTop-SUAaT2",priceListItemContent:"priceListItemContent-Z_jYbf",vipIcon:"vipIcon-BZ0VIV",priceTitle:"priceTitle-kNmeKB",levelName:"levelName-SiSBvH",bestPlan:"bestPlan-MEuyxi",priceTips:"priceTips-xi8ZA0",isCnItem:"isCnItem-p0rByk",cycleTips:"cycleTips-W2OKKq",priceContainer:"priceContainer-DxHZTf",priceDesc:"priceDesc-OrpTYk",tag:"tag-lrUwjE",creditsContainer:"creditsContainer-J0Eh0T",creditsContent:"creditsContent-QMLA0t",creditsInnerContent:"creditsInnerContent-iXYJ6R",creditsNumber:"creditsNumber-mIE1SM",creditsDesc:"creditsDesc-Ds8qP8",benefitsDesc:"benefitsDesc-io41Bz",selectedPlan:"selectedPlan-AkcSis",priceButton:"priceButton-bYE5q6",progressContainer:"progressContainer-uPWlGe",progress:"progress-gojgXb",freeButton:"freeButton-BbHNwV",recommendButton:"recommendButton-2xTTXI",vipTimeoutTooltip:"vipTimeoutTooltip-Ml6DtJ"},Y=t("217448"),K={[y.d.Standard]:"30%",[y.d.Artisan]:"50%",[y.d.Maestro]:"100%",[y.d.None]:"0%"},z=(0,u.forwardRef)((e,r)=>{var t,n,a,o,c,{priceItem:p,vipPayManager:m,isSelected:_=p.level===y.d.Maestro,priceTopHeight:g,onPriceTopHeightChange:b}=e,{productId:j,level:E,vipBenefitPackage:z,cycleUnit:J,priceType:H,priceTips:Q,currencyTips:q,vipPriceTips:X,totalAmount:$,disablePurchase:ee,skuId:er}=p,{userCredit:et,benefitTexts:en=[]}=null!=z?z:{},ei=0===$,ea=(0,v.G)(Y.q),es=(0,v.G)(h.t),eo=(0,v.G)(x.fJ),{isOversea:ec}=(0,v.G)(M.e),[ed,el]=(0,P.default)(),[eu,ep]=(0,u.useState)(!1),{vipInfo:ev,isVip:em}=(0,V.k)(ea,e=>({vipInfo:e.vipInfo,isVip:e.isVip})),e_=A({goodsInfo:p,userInfo:ev,isFreeItem:ei}),eg=E===y.d.Maestro;var eh=(t=(0,i._)(function*(){if(!ee||e_===S.ManageSubscription){var e=null==ev?void 0:ev.currentAutoRenewPlan;switch(!0){case!em||em&&!e&&"auto"===H:yield(0,U.F)({containerService:es,payManager:m,price:Q,productId:j}),e_===S.Purchase?m.reportPopup({action:d.c.ClickBuy,toProduct:p}):e_===S.SubscribeTo&&m.reportPopup({action:d.c.ClickSubscribe,toProduct:p});break;case[S.CurrentPlan,S.ManageSubscription].includes(e_):(0,Z.o)({containerService:es,reportParam:{source:G.ym.MultiVipPopupManagePlan}}),m.reportPopup({action:d.c.ClickCurrentPlan,toProduct:p});break;case e_===S.SwitchFree:(0,D.Q)({containerService:es,preCreateRes:{obtainedVipInfo:{autoRenewEndTime:null==ev?void 0:ev.curLevelEndTime},upcomingVipInfo:{},subscriptionChangeInfo:{changeType:"DEGRADE"}},reportParam:{source:F.fG.MultiVipPopupClickSubscribe}}),m.reportPopup({action:d.c.CancelSubscribe,toProduct:p});break;case[S.SubscribeTo,S.Upgrade,S.Purchase].includes(e_):ep(!0);var r=yield eo.getPreCreateInfo({pid:j,scene:"vip",skuId:er});if(ep(!1),!r.ok)return;(0,D.Q)({payManager:m,containerService:es,preCreateRes:r.value,toProductId:j,reportParam:{source:F.fG.MultiVipPopupClickSubscribe}}),e_===S.Purchase?m.reportPopup({action:d.c.ClickBuy,toProduct:p}):m.reportPopup({action:d.c.ClickSubscribe,toProduct:p})}}}),function(){return t.apply(this,arguments)});(0,u.useEffect)(()=>{var{height:e}=el||{};e>0&&(null==b||b(e))},[el]);var ey=ec&&e_!==S.Purchase,ef=I()(X).divide((null!==(n=null==et?void 0:et.amount)&&void 0!==n?n:0)/100);return(0,s.jsx)(B.i,{className:W.vipTimeoutTooltip,ref:r,children:(0,s.jsxs)("div",{className:L()(W.priceListItem,{[W.selectedItem]:_,[W.isCnItem]:!ec}),children:[_&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:W.selectedMask})}),(0,s.jsxs)("div",{className:W.priceListItemContent,children:[(0,s.jsx)("div",{className:W.priceTopWrapper,style:g&&g>0?{minHeight:"".concat(g,"px")}:{},children:(0,s.jsxs)("div",{className:W.priceTop,ref:ed,children:[(0,s.jsx)("div",{className:W.priceTitle,children:ei?(0,s.jsx)("div",{className:W.levelName,children:O.ZP.t("dre_m10n_subscription_plans_free",{},"Free")}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{level:E,className:W.vipIcon,size:16}),(0,s.jsx)(f.Z,{content:(0,w.sG)({level:E}),checkOverflow:!0,children:(0,s.jsx)("div",{className:W.levelName,children:(0,w.sG)({level:E})})}),eg&&(0,s.jsx)(f.Z,{content:O.ZP.t("dre_m10n_subscription_page_tag_best_value",{},"Best value"),checkOverflow:!0,children:(0,s.jsx)("div",{className:W.bestPlan,children:O.ZP.t("dre_m10n_subscription_page_tag_best_value",{},"Best value")})})]})}),(0,s.jsx)("div",{className:W.priceContainer,children:"YEAR"===J?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:W.priceTips,children:I()(Q,{symbol:q,precision:Q.includes(".")?2:0}).format()}),(0,s.jsx)("div",{className:W.cycleTips,children:O.ZP.t("dre_m10n_subscription_page_plans_peryear",{price:""},"{price}/year")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:W.priceTips,children:I()(X,{symbol:q,precision:X.includes(".")?2:0}).format()}),(0,s.jsx)("div",{className:W.cycleTips,children:O.ZP.t("dre_m10n_subscription_page_plans_permonth",{},"/month")})]})}),(0,s.jsx)("div",{className:W.priceDesc,children:ei?O.ZP.t("dre_m10n_subscription_page_staus_forever",{},"Forever"):(0,s.jsxs)(s.Fragment,{children:["YEAR"===J?(0,s.jsxs)(s.Fragment,{children:[O.ZP.t("dre_m10n_subscription_page_plans_price_permonth",{price:I()(X,{symbol:q,precision:X.includes(".")?2:0}).format()},"{price}/month"),(0,s.jsx)("span",{className:W.tag,children:" \xb7 "})]}):"",(0,s.jsx)("span",{children:O.ZP.t("dre_m10n_subscription_page_credits_valu_conversion",{price:I()(ef,{symbol:q,precision:ef.cents()?2:0}).format()},"{price} / 100 credits")})]})})]})}),(0,s.jsxs)("div",{className:W.btnContainer,children:[(0,s.jsx)(C.J,{onClick:eh,overflowEllipsis:!0,disabled:e_!==S.ManageSubscription&&ee||R({goodsInfo:p,userInfo:ev,isFreeItem:ei}),loading:eu,className:L()(W.priceButton,{[W.freeButton]:e_===S.SwitchFree,[W.recommendButton]:eg}),text:N({goodsInfo:p,userInfo:ev,isFreeItem:ei})}),ey&&(0,s.jsx)("div",{className:W.autoRenewDesc,children:O.ZP.t("dre_m10n_subscription_page_continuous_payment_hint",{},"The subscription will automatically renew.")})]}),!ei&&(0,s.jsxs)("div",{className:W.creditsContainer,children:[(0,s.jsx)("div",{className:W.creditsContent,children:(0,s.jsxs)("span",{className:W.creditsInnerContent,children:[(0,s.jsx)(l.SVG,{size:12}),(0,s.jsxs)("span",{children:[O.ZP.t("dre_m10n_subscription_page_plans_credits_benefit",{number0:(0,s.jsx)("span",{className:W.creditsNumber,children:I()(null!==(a=null==et?void 0:et.amount)&&void 0!==a?a:0,{precision:0,symbol:""}).format()})},"{number0} credits"),O.ZP.t("dre_m10n_credit_validity",{},"\uFF08monthly validity\uFF09")]})]})}),(0,s.jsx)("div",{className:W.progressContainer,children:(0,s.jsx)("div",{style:{width:K[E]},className:W.progress})}),(0,s.jsx)("div",{className:W.creditsDesc,children:O.ZP.t(null!==(o=null==et?void 0:et.description)&&void 0!==o?o:"",{},null!==(c=null==et?void 0:et.description)&&void 0!==c?c:"")})]}),(0,s.jsx)("div",{className:L()(W.benefitsDesc,{[W.selectedPlan]:_}),children:en.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)(l.CDR,{}),(0,s.jsx)("div",{children:O.ZP.t(e,{string1:e=>(0,s.jsx)("span",{children:e}),strong1:e=>(0,s.jsx)("span",{children:e}),string0:e=>(0,s.jsx)("span",{children:e}),strong0:e=>(0,s.jsx)("span",{children:e})},e)})]},e))})]})]},j)})}),J=t("27433"),H=t("899229"),Q=t("608358"),q=t("484702"),X={[w.vJ.LipSync]:"dreamina_lipsync_btn_name",[w.vJ.LipSync1]:"dreamina_lipsync_btn_name",[w.vJ.LipSync2]:"dreamina_lipsync_btn_name",[w.vJ.ExtendVideo]:"video_new_tooltip_extend",[w.vJ.ExtendVideo1]:"video_new_tooltip_extend",[w.vJ.ExtendVideo2]:"video_new_tooltip_extend",[w.vJ.RemoveWatermark]:"dre_m10n_sub_title_benefit2",[w.vJ.ImageControlNetCanny]:"i2i_edge",[w.vJ.ImageControlNetDepth]:"i2i_depth",[w.vJ.ImageControlNetPose]:"i2i_pose",[w.vJ.VideoUpscale]:"aigc_video_btn_high_definition",[w.vJ.VideoFrameInterpolation]:"aigc_video_btn_frame_interpolation"},$={[w.hO.RelaxedGenerateVideo]:{level:y.d.Maestro,key:e=>{var{containerService:r,scene:t}=e;if(!t)return"";var n=(0,Q.ko)(r,Y.q),i=(0,Q.ko)(r,q.N),{isOversea:a}=(0,Q.ko)(r,M.e),{discountMap:s}=(0,J.fS)({scene:t,vipService:n,commercialStrategyService:i,discountType:"relaxMode"}),{maestro:o=0}=null!=s?s:{};return a?O.ZP.t("dre_m10n_subscription_page_tooltips_relaxed",{number0:(0,J.VM)(o)},"Upgrade to use relaxed generations at {number0}% off"):O.ZP.t("dre_m10n_subscription_page_tooltips_relaxed_1",{number0:(o/10).toFixed(0)},"Upgrade to use relaxed generations at {number0}% off")}},[w.hO.BatchGenerateVideo]:{level:y.d.Standard,key:e=>{var{containerService:r,scene:t}=e;return t?O.ZP.t("batch_toast_subscribe_page",{},"Upgrade to generate multiple videos at a time"):""}}},ee={priceListContainer:"priceListContainer-r2yfOr",price2ListContainer:"price2ListContainer-BDTGek"},er=e=>{var r,t,{priceList:n,vipPayManager:i,source:a,activatedTab:o}=e,c=(0,u.useRef)(!1),d=(0,v.G)(q.N),l=(0,v.G)(Y.q),p=(0,v.G)(h.t),{currentVipLevel:m}=(0,V.k)(l,e=>({isVip:e.isVip,currentVipLevel:e.currentVipLevel})),[f,P]=(0,u.useState)({}),{level:x,key:C}=null!==(t=$[null!==(r=null==i?void 0:i.commercialScene)&&void 0!==r?r:""])&&void 0!==t?t:{},b=e=>{var r,t,a=i.commercialScene,s=null!==(t=null===(r=n.at(-1))||void 0===r?void 0:r.level)&&void 0!==t?t:y.d.Maestro,o=e.level===s;if(!a)return o;if(x)return x===e.level;var c=(0,J.Mz)({scene:a,commercialStrategyService:d,extraBenefits:i.extraBenefits});return w.KV[c]<=w.KV[m]||c===y.d.None?o:e.level===c&&!0},I=(e,r)=>{try{P(t=>(0,g._)((0,_._)({},t),{[o]:(0,g._)((0,_._)({},null==t?void 0:t[o]),{[e]:r})}))}catch(e){}},k=(e,r)=>{setTimeout(()=>{e.show(r,3e3)},300),c.current=!0},j=(e,r)=>{var t,n=i.commercialScene,a=b(e);if(!n||c.current)return;if(r&&x&&x===e.level&&w.KV[l.currentVipLevel]<w.KV[x]){k(r,C({containerService:p,scene:n}));return}var s=(0,J.Mz)({scene:n,commercialStrategyService:d,extraBenefits:i.extraBenefits,sceneOptions:i.commercialSceneOptions}),o=w.KV[s]<=w.KV[m],u=[(0,H.cq)({scene:n,sceneOptions:i.commercialSceneOptions}),...null!==(t=i.extraBenefits)&&void 0!==t?t:[]].reduce((e,r)=>X[r]||e,"");if(!o&&!!r&&!c.current&&!!a&&s!==y.d.None&&!!u)k(r,O.ZP.t("dre_m10n_subscription_page_tooltips",{string0:O.ZP.t(u,{},u)},"Upgrade to use this feature: {string0}"))},S=(0,u.useMemo)(()=>{try{var e=Object.values(f[o]||{});if(!e.length)return 0;return Math.max(...e)}catch(e){return 0}},[f,o]);return(0,s.jsx)("div",{className:L()(ee.priceListContainer,n.length<=2&&ee.price2ListContainer),children:n.map(e=>(0,s.jsx)(z,{ref:r=>{j(e,r)},vipPayManager:i,priceItem:e,isSelected:b(e),priceTopHeight:S,onPriceTopHeightChange:r=>I(e.productId,r)},e.productId))})},et={container:"container-cLK80m",tabs:"tabs-Fx0WC3",tabItem:"tabItem-i2VZel",selectedTabItem:"selectedTabItem-fSSdqu",tabText:"tabText-w4PMJO",tabTag:"tabTag-adgegi"},en=t("603026"),ei={dre_m10n_subscription_page_plans_yearly:"Yearly",dre_m10n_subscription_page_plans_monthly:"Monthly",dre_m10n_subscription_page_plans_oneoff:"1-month"},ea=e=>{var{setActivatedTab:r,tabList:t,activatedTab:n}=e;return(0,s.jsx)("div",{className:et.tabs,children:t.map((e,t)=>{var i,a,o;return(0,s.jsxs)("div",{onClick:()=>r(t),className:L()(et.tabItem,n===t&&et.selectedTabItem),children:[(0,s.jsx)("div",{className:et.tabText,children:O.ZP.t(e.tabName,{},null!==(o=null==ei?void 0:ei[null!==(a=e.tabName)&&void 0!==a?a:""])&&void 0!==o?o:e.tabName)}),e.extra&&(0,s.jsx)("div",{className:et.tabTag,children:O.ZP.t("dre_m10n_subscription_page_plans_discount",{number:parseInt(null===(i=(0,m.D)(e.extra))||void 0===i?void 0:i.discount_tips,10)},"{number}% off")})]},e.tabName)})})},es=e=>{var{vipPayManager:r,source:t}=e,n=(0,v.G)(en.K),[i,a]=(0,u.useState)(0),{vipTabList:o,vipPriceList:c}=(0,V.k)(n,e=>({vipTabList:e.vipTabList,vipPriceList:e.vipPriceList})),l=(0,u.useMemo)(()=>{var e,r;return(null!==(r=null===(e=o[i])||void 0===e?void 0:e.productIds)&&void 0!==r?r:[]).map(e=>c.find(r=>e===r.productId)).filter(e=>!!e)},[i,c,o]);return(0,u.useEffect)(()=>{var e,n=null==o?void 0:null===(e=o[i])||void 0===e?void 0:e.tabName;r.updateReportParam({source:t,currentTabKey:n})},[i,o]),(0,u.useEffect)(()=>{r.reportPopup({action:d.c.Show})},[]),(0,s.jsxs)("div",{className:et.container,children:[o.length>1&&(0,s.jsx)(ea,{tabList:o,activatedTab:i,setActivatedTab:e=>{a(e);var t,n=null==o?void 0:null===(t=o[e])||void 0===t?void 0:t.tabName;r.reportPopup({action:d.c.ClickTab,clickTabKey:n})}}),(0,s.jsx)(er,{source:t,vipPayManager:r,priceList:l,activatedTab:i})]})},eo=t("2910"),ec=t("648757"),ed=t("490165"),el=t("529531"),eu=t("52507"),ep=t("582152"),ev=t("405013"),em={container:"container-ASxBAt",allPlan:"allPlan-BEMuYK",defaultContent:"defaultContent-fiuT4R",title:"title-k5464C",desc:"desc-sJ8xXD",getCredits:"getCredits-BbQo6D",vipUserCard:"vipUserCard-kZNsT8",header:"header-WOvJQ8",userInfo:"userInfo-x_wu9j",avatar:"avatar-XQxTax",userName:"userName-n7PSEM",vipIcon:"vipIcon-PP6DbO",btn:"btn-DZOfFd",infos:"infos-Eafy7U",divider:"divider-fJAfWW",infoItem:"infoItem-GHx092",value:"value-bGMHzC",creditItem:"creditItem-TSvOff",action:"action-OOVTuL",creditIcon:"creditIcon-tCsiYv",credits:"credits-L6Zsi4"};function e_(e){var{vipPayManager:r}=e,t=(0,v.G)(ed.D),n=(0,v.G)(Y.q),{isVip:i,isVipExpired:a,currentVipLevel:o,vipInfo:c,expiredVipLevel:p}=(0,V.k)(n,e=>{var r;return{isVip:e.isVip,isVipExpired:e.isVipExpired,currentVipLevel:e.currentVipLevel,expiredVipLevel:null===(r=e.vipInfo)||void 0===r?void 0:r.expiredVipLevel,vipInfo:e.vipInfo}})||{},m=(0,el.p)(),_=(0,v.G)(h.t),g=()=>{(0,eu.s)({containerService:_,reportParam:{source:ep.wE.MULTI_VIP_POPUP_GET_CREDITS}}),r.reportPopup({action:d.c.ClickGetCredits})},y=()=>{(0,Z.o)({containerService:_,reportParam:{source:G.ym.MultiVipPopupTop}}),r.reportPopup({action:d.c.ClickPlansAndBilling})},f=(0,u.useMemo)(()=>{try{if(i){var e=(0,w.sG)({level:o}),{endTime:r,currentAutoRenewPlan:t}=c||{},n=t&&t.level===(null==c?void 0:c.curVipLevel),s=n?(0,w.d8)(t.cycleUnit):"";return[{title:O.ZP.t("dre_m10n_subscription_page_plans",{},"Plan"),value:e||"-"},n?{title:O.ZP.t("dre_m10n_subscription_page_staus",{},"Billing cycle"),value:s||"-"}:void 0,n?{title:O.ZP.t("dre_m10n_subscription_page_next_billing_day",{},"Renews on"),value:(0,ev.vc)("yyyy-MM-dd hh:mm",1e3*t.nextRenewalTime)}:void 0,!n&&r?{title:O.ZP.t("dre_m10n_subscription_page_expire_time",{},"Expires on"),value:(0,ev.vc)("yyyy-MM-dd hh:mm",1e3*r)}:void 0].filter(Boolean)}if(a)return[{title:O.ZP.t("dre_m10n_subscription_page_plans",{},"Plan"),value:O.ZP.t("dre_m10n_subscription_plans_free",{},"FREE")},{title:O.ZP.t("dre_m10n_subscription_page_expire_time",{},"Expires on"),value:O.ZP.t("dre_m10n_subscription_page_staus_forever",{},"Forever")}];return[]}catch(e){return[]}},[i,a,o,c]);return(0,s.jsxs)("div",{className:em.container,children:[i||a?(0,s.jsxs)(s.Fragment,{children:[(()=>{var{avatar:e,name:r}=(null==t?void 0:t.userProfile)||{};return(0,s.jsxs)("div",{className:em.vipUserCard,children:[(0,s.jsxs)("div",{className:em.header,children:[(0,s.jsxs)("div",{className:em.userInfo,children:[(0,s.jsx)(ec.q,{className:em.avatar,src:(0,eo.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),enableClick:!1}),(0,s.jsx)("div",{className:em.userName,children:r}),i||a?(0,s.jsx)(k.Z,{className:em.vipIcon,size:20,level:i?o:p,inactive:a}):null]}),(0,s.jsx)(C.J,{type:"tertiary",text:O.ZP.t("dre_m10n_subscription_page_plans_billing",{},"Plans & Billing"),className:em.bigBtn,onClick:y})]}),(0,s.jsxs)("div",{className:em.infos,children:[f.map(e=>(0,s.jsxs)("div",{className:em.infoItem,children:[(0,s.jsx)("div",{className:em.title,children:null==e?void 0:e.title}),(0,s.jsx)("div",{className:em.value,children:null==e?void 0:e.value})]},null==e?void 0:e.title)),f.length&&(0,s.jsx)("div",{className:em.divider}),(0,s.jsxs)("div",{className:em.creditItem,children:[(0,s.jsx)("div",{className:em.title,children:O.ZP.t("dre_m10n_subscription_page_credits_left",{},"Credits left")}),(0,s.jsxs)("div",{className:em.action,children:[(0,s.jsx)(l.YzG,{className:em.creditIcon}),(0,s.jsx)("div",{className:em.credits,children:m||0}),(0,s.jsx)("div",{className:em.getCredits,onClick:g,children:O.ZP.t("dre_m10n_subscription_page_get_credits",{},"Get credits")})]})]})]})]})})(),(0,s.jsx)("div",{className:em.allPlan,children:O.ZP.t("dre_m10n_subscription_page_subtitle",{},"All Plans")})]}):null,i||a?null:(0,s.jsxs)("div",{className:em.defaultContent,children:[(0,s.jsx)("div",{className:em.title,children:O.ZP.t("dre_m10n_subscription_page_new_title",{},"Unleash the power of Dreamina")}),(0,s.jsx)("div",{className:em.desc,children:O.ZP.t("dre_m10n_subscription_page_new_subtitle",{buy_credits:(0,s.jsx)("div",{className:em.getCredits,onClick:g,children:O.ZP.t("dre_m10n_subscription_page_new_subtitle_placeholder",{},"buy credits")})},"Select a plan that meets your needs or {buy_credits}")})]})]})}var eg=e=>{var{containerService:r,source:t,vipPayManager:n,showBack:i,handleClose:a}=e;return(0,u.useEffect)(()=>{t&&n.updateReportParam({source:t})},[]),(0,s.jsxs)("div",{className:p.wrapper,children:[(0,s.jsx)(e_,{vipPayManager:n}),(0,s.jsx)(es,{source:t,vipPayManager:n}),!i&&(0,s.jsx)("div",{onClick:()=>{n.reportPopup({action:d.c.Close}),a()},className:p.closeBtn,children:(0,s.jsx)(l.Rnl,{className:p.closeBtnIcon})})]})},eh=t("954342"),ey=t("724614"),ef=t("487736"),eP=t("259435"),ex=t("247170"),eC=t("947259"),eb=e=>{var r,t,n,d,{containerService:l,reportParam:u,vipPayManager:p}=e,{source:m}=u,_=(0,a._)(u,["source"]),g=null,h=(0,eP.C)(l,ef.M.VIP_MODAL),y=(0,ex.VM)();p.setCurrentProductByIndex(y,0),p.updateReportParam(_);var f=()=>void 0,P=()=>{if(!!g)null==f||f(),g.update({wrapClassName:L()(c.domesticModalWrapper,c.fadeTransition),maskStyle:{backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",opacity:0,transition:"all 0.3s ease-in"}}),(0,eC._)(300).then(()=>{null==g||g.close(),g=null,h.unmount(),null==p||p.dispose()})};p.onSuccess(()=>{if(!(0,ey.H)())P()}),h.onUnmount(()=>{P()});return(r=(0,i._)(function*(){yield Promise.resolve(),null==g||g.update({wrapClassName:L()(c.domesticModalWrapper,c.fadeTransition,c.baseTransition),maskStyle:{backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",opacity:1,transition:"all 0.3s ease-out"}})}),function(){return r.apply(this,arguments)})(),g=o.Z.info({icon:null,className:c.domesticModal,wrapClassName:L()(c.domesticModalWrapper,c.fadeTransition),maskStyle:{backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",opacity:0},duration:0,closable:!1,maskClosable:!1,afterClose:P,title:null,footer:null,escToExit:!1,backspaceToExit:!1,content:(0,s.jsx)(v.$,{instantiationService:l,children:(0,s.jsx)(eg,{containerService:l,handleClose:P,vipPayManager:p,source:m})})}),t=36,n=()=>{try{var e=document.querySelector(".".concat(c.domesticModal)),r=document.querySelector(".".concat(c.domesticModal," .lv-modal-content"));if(!e||!r)return;var{marginTop:n}=window.getComputedStyle(e,null),{paddingTop:i}=window.getComputedStyle(r,null),a=parseFloat(n)+parseFloat(i);a&&a!==t&&(t=a,null==g||g.update({wrapStyle:{"--close-btn-top":"".concat(a,"px")}}))}catch(e){}},setTimeout(()=>{var e;n(),new ResizeObserver(n).observe(null===(e=document.getElementsByClassName(c.domesticModal))||void 0===e?void 0:e[0])},100),d=e=>{e.target===e.currentTarget&&P()},setTimeout(()=>{var e=document.querySelector(".".concat(c.domesticModalWrapper)),r=document.querySelector(".".concat(c.domesticModal," .lv-modal-content"));null==e||e.addEventListener("click",d),null==r||r.addEventListener("click",d)},100),f=()=>{var e=document.querySelector(".".concat(c.domesticModalWrapper)),r=document.querySelector(".".concat(c.domesticModal," .lv-modal-content"));null==e||e.removeEventListener("click",d),null==r||r.removeEventListener("click",d)},g},eI=e=>{var{containerService:r,reportParam:t}=e,n=(0,eh.J)(r);return eb({containerService:r,reportParam:t,vipPayManager:n})},ew=e=>{var{containerService:r,reportParam:t}=e,n=(0,eh.h)(r);return eb({containerService:r,reportParam:t,vipPayManager:n})},ek=e=>(0,ey.H)()?eI(e):ew(e)},414250:function(e,r,t){t.d(r,{G:function(){return h}});var n=t(876826),i=t(789786),a=t(216342),s=t(843698),o=t(608358),c=t(874800),d=t(836413),l=t(56935),u=t(260963),p=t(460029),v=t(217940),m=t(37454),_=t(711800),g=t(417699);class h extends c.JT{setCurrentProduct(e,r){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=this;return(0,n._)(function*(){var n=i._productList.find(e=>e.productId===r);(0,l.ZB)(n,"Please set the valid productId"),i._disposeCurrentTask(),i._updateOrderResult(void 0),i._updateCurrentProduct(n),t&&(yield i._generateOrderAndStartListen(e))})()}startPollingOrder(e){var r=this;return(0,n._)(function*(){!r._currentTask&&!r._isOrderLoading&&(yield r._generateOrderAndStartListen(e))})()}setCurrentProductByIndex(e,r){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=this;return(0,n._)(function*(){(0,l.Y2)(r>=0&&r<i._productList.length,"Please set the valid index");var n=i._productList[r];yield i.setCurrentProduct(e,n.productId,t)})()}updateIsAgreeAgreement(e,r){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=this;return(0,n._)(function*(){yield new Promise(e=>{(0,u.z)(()=>{i._observableData.isAgreeAgreement=r,e(r)})}),t&&(yield i._generateOrderAndStartListen(e))})()}get _orderRelatedUrl(){return this._observableData.orderRelatedUrl}get _isOrderLoading(){return this._observableData.isOrderLoading}get orderError(){return this._observableData.orderError}get orderInfo(){return this._observableData.orderInfo}get orderResult(){return this._observableData.orderResult}get currentProduct(){return this._observableData.currentProduct}get isAgreeAgreement(){return this._observableData.isAgreeAgreement}get isVipExpiredError(){return this._observableData.isVipExpiredError}get isOrderFailed(){return this._observableData.isOrderFailed}get isOversea(){return this._dreaminaEnvironmentService.isOversea}_updateIsOrderLoading(e){(0,u.z)(()=>{this._observableData.isOrderLoading=e})}_generateOrderAndStartListen(e){var r=this;return(0,n._)(function*(){if(!!r.isAgreeAgreement){r._updateIsOrderLoading(!0);var t=yield r._generateOrder(e);r._updateIsOrderLoading(!1),(0,l.ZB)(t,"Generate ".concat(r._type," Order Failed")),r._updateOrderInfo(t),yield r._initCurrentTask(e)}})()}_updateOrderInfo(e){(0,u.z)(()=>{this._observableData.orderInfo=e})}_updateOrderResult(e){(0,u.z)(()=>{this._observableData.orderResult=e})}_updateCurrentProduct(e){(0,u.z)(()=>{this._observableData.currentProduct=e})}_updateOrderError(e){(0,u.z)(()=>{this._observableData.orderError=e})}_updateOrderFailed(e){(0,u.z)(()=>{this._observableData.isOrderFailed=e})}_updateIsVipExpiredError(e){(0,u.z)(()=>{this._observableData.isVipExpiredError=e})}_initCurrentTask(e){var r=this;return(0,n._)(function*(){r._disposeCurrentTask(),r._currentTask=r._generateTask(e);var t,n=null===(t=r._observableData.orderInfo)||void 0===t?void 0:t.orderId;r._updateOrderFailed(!1),(0,p.Ie)("".concat(m.j.PAY,"_").concat(n));var i=new Promise(e=>{var t;null===(t=r._currentTask)||void 0===t||t.onSuccess(t=>{var i,a=(0,v.Y)("".concat(m.j.PAY,"_").concat(n));(0,_.o)(r._containerService,{status:"success",productId:null===(i=r.currentProduct)||void 0===i?void 0:i.productId,duration:a,orderId:n,orderType:r._type,paymentMethod:null==t?void 0:t.paymentMethod}),r._onSuccess.fire(t),r._updateOrderResult((0,d.oW)(t)),e(t)})}),a=new Promise((e,t)=>{var i;null===(i=r._currentTask)||void 0===i||i.onError(e=>{var i,a,s=(0,v.Y)("".concat(m.j.PAY,"_").concat(n));(0,_.o)(r._containerService,{status:"error",productId:null===(i=r.currentProduct)||void 0===i?void 0:i.productId,duration:s,orderId:n,orderType:r._type,code:e.code,errMsg:e.msg,logId:null===(a=e.cause)||void 0===a?void 0:a.log_id}),r._updateOrderFailed(!0),r._onError.fire(e),r._updateOrderResult(e),t(e)})}),s=new Promise(e=>{var t;null===(t=r._currentTask)||void 0===t||t.onStop(()=>{var t,n,i,a=(0,v.Y)("".concat(m.j.PAY,"_").concat(null===(t=r._currentTask)||void 0===t?void 0:t.orderId));(0,_.o)(r._containerService,{status:"stop",productId:null===(n=r.currentProduct)||void 0===n?void 0:n.productId,duration:a,orderId:null===(i=r._currentTask)||void 0===i?void 0:i.orderId,orderType:r._type}),e("stop")})});r._currentTask.start(),yield Promise.race([i,a,s])})()}_disposeCurrentTask(){var e;if(!!this._currentTask)null===(e=this._currentTask)||void 0===e||e.dispose(),this._currentTask=void 0}disposeCurrentTask(){this._disposeCurrentTask()}dispose(){this._disposeCurrentTask(),super.dispose()}constructor(e,r,t){super(),this._containerService=e,this._productList=r,this._type=t,this._onGenerateOrderSuccess=this._store.add(new s.Q),this.onGenerateOrderSuccess=this._onGenerateOrderSuccess.event,this._onGenerateOrderError=this._store.add(new s.Q),this.onGenerateOrderError=this._onGenerateOrderError.event,this._onError=this._store.add(new s.Q),this.onError=this._onError.event,this._onSuccess=this._store.add(new s.Q),this.onSuccess=this._onSuccess.event,this._observableData=(0,u.LO)({orderRelatedUrl:"",isOrderLoading:!1,orderError:!1,orderInfo:void 0,orderResult:void 0,currentProduct:void 0,isAgreeAgreement:!1,isVipExpiredError:!1,isOrderFailed:!1}),this._dreaminaEnvironmentService=(0,o.ko)(e,g.e)}}(0,i.gn)([(0,a.lI)("CommercialPayManager","setCurrentProduct"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,String,Boolean]),(0,i.w6)("design:returntype",Promise)],h.prototype,"setCurrentProduct",null),(0,i.gn)([(0,a.lI)("CommercialPayManager","startPollingOrder"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,i.w6)("design:returntype",Promise)],h.prototype,"startPollingOrder",null),(0,i.gn)([(0,a.lI)("CommercialPayManager","setCurrentProductByIndex"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Number,Boolean]),(0,i.w6)("design:returntype",Promise)],h.prototype,"setCurrentProductByIndex",null),(0,i.gn)([(0,a.lI)("CommercialPayManager","updateIsAgreeAgreement"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Boolean,Boolean]),(0,i.w6)("design:returntype",Promise)],h.prototype,"updateIsAgreeAgreement",null),(0,i.gn)([(0,a.lI)("CommercialPayManager","_generateOrderAndStartListen"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,i.w6)("design:returntype",Promise)],h.prototype,"_generateOrderAndStartListen",null),(0,i.gn)([(0,a.lI)("CommercialPayManager","_initCurrentTask"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,i.w6)("design:returntype",Promise)],h.prototype,"_initCurrentTask",null)},256031:function(e,r,t){t.d(r,{_:function(){return A}});var n=t(876826),i=t(85728),a=t(789786),s=t(387285),o=t(473877),c=t(434712),d=t(936226),l=t(414250),u=t(941016),p=t(417699),v=t(523197),m=t(584072),_=t(216342),g=t(56935),h=t(642273),y=t(259273),f=t(727279),P=t(37454),x=t(377898),C=t(460029),b=t(217940),I=t(260963),w=t(471605),k=t(880139),j=t(582152),O=t(603026),S=t(70137);class A extends l.G{get _reportParams(){var e,r,t,n;return(0,i._)({creditNow:this._commercialCreditService.localCredit,selectCreditsAmount:null===(r=this.currentProduct)||void 0===r?void 0:null===(e=r.number)||void 0===e?void 0:e.toString(),payAmount:null===(t=this.currentProduct)||void 0===t?void 0:t.amount,payCurrency:null===(n=this.currentProduct)||void 0===n?void 0:n.currencyCode},this._injectReportParams)}get cashierUrl(){return this._orderRelatedUrl}get isOrderLoading(){return this._isOrderLoading}reportPopup(e){var{action:r,orderId:t,payChannel:n}=e,{currentProduct:a}=this;(0,j.ZD)(this._containerService,(0,i._)({action:r,payChannel:n,orderId:t,sku:null==a?void 0:a.productId},this._reportParams))}setCurrentProduct(e,r){var t=this,i=()=>super.setCurrentProduct;return(0,n._)(function*(){yield i().call(t,e,r,!1)})()}setCurrentProductByIndex(e,r){var t=this,i=()=>super.setCurrentProductByIndex;return(0,n._)(function*(){yield i().call(t,e,r,!1)})()}purchase(e){var r=this,t=()=>super.startPollingOrder;return(0,n._)(function*(){var i="".concat(location.origin,"/ai-tool").concat(h.EZ[y.Sj.ThirdPartyCallback],"?").concat(f.m.keepPage,"=1");yield(0,k._)(i,(0,n._)(function*(){r.updateIsAgreeAgreement(e,!0,!1),r.setCurrentProduct(e,null!==(a=null===(n=r.currentProduct)||void 0===n?void 0:n.productId)&&void 0!==a?a:"");var n,i,a,s,{promise:o,resolve:c,reject:d}=(0,m.PQ)();return r.onGenerateOrderSuccess(e=>c(e)),r.onGenerateOrderError(()=>d()),t().call(r,e),null!==(s=null===(i=(yield o).pipoAggregatePayInfo)||void 0===i?void 0:i.cashierUrl)&&void 0!==s?s:""}))})()}get _isOverSea(){return this._environmentService.isOversea}_generateOrder(e){var r=this;return(0,n._)(function*(){if(!!r.currentProduct){var t,n=(0,v.Rl)();(0,C.Ie)("".concat(P.j.MAKE_ORDER_CREDIT,"_").concat(n));var i=yield r._overseaPayManager.generatePayOrder(e,{type:"credits",appId:Number((0,s.r)(r._isOverSea)),productId:r.currentProduct.productId,tradeType:o.EV.CONSUMABLES,payChannel:"aggregate",pipoAggregateInfo:{userCreateTime:r._capcutAccountService.userProfile.create_time,language:r._i18nService.currentLocale.split("-")[0],gpUnavailable:!0,requestId:String(Date.now()),returnUrl:"".concat(location.origin,"/ai-tool").concat(h.EZ[y.Sj.ThirdPartyCallback],"?").concat(f.m.closeImmediately,"=1")},consumablesInfo:{consumablesId:r.currentProduct.goodsId,consumablesType:r.currentProduct.goodsType}}),a=(0,b.Y)("".concat(P.j.MAKE_ORDER_CREDIT,"_").concat(n));if((0,x.E)(r._containerService,{status:i.ok?"success":"error",productId:r.currentProduct.productId,duration:a,orderId:i.ok?i.value.orderId:"",orderType:"credit",errMsg:i.ok?void 0:i.msg,logId:i.ok?void 0:null===(t=i.cause)||void 0===t?void 0:t.log_id}),r._updateOrderError(!i.ok),i.ok)r._onGenerateOrderSuccess.fire(i.value);else{r._onGenerateOrderError.fire(i);return}var c=i.value,{pipoAggregatePayInfo:d}=i.value,{cashierUrl:l}=null!=d?d:{};return l&&(0,I.z)(()=>{r._observableData.orderRelatedUrl=l}),c}})()}_generateTask(e){return(0,g.ZB)(this.orderInfo),this._overseaPayManager.generatePayTask(e,{type:"credits",orderId:this.orderInfo.orderId,appId:Number((0,s.r)(this._isOverSea))})}_updateOrderError(e){super._updateOrderError(e)}constructor(e,r,t,n,i,a,s){super(r,a.creditPriceList,"credit"),this._injectReportParams=e,this._containerService=r,this._capcutAccountService=t,this._i18nService=n,this._environmentService=i,this._commercialGoodsService=a,this._commercialCreditService=s,this._overseaPayManager=this._containerService.createInstance(u.R)}}(0,a.gn)([(0,_.lI)("OverseaCreditsPayManager","setCurrentProduct"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,String]),(0,a.w6)("design:returntype",Promise)],A.prototype,"setCurrentProduct",null),(0,a.gn)([(0,_.lI)("OverseaCreditsPayManager","setCurrentProductByIndex"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Number]),(0,a.w6)("design:returntype",Promise)],A.prototype,"setCurrentProductByIndex",null),(0,a.gn)([(0,_.lI)("OverseaCreditsPayManager","purchase"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,a.w6)("design:returntype",Promise)],A.prototype,"purchase",null),(0,a.gn)([(0,_.lI)("OverseaCreditsPayManager","_generateOrder"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,a.w6)("design:returntype",Promise)],A.prototype,"_generateOrder",null),(0,a.gn)([(0,_.lI)("OverseaCreditsPayManager","_generateTask"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,a.w6)("design:returntype",void 0)],A.prototype,"_generateTask",null),A=(0,a.gn)([(0,a.fM)(1,c.t),(0,a.fM)(2,d.Gw),(0,a.fM)(3,w.S),(0,a.fM)(4,p.e),(0,a.fM)(5,O.K),(0,a.fM)(6,S.aG),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof IReportParams?Object:IReportParams,void 0===c.t?Object:c.t,void 0===d.Gw?Object:d.Gw,void 0===w.S?Object:w.S,void 0===p.e?Object:p.e,void 0===O.K?Object:O.K,void 0===S.aG?Object:S.aG])],A)},954342:function(e,r,t){t.d(r,{J:()=>H,h:()=>J});var n,i=t("876826"),a=t("85728"),s=t("929753"),o=t("947259"),c=t("799108"),d=t("914026"),l=t("608358"),u=t("369617"),p=t("604201"),v=t("217448"),m=t("150615"),_=t("789786"),g=t("387285"),h=t("434712"),y=t("414250"),f=t("1314"),P=t("417699"),x=t("523197"),C=t("216342"),b=t("56935"),I=t("460029"),w=t("217940"),k=t("377898"),j=t("260963"),O=t("37454"),S=t("880821"),A=t("603026");class N extends y.G{get qrCodeUrl(){return this._orderRelatedUrl}get qrCodeLoading(){return this._isOrderLoading}get extraBenefits(){return this._reportParams.benefits}get commercialScene(){return this._reportParams.scene}get commercialSceneOptions(){return this._reportParams.sceneOptions}reportPopup(e){var r,t,n,i,{action:a,payChannel:s,clickTabKey:o,toProduct:c}=e||{};(0,p.K)(this._containerService,{action:a,source:this._reportParams.source,sceneOptions:this.commercialSceneOptions,videoDuration:this._reportParams.videoDuration,payChannel:s,payAmount:null===(r=this.currentProduct)||void 0===r?void 0:r.totalAmount,orderId:null===(t=this.orderInfo)||void 0===t?void 0:t.orderId,toProduct:c||this.currentProduct,currentTabKey:this._reportParams.currentTabKey,clickTabKey:o,payCurrency:null===(n=this.currentProduct)||void 0===n?void 0:n.currencyCode,sku:null===(i=this.currentProduct)||void 0===i?void 0:i.productId,scene:this._reportParams.scene,benefits:this._reportParams.benefits,canvasEditorGenerateType:this._reportParams.canvasEditorGenerateType,isFromPreview:this._reportParams.isFromPreview,isQuickPreview:this._reportParams.isQuickPreview,batchNumber:this._reportParams.batchNumber})}updateReportParam(e){this._reportParams=(0,a._)({},this._reportParams,e)}get _isOverSea(){return this._environmentService.isOversea}_generateOrder(e){var r=this;return(0,i._)(function*(){if(!!r.currentProduct){var t,n=(0,x.Rl)();(0,I.Ie)("".concat(O.j.MAKE_ORDER_VIP,"_").concat(n));var i={type:"vip",aid:Number((0,g.r)(r._isOverSea)),platform:7,productId:r.currentProduct.productId,region:"cn"};"auto"===r.currentProduct.priceType&&(i.scene="vip");var a=yield r._domesticPayManager.generatePayOrder(e,i),s=(0,w.Y)("".concat(O.j.MAKE_ORDER_VIP,"_").concat(n));if((0,k.E)(r._containerService,{status:a.ok?"success":"error",productId:r.currentProduct.productId,productType:r.currentProduct.priceType,duration:s,orderId:a.ok?a.value.orderId:"",orderType:"vip",errMsg:a.ok?void 0:a.msg,logId:a.ok?void 0:null===(t=a.cause)||void 0===t?void 0:t.log_id}),r._updateOrderError(!a.ok),a.ok)r._onGenerateOrderSuccess.fire(a.value);else{r._onGenerateOrderError.fire(a);return}var o=a.value,c=o.codeImgUrl;try{c=yield(0,S.Cq)(c)}catch(e){}return(0,j.z)(()=>{r._observableData.orderRelatedUrl=c}),o}})()}_generateTask(e){return(0,b.ZB)(this.orderInfo),this._domesticPayManager.generatePayTask(e,{type:"vip",orderId:this.orderInfo.orderId})}switchPlan(e){var r=this;return(0,i._)(function*(){var t,n=(0,x.Rl)();if(!!r.currentProduct){(0,I.Ie)("".concat(O.j.MAKE_ORDER_VIP,"_").concat(n));var i={type:"vip",aid:Number((0,g.r)(r._isOverSea)),platform:7,productId:r.currentProduct.productId,region:"cn"};"auto"===r.currentProduct.priceType&&(i.scene="vip");var a=yield r._domesticPayManager.generatePayOrder(e,i),s=(0,w.Y)("".concat(O.j.MAKE_ORDER_VIP,"_").concat(n));return(0,k.E)(r._containerService,{status:a.ok?"success":"error",productId:r.currentProduct.productId,productType:r.currentProduct.priceType,duration:s,orderId:a.ok?a.value.orderId:"",orderType:"vip",errMsg:a.ok?void 0:a.msg,logId:a.ok?void 0:null===(t=a.cause)||void 0===t?void 0:t.log_id}),a}})()}updateIsAgreeAgreement(e,r){var t=this,n=()=>super.updateIsAgreeAgreement;return(0,i._)(function*(){try{r&&t.reportPopup({action:p.c.AgreeProtocol})}catch(e){}yield n().call(t,e,r)})()}_updateIsOrderLoading(e){super._updateIsOrderLoading(e),e&&this.reportPopup({action:p.c.GetQrCode})}_updateOrderInfo(e){super._updateOrderInfo(e),this.reportPopup({action:p.c.ShowQrCode})}_updateOrderError(e){super._updateOrderError(e),e&&this.reportPopup({action:p.c.FailToGetQrCode})}_updateOrderFailed(e){super._updateOrderFailed(e),e&&this.reportPopup({action:p.c.InvalidQrCode})}constructor(e,r,t){super(e,r.vipPriceList,"vip"),this._containerService=e,this._commercialGoodsService=r,this._environmentService=t,this._reportParams={},this._domesticPayManager=this._containerService.createInstance(f.F)}}(0,_.gn)([(0,C.lI)("VipPayManager","_generateOrder"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,_.w6)("design:returntype",Promise)],N.prototype,"_generateOrder",null),(0,_.gn)([(0,C.lI)("VipPayManager","_generateTask"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,_.w6)("design:returntype",void 0)],N.prototype,"_generateTask",null),(0,_.gn)([(0,C.lI)("VipPayManager","switchPlan"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,_.w6)("design:returntype",Promise)],N.prototype,"switchPlan",null),(0,_.gn)([(0,C.lI)("VipPayManager","updateIsAgreeAgreement"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Boolean]),(0,_.w6)("design:returntype",Promise)],N.prototype,"updateIsAgreeAgreement",null),N=(0,_.gn)([(0,_.fM)(0,h.t),(0,_.fM)(1,A.K),(0,_.fM)(2,P.e),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",[void 0===h.t?Object:h.t,void 0===A.K?Object:A.K,void 0===P.e?Object:P.e])],N);var R=t("473877"),M=t("936226"),V=t("471605"),E=t("584072"),L=t("836413"),D=t("941016"),Z=t("642273"),B=t("259273"),U=t("727279"),G=t("880139");class F extends y.G{get cashierUrl(){return this._orderRelatedUrl}get isOrderLoading(){return this._isOrderLoading}get extraBenefits(){return this._reportParams.benefits}get commercialScene(){return this._reportParams.scene}get commercialSceneOptions(){return this._reportParams.sceneOptions}setCurrentProduct(e,r){var t=this,n=()=>super.setCurrentProduct;return(0,i._)(function*(){yield n().call(t,e,r,!1)})()}setCurrentProductByIndex(e,r){var t=this,n=()=>super.setCurrentProductByIndex;return(0,i._)(function*(){yield n().call(t,e,r,!1)})()}purchase(e){var r=this,t=()=>super.startPollingOrder;return(0,i._)(function*(){var n="".concat(location.origin,"/ai-tool").concat(Z.EZ[B.Sj.ThirdPartyCallback],"?").concat(U.m.keepPage,"=1");yield(0,G._)(n,(0,i._)(function*(){r.updateIsAgreeAgreement(e,!0,!1),r.setCurrentProduct(e,null!==(a=null===(n=r.currentProduct)||void 0===n?void 0:n.productId)&&void 0!==a?a:"");var n,i,a,s,{promise:o,resolve:c,reject:d}=(0,E.PQ)();return r.onGenerateOrderSuccess(e=>c(e)),r.onGenerateOrderError(()=>d()),t().call(r,e),null!==(s=null===(i=(yield o).pipoAggregatePayInfo)||void 0===i?void 0:i.cashierUrl)&&void 0!==s?s:""}))})()}reportPopup(e){var r,t,n,i,{action:a,payChannel:s,clickTabKey:o,toProduct:c}=e||{};(0,p.K)(this._containerService,{action:a,source:this._reportParams.source,sceneOptions:this.commercialSceneOptions,videoDuration:this._reportParams.videoDuration,payChannel:s,payAmount:null===(r=this.currentProduct)||void 0===r?void 0:r.totalAmount,payCurrency:null===(t=this.currentProduct)||void 0===t?void 0:t.currencyCode,orderId:null===(n=this.orderInfo)||void 0===n?void 0:n.orderId,toProduct:c||this.currentProduct,currentTabKey:this._reportParams.currentTabKey,clickTabKey:o,sku:null===(i=this.currentProduct)||void 0===i?void 0:i.productId,scene:this._reportParams.scene,benefits:this._reportParams.benefits,canvasEditorGenerateType:this._reportParams.canvasEditorGenerateType,isFromPreview:this._reportParams.isFromPreview,isQuickPreview:this._reportParams.isQuickPreview,batchNumber:this._reportParams.batchNumber})}updateReportParam(e){this._reportParams=(0,a._)({},this._reportParams,e)}get _isOverSea(){return this._environmentService.isOversea}_generateOrder(e){var r=this;return(0,i._)(function*(){if(!!r.currentProduct){var t,n,i=(0,x.Rl)();(0,I.Ie)("".concat(O.j.MAKE_ORDER_VIP,"_").concat(i));var a=yield r._overseaPayManager.generatePayOrder(e,{type:"vip",appId:Number((0,g.r)(r._isOverSea)),productId:r.currentProduct.productId,tradeType:"auto"===r.currentProduct.priceType?R.EV.SUBSCRIPTION:R.EV.ONEOFF,payChannel:"aggregate",skuId:null===(t=r.currentProduct)||void 0===t?void 0:t.skuId,pipoAggregateInfo:{userCreateTime:r._capcutAccountService.userProfile.create_time,language:r._i18nService.currentLocale.split("-")[0],gpUnavailable:!0,requestId:String(Date.now()),returnUrl:"".concat(location.origin,"/ai-tool").concat(Z.EZ[B.Sj.ThirdPartyCallback],"?").concat(U.m.closeImmediately,"=1")},scene:"vip"}),s=(0,w.Y)("".concat(O.j.MAKE_ORDER_VIP,"_").concat(i));if((0,k.E)(r._containerService,{status:a.ok?"success":"error",productId:r.currentProduct.productId,productType:r.currentProduct.priceType,duration:s,orderId:a.ok?a.value.orderId:"",orderType:"vip",errMsg:a.ok?void 0:a.msg,logId:a.ok?void 0:null===(n=a.cause)||void 0===n?void 0:n.log_id}),r._updateOrderError(!a.ok),a.ok)r._onGenerateOrderSuccess.fire(a.value);else{r._onGenerateOrderError.fire(a);return}var o=a.value,{pipoAggregatePayInfo:c}=a.value,{cashierUrl:d}=null!=c?c:{};return d&&(0,j.z)(()=>{r._observableData.orderRelatedUrl=d}),o}})()}_generateTask(e){return(0,b.ZB)(this.orderInfo),this._overseaPayManager.generatePayTask(e,{type:"vip",orderId:this.orderInfo.orderId,appId:Number((0,g.r)(this._isOverSea))})}switchPlan(e){var r=this;return(0,i._)(function*(){var t=yield r._generateOrder(e);return(0,L.oW)(t)})()}constructor(e,r,t,n,i){super(e,r.vipPriceList,"vip"),this._containerService=e,this._commercialGoodsService=r,this._environmentService=t,this._capcutAccountService=n,this._i18nService=i,this._reportParams={},this._overseaPayManager=this._containerService.createInstance(D.R)}}(0,_.gn)([(0,C.lI)("OverseaVipPayManager","setCurrentProduct"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,String]),(0,_.w6)("design:returntype",Promise)],F.prototype,"setCurrentProduct",null),(0,_.gn)([(0,C.lI)("OverseaVipPayManager","setCurrentProductByIndex"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Number]),(0,_.w6)("design:returntype",Promise)],F.prototype,"setCurrentProductByIndex",null),(0,_.gn)([(0,C.lI)("OverseaVipPayManager","purchase"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,_.w6)("design:returntype",Promise)],F.prototype,"purchase",null),(0,_.gn)([(0,C.lI)("OverseaVipPayManager","_generateOrder"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,_.w6)("design:returntype",Promise)],F.prototype,"_generateOrder",null),(0,_.gn)([(0,C.lI)("OverseaVipPayManager","_generateTask"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,_.w6)("design:returntype",void 0)],F.prototype,"_generateTask",null),(0,_.gn)([(0,C.lI)("OverseaVipPayManager","switchPlan"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,_.w6)("design:returntype",Promise)],F.prototype,"switchPlan",null),F=(0,_.gn)([(0,_.fM)(0,h.t),(0,_.fM)(1,A.K),(0,_.fM)(2,P.e),(0,_.fM)(3,M.Gw),(0,_.fM)(4,V.S),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",[void 0===h.t?Object:h.t,void 0===A.K?Object:A.K,void 0===P.e?Object:P.e,void 0===M.Gw?Object:M.Gw,void 0===V.S?Object:V.S])],F);var W=t("331925"),Y=t("70137"),K=t("95581");var z=(n=(0,i._)(function*(e,r){var t,n,i,c,d,u,p={orderId:null===(t=r.orderInfo)||void 0===t?void 0:t.orderId,productId:null===(n=r.currentProduct)||void 0===n?void 0:n.productId},m=(0,l.ko)(e,v.q),_=null!==(d=null===(i=m.vipInfo)||void 0===i?void 0:i.endTime)&&void 0!==d?d:0;yield(0,o._)(3e3);var g=null!==(u=null===(c=m.vipInfo)||void 0===c?void 0:c.endTime)&&void 0!==u?u:0;(0,W.X)(e,(0,s._)((0,a._)({},p),{orderType:"vip",confirmStatus:g>_?"success":"error"}))}),function(e,r){return n.apply(this,arguments)}),J=e=>{var r=e.createInstance(N),t=(0,l.ko)(e,Y.aG);return r.onSuccess(n=>{u.s.success("\u652F\u4ED8\u6210\u529F"),r.reportPopup({action:p.c.PaySuccess,payChannel:n.payChannel}),t.syncRemoteCreditHistory(),z(e,r),(0,d.R)(e,!0)}),r.onError(()=>{r.reportPopup({action:p.c.PayFail}),u.s.warning(m.ZP.t("dre_m10n_subscribe_fail",{},"Couldn\u2019t subscribe. Try again later.")),t.syncRemoteCreditHistory()}),r.onGenerateOrderError(e=>{String(e.code)===c.HR.Violation&&u.s.warning(e.msg)}),r},H=e=>{var r=e.createInstance(F),t=(0,l.ko)(e,Y.aG);return r.onSuccess(n=>{var i;r.reportPopup({action:p.c.PaySuccess,payChannel:null===(i=n.paymentInfo)||void 0===i?void 0:i.paymentMethod}),t.syncRemoteCreditHistory(),z(e,r),(0,d.R)(e,!0)}),r.onError(()=>{r.reportPopup({action:p.c.PayFail}),t.syncRemoteCreditHistory()}),r.onGenerateOrderError(e=>{if(String(e.code)===c.HR.HostedPageNotAvailable){K.h.confirm({icon:null,title:"\u652F\u4ED8\u5347\u7EA7\u516C\u544A",content:"\u7531\u4E8E\u7F8E\u56FD\u5730\u533A\u652F\u4ED8\u7CFB\u7EDF\u5347\u7EA7\uFF0C\u5F53\u524D\u4ED8\u8D39\u4E1A\u52A1\u6682\u65F6\u65E0\u6CD5\u8FDB\u884C\u652F\u4ED8\uFF0C\u6211\u4EEC\u9884\u8BA1\u5728\u5317\u4EAC\u65F6\u95F42025\u5E743\u670831\u65E5\u5B8C\u6210\u7CFB\u7EDF\u5347\u7EA7\uFF0C\u5728\u6B64\u671F\u95F4\u65E0\u6CD5\u8FDB\u884C\u4ED8\u8D39\uFF0C\u4E0D\u4FBF\u4E4B\u5904\u656C\u8BF7\u8C05\u89E3",okText:"OK",footer:(e,r)=>r});return}if(String(e.code)===c.HR.OverseaViolation){u.s.warning(m.ZP.t(e.msg,{},e.msg));return}u.s.error(m.ZP.t("dre_m10n_management_page_auto_renew_cancel_fail_toast",{},"Something went wrong. Try again later."))}),r}},596684:function(e,r,t){t.d(r,{t:()=>eI});var n=t("85728"),i=t("929753"),a=t("295834"),s=t("772322"),o=t("218571"),c=t("799108"),d=t("66003"),l=t("899229"),u=t("27433"),p=t("196451"),v=t("71129"),m=t("582152"),_=t("217448"),g=t("869919"),h=t("434712"),y=t("522692"),f=t("529531"),P=t("733437");t("395248");var x=t("423342"),C=t("839141"),b=t("889715"),I=t("150615"),w=t("967355"),k=t("52507"),j=t("353790"),O={creditInsufficientModalWrapper:"creditInsufficientModalWrapper-SbJWgr",creditInsufficientModal:"creditInsufficientModal-yTCV8i",header:"header-w2n3vd",titleWrapper:"titleWrapper-U5XnfP",titleIcon:"titleIcon-x1dvbC",title:"title-HdCiRH",closeBtn:"closeBtn-R8_8Oc",closeBtnIcon:"closeBtnIcon-bmGC25",content:"content-XkQ0qf",desc:"desc-rdxLnO",descCard:"descCard-hah5Sx",creditInfo:"creditInfo-eZNztJ",infoTitle:"infoTitle-oUX1iR",infoIcon:"infoIcon-Bue_A2",infoCredit:"infoCredit-pSNU1r",footer:"footer-RQsgLP",cancelBtn:"cancelBtn-wzXtX1"};function S(e){var{credits:r,reportParam:t,onClose:n}=e,i=(0,d.G)(h.t),a=(0,d.G)(_.q),{vipSource:c,creditSource:l,isQuickPreview:u,isFromPreview:v,sceneOptions:m,scene:g,benefits:y,videoDuration:x,canvasEditorGenerateType:S,batchNumber:A}=t,{isVip:N,currentVipLevel:R}=(0,P.k)(a,e=>({isVip:e.isVip,currentVipLevel:e.currentVipLevel}))||{},M=N&&R===C.d.Maestro,V=(0,f.p)(),E=M?I.ZP.t("dre_m10n_generate_popup_credits_ininsufficient_btn3",{},"Recharge credits"):I.ZP.t("dre_m10n_generate_popup_credits_ininsufficient_btn2",{},"Upgrade Vip level"),L=M?I.ZP.t("dre_m10n_generate_popup_credit_ininsufficient_subtitle2",{},"You can buy more credits to continue to generate."):I.ZP.t("dre_m10n_generate_popup_credit_ininsufficient_subtitle1",{},"You do not have enough credits to do this, please upgrade membership to get more credits");return(0,o.useEffect)(()=>{(0,j.U)(i,{action:j.r.Show,source:c,isQuickPreview:u,isFromPreview:v,batchNumber:A})},[]),(0,s.jsxs)("div",{className:O.subscriptionManageModal,children:[(0,s.jsxs)("div",{className:O.header,children:[(0,s.jsxs)("div",{className:O.titleWrapper,children:[(0,s.jsx)(b.NVt,{className:O.titleIcon}),(0,s.jsx)("div",{className:O.title,children:I.ZP.t("dre_m10n_generate_popup_credit_ininsufficient_title",{},"Underintegration")})]}),(0,s.jsx)("div",{className:O.closeBtn,onClick:()=>{(0,j.U)(i,{action:j.r.Close,source:c,isQuickPreview:u,isFromPreview:v,batchNumber:A}),null==n||n()},children:(0,s.jsx)(b.Rnl,{className:O.closeBtnIcon})})]}),(0,s.jsxs)("div",{className:O.content,children:[(0,s.jsx)("div",{className:O.desc,children:L}),(0,s.jsxs)("div",{className:O.descCard,children:[(0,s.jsxs)("div",{className:O.creditInfo,children:[(0,s.jsxs)("div",{className:O.infoTitle,children:[I.ZP.t("dre_m10n_generate_popup_credit_ininsufficient_left",{},"Residual credits"),"\uFF1A"]}),(0,s.jsx)(b.YzG,{className:O.infoIcon}),(0,s.jsx)("div",{className:O.infoCredit,children:V||0})]}),(0,s.jsxs)("div",{className:O.creditInfo,children:[(0,s.jsxs)("div",{className:O.infoTitle,children:[I.ZP.t("dre_m10n_generate_popup_credit_ininsufficient_need",{},"Required credits"),"\uFF1A"]}),(0,s.jsx)(b.YzG,{className:O.infoIcon}),(0,s.jsx)("div",{className:O.infoCredit,children:r||0})]})]})]}),(0,s.jsxs)("div",{className:O.footer,children:[(0,s.jsx)(w.J,{className:O.cancelBtn,type:"tertiary",text:I.ZP.t("dre_m10n_generate_popup_credits_ininsufficient_btn1",{},"OK"),onClick:()=>{(0,j.U)(i,{action:j.r.Cancel,source:c,isQuickPreview:u,isFromPreview:v,batchNumber:A}),null==n||n()}}),(0,s.jsx)(w.J,{type:"default",text:E,onClick:()=>{M?((0,k.s)({containerService:i,reportParam:{source:l,scene:g,sceneOptions:m,videoDuration:x,benefits:y,canvasEditorGenerateType:S,isQuickPreview:u,isFromPreview:v,batchNumber:A}}),(0,j.U)(i,{action:j.r.ClickGetCredits,source:c,isQuickPreview:u,isFromPreview:v,batchNumber:A})):((0,p.U)({containerService:i,reportParam:{source:c,scene:g,sceneOptions:m,videoDuration:x,benefits:y,canvasEditorGenerateType:S,isQuickPreview:u,isFromPreview:v,batchNumber:A}}),(0,j.U)(i,{action:j.r.ClickJoinVip,source:c,isQuickPreview:u,isFromPreview:v,batchNumber:A})),null==n||n()}})]})]})}var A=function(e){for(var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=e,i=0;n&&i<t;){if(n instanceof HTMLElement&&(null===(r=n.dataset)||void 0===r?void 0:r.ignore))return!0;n=n.parentNode,i++}return!1},N=t("484702"),R=e=>{var r,{sceneOptions:t,scene:n}=e;if((null==t?void 0:t.version)===l.dt.V2CharVideo){switch(t.characterMode){case g.tB.LipSyncLively:r=v.s.LIP_SYNC_AVATAR_LIVELY;break;case g.tB.LipSyncMaster:r=v.s.LIP_SYNC_AVATAR_MASTER;break;default:r=v.s.LIP_SYNC_AVATAR_STD}return r}return c.jJ[n]},M=e=>{var{className:r,scene:t,extraBenefits:n,videoDuration:i,sceneOptions:a,credits:o,children:l,wrapperStyle:g,ignoreClickIntercept:C=!1,ignoreEnterIntercept:b=!1,ignoreNeedVip:I=!1,ignoreNeedCredits:w=!1,reportParam:k,creditNotPassCallback:j}=e,M=(0,d.G)(N.N),V=(0,d.G)(h.t),E=(0,d.G)(_.q),L=(0,y.Z)(),{isVip:D,currentVipLevel:Z}=(0,P.k)(E,e=>({isVip:e.isVip,currentVipLevel:e.currentVipLevel})),B=(0,f.p)(),U={isVip:D,currentVipLevel:Z,needMinVipLevel:(0,u.Mz)({scene:t,extraBenefits:n,commercialStrategyService:M}),needVip:(0,u.e6)({scene:t,sceneOptions:a,extraBenefits:n,commercialStrategyService:M})&&!I,trialInfo:(0,u.be)({scene:t,extraBenefits:n,commercialStrategyService:M,sceneOptions:a}),needCredits:o,isInFreemiumStage:L},G=e=>{if(!(L||A(e.target))){var r,o,l,u=!1,_=B>=U.needCredits||w;switch(!0){case U.trialInfo.isStrategyFreeTrial:u=!0;break;case U.needVip&&!D:case U.needVip&&c.KV[U.currentVipLevel]<c.KV[U.needMinVipLevel]:(0,p.U)({containerService:V,reportParam:{source:null!==(r=R({scene:t,sceneOptions:a}))&&void 0!==r?r:v.s.CLICK_GENERATE_BUTTON,scene:t,sceneOptions:a,videoDuration:i,benefits:n,canvasEditorGenerateType:null==k?void 0:k.canvasEditorGenerateType,isFromPreview:null==k?void 0:k.isFromPreview,isQuickPreview:null==k?void 0:k.isQuickPreview,batchNumber:null==k?void 0:k.batchNumber}});break;case!_:!function(e){var{containerService:r,credits:t,reportParam:n}=e,i=x.Z.confirm({title:null,footer:null,icon:null,simple:!0,closable:!1,maskClosable:!0,maskStyle:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},wrapClassName:O.creditInsufficientModalWrapper,content:(0,s.jsx)(d.$,{instantiationService:r,children:(0,s.jsx)(S,{onClose:()=>i.close(),credits:t,reportParam:n})})})}({containerService:V,credits:U.needCredits,reportParam:{vipSource:null!==(o=R({scene:t,sceneOptions:a}))&&void 0!==o?o:v.s.CLICK_GENERATE_BUTTON,creditSource:null!==(l=R({scene:t,sceneOptions:a}))&&void 0!==l?l:m.wE.ClickGenerateButton,scene:t,videoDuration:i,sceneOptions:a,benefits:n,canvasEditorGenerateType:null==k?void 0:k.canvasEditorGenerateType,isFromPreview:null==k?void 0:k.isFromPreview,isQuickPreview:null==k?void 0:k.isQuickPreview,batchNumber:null==k?void 0:k.batchNumber}});break;default:u=!0}!u&&(null==j||j(),e.stopPropagation(),e.preventDefault())}};return(0,s.jsx)("div",{className:r,style:g,onClickCapture:e=>{if(!C)return G(e)},onKeyDownCapture:e=>{if(!!("Enter"===e.key&&!e.shiftKey)&&!b)return G(e)},children:"function"==typeof l?l(U):l})},V="tooltip-content-LY0rDP",E=t("630008"),L=t("399835"),D=t("884619"),Z=t("846779"),B=t("2910"),U={vipContent:"vipContent-vxLZt9",container:"container-rdPi5i",coverImage:"coverImage-qnMKRt",coverVideo:"coverVideo-BK3FnT",title:"title-C5ij7g",desc:"desc-KUFOzb"},G=e=>{var{title:r,desc:t,btnText:n,coverType:i,poster:a,coverUrl:o,onBtnClick:c}=e;return(0,s.jsx)("div",{"data-ignore":!0,className:U.vipContent,children:(0,s.jsxs)("div",{className:U.container,children:[(()=>{switch(!0){case"video"===i&&!!o:return(0,s.jsx)("video",{poster:a,muted:!0,autoPlay:!0,loop:!0,playsInline:!0,"x5-playsinline":"true",className:U.coverVideo,crossOrigin:"anonymous",children:(0,s.jsx)("source",{src:(0,B.C)(o,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),type:"video/mp4"})});case"image"===i&&!!o:return(0,s.jsx)("img",{className:U.coverImage,draggable:!1,src:(0,B.C)(o,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),crossOrigin:"anonymous"});default:return null}})(),(0,s.jsxs)("div",{children:[r&&(0,s.jsx)("div",{className:U.title,children:r}),t&&(0,s.jsx)("div",{className:U.desc,children:t})]}),n&&(0,s.jsx)(w.J,{onClick:c,text:n})]})})};t("443195");var F=t("373624"),W=t("417699"),Y={tooltipContent:"tooltip-content-OQ0bhc"},K=e=>{var{credits:r,needVip:t,currentVipLevel:o,needMinVipLevel:l,needCredits:u=!0,ignoreClickIntercept:p,customVipContent:v,customCreditsContent:m,children:g,disabled:h=!1,vipDropDownContent:f,dropdownTriggerProps:x,showDropDownContent:C,getDropDownPopupContainer:w,onDropDownVisibleChange:k,content:j}=e,O=(0,a._)(e,["credits","needVip","currentVipLevel","needMinVipLevel","needCredits","ignoreClickIntercept","customVipContent","customCreditsContent","children","disabled","vipDropDownContent","dropdownTriggerProps","showDropDownContent","getDropDownPopupContainer","onDropDownVisibleChange","content"]),S=(0,d.G)(_.q);(0,d.G)(W.e);var A=(0,P.k)(S,e=>e.isVip),N=(0,y.Z)(),R=N?(0,s.jsx)("div",{children:I.ZP.t("dre_m10n_feature_free_limited_time_hover",{},"You can try this feature for free for now")}):u?(0,s.jsx)("div",{children:null!=m?m:I.ZP.t("dre_m10n_pro_feature_credits",{strong1:e=>e,num:(0,s.jsx)("span",{children:r})},"It will consume {num} credits")}):void 0,M=R&&(0,s.jsxs)("div",{className:Y.tooltipContent,children:[(0,s.jsx)(b.YzG,{size:17.5}),R]}),V=(0,s.jsx)("div",{className:Y.tooltipContent,children:null!=v?v:I.ZP.t("dre_m10n_pro_feature",{strong1:e=>e},"Upgrade to use this feature")}),L=j&&(0,s.jsx)("div",{className:Y.tooltipContent,children:j}),D=(!A||c.KV[o]<c.KV[l])&&t&&!N,Z=D||C?f:void 0,B=!Z||h||p;return(0,s.jsx)(F.Z,{mouseEnterDelay:350,disabled:B,droplist:Z,onVisibleChange:k,getPopupContainer:e=>{var r;return null!==(r=null==w?void 0:w())&&void 0!==r?r:document.body},triggerProps:null!=x?x:{position:"top"},children:(0,s.jsx)("div",{children:(0,s.jsx)(E.G,(0,i._)((0,n._)({},O),{disabled:h||p||!!Z,content:!Z&&((D?V:M)||L),color:"#424754",children:g}))})})},z={labelContent:"labelContent-n7PfwC",label:"label-tfIWMj",warning:"warning-TD7O97",warningContent:"warningContent-vThYEM"},J=t("70137");function H(e,r){var t=(0,f.p)(),{isLocalCreditReady:n}=(0,d.G)(J.aG),{isReady:i}=(0,d.G)(N.N),a=(0,y.Z)();return i?r?r:a||e<=0?I.ZP.t("dre_m10n_feature_try_free_hover",{},"Try free"):!n||t>=e?null:void 0:null}var Q=e=>{var{credits:r,customWriting:t}=e,n=H(r,t);return(0,s.jsx)("div",{className:z.label,children:n?(0,s.jsx)("div",{className:z.labelContent,children:n}):null})},q=e=>{var{credits:r,customWriting:t}=e,n=H(r,t);return(0,s.jsx)("div",{className:z.warning,children:n?(0,s.jsxs)("div",{className:z.warningContent,children:[(0,s.jsx)(b.NVt,{size:16}),n]}):null})},X="wrapper-o0WX7Y",$=e=>{var{scene:r,credits:t,ignoreClickIntercept:o,hideBaseGenerateLabel:c,children:l}=e,u=(0,a._)(e,["scene","credits","ignoreClickIntercept","hideBaseGenerateLabel","children"]),{isOversea:p}=(0,d.G)(W.e);return(0,s.jsx)(M,(0,i._)((0,n._)({},u),{wrapperStyle:{width:"100%"},scene:r,credits:t,ignoreClickIntercept:o,children:e=>(0,s.jsxs)("div",{className:X,children:["function"==typeof l?l(e):l,!c&&(0,s.jsx)(Q,{customWriting:p?void 0:I.ZP.t("dre_m10n_feature_try_free_tag",{},"\u9650\u65F6\u4F18\u60E0"),credits:t})]})}))},ee="tooltip-content-g9FHzW",er=t("563200"),et=t("475578"),en=e=>{var{scene:r,credits:t,ignoreClickIntercept:c,children:l,reportParam:u,extraBenefits:p}=e,v=(0,a._)(e,["scene","credits","ignoreClickIntercept","children","reportParam","extraBenefits"]),m=(0,y.Z)(),_=(0,d.G)(h.t),g=(0,o.useCallback)(e=>{var r=e.strategyFreeTrialTimes?(0,s.jsxs)(s.Fragment,{children:[I.ZP.t("result_button_regenerate",{},"Regenerate")," \uFF08",I.ZP.t("dre_m10n_lip_sync_freetrial_button",{num:e.strategyFreeTrialTimes,number0:e.strategyFreeTrialTimes},"{number0} free trials"),"\uFF09"]}):(0,s.jsx)("div",{children:I.ZP.t("dre_m10n_pro_feature_credits_regenerate",{strong1:e=>e,num:(0,s.jsx)("span",{children:t})},"Regenerating will consume <strong1>{num}</strong1> credits")});return m&&(r=(0,s.jsx)("div",{children:I.ZP.t("dre_m10n_feature_free_limited_time_hover",{},"You can try this feature for free for now")})),(0,s.jsxs)("div",{className:ee,children:[(0,s.jsx)(b.YzG,{size:17.5}),r]})},[t,m]),f=e=>{if(e){var t;(0,er.E)(_,{action:er.N.Show,aiType:et.CO.Video,aiSubType:null!==(t=null==u?void 0:u.reportGenerateSubType)&&void 0!==t?t:et.sw.Text2Video,scene:r,benefits:p,videoDuration:v.videoDuration})}};return(0,s.jsx)(M,(0,i._)((0,n._)({},v),{extraBenefits:p,reportParam:u,scene:r,credits:t,ignoreClickIntercept:c,children:e=>(0,s.jsx)(E.G,{disabled:c,content:g(e.trialInfo),color:"#424754",onVisibleChange:f,children:"function"==typeof l?l(e):l},r)}))},ei="wrapper-Mk_u7M",ea=t("278978"),es=t("44938"),eo={clickVip:"clickVip-QJcldf",freeTrialTips:"freeTrialTips-CgdqcX"},ec=t("246940"),ed=t("870730"),el=(0,o.memo)(e=>{var{scene:r,credits:t,ignoreClickIntercept:o,ignoreNeedCredits:l,children:m,fallbackTipText:_}=e,g=(0,a._)(e,["scene","credits","ignoreClickIntercept","ignoreNeedCredits","children","fallbackTipText"]),{sceneOptions:y,videoDuration:f}=g,P=(0,d.G)(h.t),x=(0,d.G)(W.e),C=(0,d.G)(N.N),b=(0,ea.default)(),{isOversea:w}=x,k=(e,t)=>{e&&(0,Z.SM)(P,{action:Z.bI.Show,vipFuncName:r===c.hO.ReDub?Z.Rc.ReDub:Z.Rc.LipSync,needVipLevel:t,scene:r});var n=(0,u.be)({scene:c.hO.LipSync,commercialStrategyService:C,sceneOptions:y});n.trialType===ed.a.limitTimes&&!e&&!n.isStrategyFreeTrial&&!ec.T.getItem(es.u.freeTrialConsumedMark)&&(ec.T.setItem(es.u.freeTrialConsumedMark,"1"),b())},j=e=>{(0,p.U)({containerService:P,reportParam:{source:v.s.LIP_SYNC,scene:r,sceneOptions:y,videoDuration:f}}),(0,Z.SM)(P,{action:Z.bI.Click,vipFuncName:r===c.hO.ReDub?Z.Rc.ReDub:Z.Rc.LipSync,needVipLevel:e,scene:r})},O=(e,t,n)=>{var i=(0,c.oV)({scene:r,isOversea:w}),a=t.trialType!==ed.a.limitTimes||ec.T.getItem(es.u.freeTrialConsumedMark);return o?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(G,{coverType:i.coverType,coverUrl:i.coverUrl,poster:i.poster,title:r===c.hO.ReDub?I.ZP.t("dreamina_lipsync_redub_btn_name",{},"Resync"):I.ZP.t("dreamina_lipsync_btn_name",{},"Lip sync"),desc:t.strategyFreeTrialTimes?n?I.ZP.t("dre_m10n_lip_sync_freetrial_vip",{num:t.strategyFreeTrialTimes,number0:t.strategyFreeTrialTimes},"{number0} free trials"):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("p",{className:eo.freeTrialTips,children:[I.ZP.t("dre_m10n_pro_feature_lipsync",{},"Upgrade to use lip sync"),I.ZP.t("dre_m10n_lip_sync_freetrial_left",{num:t.strategyFreeTrialTimes,number0:t.strategyFreeTrialTimes,string0:(0,s.jsx)("span",{onClick:()=>j(e),className:eo.clickVip,children:I.ZP.t("dre_m10n_upgrade_remove_watermark_button",{},"Upgrade")})},"{number0} free times, {string0} to unlock more benefits")]})}):n?null:a?I.ZP.t("dre_m10n_pro_feature_lipsync",{},"Upgrade to use lip sync"):I.ZP.t("dre_m10n_lip_sync_no_freetrial",{},"Free times has been used up. Subscribe to continue using lipsync."),btnText:t.isStrategyFreeTrial?void 0:t.trialType===ed.a.limitTimes?I.ZP.t("dre_m10n_lip_sync_frist_pay",{string0:(0,c.J2)({level:e})},"Upgrade now"):I.ZP.t("dre_m10n_hover_btn_subcribe",{string0:(0,c.J2)({level:e})},"Upgrade to {string0}"),onBtnClick:()=>j(e)})};return(0,s.jsx)(M,(0,i._)((0,n._)({},g),{scene:r,credits:t,ignoreClickIntercept:o,children:e=>(0,s.jsx)(K,(0,i._)((0,n._)({currentVipLevel:e.currentVipLevel,needMinVipLevel:e.needMinVipLevel,triggerProps:{clickToClose:!1},credits:e.needCredits,needVip:e.needVip,needCredits:!l,ignoreClickIntercept:o,showDropDownContent:e.trialInfo.isStrategyFreeTrial,vipDropDownContent:O(e.needMinVipLevel,e.trialInfo,e.isVip),getDropDownPopupContainer:()=>document.querySelector(".global-video-generate-list"),onDropDownVisibleChange:r=>k(r,e.needMinVipLevel),content:_},g),{children:"function"==typeof m?m(e):m}))}))}),eu={wrapper:"wrapper-URaAiM",content:"content-PE_w14",vipContent:"vip-content-Zj_ixv",creditsContent:"credits-content-qyOcn4",freemiumContent:"freemium-content-O3XPy8",vipExpired:"vip-expired-OBr4rH"},ep=t("369617"),ev=e=>{var{scene:r,credits:t,ignoreClickIntercept:o,children:c}=e,l=(0,a._)(e,["scene","credits","ignoreClickIntercept","children"]),u=(0,f.p)(),m=(0,y.Z)(),g=(0,d.G)(_.q),P=(0,d.G)(h.t),x=(0,d.G)(J.aG),C=(0,s.jsxs)("div",{className:eu.creditsContent,children:[(0,s.jsx)(b.p88,{}),I.ZP.t("dre_m10n_tag_insufficient_credits")]}),w=(0,s.jsx)("div",{className:eu.vipContent,children:I.ZP.t("dre_m10n_tag_upgrade_for_credits")}),k=(0,s.jsx)("div",{className:eu.freemiumContent,children:I.ZP.t("dre_m10n_feature_try_free_hover",{},"Try free")}),j=(null!=u?u:0)>=t,O=!(null==g?void 0:g.isVip),S=!(null==x?void 0:x.isLocalCreditReady)||j,A=(0,s.jsx)("div",{className:eu.content,children:m?k:!S&&(O?w:C)}),N=e=>{!(null==g?void 0:g.isVip)&&(e.stopPropagation(),e.preventDefault(),ep.s.warning({content:(0,s.jsx)("div",{className:eu.vipExpired,children:I.ZP.t("dre_m10n_vip_expired_toast_sync_fail",{upgrade:(0,s.jsx)("span",{onClick:()=>{(0,p.U)({containerService:P,reportParam:{source:v.s.STORY_RENEW}})},children:I.ZP.t("dre_m10n_subscribe_click",{},"Subscribe")})},"Subscription expired. {upgrade} to use lip sync.")})}))};return(0,s.jsx)(M,(0,i._)((0,n._)({},l),{wrapperStyle:{width:"100%"},scene:r,credits:t,ignoreNeedVip:!0,ignoreClickIntercept:o,children:e=>(0,s.jsxs)("div",{onClickCapture:r=>e.trialInfo.isStrategyFreeTrial?void 0:N(r),className:eu.wrapper,children:["function"==typeof c?c(e):c,A]})}))},em=e=>{var{children:r}=e,t=(0,a._)(e,["children"]);return(0,s.jsx)(M,(0,i._)((0,n._)({},t),{children:r}))},e_="wrapper-a0Mcll",eg="wrapper-NWdSY7",eh="wrapper-aw4jdK",ey="wrapper-eKp13Q",ef="wrapper-S5A1_0",eP="tooltip-content-OWSC7m",ex="wrapper-_pZXLW",eC={[c.hO.GenerateButton]:$,[c.hO.ImagePostEditor]:$,[c.hO.RetryButton]:en,[c.hO.ExtendSeconds]:e=>{var{scene:r,credits:t,ignoreClickIntercept:o,creditNotPassCallback:l,fallbackTipText:u,children:m}=e,_=(0,a._)(e,["scene","credits","ignoreClickIntercept","creditNotPassCallback","fallbackTipText","children"]),g=(0,d.G)(h.t),{isOversea:y}=(0,d.G)(W.e),{sceneOptions:f,videoDuration:P}=_,x=(e,t)=>{e&&(0,Z.SM)(g,{action:Z.bI.Show,scene:r,vipFuncName:Z.Rc.AddMore,needVipLevel:t})},C=e=>{var t;(0,p.U)({containerService:g,reportParam:{source:null!==(t=r?c.jJ[r]:void 0)&&void 0!==t?t:v.s.VIP_EXCLUSIVE_HONER,scene:r,sceneOptions:f,videoDuration:P}}),(0,Z.SM)(g,{action:Z.bI.Click,vipFuncName:Z.Rc.AddMore,scene:r,needVipLevel:e})},b=e=>{var t=(0,c.oV)({scene:r,isOversea:y});return(0,s.jsx)(G,{coverType:t.coverType,coverUrl:t.coverUrl,poster:t.poster,title:I.ZP.t("video_new_tooltip_extend",{},"Extend video"),desc:I.ZP.t("dre_m10n_pro_feature_newadd",{},"Upgrade to increase the video resolution"),btnText:I.ZP.t("dre_m10n_hover_btn_subcribe",{string0:(0,c.J2)({level:e})},"Upgrade to {string0}"),onBtnClick:()=>C(e)})};return(0,s.jsx)(M,(0,i._)((0,n._)({},_),{scene:r,credits:t,ignoreClickIntercept:o,creditNotPassCallback:l,children:e=>(0,s.jsx)(K,(0,i._)((0,n._)({currentVipLevel:e.currentVipLevel,needMinVipLevel:e.needMinVipLevel,credits:e.needCredits,needVip:e.needVip,ignoreClickIntercept:o,disabled:o,needCredits:y,customCreditsContent:y&&I.ZP.t("dre_m10n_pro_feature_credits_add_time",{strong1:e=>e,num:(0,s.jsx)("span",{children:e.needCredits})},"Adding 3s will consume  <strong1>{num}</strong1> credits"),vipDropDownContent:b(e.needMinVipLevel),getDropDownPopupContainer:()=>document.querySelector(".global-video-generate-list"),onDropDownVisibleChange:r=>x(r,e.needMinVipLevel),content:u},_),{children:"function"==typeof m?m(e):m}))}))},[c.hO.Download]:e=>{var{scene:r,credits:t,ignoreClickIntercept:n,children:i}=e,a=(0,d.G)(_.q),l=(0,d.G)(h.t),[u,m]=(0,o.useState)(!1),{mySecUid:g}=(0,D.D)(),f=(0,o.useRef)(!1),P=(0,y.Z)(),x=()=>{(0,L.V)(l,{vipFunctionName:"delete_watermark",action:"click",scene:r}),(0,p.U)({containerService:l,reportParam:{source:v.s.CLICK_VIP_FUNCTION_DELETE_WATERMARK,scene:c.hO.Download}})},C=(0,s.jsx)("div",{className:V,children:P||(null==a?void 0:a.isVip)?I.ZP.t("video_list_download_btn",{},"Download"):I.ZP.t("dre_m10n_upgrade_remove_watermark",{strong1:e=>(0,s.jsx)("span",{onClick:x,children:e},"strong1"),upgrade:I.ZP.t("dre_m10n_upgrade_remove_watermark_button",{},"Upgrade")},"<strong1>{upgrade}</strong> to remove watermark")}),b=e=>{if(f.current&&!e){f.current=!1;return}m(e),e&&(0,L.V)(l,{vipFunctionName:"delete_watermark",action:"show",scene:r})},w=(null==a?void 0:a.isVip)||P,k=()=>{var e=!!localStorage.getItem("commerce_info_wrapper_".concat(g));if(!w&&!e)f.current=!0,localStorage.setItem("commerce_info_wrapper_".concat(g),"1")},j=()=>{b(!1)};return(0,s.jsx)(M,{scene:r,credits:t,ignoreClickIntercept:n,children:e=>(0,s.jsx)(E.G,{popupVisible:u,onVisibleChange:b,content:C,color:"#424754",triggerProps:{trigger:["hover","click"],clickToCloseTooltip:!1,clickToClose:!1,clickOutsideToClose:!0,onClickOutside:j,onClick:k},children:"function"==typeof i?i(e):i},r)})},[c.hO.LipSync]:el,[c.hO.ReDub]:el,[c.hO.LipSyncButton]:ev,[c.hO.ReDubButton]:ev,[c.hO.ActionCopy]:em,[c.hO.RegenerateActionCopy]:en,[c.hO.ImageBasicGenerate]:e=>{var{scene:r,credits:t,ignoreClickIntercept:o,children:c,extraBenefits:d,ignoreNeedVip:l}=e,u=(0,a._)(e,["scene","credits","ignoreClickIntercept","children","extraBenefits","ignoreNeedVip"]);return(0,s.jsx)(M,(0,i._)((0,n._)({},u),{wrapperStyle:{width:"100%"},scene:r,credits:t,extraBenefits:d,ignoreClickIntercept:o,ignoreNeedVip:l,children:e=>(0,s.jsxs)("div",{className:ei,children:["function"==typeof c?c(e):c,(0,s.jsx)(Q,{credits:t})]})}))},[c.hO.ImagePromptEditor]:M,[c.hO.ImageRetryButton]:e=>{var{scene:r,credits:t,ignoreClickIntercept:o,children:c,reportParam:l,extraBenefits:u,fallbackTipText:p}=e,v=(0,a._)(e,["scene","credits","ignoreClickIntercept","children","reportParam","extraBenefits","fallbackTipText"]),m=(0,d.G)(h.t),_=e=>{if(e){var t;(0,er.E)(m,{action:er.N.Show,aiType:et.CO.Image,aiSubType:null!==(t=null==l?void 0:l.reportGenerateSubType)&&void 0!==t?t:et.sw.Text2Image,scene:r,benefits:u})}};return(0,s.jsx)(M,(0,i._)((0,n._)({},v),{scene:r,credits:t,ignoreClickIntercept:o,reportParam:l,extraBenefits:u,children:e=>(0,s.jsx)(K,{currentVipLevel:e.currentVipLevel,needMinVipLevel:e.needMinVipLevel,credits:e.needCredits,needCredits:!!e.needCredits,needVip:e.needVip,ignoreClickIntercept:o,onVisibleChange:_,customVipContent:I.ZP.t("dre_m10n_pro_feature_generate_again",{},"Can\u2019t regenerate. Subscriber-only features used in this result."),customCreditsContent:I.ZP.t("dre_m10n_pro_feature_credits_regenerate",{strong1:e=>e,num:(0,s.jsx)("span",{children:t})},"Regenerating will consume <strong1>{num}</strong1> credits"),content:p,children:"function"==typeof c?c(e):c})}))},[c.hO.ImageOutPaintButton]:e=>{var{scene:r,credits:t,ignoreClickIntercept:n,children:i}=e,a=(0,y.Z)();return(0,s.jsx)(M,{scene:r,credits:t,ignoreClickIntercept:n,children:e=>(0,s.jsxs)("div",{className:e_,children:[a||t<=0?(0,s.jsx)(Q,{credits:t}):(0,s.jsx)(q,{credits:t}),"function"==typeof i?i(e):i]})})},[c.hO.ImageOutPaintTextArea]:M,[c.hO.ImageInPaintRepaintButton]:e=>{var{scene:r,credits:t,ignoreClickIntercept:n,children:i}=e,a=(0,y.Z)();return(0,s.jsx)(M,{scene:r,credits:t,ignoreClickIntercept:n,children:e=>(0,s.jsxs)("div",{className:eg,children:[a||t<=0?(0,s.jsx)(Q,{credits:t}):(0,s.jsx)(q,{credits:t}),"function"==typeof i?i(e):i]})})},[c.hO.ImageInPaintRepaintTextArea]:M,[c.hO.ImageInPaintEraserButton]:e=>{var{scene:r,credits:t,ignoreClickIntercept:n,children:i}=e,a=(0,y.Z)();return(0,s.jsx)(M,{scene:r,credits:t,ignoreClickIntercept:n,children:e=>(0,s.jsxs)("div",{className:eh,children:[a||t<=0?(0,s.jsx)(Q,{credits:t}):(0,s.jsx)(q,{credits:t}),"function"==typeof i?i(e):i]})})},[c.hO.ImageInPaintEraserTextArea]:M,[c.hO.ImageMattingButton]:e=>{var{scene:r,credits:t,ignoreClickIntercept:n,children:i}=e,a=(0,y.Z)();return(0,s.jsx)(M,{scene:r,credits:t,ignoreClickIntercept:n,children:e=>(0,s.jsxs)("div",{className:ey,children:[a||t<=0?(0,s.jsx)(Q,{credits:t}):(0,s.jsx)(q,{credits:t}),"function"==typeof i?i(e):i]})})},[c.hO.ImageMagnificButton]:e=>{var{scene:r,credits:t,ignoreClickIntercept:n,children:i}=e,a=(0,y.Z)();return(0,s.jsx)(M,{scene:r,credits:t,ignoreClickIntercept:n,children:e=>(0,s.jsxs)("div",{className:ef,children:[a||t<=0?(0,s.jsx)(Q,{credits:t}):(0,s.jsx)(q,{credits:t}),"function"==typeof i?i(e):i]})})},[c.hO.ImageControlNetReference]:em,[c.hO.ImageControlNetHumanFace]:em,[c.hO.ImageControlNetObject]:em,[c.hO.ImageControlNetCanny]:em,[c.hO.ImageControlNetDepth]:em,[c.hO.ImageControlNetPose]:em,[c.hO.ImageStyleReference]:em,[c.hO.ImageByteEdit]:em,[c.hO.ImageIpKeep]:em,[c.hO.RelaxedGenerateVideo]:em,[c.hO.VideoFrameInterpolation]:e=>{var{scene:r,credits:t,ignoreClickIntercept:o,ignoreNeedCredits:l,children:u,fallbackTipText:m}=e,_=(0,a._)(e,["scene","credits","ignoreClickIntercept","ignoreNeedCredits","children","fallbackTipText"]),g=(0,d.G)(h.t),{isOversea:y}=(0,d.G)(W.e),f=(e,t)=>{e&&(0,Z.SM)(g,{action:Z.bI.Show,vipFuncName:Z.Rc.VideoFrameInterpolation,needVipLevel:t,scene:r})},P=e=>{var t;(0,p.U)({containerService:g,reportParam:{source:null!==(t=r?c.jJ[r]:void 0)&&void 0!==t?t:v.s.VIP_EXCLUSIVE_HONER,scene:r}}),(0,Z.SM)(g,{action:Z.bI.Click,vipFuncName:Z.Rc.VideoFrameInterpolation,needVipLevel:e,scene:r})},x=e=>{var t=(0,c.oV)({scene:r,isOversea:y});return(0,s.jsx)(G,{coverType:t.coverType,coverUrl:t.coverUrl,poster:t.poster,desc:I.ZP.t("dre_m10n_pro_feature_frame_interpolation",{},"Upgrade to make the video smoother"),title:I.ZP.t("aigc_video_btn_frame_interpolation",{},"Frame interpolation"),btnText:I.ZP.t("dre_m10n_hover_btn_subcribe",{string0:(0,c.J2)({level:e})},"Upgrade to {string0}"),onBtnClick:()=>P(e)})};return(0,s.jsx)(M,(0,i._)((0,n._)({},_),{scene:r,credits:t,ignoreClickIntercept:o,children:e=>(0,s.jsx)(K,(0,i._)((0,n._)({currentVipLevel:e.currentVipLevel,needMinVipLevel:e.needMinVipLevel,triggerProps:{clickToClose:!1},credits:e.needCredits,needVip:e.needVip,needCredits:!l,ignoreClickIntercept:o,disabled:!1,vipDropDownContent:x(e.needMinVipLevel),getDropDownPopupContainer:()=>document.querySelector(".global-video-generate-list"),onDropDownVisibleChange:r=>f(r,e.needMinVipLevel),content:m},_),{children:"function"==typeof u?u(e):u}))}))},[c.hO.VideoUpscale]:e=>{var{scene:r,credits:t,ignoreClickIntercept:o,ignoreNeedCredits:l,children:u,fallbackTipText:m}=e,_=(0,a._)(e,["scene","credits","ignoreClickIntercept","ignoreNeedCredits","children","fallbackTipText"]),g=(0,d.G)(h.t),{isOversea:y}=(0,d.G)(W.e),f=(e,t)=>{e&&(0,Z.SM)(g,{action:Z.bI.Show,vipFuncName:Z.Rc.VideoUpscale,needVipLevel:t,scene:r})},P=e=>{var t;(0,p.U)({containerService:g,reportParam:{source:null!==(t=r?c.jJ[r]:void 0)&&void 0!==t?t:v.s.VIP_EXCLUSIVE_HONER,scene:r}}),(0,Z.SM)(g,{action:Z.bI.Click,vipFuncName:Z.Rc.VideoUpscale,needVipLevel:e,scene:r})},x=e=>{var t=(0,c.oV)({scene:r,isOversea:y});return(0,s.jsx)(G,{coverType:t.coverType,coverUrl:t.coverUrl,poster:t.poster,title:I.ZP.t("aigc_video_btn_high_definition",{},"Upscale"),desc:I.ZP.t("dre_m10n_pro_feature_upscale",{},"Upgrade to increase the video resolution"),btnText:I.ZP.t("dre_m10n_hover_btn_subcribe",{string0:(0,c.J2)({level:e})},"Upgrade to {string0}"),onBtnClick:()=>P(e)})};return(0,s.jsx)(M,(0,i._)((0,n._)({},_),{scene:r,credits:t,ignoreClickIntercept:o,children:e=>(0,s.jsx)(K,(0,i._)((0,n._)({currentVipLevel:e.currentVipLevel,needMinVipLevel:e.needMinVipLevel,triggerProps:{clickToClose:!1},credits:e.needCredits,needVip:e.needVip,needCredits:!l,ignoreClickIntercept:o,disabled:o,vipDropDownContent:x(e.needMinVipLevel),getDropDownPopupContainer:()=>document.querySelector(".global-video-generate-list"),onDropDownVisibleChange:r=>f(r,e.needMinVipLevel),content:m},_),{children:"function"==typeof u?u(e):u}))}))},[c.hO.TextArtGenerationButton]:em,[c.hO.TextArtGenerationRetryButton]:em,[c.hO.ContinueLabUpscaleVideo]:e=>{var{scene:r,credits:t,ignoreClickIntercept:o,children:c,reportParam:l,extraBenefits:u,fallbackTipText:p}=e,v=(0,a._)(e,["scene","credits","ignoreClickIntercept","children","reportParam","extraBenefits","fallbackTipText"]),m=(0,d.G)(h.t),_=e=>{if(e){var t;(0,er.E)(m,{action:er.N.Show,aiType:et.CO.Video,aiSubType:null!==(t=null==l?void 0:l.reportGenerateSubType)&&void 0!==t?t:et.sw.Text2Image,scene:r,benefits:u,videoDuration:v.videoDuration})}};return(0,s.jsx)(M,(0,i._)((0,n._)({},v),{scene:r,credits:t,ignoreClickIntercept:o,reportParam:l,extraBenefits:u,children:e=>(0,s.jsx)(K,{currentVipLevel:e.currentVipLevel,needMinVipLevel:e.needMinVipLevel,credits:e.needCredits,needCredits:!!e.needCredits,needVip:e.needVip,ignoreClickIntercept:o,onVisibleChange:_,content:p,children:"function"==typeof c?c(e):c})}))},[c.hO.ImageFusion]:em,[c.hO.ImageInstaDragButton]:em,[c.hO.BatchGenerateVideo]:em,[c.hO.GenerateVideoBGM]:em,[c.hO.AudioBasicGenerate]:em,[c.hO.ReGenerateVideoBGM]:em,[c.hO.AudioBasicReGenerate]:e=>{var{scene:r,credits:t,ignoreClickIntercept:c,children:l,reportParam:u,extraBenefits:p}=e,v=(0,a._)(e,["scene","credits","ignoreClickIntercept","children","reportParam","extraBenefits"]),m=(0,y.Z)(),_=(0,d.G)(h.t),g=(0,o.useCallback)(e=>(0,s.jsxs)("div",{className:eP,children:[(0,s.jsx)(b.YzG,{size:17.5}),m?(0,s.jsx)("div",{children:I.ZP.t("dre_m10n_feature_free_limited_time_hover",{},"You can try this feature for free for now")}):e.strategyFreeTrialTimes?(0,s.jsxs)(s.Fragment,{children:[I.ZP.t("result_button_regenerate",{},"Regenerate")," \uFF08",I.ZP.t("dre_m10n_lip_sync_freetrial_button",{num:e.strategyFreeTrialTimes,number0:e.strategyFreeTrialTimes},"{number0} free trials"),"\uFF09"]}):(0,s.jsx)("div",{children:I.ZP.t("dre_m10n_pro_feature_credits_regenerate",{strong1:e=>e,num:(0,s.jsx)("span",{children:t})},"Regenerating will consume <strong1>{num}</strong1> credits")})]}),[t,m]),f=e=>{if(e){var t;(0,er.E)(_,{action:er.N.Show,aiType:et.CO.Audio,aiSubType:null!==(t=null==u?void 0:u.reportGenerateSubType)&&void 0!==t?t:et.sw.GenerateAudio,scene:r,benefits:p})}};return(0,s.jsx)(M,(0,i._)((0,n._)({},v),{extraBenefits:p,reportParam:u,scene:r,credits:t,ignoreClickIntercept:c,children:e=>(0,s.jsx)(E.G,{disabled:c,content:g(e.trialInfo),color:"#424754",onVisibleChange:f,children:"function"==typeof l?l(e):l},r)}))},[c.hO.Character2Video]:e=>{var{children:r,credits:t,sceneOptions:o}=e,c=(0,a._)(e,["children","credits","sceneOptions"]);return(0,s.jsx)(M,(0,i._)((0,n._)({credits:t,sceneOptions:o},c),{children:e=>(0,s.jsx)("div",{className:ex,children:"function"==typeof r?r(e):r})}))},[c.hO.RetryCharacter2Video]:en,[c.hO.VideoAudioEffect]:em},eb=t("969197"),eI=(0,o.memo)(e=>{var{children:r,videoDuration:t}=e,o=(0,a._)(e,["children","videoDuration"]),c=eC[o.scene],{credits:d}=(0,eb.P)({scene:o.scene,extraBenefits:o.extraBenefits,discount:o.discount,sceneOptions:o.sceneOptions,batchNumber:o.batchNumber,videoDuration:t});return(0,s.jsx)(c,(0,i._)((0,n._)({},o),{videoDuration:t,credits:d,children:r}))});eI.displayName="CommercialWrapper"},641058:function(e,r,t){t.d(r,{z:function(){return n}});class n{}},1314:function(e,r,t){t.d(r,{F:function(){return _}});var n=t(876826),i=t(789786),a=t(434712),s=t(304483),o=t(650248),c=t(641058),d=t(453916),l=t(216342),u=t(460029),p=t(217940),v=t(37454),m=t(283919);class _ extends c.z{generatePayOrder(e,r){return"credits"===r.type?this._generateCreditPayOrder(e,r):"scene"in r?this._generateVipAutoPayOrder(e,r):this._generateVipPayOrder(e,r)}generatePayTask(e,r){return"credits"===r.type?this._generateCreditPayTask(e,r):this._generateVipPayTask(e,r)}_generateCreditPayOrder(e,r){return this._dreaminaPayDataService.makeCreditOrder(e,r)}_generateVipPayOrder(e,r){return this._dreaminaPayDataService.makeUnautoVIPOrder(e,r)}_generateVipAutoPayOrder(e,r){return this._dreaminaPayDataService.makeAutoVIPOrder(e,r)}_generateVipPayTask(e,r){var t,i=this._dreaminaPayDataService.queryVIPOrderStatus.bind(this._dreaminaPayDataService,e),a=(0,o.default)(m.h,2e3,{trailing:!1}),s=this;var c=(t=(0,n._)(function*(e){(0,u.Ie)(v.j.QUERY_VIP_ORDER);var r,{orderId:t}=e,n=yield i(e),o=(0,p.Y)(v.j.QUERY_VIP_ORDER);return a(s._containerService,{status:n.ok?"success":"error",duration:o,orderId:t,orderType:"vip",errMsg:n.ok?void 0:n.msg,logId:n.ok?void 0:null===(r=n.cause)||void 0===r?void 0:r.log_id}),n}),function(e){return t.apply(this,arguments)}),l=this._dreaminaPayDataService.cancelVIPOrder.bind(this._dreaminaPayDataService);return new d.v(r.orderId,c,l,2e3)}_generateCreditPayTask(e,r){var t,i=this._dreaminaPayDataService.queryCreditOrderStatus.bind(this._dreaminaPayDataService,e),a=(0,o.default)(m.h,2e3,{trailing:!1}),s=this;var c=(t=(0,n._)(function*(e){(0,u.Ie)(v.j.QUERY_CREDIT_ORDER);var r,{orderId:t}=e,n=yield i(e),o=(0,p.Y)(v.j.QUERY_CREDIT_ORDER);return a(s._containerService,{status:n.ok?"success":"error",duration:o,orderId:t,orderType:"credit",errMsg:n.ok?void 0:n.msg,logId:n.ok?void 0:null===(r=n.cause)||void 0===r?void 0:r.log_id}),n}),function(e){return t.apply(this,arguments)}),l=this._dreaminaPayDataService.cancelCreditOrder.bind(this._dreaminaPayDataService);return new d.v(r.orderId,c,l,2e3)}constructor(e,r){super(),this._containerService=e,this._dreaminaPayDataService=r}}(0,i.gn)([(0,l.lI)("DomesticPayManager","generatePayOrder"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof T?Object:T]),(0,i.w6)("design:returntype",void 0)],_.prototype,"generatePayOrder",null),(0,i.gn)([(0,l.lI)("DomesticPayManager","generatePayTask"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGeneratePayTask?Object:IGeneratePayTask]),(0,i.w6)("design:returntype",void 0)],_.prototype,"generatePayTask",null),(0,i.gn)([(0,l.lI)("DomesticPayManager","_generateCreditPayOrder"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeCreditOrderParams?Object:IMakeCreditOrderParams]),(0,i.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],_.prototype,"_generateCreditPayOrder",null),(0,i.gn)([(0,l.lI)("DomesticPayManager","_generateVipPayOrder"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeVIPUnautoOrderParams?Object:IMakeVIPUnautoOrderParams]),(0,i.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],_.prototype,"_generateVipPayOrder",null),(0,i.gn)([(0,l.lI)("DomesticPayManager","_generateVipAutoPayOrder"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGenerateVipAutoOrderParams?Object:IGenerateVipAutoOrderParams]),(0,i.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],_.prototype,"_generateVipAutoPayOrder",null),(0,i.gn)([(0,l.lI)("DomesticPayManager","_generateVipPayTask"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGeneratePayTask?Object:IGeneratePayTask]),(0,i.w6)("design:returntype",void 0)],_.prototype,"_generateVipPayTask",null),(0,i.gn)([(0,l.lI)("DomesticPayManager","_generateCreditPayTask"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGeneratePayTask?Object:IGeneratePayTask]),(0,i.w6)("design:returntype",void 0)],_.prototype,"_generateCreditPayTask",null),_=(0,i.gn)([(0,i.fM)(0,a.t),(0,i.fM)(1,s.fJ),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===a.t?Object:a.t,void 0===s.fJ?Object:s.fJ])],_)},941016:function(e,r,t){t.d(r,{R:function(){return g}});var n=t(876826),i=t(85728),a=t(789786),s=t(434712),o=t(304483),c=t(650248),d=t(641058),l=t(453916),u=t(216342),p=t(460029),v=t(217940),m=t(37454),_=t(283919);class g extends d.z{generatePayOrder(e,r){return this._generatePayOrderV3(e,r)}generatePayTask(e,r){return this._generatePayTaskV3(e,r)}_generatePayOrderV3(e,r){return this._dreaminaPayDataService.makeOverseaOrderV3(e,r)}_generatePayTaskV3(e,r){var t,a=this._dreaminaPayDataService.queryOverseaOrderStatusV3.bind(this._dreaminaPayDataService,e),s=(0,c.default)(_.h,2e3,{trailing:!1}),o=this;var d=(t=(0,n._)(function*(e){(0,p.Ie)(m.j.QUERY_VIP_ORDER);var t,{orderId:n}=e,c=yield a((0,i._)({},r,e)),d=(0,v.Y)(m.j.QUERY_VIP_ORDER);return s(o._containerService,{status:c.ok?"success":"error",duration:d,orderId:n,orderType:"credits"===r.type?"credit":"vip",errMsg:c.ok?void 0:c.msg,logId:c.ok?void 0:null===(t=c.cause)||void 0===t?void 0:t.log_id}),c}),function(e){return t.apply(this,arguments)});return new l.v(r.orderId,d,void 0,2e3)}constructor(e,r){super(),this._containerService=e,this._dreaminaPayDataService=r}}(0,a.gn)([(0,u.lI)("OverseaPayManager","generatePayOrder"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGenerateOrderParams?Object:IGenerateOrderParams]),(0,a.w6)("design:returntype",void 0)],g.prototype,"generatePayOrder",null),(0,a.gn)([(0,u.lI)("OverseaPayManager","generatePayTask"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGetOverseaOrderParams?Object:IGetOverseaOrderParams]),(0,a.w6)("design:returntype",void 0)],g.prototype,"generatePayTask",null),(0,a.gn)([(0,u.lI)("OverseaPayManager","_generatePayOrderV3"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeOverseaOrderParamsV3?Object:IMakeOverseaOrderParamsV3]),(0,a.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],g.prototype,"_generatePayOrderV3",null),(0,a.gn)([(0,u.lI)("OverseaPayManager","_generatePayTaskV3"),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGetOverseaOrderStatusParamsV3?Object:IGetOverseaOrderStatusParamsV3]),(0,a.w6)("design:returntype","undefined"==typeof IPayTask?Object:IPayTask)],g.prototype,"_generatePayTaskV3",null),g=(0,a.gn)([(0,a.fM)(0,s.t),(0,a.fM)(1,o.fJ),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===s.t?Object:s.t,void 0===o.fJ?Object:o.fJ])],g)},453916:function(e,r,t){t.d(r,{v:function(){return l}});var n=t(876826),i=t(836413),a=t(843698),s=t(874800),o=t(473877),c=[0,1],d=[2,3,4];class l extends s.JT{get isStarted(){return 1===this._taskStatus}start(){[0,5].includes(this._taskStatus)&&this.orderId&&(this._taskStatus=1,this._startPollingOrderStatus())}stop(){if(!d.includes(this._taskStatus)||!!this._timer)this._taskStatus=5,this._onStop.fire(),this._clearTimer()}_clearTimer(){this._timer&&(clearTimeout(this._timer),this._timer=void 0)}_startPollingOrderStatus(){var e=this;return(0,n._)(function*(){yield e._queryOrderStatus(),c.includes(e._taskStatus)&&(e._timer=setTimeout(()=>{e._startPollingOrderStatus()},e._pollingInterval))})()}_queryOrderStatus(){var e=this;return(0,n._)(function*(){var r=yield e._queryOrderFn({orderId:e.orderId});if(r.ok){e._queryOrderErrorCount=0,e._orderStatus=r.value.status;var t=1e3*r.value.expirationTime<=r.value.sysTime;e._orderStatus===o.iF.FAILED?e._handleOrderFailed(r):e._orderStatus===o.iF.SUCCESS?e._handleOrderSuccess(r):t?e._handleOrderExpired(r):e._onProgress.fire(r.value)}else e._handleQueryOrderError(r);return r})()}_handleOrderSuccess(e){this._taskStatus=2,this._clearTimer(),this._onSuccess.fire(e.value)}_handleOrderFailed(e){this._taskStatus=3,this._clearTimer(),this._onError.fire((0,i.wf)(e.code,"".concat(o.iF.FAILED," - order failed"),e))}_handleOrderExpired(e){this._taskStatus=3,this._orderStatus=o.iF.FAILED,this._clearTimer(),this._onError.fire((0,i.wf)(e.code,"".concat(o.iF.FAILED," - order is expired"),e))}_handleQueryOrderError(e){this._queryOrderErrorCount++,this._queryOrderErrorCount>=5&&(this._orderStatus=o.iF.FAILED,this._taskStatus=3,this._clearTimer(),this._onError.fire((0,i.wf)(e.code,e.msg,e)))}cancel(){var e=this;return(0,n._)(function*(){if(!d.includes(e._taskStatus)){if(e._clearTimer(),e._taskStatus=4,e._cancelOrderFn){var r=yield e._cancelOrderFn({orderId:e.orderId});r.ok?e._onCancel.fire(r):e._onError.fire(r)}}})()}dispose(){this.stop(),super.dispose()}constructor(e,r,t,n=500){super(),this.orderId=e,this._queryOrderFn=r,this._cancelOrderFn=t,this._pollingInterval=n,this._onProgress=this._store.add(new a.Q),this.onProgress=this._onProgress.event,this._onError=this._store.add(new a.Q),this.onError=this._onError.event,this._onSuccess=this._store.add(new a.Q),this.onSuccess=this._onSuccess.event,this._onCancel=this._store.add(new a.Q),this.onCancel=this._onCancel.event,this._onStop=this._store.add(new a.Q),this.onStop=this._onStop.event,this._orderStatus=o.iF.INIT,this._taskStatus=0,this._queryOrderErrorCount=0}}},330691:function(e,r,t){t.d(r,{W:function(){return d}});var n=t(876826),i=t(772322),a=t(95581),s=t(150615),o=t(121325),c=t(724614);class d{getIsSupportPay(){return!1}showSpaceNotEnoughModal(){}showPayUploadFullSpaceModal(){var e=this;return(0,n._)(function*(){if(!e._isShowingUploadFullSpaceModal){e._isShowingUploadFullSpaceModal=!0;var r,t,n,d=yield null===(t=e._uploadSizeChecker)||void 0===t?void 0:t.getSize(null!==(n=null===(r=e._draftWorkspaceManager)||void 0===r?void 0:r.workspaceId)&&void 0!==n?n:""),l=(0,c.H)()?"dreamina@bytedance.com":"jimeng.ai@bytedance.com";a.h.draftError({title:s.ZP.t("fail_storage_insufficient",{},"\u4E91\u5B58\u50A8\u7A7A\u95F4\u4E0D\u8DB3"),content:(0,i.jsxs)("div",{children:["".concat(s.ZP.t("fail_storage_contact",{number:(0,o.B)((null==d?void 0:d.ok)?d.value:0)},"Couldn\u2019t continue using this feature because your cloud storage is less than {number}MB. If you want to increase your storage, contact us: ")," "),(0,i.jsx)("a",{style:{color:"var(--lvv-color-main-default)"},href:"mailto:".concat(l),children:l})]}),okText:s.ZP.t("fail_storage_known",{},"\u6211\u77E5\u9053\u4E86"),onOk:()=>{e._isShowingUploadFullSpaceModal=!1},onCancel:()=>{e._isShowingUploadFullSpaceModal=!1},escToExit:!0,maskClosable:!1,closable:!0})}})()}showExpandModal(){}addListenNotEnoughModalOK(e){}addListenNotEnoughModalCancel(e){}addListenPaySuccess(e){}addListenPayFailed(e){}triggerOnNotEnoughModalOK(e){}triggerOnNotEnoughModalCancel(e){}constructor(e,r){this._isShowingUploadFullSpaceModal=!1,this._uploadSizeChecker=e,this._draftWorkspaceManager=r}}}}]);