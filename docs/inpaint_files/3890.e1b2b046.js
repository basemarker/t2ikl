"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["3890"],{480043:function(){},27409:function(e,t){t.Z={survey:"survey-V8pveJ",header:"header-OoBOYD",title:"title-GCuSFq",desc:"desc-TD36cm",body:"body-bkY5Zq"}},669174:function(e,t){t.Z={pageIconFill:"pageIconFill-qbzxRo",searchContainer:"searchContainer-X3ppkT"}},131754:function(e,t,i){i.d(t,{I:function(){return L}});var r=i(876826),n=i(85728),o=i(929753),s=i(789786),a=i(700645),c=i(867713),u=i(843698),l=i(874800),d=i(947259),h=i(738409),_=i(56935),p=i(590839),v=i(48252),f=i(178589),m=i(259273),g=i(163142),y=i(417699),w=i(519927),b=i(252805),C=i(917599),S=i(651712),I=i(693811),T=i(460029),k=i(175831),R=i(651531);class L extends l.JT{bootstrap(){var e=this;return(0,r._)(function*(){yield Promise.resolve([e._loadAndRegisterContribution(m.$W.GlobalRedirect)]),(0,T.Ie)(g.c),yield e._loadContributionByPage(e._options.currentRoute),e._platformUiConfigurationService.useMiddleware({id:"side-menu-hover-preload-middleware",trigger:p.a.SideMenu,triggerMethod:["onHover"],handler:t=>{var{actionInfo:i}=t;e._loadAndRegisterContribution(i.name)},freshTrigger:e._onRefreshRender.event}),e._store.add(e._platformUiConfigurationService.onSideMenuItemClick(t=>{e._loadAndRegisterContribution(t)}));var t=t=>{t&&t.status===v.G.Activated&&t.routeId!==e._currentRouteId&&(e._clearLoadingContribution(),e._loadContributionByPage(t.pathName))};t(e._platformUiConfigurationService.currentKeepAliveData),e._platformUiConfigurationService.onKeepAliveChange(t),(0,T.oe)(g.c),(0,T.XH)(g.c)})()}_preloadAllContributions(){for(var e of(k.OL.forEach(e=>{!this._skipPreloadContributionIdSet.has(e.id)&&(!e.shouldPreload||e.shouldPreload())&&this._loadContributionIdle(e.id)}),this._contributionsLoaderMap.values()))!this._skipPreloadContributionIdSet.has(e.id)&&this._loadContributionIdle(e.id)}_loadContributionByPage(e){var t=this;return(0,r._)(function*(){var i=t._platformUiConfigurationService.getRouteConfigByPath(e),r=[];if(i){t._currentRouteId=i.id;var n=t._contributionRouteStrategy[i.id];(0,_.Y2)(n,"not found target route packages"),yield t._loadAndRegisterContribution(i.id),n.forEach(e=>{"loaded"!==e.loadTiming?t._loadContributionIdle(e.id):r.push(e.id)})}t._preloadTaskDisposable=t._preloadService.addPreloadTask({signal:w.l.PAGE_IDLE,runTask:()=>{r.forEach(e=>{t._loadContributionIdle(e)}),t._preloadAllContributions()}})})()}_clearLoadingContribution(){var e;for(var t of(null===(e=this._preloadTaskDisposable)||void 0===e||e.dispose(),this._preloadTaskDisposable=null,this._queueingContributionMap.values()))t.cancel();this._queueingContributionMap.clear()}_loadContributionIdle(e){if(!(!1===this._environmentService.debugLoadContributionIdle||this._loadedContributionMap.has(e)||this._queueingContributionMap.has(e))){var t=this,i=this._asyncQueue.addTask((0,r._)(function*(){yield(0,d.D)(0),yield new Promise(e=>{(0,a.n)(()=>e(),{priorityLevel:c.q.IdlePriority})}),yield t._loadAndRegisterContribution(e,!0)}));this._queueingContributionMap.set(e,i)}}_loadAndRegisterContribution(e,t){var i=this;return(0,r._)(function*(){if(!i._loadedContributionMap.has(e)){i._environmentService.isContributionDebugMode&&(0,T.Ie)("LOAD_AND_REGISTER_CONTRIBUTION_".concat(e));try{var r=i._contributionsLoaderMap.get(e);if(!r){i._logger.warn("not found contribution(".concat(e,") loader, skip loading step")),i._queueingContributionMap.delete(e),i._loadedContributionMap.set(e,!0);return}i._loadedContributionMap.set(e,!0);var s=yield r.loader();i._extensionService.register((0,o._)((0,n._)({},s.contribution),{instantiationPhase:t?C.P.Idle:C.P.Eager})),i._preloadService.addPreloadTask({signal:w.l.PAGE_IDLE,runTask:()=>(0,a.n)(()=>{var e;return null===(e=r.sideload)||void 0===e?void 0:e.call(r)},{priorityLevel:c.q.IdlePriority})}),i._queueingContributionMap.delete(e)}finally{i._environmentService.isContributionDebugMode&&(0,T.oe)("LOAD_AND_REGISTER_CONTRIBUTION_".concat(e)),i._environmentService.isContributionDebugMode&&(0,T.XH)("LOAD_AND_REGISTER_CONTRIBUTION_".concat(e))}}})()}constructor(e,t,i,r,n,o){super(),this._options=e,this._platformUiConfigurationService=t,this._loggerService=i,this._extensionService=r,this._environmentService=n,this._preloadService=o,this._contributionRouteStrategy=I.K,this._contributionsLoaderMap=new Map,this._loadedContributionMap=new Map,this._queueingContributionMap=new Map,this._asyncQueue=new h.z({concurrent:3}),this._onRefreshRender=new u.Q,this._preloadTaskDisposable=null,this._skipPreloadContributionIdSet=new Set([m.Sj.DataSubjectRequestDownload,m.Sj.DataSubjectRequest,m.Sj.DataSubjectRequestSubmit,m.Sj.DataSubjectRequestBlock,m.Sj.Block,m.Sj.HistoryDetail]),this._logger=this._loggerService.createLogger("registerContribution"),[...k.ms,...k.b2,...k.cr,...k.OL,...k.Z9].forEach(e=>{this._contributionsLoaderMap.set(e.id,e)})}}L=(0,s.gn)([(0,s.fM)(1,f.e),(0,s.fM)(2,R.VZ),(0,s.fM)(3,S.Q),(0,s.fM)(4,y.e),(0,s.fM)(5,b.f),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof IRegisterContributionManager?Object:IRegisterContributionManager,void 0===f.e?Object:f.e,void 0===R.VZ?Object:R.VZ,void 0===S.Q?Object:S.Q,void 0===y.e?Object:y.e,void 0===b.f?Object:b.f])],L)},293037:function(e,t,i){i.d(t,{E:function(){return _}});var r=i(772322),n=i(178589),o=i(133512),s=i(590839),a=i(89179),c=i(175831),u=i(642273),l=i(259273),d=i(849688),h=i(700056);function _(e,t,i){e.invokeFunction(e=>{var _=e.get(n.e),p=u.T0.includes(t),v=(0,h.Z)(c.Ap),f=(0,o.q)([{[s.a.TitleBar]:[{id:l.ZZ,position:"left",type:"Custom",shouldHidden:()=>p,content:()=>(0,r.jsx)(d.j,{}),className:"mweb-titlebar-logo-container"},{id:l.$q,position:"left",type:"Custom",shouldHidden:()=>!p,content:()=>(0,r.jsx)(a.V,{}),className:"mweb-titlebar-back-container"}]},...i?i(v):v]);_.registerConfig(f)})}},980043:function(e,t,i){i.d(t,{b:()=>d});var r,n=i("490165"),o=i("608358"),s=i("341245"),a=i("876826"),c=i("899792"),u=i("357217");var l=(r=(0,a._)(function*(e){var t=(0,o.ko)(e,c.sR),i=(0,o.ko)(e,s.U),r=yield t.fetchCommonResource({resourceKeyList:[u.hJ.ModelCampaignCodeStart,u.hJ.ModelCampaignWebTag]});return r.ok&&i.ugResourceManager.setUgResourceMaterial(r.value),r}),function(e){return r.apply(this,arguments)}),d=e=>{var t=(0,o.ko)(e,s.U),i=(0,o.ko)(e,n.D);if(!!t.isEnabled)i.hasLogin?l(e):i.onDidLogin(()=>{l(e)})}},561767:function(e,t,i){i.d(t,{DU:function(){return r.D},NX:function(){return n.N},ZN:function(){return s.Z},eH:function(){return o.e}});var r=i(71493),n=i(355793),o=i(780175),s=i(550318)},978269:function(e,t,i){i.d(t,{J:function(){return r}});var r={ALREADY_SUBSCRIBE_USER:"34010104"}},667610:function(e,t,i){i.d(t,{C:function(){return f}});var r,n=i(85728),o=i(929753),s=i(786377),a=i(554960),c=i(407270);i(803792);var u=i(63034),l=i(842121);function d(e,t){var i="userTracking",{ccWebSlardar:r}=window;r&&("info"===t?r("sendLog",{content:e,extra:{type:i}}):r("captureException",e instanceof Error?e:{content:e},{script:i}))}function h(e,t){try{sessionStorage.setItem(e,t)}catch(e){d(e,"error")}}function _(e){try{return decodeURIComponent(e)}catch(t){return e}}function p(e){var t=new URLSearchParams(e),i={};for(var[r,n]of t)i[r]=n;return i}class v{init(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoReport:!0};return this.hasInit?Promise.resolve():(this.checkPageStatus(),this.initChannelLevel(),this.normalizeMedium(),e.autoReport&&this.reportPvImmediately(),this.hasInit=!0,Promise.resolve())}start(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoReport:!0};this.init(e)}allowCookie(){this._setCookie(this.channel_info)}getServerInjectUT(){return"undefined"!=typeof window&&window._ut||null}checkPageStatus(){var{isFirstVisitPage:e,isSessionStartPage:t}=(0,u.H)();this.isSessionStartPage=t,this.isFirstVisitPage=e}initChannelLevel(){var e,t,i=null!==(e=this._parseUTMParams())&&void 0!==e?e:this._parseSEMParams(),r=function(e){try{return sessionStorage.getItem("_ut")}catch(e){return d(e,"error"),null}}("_ut"),o=r?function(e){try{return JSON.parse(e)}catch(e){return d(e,"error"),null}}(r):null,a=null!==(t=s.Z.get("_ut"))&&void 0!==t?t:"";if(!i&&o){this.channel_info=o;return}if(!i&&a&&this.referer.includes(location.hostname)){var c=p(decodeURIComponent(a))||{},{source:u,medium:l,sub_source:_,content:v}=c;if((u||l||_||v)&&(this.channel_info=c,!this.hasException(this.channel_info)))return}if(this.getServerInjectUT()&&(this.channel_info=(0,n._)({},this.getServerInjectUT()),this.channel_info.channel_from="ut",this.channel_info.session_start_url=location.href,!this.hasException(this.channel_info))){h("_ut",JSON.stringify(this.channel_info));return}var f=this._getParamsNotByCookie();this.channel_info=f,this.channel_info.channel_from="local",this.channel_info.session_start_url=location.href,h("_ut",JSON.stringify(this.channel_info))}reportPvImmediately(){}getParams(){var{medium:e,sub_source:t,source:i,campaign:r,content:s,term:a,channel_from:c,session_start_url:u,campaign_id:l}=this.channel_info,d={channel_level1:e||"",channel_level2:i||"",channel_level3:r||t||"",channel_level4:s||"",channel_from:c||"unknown",session_start_url:u||""};return l&&(d.campaign_id=l),a&&(d.keywords=a),this.branch&&(d.branch=this.branch),(0,o._)((0,n._)({},this.channel_info),{channel:d,extraCommonParams:this.otherParams})}getHeader(){var e,t,i=document.cookie.match(RegExp("(^| )_tea_web_id=([^;]+)")),r=window.GATEWAY_INJECTED_WEB_ID||"";return!r&&null!==i&&(r=i[2]),{is_pwa:(0,a.tc)()?"1":"0",open_from_pwa:(0,a.XX)()?"1":"0",pwa_from:(0,a.MY)(),web_id:r,os_name:(0,l.ly)(),is_first_visit_page:this.isFirstVisitPage?"1":"0",is_session_start_page:this.isSessionStartPage?"1":"0",app_version:(0,l.Sf)(),browser:(0,l.qs)(),referrer:document.referrer,branch:(0,l.aM)(),user_agent:(null===(t=window)||void 0===t?void 0:null===(e=t.navigator)||void 0===e?void 0:e.userAgent)||""}}normalizeMedium(){var e,t={tiktok_anchor:"Tiktok_anchor",product:"Product",referal:"Referral",soical:"Social",capcut:"CapCut"},i=null===(e=this.channel_info.medium)||void 0===e?void 0:e.toLowerCase();i&&Object.keys(t).includes(i)&&(this.channel_info.medium=t[i]),this.channel_info.medium=_(this.channel_info.medium||""),this.channel_info.source=_(this.channel_info.source||""),this.channel_info.sub_source=_(this.channel_info.sub_source||""),this.channel_info.content=_(this.channel_info.content||""),this.channel_info.term=_(this.channel_info.term||""),this.channel_info.campaign=_(this.channel_info.campaign||"")}_parseUTMParams(){var{utm_medium:e,utm_source:t,utm_campaign:i,utm_content:r,utm_term:n,keyword_name:o}=this.parsed;return e===c.VY.Paidads.toLocaleLowerCase()?this._parsePaidadsParams():e?{context:"UTM",medium:e||"Referral",source:t,campaign:i||"",content:r||"",term:n||o||"",campaign_id:""}:null}_parsePaidadsParams(){var{utm_medium:e,utm_source:t,pid:i,af_adset_id:r,af_c_id:n,keyword_name:o}=this.parsed;return e!==c.VY.Paidads.toLocaleLowerCase()?null:{context:"Paidads",medium:c.VY.Paidads,source:t,campaign:i||"",content:r||"",campaign_id:n||"",term:o||""}}_parseSEMParams(){var{gclid:e,msclkid:t,ad_platform_id:i,pid:r,af_adset_id:n,af_c_id:o,keyword_name:s}=this.parsed;return e||t?{context:"SEM",medium:c.VY.SEM,source:"string"==typeof i&&({googleadwords_int:"google",bingads_int:"bing"})[i]||i,campaign:r||"",content:n||"",campaign_id:o||"",term:s||""}:null}_parseReferer(){return this.referer?{context:"Referer",medium:(0,c.KB)(this.referer),source:(0,c.Hk)(this.referer),campaign:"",campaign_id:"",term:""}:{context:"Referer",medium:c.VY.Direct,source:"enter_url",campaign:"",campaign_id:"",term:""}}_setCookie(e){s.Z.set("_ut",encodeURIComponent(Object.keys(e).reduce((t,i)=>{var r=e[i];return r?t+="".concat(0===t.length?"":"&").concat(i,"=").concat(r):t},"")),{path:"/",sameSite:"Strict"})}_getParamsNotByCookie(){var e,t;return null!==(t=null!==(e=this._parseUTMParams())&&void 0!==e?e:this._parseSEMParams())&&void 0!==t?t:this._parseReferer()}hasException(e){var t=e.source&&e.medium===c.VY.CapCut&&this.seoChannelMap.includes(e.source),i=e.medium!==c.VY.CapCut&&["capcut.com","capcut.net"].some(t=>{var i;return null===(i=e.source)||void 0===i?void 0:i.includes(t)}),r=["tiktok_anchor","product"].includes(e.medium||""),o=[t,i,r].includes(!0);return o&&(d(JSON.stringify({errorName:"hasException",channel:(0,n._)({},e)}),"info"),h("_ut",""),s.Z.set("_ut","")),o}constructor(){var e,t;this.hasInit=!1,this.parsed=p(location.search),this.referer=null!==(t=null===(e=document.referrer)||void 0===e?void 0:e.replace(/http(s)*:\/\//i,""))&&void 0!==t?t:"",this.isFirstVisitPage=!1,this.isSessionStartPage=!1,this.channel_from="unknown",this.channel_info={},this.branch=(0,l.aM)(),this.seoChannelMap=["google","coccoc","bing","yahoo","duckduckgo","yandex","naver","baidu","sougou","toutiao","so","hao123"],this.capcutChannelMap=["capcut.com","capcut.net"],this.otherParams={}}}var f=(r=null,()=>(!r&&(r=new v),r))},476822:function(e,t,i){i.d(t,{e:function(){return n}});var r=i(843698);class n{get enable(){return this._enable}constructor(){this._onEnableChange=new r.Q,this.onEnableChange=this._onEnableChange.event,this._enable=!0}}},864722:function(e,t,i){i.d(t,{b:function(){return c}});var r=i(789786),n=i(719800),o=i(917599),s=i(700645),a=i(874800);class c extends a.JT{register(e,t){if(e.instantiationPhase===o.P.Eager&&(this._safeCreate(e),null==t||t(this._instances.get(e.id))),e.instantiationPhase===o.P.Idle){var i=(0,s.n)(()=>{this._safeCreate(e),this._pending.delete(e.id),null==t||t(this._instances.get(e.id))});this._pending.set(e.id,i)}}registerInstance(e,t){if(this._instances.has(e)){console.error("duplicate register contribution: ",e);return}this._instances.set(e,t)}dispose(){for(var[,e]of this._instances)e.dispose();for(var[,t]of this._pending)t.dispose();super.dispose()}_safeCreate(e){if(this._instances.has(e.id)){console.error("duplicate register contribution: ",e.id);return}var t,i=null!==(t=e.staticArguments)&&void 0!==t?t:[];this._createInstance(e,i)}_createInstance(e,t){var i=this._instantiationService.createInstance(e.ctor,...t);this._instances.set(e.id,i)}constructor(e){super(),this._instantiationService=e,this._instances=new Map,this._pending=new Map}}c=(0,r.gn)([(0,r.fM)(0,n.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===n.T?Object:n.T])],c)},765652:function(e,t,i){i.d(t,{d:function(){return r},z:function(){return n}});var r={name:"resource-meta",key:"key",index:[{name:"updateTime",unique:!1}]},n={name:"resource",key:"uniqueIdWithDecryptHash",index:[{name:"updateTime",unique:!1}]}},861251:function(e,t,i){i.d(t,{T:function(){return w}});var r=i(876826),n=i(85728),o=i(249651),s=i(789786),a=i(875488),c=i(791628),u=i(216342),l=i(836413),d=i(243302),h=i(869409),_=i(283349),p=i(434712),v=i(260963),f=i(932683),m=i(104818),g=i(761615),y=i(114527);class w{requestHistoryList(e,t,i){var n=this;return(0,r._)(function*(){var e=yield(0,a.FI)();if(n.type===f.E.Favoraite){var r=Date.now(),o=yield n._getContentGenerationHistoryService.getAssetList({offset:Math.round(null!=t?t:n.offset),count:null!=i?i:n.count,direction:d.KB.PageUp,assetType:h.d.Image,option:{onlyFavorited:!0,imageInfo:e}});return((0,y.K)(n._containerService,{cost:Date.now()-r,assetType:h.d.Image}),o.ok)?(0,l.oW)({recordList:o.value.list.filter(e=>{var t;return!(0,_.w)(e.generateType)&&!!(null===(t=e.itemList)||void 0===t?void 0:t.length)}),hasMore:o.value.hasMore,nextOffset:o.value.offset}):o}var s=Date.now(),c=yield n._getContentGenerationHistoryService.getGenerateContentHistory({offset:Math.round(null!=t?t:n.offset),count:null!=i?i:n.count,direction:d.KB.PageUp,type:n.type,imageInfo:e});return((0,y.$)(n._containerService,{cost:Date.now()-s,assetType:n.type}),c.ok)?(0,l.oW)({recordList:c.value.recordList.filter(e=>{var t;return!!(null===(t=e.itemList)||void 0===t?void 0:t.length)}),hasMore:c.value.hasMore,nextOffset:c.value.nextOffset}):c})()}getHistoryList(e,t){var i=this;return(0,r._)(function*(){if(!!i.hasMore){var r=yield i.requestHistoryList(e,t);if(i.hasFetch=!0,r.ok){var n,{recordList:o,hasMore:s,nextOffset:a=null===(n=o[o.length-1])||void 0===n?void 0:n.createdTime}=r.value;(0,v.z)(()=>{var e;i.historyList=(0,c.j$)(null!==(e=i.historyList)&&void 0!==e?e:[],o,"createdTime"),i.hasMore=s,i.offset=a})}}})()}getFirstPageHistoryList(e){var t=this;return(0,r._)(function*(){var i=yield t.requestHistoryList(e,Date.now(),30);if(t.hasFetch=!0,i.ok){var{recordList:r,hasMore:n}=i.value;(0,v.z)(()=>{var e;t.historyList=r,t.hasMore=n,t.offset=null===(e=r[r.length-1])||void 0===e?void 0:e.createdTime})}return i})()}deleteHistoryList(e){var{idList:t=[],itemIdListMap:i={}}=e,r=[...t,...Object.keys(i)];(0,v.z)(()=>{this.historyList=this.historyList.filter(e=>{var t=function(t){var r,n,{historyRecordId:o}=e;if(o===t){;if(!(null===(r=i[t])||void 0===r?void 0:r.length))return{v:!1};return(e.itemList=e.itemList.filter(e=>!i[t].includes(e.commonAttr.id)),e.imageList=e.imageList.filter(e=>!i[t].includes(e.itemId)),(null===(n=e.assetOption)||void 0===n?void 0:n.favoriteItemIdList)&&(e.assetOption.favoriteItemIdList=e.assetOption.favoriteItemIdList.filter(e=>!i[t].includes(e)),e.assetOption.hasFavorited&&!e.assetOption.favoriteItemIdList.length&&(e.assetOption.hasFavorited=!1)),e.itemList.length)?{v:!0}:{v:!1}}};for(var n of r){var s=t(n);if("object"===(0,o._)(s))return s.v}return!0})})}updateRecord(e){var t=this.historyList.findIndex(t=>t.historyRecordId===e.historyRecordId);return -1!==t&&((0,v.z)(()=>{this.historyList[t]=(0,n._)({},this.historyList[t],e)}),!0)}insertRecord(e){(0,v.z)(()=>{this.historyList.push(e)})}getRecord(e){return this.historyList.find(t=>t.historyRecordId===e)}makeHistoryListOrder(){(0,v.z)(()=>{this.historyList=this.historyList.sort((e,t)=>t.sortCreateTime-e.sortCreateTime)})}setFavorite(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.historyList,{markedRecordList:r,hasChanged:n}=(0,g.py)({ids:e,hasFavorited:t,recordList:i});if(!!n)r.forEach(e=>{this.type===f.E.Favoraite&&(e.imageList=e.imageList.filter(t=>(0,g.Mv)({record:e,imageItemId:t.itemId})),e.itemList=e.itemList.filter(t=>(0,g.Mv)({record:e,imageItemId:t.commonAttr.id})));var t=this.updateRecord(e);this.type===f.E.Favoraite&&!t&&this.insertRecord(e)}),this.type===f.E.Favoraite&&((0,v.z)(()=>{this.historyList=(0,g.od)({recordList:this.historyList})}),this.makeHistoryListOrder())}constructor(e,t,i){this.type=e,this._getContentGenerationHistoryService=t,this._containerService=i,this.count=48,this.hasMore=!0,this.offset=Date.now(),this.historyList=[],this.hasFetch=!1,(0,v.rC)(this)}}(0,s.gn)([v.LO],w.prototype,"count",void 0),(0,s.gn)([v.LO],w.prototype,"hasMore",void 0),(0,s.gn)([v.LO],w.prototype,"offset",void 0),(0,s.gn)([v.LO,(0,s.w6)("design:type",Array)],w.prototype,"historyList",void 0),(0,s.gn)([v.LO],w.prototype,"hasFetch",void 0),(0,s.gn)([(0,u.lI)("ImageAssetsHistoryManager","getHistoryList"),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Number]),(0,s.w6)("design:returntype",Promise)],w.prototype,"getHistoryList",null),(0,s.gn)([(0,u.lI)("ImageAssetsHistoryManager","getFirstPageHistoryList"),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,s.w6)("design:returntype",Promise)],w.prototype,"getFirstPageHistoryList",null),w=(0,s.gn)([(0,s.fM)(1,m.P),(0,s.fM)(2,p.t),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===f.E?Object:f.E,void 0===m.P?Object:m.P,void 0===p.t?Object:p.t])],w)},351064:function(e,t,i){i.d(t,{X:function(){return c}});var r=i(772322),n=i(967355),o=i(925016),s=i(150615),a=i(590601);class c extends o.H{static showSuccess(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onOk:t}=e,i=super.success({title:s.oc.t("publishauth_success_title",{},"Congratulations"),content:s.oc.t("publishauth_success_content",{},"You\u2019ve become a creator on Dreamina! Create and post amazing images now to show your creativity."),icon:null,onCancel:t,footer:(0,r.jsx)("div",{className:a.Z.buttonContainer,children:(0,r.jsx)(n.J,{className:a.Z.standard,text:s.oc.t("publishauth_button",{},"OK"),onClick:()=>{i.close(),null==t||t()}})})},{modalMainClassname:a.Z.authorCertificationContent})}static showFail(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onGetIt:t}=e,i=super.info({title:s.oc.t("publishauth_fail_title",{},"Welcome to Dreamina"),content:s.oc.t("publishauth_fail_content",{},"You can create images now. To post them, contact the Dreamina team."),onCancel:t,icon:null,footer:(0,r.jsx)("div",{className:a.Z.buttonContainer,children:(0,r.jsx)(n.J,{text:s.oc.t("publishauth_button",{},"OK"),onClick:()=>{i.close(),null==t||t()}})})},{modalMainClassname:a.Z.authorCertificationContent})}static showRetry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onCancel:t,onRetry:i}=e,o=super.warn({title:s.oc.t("publishauth_network_title",{},"Something went wrong"),content:s.oc.t("publishauth_network_content",{},"Check your internet connection and try again."),icon:null,onCancel:t,footer:(0,r.jsxs)("div",{className:a.Z.buttonContainer,children:[(0,r.jsx)("div",{className:a.Z.cancelBtn,onClick:()=>{o.close(),null==t||t()},children:s.oc.t("mweb_delete_forever_no",{},"Cancel")}),(0,r.jsx)(n.J,{text:s.oc.t("publishauth_retry_button",{},"Retry"),onClick:()=>{o.close(),null==i||i()}})]})},{modalMainClassname:a.Z.authorCertificationContent})}}},597444:function(e,t,i){i.d(t,{_2:function(){return r},bu:function(){return s},fM:function(){return o},sP:function(){return n}});var r=520,n=32,o=12,s=800},154147:function(e,t,i){i.d(t,{p:function(){return v}});var r=i(772322),n=i(590839),o=i(735212),s=i(259273),a=i(642273),c=i(889715),u=i(150615),l=i(708274),d=i(848303),h=i(185617),_=i(349722),p=i(953516),v={[n.a.PageRoute]:[{id:s.Sj.Home,path:a.EZ[s.Sj.Home],isNeedCache:!h.lY,skeleton:()=>null}],[n.a.SideMenu]:[{id:s.Sj.Home,group:l.Bl.Main,title:()=>u.ZP.t("frame_change_home",{},"Home"),tooltips:()=>u.ZP.t("frame_change_home",{},"Home"),icon:e=>{var{selected:t,isHover:i}=e;return t||i?(0,r.jsx)(c.h3E,{className:_.Z.pageIconFill}):(0,r.jsx)(c.tdp,{fill:d.Z.pageIconColor})},position:"top",order:s.us.Home}],[n.a.TitleBar]:[{id:s.Sj.Home,order:s.ru.ShortVideoPublish,position:"right",type:"Custom"},{id:s.$W.TitleBarSearch,position:"center",orderLevel:o.r.low,type:"Custom",content:()=>{var e;if("undefined"!=typeof window&&!(null===(e=window._libra_abtest)||void 0===e?void 0:e.dreamina_web_search))return null;(0,r.jsx)("div",{className:_.Z.searchContainer,id:"ssr-search-container",children:(0,r.jsx)(p.Mj,{value:"",isMinContainerToInteractVisible:!1,setIsMinContainerToInteractVisible:()=>{}})})}}]}},736646:function(e,t,i){i.d(t,{v:function(){return r}});var r={id:"network-request-cache",version:1,tables:[i(277536).r]}},277536:function(e,t,i){i.d(t,{r:function(){return r}});var r={name:"network-request-cache",key:"id",index:[{name:"createTime",unique:!1},{name:"updateTime",unique:!1}]}},52966:function(e,t,i){i.d(t,{b:function(){return o}});var r=i(379311);class n{getEventParams(){return{page:this._params.page}}constructor(e){this._params=e,this.eventName="page_click"}}function o(e,t){(0,r.Kl)(e,n,[t])}},4978:function(e,t,i){i.d(t,{G:function(){return h},I:function(){return _}});var r=i(346526),n=i(879976),o=i(283349),s=i(149478),a=i(535823),c=i(643590),u=i(416105),l=i(875649),d=i(423995);function h(){var e=new c.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0});return(0,n.V)(e),(0,u.mH)(e),(0,l.i3)(e),(0,r.V)(e),e}function _(e,t){try{if((0,o.L)(e.generateType))return(0,s.v)(e);if((0,o.w)(e.generateType))return(0,a.ZF)(e);return(0,d.J)(e,0,t.publishParams)}catch(e){return null}}},535082:function(e,t,i){i.d(t,{J:function(){return u}});var r=i(716467),n=i(965058),o=i(168179),s=i(849520),a=i(761436);class c{convert(){var e=new o.DAImageGenerateAbilities,t=new o.DAGenCoreParam,i=new o.DAImageGenerateAbility;return t.prompt=this._params.prompt,t.model=this._params.model,t.imageRatio=this._params.imageRatio&&r.CB[this._params.imageRatio],t.largeImageInfo=(0,s.m)(this._params.largeImageInfo),t.sampleStrength=this._params.sampleStrength,t.negativePrompt=this._params.negativePrompt,t.seed=this._params.seed,i.coreParam=t,i.historyOption=(0,a.J)(this._params.historyOption),e.generate=i,e}constructor(e){this._params=e}}class u extends n.${getComponent(e){var t,i=new o.DAImageBaseComponent;return i.generateType=o.DAImageGenerateType.generate,i.aigcMode=r.sc[null!==(t=e.mode)&&void 0!==t?t:o.DAAIGCMode.workbench],i.abilities=new c(e).convert(),i}}},554157:function(e,t,i){i.d(t,{v:function(){return r}});var r={GENERATE:"/mweb/v1/aigc_draft/generate",GET_HISTORY_BY_IDS:"/mweb/v1/get_history_by_ids"}},40047:function(e,t,i){i.d(t,{m:function(){return l}});var r=i(876826),n=i(2910),o=i(843698),s=i(248928),a=i(630937),c=i(518582),u=i(52773);class l extends u.Y{_createPreloadLink(e,t){var{key:i,height:r,width:o,coverUrlMap:c}=t,u=(0,s.$N)({width:e,height:r/o*e,resolutionUrlMap:c,autoPickNext:!0});if(!!u){var l=(0,a.x)("link");return l.crossOrigin="anonymous",l.fetchPriority="low",l.rel="prefetch",l.as="image",l.href=(0,n.C)(u,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),l}}run(){var e=this;return(0,r._)(function*(){var{feedContainerWidth:t,shortVideoContainerWidth:i=0,feedColumnCount:r=4}=e._ctx,n=(null!=t?t:i)/r;if(!!n){var o=e._prefetchInfo.map(t=>e._createPreloadLink(n,t)),s=document.createDocumentFragment();o.forEach(t=>{t&&(e._ctx.prefetchedResourceNames.push(t.href),s.appendChild(t))}),e._abortCallback=()=>{o.forEach(e=>{e&&e.remove()}),e._onDoneEmitter.fire()},document.body.appendChild(s);var a=Promise.all(o.map(t=>new Promise((i,r)=>{if(!t){i();return}t.onload=()=>{t.remove(),i()},t.onerror=()=>{t.remove(),r(Error("Image load failed"))},e.onDone(()=>{t.remove(),i()})})));yield a}})()}get onDone(){return this._onDoneEmitter.event}get key(){return 1===this._prefetchInfo.length?this._prefetchInfo[0].key:this._prefetchInfo.map(e=>e.key).join(",")}dispose(){this._abortCallback&&this._abortCallback(),super.dispose()}constructor(e,t,i="high"){super(e,t),this.priority=i,this._abortCallback=null,this._onDoneEmitter=new o.Q,this._prefetchInfo=(0,c.iQ)(this._item)}}},798279:function(e,t,i){i.d(t,{N:function(){return r}});function r(e){return[{key:e.key,coverSrc:e.coverUrl,videoSrc:e.video.originVideo.videoUrl,coverHeight:e.video.originVideo.height,coverWidth:e.video.originVideo.width,coverUrlMap:e.coverUrlMap}]}},630221:function(e,t,i){i.d(t,{K:function(){return o}});var r=i(243494),n=i(52533),o=e=>{var t,i,o=e instanceof r.yt?e.config:e;return"categoryId_".concat(o.categoryId,"_").concat((null===(t=o.imageInfo)||void 0===t?void 0:t.format)?"format_".concat(null===(i=o.imageInfo)||void 0===i?void 0:i.format,"_"):"").concat(o.limit?"_limit_".concat(o.limit,"_"):"").concat((0,n.Z)(e.offset)?"":"_offset_".concat(e.offset,"_"))}},747341:function(e,t,i){i.d(t,{T:function(){return r}});var r=(0,i(971245).yh)("proxy-feed-service")},734122:function(e,t,i){i.d(t,{v:function(){return s}});var r=i(521950),n=i(874800),o=i(824547);class s extends n.JT{setData(e,t,i){!this._injectedData[e]&&(this._injectedData[e]={}),i?this._injectedData[e][i]=(0,o.Z)(this._injectedData[e][i],t):this._injectedData[e]=(0,o.Z)(this._injectedData[e],t)}clearData(e,t){if(!!this._injectedData[e])t?delete this._injectedData[e][t]:delete this._injectedData[e]}getData(e,t){var i;if(!!this._injectedData[e])return i=t?this._injectedData[e][t]:this._injectedData[e],i=(0,r.I)(i)}constructor(){super(),this._injectedData={},this._register({dispose:()=>{this._injectedData={}}})}}},480553:function(e,t,i){i.d(t,{L:function(){return S}});var r=i(876826),n=i(85728),o=i(929753),s=i(789786),a=i(260963),c=i(526967),u=i(434712),l=i(515347),d=i(795559),h=i(277007),_=i(747086),p=i(178589),v=i(259273),f=i(642273),m=i(552786),g=i(704976),y=i(733730),w=i(836413),b=i(351497),C=i(430336);class S{get originalUrl(){return this._originalUrl}showWorkDetail(e){var t,{detailType:i,modalType:r,reportContext:s}=e;this.setWorkDetailType(i),this.setModalType(r),this.setWorkDetailVisible(!0),this.reportContext=(0,o._)((0,n._)({},s),{timing_start_time:null!==(t=null==s?void 0:s.timing_start_time)&&void 0!==t?t:performance.now(),open_time:Date.now()}),![c.ho.AssetVideo,c.ho.AssetAudio].includes(e.detailType)&&r!==c.w8.generateList&&this.setDetailQuery(e),this.warmupWorkDetail(e.detailId)}hideWorkDetail(){this.setWorkDetailType(void 0),this.setWorkDetailVisible(!1),this._setIsInitFromShare(!1),this.reportContext=void 0,this.deleteDetailQuery(),this._eventbus.emit("on_close")}onHideWorkDetail(e){var t=()=>{e(),this._eventbus.off("on_close",t)};this._eventbus.once("on_close",t)}warmupWorkDetail(e){var t=this._platformUiConfigService.generatePath(v.Sj.WorkDetailPage,{params:{itemId:e}});(0,C.d)("".concat(location.origin).concat(t),this._dreaminaBffDataService)}setDetailQuery(e){!location.href.includes("".concat(f.wN.workDetail,"/"))&&(this._originalUrl=location.href);var{detailId:t,detailType:i,itemType:r,modalType:n,impressionId:o,reportContext:s}=e,a=new URL(location.href);a.pathname="".concat(f.NU).concat(f.wN.workDetail,"/").concat(t),a.searchParams.set(c.KL.workDetailType,i),o&&a.searchParams.set(c.KL.impressionId,o),n&&a.searchParams.set(c.KL.modalType,n),r&&a.searchParams.set(c.KL.itemType,String(r)),a.searchParams.set(c.KL.scene,"template");var u={search_request_id:null==s?void 0:s.search_request_id,search_id:null==s?void 0:s.search_id,search_keyword:null==s?void 0:s.search_keyword,enter_scenario:null==s?void 0:s.enter_scenario};window.history.replaceState({reportSearchParams:u},document.title,a.href)}deleteDetailQuery(){this._originalUrl&&location.pathname.includes(f.wN.workDetail)&&(window.history.replaceState(null,document.title,this._originalUrl),this._originalUrl="")}bootstrap(e){var t=this;return(0,r._)(function*(){var{values:i}=t._dreaminaBetaConfigurationService,r=i[m.em.GENERATE_VIDEO],n=(null==r?void 0:r.status)===m.Ve.UNAVAILABLE;if(t.workDetailType&&t._isVideoDetailType(t.workDetailType)){t._redirectWhenCantUse(!n);var o=yield t.videoDetailManager.bootStrap(e);return o.ok?(0,w.ly)():o}return t.workDetailType&&[c.ho.Image,c.ho.Canvas,c.ho.ShowcaseImage].includes(t.workDetailType)?t.imageDetailManager.restoreFromUrl():(0,w.wf)(-1,"work detail type invalid")})()}setDisabledSwitch(e){this.isInitFromShare=e}updateReportContext(e){this.reportContext=(0,n._)({},this.reportContext,e)}recordNextDetailStartTiming(){this.updateReportContext({timing_start_time:performance.now()})}_setIsInitFromShare(e){this.isInitFromShare=e}_setReportContext(e){this.reportContext=e}_redirectWhenCantUse(e){if(!e)this._redirectHome()}_redirectHome(){this.hideWorkDetail(),this._platformUiConfigService.navigate(v.Sj.Home,{replace:!0})}_isVideoDetailType(e){return[c.ho.AiVideo,c.ho.ShowcaseVideo].includes(e)}constructor(e,t,i,r,n){this._containerService=e,this._tccService=t,this._platformUiConfigService=i,this._dreaminaBetaConfigurationService=r,this._dreaminaBffDataService=n,this._eventbus=new y.Z,this.workDetailVisible=!1,this.cacheDefinition="",this._originalUrl="",this.isInitFromShare=!1,this.setWorkDetailVisible=e=>{this.workDetailVisible=e},this.setWorkDetailType=e=>{this.workDetailType=e},this.setModalType=e=>{this.modalType=e},this.setCacheDefinition=e=>{this.cacheDefinition=e},(0,a.rC)(this),this.imageDetailManager=this._containerService.createInstance(h.X),this.videoDetailManager=this._containerService.createInstance(d.F,""),this.audioDetailManager=this._containerService.createInstance(b.Z)}}(0,s.gn)([a.LO],S.prototype,"workDetailVisible",void 0),(0,s.gn)([a.LO],S.prototype,"isInitFromShare",void 0),(0,s.gn)([a.aD],S.prototype,"setWorkDetailVisible",void 0),(0,s.gn)([a.aD,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[Boolean]),(0,s.w6)("design:returntype",void 0)],S.prototype,"setDisabledSwitch",null),(0,s.gn)([a.aD,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[Boolean]),(0,s.w6)("design:returntype",void 0)],S.prototype,"_setIsInitFromShare",null),S=(0,s.gn)([(0,s.fM)(0,u.t),(0,s.fM)(1,_.b),(0,s.fM)(2,p.e),(0,s.fM)(3,g.l),(0,s.fM)(4,l.h),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===u.t?Object:u.t,void 0===_.b?Object:_.b,void 0===p.e?Object:p.e,void 0===g.l?Object:g.l,void 0===l.h?Object:l.h])],S)},447135:function(e,t,i){i.d(t,{x:function(){return S}});var r=i(876826),n=i(789786),o=i(719800),s=i(843698),a=i(874800),c=i(247170),u=i(56935),l=i(777632),d=i(442452),h=i(693895),_=i(70529),p=i(280166),v=i(557343),f=i(490165),m=i(677761),g=i(551369),y=i(166463),w=i(529227),b=i(901827),C=i(793724);class S extends a.JT{onReady(e){var t=!1;this.isReady&&setTimeout(()=>{if(!t)e()});var i=this._onReady.event(e);return{dispose:()=>{t=!0,i.dispose()}}}get isReady(){return this._initAwaitLocker.hasBeenDone}getBaseEvercloud(){return y.m7}getEvercloudInstance(e){var t=this;return(0,r._)(function*(){yield t._initAwaitLocker.awaitForInit();var i=t.workspaceService.getWorkspace(e);return y.m7.getSdkInstance({spaceId:i.space_id,dcName:i.space_idc,netconf:{base:i.space_host,media:i.space_res_host}})})()}disposeEvercloudInstance(e){var t=this.workspaceService.getWorkspace(e);y.m7.destroySdk(t.space_id)}getMaterials(e){var t=this;return(0,r._)(function*(){yield t._initAwaitLocker.awaitForInit();var i=t.workspaceService.getWorkspace(e.config.workspaceId);return e.config.spaceId=i.space_id,t._userMaterialsRepository.getMaterials(e)})()}getUserAssets(e){var t=this;return(0,r._)(function*(){return yield t._initAwaitLocker.awaitForInit(),t._userMaterialsRepository.getUserAssets(e)})()}getOriginalUserAssets(e){var t=this;return(0,r._)(function*(){return yield t._initAwaitLocker.awaitForInit(),t._userMaterialsRepository.getOriginalUserAssets(e)})()}getMaterialsByIds(e){var t=e.fetchMode===C.$d.WaitForSync?{retryTimes:1,delay:1e3}:void 0;return(0,g.a)(()=>this._userMaterialsRepository.getMaterialsByIds(e),t)}tryGetMaterialsByIds(e){return this._userMaterialsRepository.tryGetMaterialsByIds(e)}copyMaterialToWorkspace(e){return this._userMaterialsRepository.copyMaterialToWorkspace(e)}copyAsset(e){return this._userMaterialsRepository.copyAsset(e)}deleteMaterials(e){return this._userMaterialsRepository.deleteMaterials(e)}renameAsset(e){return this._userMaterialsRepository.renameAsset(e)}createAsset(e){return this._userMaterialsRepository.createAsset(e)}labelAssetsAsExported(e){return this._userMaterialsRepository.labelAssetsAsExported(e)}promoteAsset(e){return this._userMaterialsRepository.promoteAsset(e)}_initWithLoginState(){var e=this;(0,u.Y2)(!this._initAwaitLocker.isIniting||!this._initAwaitLocker.hasBeenDone,"bootstrap is call more than once"),this._initAwaitLocker.startToInit();var t=this.accountService.userProfile;y.m7.setOptions({is_boe:!1,user_dc_name:this._httpApiSettingService.userLocationInfo.idcEnum,reqDomain:{web_domain:this._httpApiSettingService.getRequestURL({domainType:d.Y.DEFAULT,path:""})},user_id:t.uid,level:"error",disable_start_sync_loop:!0,log_report:{log_to_console_only:!1,report_src_file:!0}}),y.m7.setTeaReporter({event:function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];e.reporterService.reportBusinessEvent(...i)},getVar:(e,t,i)=>this.teaAdapterService.getABTestVar(e,t).then(e=>(i(e),e))}),!y.m7.slardarReporter&&y.m7.setSlardarReporter(e=>{var{level:t=v.T.INFO,content:i,extra:r,type:n,eventName:o}=e;n&&"log"!==n?"event"===n&&this._slardarService.sendEvent(o,r):this._slardarService.sendLog(t,i,r)}),!this._initAwaitLocker.hasBeenDone&&this._initAwaitLocker.initDone(),this._onReady.fire()}_initWithUnLoginState(){var e=this;return(0,r._)(function*(){y.m7.setNoSignOptions({uniqueId:yield e.teaAdapterService.getWebId(),userRegion:e._httpApiSettingService.userLocationInfo.region,isBoe:!e.environmentService.isProd,newIdc:e._httpApiSettingService.userLocationInfo.idc,reqDomain:{web_domain:e._httpApiSettingService.getRequestURL({domainType:d.Y.DEFAULT,path:""})},imgUploader:{getSliceFunc:e=>e>1048576e3?0xa00000:5242880}}),!e.accountService.hasLogin&&(!e._initAwaitLocker.hasBeenDone&&e._initAwaitLocker.initDone(),e._onReady.fire())})()}constructor(e,t,i,r,n,o,a,u,d){super(),this._instantiationService=t,this.accountService=i,this.workspaceService=r,this.environmentService=n,this.reporterService=o,this.teaAdapterService=a,this._httpApiSettingService=u,this._slardarService=d,this._onReady=this._store.add(new s.Q),this._initAwaitLocker=new l.G,e&&y.m7.prefetchWasmCode(),y.m7.setCachePlugin(new w.dV),this._userMaterialsRepository=this._instantiationService.createInstance(b.A),r.initialize((0,c.fC)()),r.available?this._initWithLoginState():r.onDidWorkspaceChange(()=>{this._initWithLoginState()}),this._initWithUnLoginState()}}S=(0,n.gn)([(0,n.fM)(1,o.T),(0,n.fM)(2,f.D),(0,n.fM)(3,h.W),(0,n.fM)(4,p.Y),(0,n.fM)(5,_.m),(0,n.fM)(6,m.w),(0,n.fM)(7,d.x),(0,n.fM)(8,v.L),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Boolean,void 0===o.T?Object:o.T,void 0===f.D?Object:f.D,void 0===h.W?Object:h.W,void 0===p.Y?Object:p.Y,void 0===_.m?Object:_.m,void 0===m.w?Object:m.w,void 0===d.x?Object:d.x,void 0===v.L?Object:v.L])],S)},131883:function(e,t,i){i.d(t,{M:function(){return n}});var r=i(836413);function n(e){return new Promise(t=>{e.onComplete(e=>{t((0,r.oW)(e))}),e.onError(e=>{t(e)})})}},125370:function(e,t,i){i.d(t,{z:function(){return s}});var r=i(836413),n=i(831593),o=i(820751);class s{createCapturer(e,t){return 0===t.width||0===t.height?Promise.resolve((0,r.wf)(-1,"capture video must have size.")):(0,n.O1)(e,t)}createIdleCapturer(e,t){return 0===t.width||0===t.height?Promise.resolve((0,r.wf)(-1,"capture video must have size.")):(0,o.d)(e,t)}}},838026:function(e,t,i){i.d(t,{y:function(){return c}});var r=i(789786),n=i(936226),o=i(813800),s=i(878891),a=i(897727);class c extends s.k{get resourceType(){return this._resourceType}parseHeycanResponseDataToResources(e){return this._resourceType===a.g.AudioEffect?(0,o.L3)(e,this._resourceType):(0,o.Fi)(e,this._resourceType)}buildCustomRequest(){return{pack_optional:{need_thumb:!0,thumb_opt:'{"is_support_webp":1}'}}}constructor(e,t={},i){super(t,i),this._resourceType=e}}c=(0,r.gn)([(0,r.fM)(2,n.Gw),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof AudioEffectType?Object:AudioEffectType,"undefined"==typeof ICollectionResourcesRepositoryParam?Object:ICollectionResourcesRepositoryParam,void 0===n.Gw?Object:n.Gw])],c)},629951:function(e,t,i){i.d(t,{g:function(){return v}});var r=i(876826),n=i(789786),o=i(836413),s=i(346526),a=i(636601),c=i(643590),u=i(875649),l=i(416105),d=i(119850),h=i(927457),_=i(884038),p=i(936226);class v{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new c.y().build(c.D),(0,u.i3)(e),(0,l.mH)(e),(0,s.V)(e),e)}return this._networkClientInstance}getMusicAlbums(){var e=this;return(0,r._)(function*(){try{var t,i,r=yield e._networkClient.post(e._api,{app_id:d.kJ,region:e._capcutAccountService.userProfile.region}),n=Number(null!==(t=r.ret)&&void 0!==t?t:0),s=null!==(i=r.errmsg)&&void 0!==i?i:"";if(0!==n)return(0,o.wf)(null!=n?n:-1,null!=s?s:"");var a=e._convertResponseToCollectionData(r);return(0,o.oW)(a)}catch(e){return(0,h.m)(e,-1,"getMusicAlbums api error")}})()}_convertResponseToCollectionData(e){var{data:t}=e;return{albums:t.collections.map(e=>{var t=Object.values(e.cover_url).map(e=>this._parseUrlToTranscodeInfo(e));return{id:e.id,name:e.name,coverUrl:e.cover_url.medium,transcodeInfo:t}})}}_parseUrlToTranscodeInfo(e){var t,i,r=e.match(/_(\d+)x(\d+)\./);return{url:e,width:Number(null!==(t=null==r?void 0:r[1])&&void 0!==t?t:0),height:Number(null!==(i=null==r?void 0:r[2])&&void 0!==i?i:0)}}get _api(){return"".concat(a._L.getVar("web_domain")).concat(_.J.GET_MUSIC_COLLECTIONS)}constructor(e){this._capcutAccountService=e}}v=(0,n.gn)([(0,n.fM)(0,p.Gw),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p.Gw?Object:p.Gw])],v)},553247:function(e,t,i){i.d(t,{d:function(){return m}});var r=i(876826),n=i(85728),o=i(789786),s=i(936226),a=i(636601),c=i(643590),u=i(875649),l=i(243494),d=i(927457),h=i(836413),_=i(346526),p=i(807744),v=i(12939),f=i(150615);class m{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new c.y().build(c.D),(0,u.i3)(e),(0,_.V)(e),e)}return this._networkClientInstance}searchResources(e){var t=this;return(0,r._)(function*(){try{var i,r,n=e instanceof l.yt?e.config:e,o=yield t._networkClient.post(t._searchApi,t._convertParamsToRequest(e),(0,v._)(t._accountService.userProfile.region,f.ZP.language,n.sdkVersion,n.appID)),s=Number(null!==(i=o.ret)&&void 0!==i?i:0),a=null!==(r=o.errmsg)&&void 0!==r?r:"";if(0!==s)return(0,h.wf)(null!=s?s:-1,null!=a?a:"");var c=yield t.filterServiceResponse(n,o),u=t._convertResponseToQueryToken(n,c),_=yield t.filterResources(u);return(0,h.oW)(_)}catch(e){return(0,d.m)(e,-1,"[".concat(t.resourceType,"] searchResources api error"))}})()}get defaultQueryToken(){return{offset:0,count:50}}buildCustomRequest(e){return{}}filterResources(e){return Promise.resolve(e)}filterServiceResponse(e,t){return Promise.resolve(t)}_convertParamsToRequest(e){var t,i,r=e instanceof l.yt?e.config:e,o={effect_type:this.resourceType,query:r.query,from:r.from,need_recommend:r.needRecommend},s=this.buildCustomRequest(r),a=(0,l.ky)(e)?{count:null!==(t=e.config.limit)&&void 0!==t?t:50,offset:null!==(i=e.offset)&&void 0!==i?i:0,search_id:e.searchId}:(0,n._)({},this.defaultQueryToken,e.limit?{count:e.limit}:void 0);return(0,n._)({},o,s,a)}_convertResponseToQueryToken(e,t){var i=t.data.effect_item_list.map(e=>this.parseHeycanResponseDataToResources(e)),r=t.data.next_offset,n=t.data.has_more,o=t.data.related_words;return(0,l.ib)(e,{list:i,relativeWords:o},{hasMore:n,offset:r,searchId:t.data.search_id,requestId:t.data.request_id})}get _searchApi(){return"".concat(a._L.getVar("web_domain")).concat(p.bl.SEARCH)}constructor(e){this._accountService=e}}m=(0,o.gn)([(0,o.fM)(0,s.Gw),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===s.Gw?Object:s.Gw])],m)},813605:function(e,t,i){i.d(t,{h:function(){return _}});var r=i(876826),n=i(85728),o=i(929753),s=i(636601),a=i(243494),c=i(396200),u=i(836463),l=i(836413),d=i(927457),h=i(589214);class _{getResources(e){var t=this;return(0,r._)(function*(){try{var i=yield t._networkClient.post(t._url,t._convertParamsToRequest(e),{withCredentials:!0}),r=e instanceof a.yt?e.config:e,n=t._convertResponseToQueryToken(r,i);return(0,l.oW)(n)}catch(e){return(0,d.m)(e)}})()}get defaultQueryToken(){return{cursor:"",count:50}}_convertParamsToRequest(e){var t,i=e instanceof a.yt?e.config:e,r=e instanceof a.yt?(0,o._)((0,n._)({},{count:null!==(t=e.config.limit)&&void 0!==t?t:50}),{cursor:e.offset}):(0,n._)({},this.defaultQueryToken);return{workspace_id:i.workspaceId,cursor_map:r.cursor?{[this.brandResourceType]:r.cursor}:void 0,count:r.count,resource_type_list:[String(this.brandResourceType)],effect_sdk_version:c._,app_version:h.$U,need_depend_resource:!0,need_sub_item:!0,need_vip_tag:!0}}_convertResponseToQueryToken(e,t){var i,r,n,o,s=t.data.resource_info_list.map(e=>this.parseResponseDataToResources(e)),c=null!==(n=null!==(r=t.data.nextcursor_map[this.brandResourceType])&&void 0!==r?r:null===(i=t.data.resource_info_list[t.data.resource_info_list.length-1])||void 0===i?void 0:i.common_attr.id)&&void 0!==n?n:"",u=null!==(o=t.data.hasmore_map[this.brandResourceType])&&void 0!==o&&o;return(0,a.ib)(e,{list:s},{hasMore:u,offset:c})}get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=(0,u.G)()),this._networkClientInstance}get _url(){return"".concat(s._L.getVar("web_domain")).concat(c.l.getBrandResourcesByResourceTypes)}}},788917:function(e,t,i){i.d(t,{_:function(){return a}});var r=i(789786),n=i(719800),o=i(916072),s=i(785797);class a{getEvercloudToken(){return this._evercloudTokenRepository.getEvercloudToken()}constructor(e){this._instantiationService=e,this._evercloudTokenRepository=this._instantiationService.createInstance(o.n)}}(0,r.gn)([(0,s.o)(72e5),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],a.prototype,"getEvercloudToken",null),a=(0,r.gn)([(0,r.fM)(0,n.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===n.T?Object:n.T])],a)},930578:function(e,t,i){i.d(t,{s:function(){return s}});var r=i(895131),n=i(746290),o=i(804274);class s extends r.C{parseHeycanResponseDataToResources(e){return(0,o.fs)(e,o.zW)}buildCustomRequest(){return{category_id:11978,panel:n.I.VideoTemplate}}}},798627:function(e,t,i){i.d(t,{G:()=>M});var r=i("876826"),n=i("85728"),o=i("929753"),s=i("789786"),a=i("850078"),c=i("700056"),u=i("216342"),l=i("836413"),d=i("346526"),h=i("442452"),_=i("643590"),p=i("416105"),v=i("875649"),f=i("804274"),m=i("820266"),g=i("927457"),y=i("243494"),w=i("869409"),b={GET_ASSET_LIST:"/mweb/v1/get_asset_list",MARK_FAVORITE:"/mweb/v1/mark_favorite_items",GET_HISTORY:"/mweb/v1/get_history"},C=i("20675"),S=i("192513"),I=i("490165"),T=i("243302"),k=i("818292"),R=i("283349"),L=i("149478"),D=i("879976");class M{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new _.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,D.V)(e),(0,p.mH)(e),(0,v.i3)(e),(0,f.xP)(e),(0,d.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:e})}getAssetsList(e){var t=this;return(0,r._)(function*(){try{var i=yield t._networkClient.post(t._getApi(b.GET_ASSET_LIST),(0,m.X)(e));if("0"!==i.ret)return(0,l.wf)(Number(i.ret),i.errmsg);return(0,l.oW)(i.data)}catch(e){return(0,g.m)(e,-1,"get assets list error")}})()}getStoryList(e){var t=this;return(0,r._)(function*(){try{var i,r,n=yield t._networkClient.post(t._getApi(b.GET_ASSET_LIST),e);if("0"!==n.ret)return(0,l.wf)(Number(n.ret),n.errmsg);var o={storyList:(null!==(i=n.data.assetList)&&void 0!==i?i:[]).map(e=>(0,C.L)(e)).filter(Boolean),nextOffset:null!==(r=n.data.nextOffset)&&void 0!==r?r:0,hasMore:!!n.data.hasMore};return(0,l.oW)(o)}catch(e){return(0,g.m)(e,-1,"get assets list error")}})()}getCanvasAssetList(e,t){var i=this;return(0,r._)(function*(){try{var r,o,s=yield i._networkClient.post(i._getApi(b.GET_ASSET_LIST),(0,m.X)((0,n._)({asset_type:w.d.Canvas},t)),{ctx:e});if("0"!==s.ret)return(0,l.wf)(Number(s.ret),s.errmsg);var c={assetList:(null!==(r=s.data.assetList)&&void 0!==r?r:[]).map(e=>(0,S.n)(e)).filter(Boolean),nextOffset:null!==(o=s.data.nextOffset)&&void 0!==o?o:0,hasMore:!!s.data.hasMore};return c.assetList=(0,a.Z)(c.assetList,e=>{var{id:t}=e;return t}),(0,l.oW)(c)}catch(e){return(0,g.m)(e,-1,"get canvas assets list error")}})()}getAudioAssetList(e){var t=this;return(0,r._)(function*(){var i=(0,m.X)((0,o._)((0,n._)({},e),{historyOption:(0,o._)((0,n._)({},e.historyOption),{withTaskStatus:[T.Pd.FinalSuccess]}),historyTypeList:[k.B.GenerateAudio]}));try{var r,s=yield t._networkClient.post(t._getApi(b.GET_HISTORY),i);if("0"!==s.ret)return(0,l.wf)(Number(s.ret),s.errmsg);var a={list:s.data.recordsList.map(e=>(0,L.v)(e)).filter(e=>!!e&&(0,R.L)(e.generateType)&&e.status===T.Pd.FinalSuccess),nextOffset:null!==(r=s.data.nextOffset)&&void 0!==r?r:0,hasMore:!!s.data.hasMore};return(0,l.oW)(null!=a?a:[])}catch(e){return(0,g.m)(e,-1,"mark favorite error")}})()}markFavorite(e){var t=this;return(0,r._)(function*(){try{var i,r=yield t._networkClient.post(t._getApi(b.MARK_FAVORITE),(0,m.X)((0,c.Z)(e)));if("0"!==r.ret)return(0,l.wf)(Number(r.ret),r.errmsg);return(0,l.oW)(null!==(i=r.data.resultList)&&void 0!==i?i:[])}catch(e){return(0,g.m)(e,-1,"mark favorite error")}})()}_convertResponseToQueryToken(e,t,i){var r,n=i(null!==(r=t.data.assetList)&&void 0!==r?r:[]),o=t.data.nextOffset,s=!!t.data.hasMore;return(0,y.ib)(e,n,{hasMore:s,offset:o,logId:t.logid})}constructor(e,t){this._httpApiSettingService=e,this._accountService=t}}(0,s.gn)([(0,u.lI)("DreaminaAssetsRepository","getCanvasAssetList"),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof SnakeToCamelCasedData?Object:SnakeToCamelCasedData]),(0,s.w6)("design:returntype",Promise)],M.prototype,"getCanvasAssetList",null),M=(0,s.gn)([(0,s.fM)(0,h.x),(0,s.fM)(1,I.D),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===h.x?Object:h.x,void 0===I.D?Object:I.D])],M)},899792:function(e,t,i){i.d(t,{sR:function(){return r}});var r=(0,i(971245).yh)("dreamina-fission-data-service")},702928:function(e,t,i){i.d(t,{P:function(){return n}});var r=i(473877),n={[r.sW.INIT]:r.iF.INIT,[r.sW.SUBMITTED]:r.iF.PROCESSING,[r.sW.SUCCESS]:r.iF.SUCCESS,[r.sW.CLOSED]:r.iF.FAILED}},242338:function(e,t,i){i.d(t,{G:function(){return a}});var r=i(643590),n=i(416105),o=i(875649),s=i(879976);function a(){var e=new r.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0});return(0,s.V)(e),(0,n.mH)(e),(0,o.e_)(e),e}},232351:function(e,t,i){i.d(t,{b:function(){return r}});var r={GET_SHARE_INFO:"/lv/v1/coordination/package/get_share_info",GET_WORKSPACE_INFO_EXTERNAL:"/cc/v1/workspace/get_workspace_info_external",APPLICATION_CREATE:"/lv/v1/coordination/package/application_create"}},88629:function(e,t,i){i.d(t,{Y:function(){return s}});var r=i(813605),n=i(396275),o=i(116244);class s extends r.h{get brandResourceType(){return n.Q.Logo}parseResponseDataToResources(e){return(0,o.Ar)(e,!0)}}},442451:function(e,t,i){i.d(t,{R:function(){return n},g:function(){return r}});var r={BASE_URL:"/lv/v1"},n={GET_USER_PROFILE:"/web/get_lite_user"}},561351:function(e,t,i){i.d(t,{m:function(){return y}});var r=i(876826),n=i(85728),o=i(929753),s=i(789786),a=i(836413),c=i(903355),u=i(346526),l=i(643590),d=i(875649),h=i(727828),_=i(442452),p=i(927457),v=i(820266),f=i(56168),m=i(489019);function g(e){return e?e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase()):""}class y{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=(0,c.e)((0,o._)((0,n._)({},l.D),{withCredentials:!0})),(0,d.i3)(e),(0,u.V)(e),(0,h.m)(e),e)}return this._networkClientInstance}batchGetResources(e){var t=this;return(0,r._)(function*(){try{var i,r,n=t._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:m.y.batchGetVideo.url}),o=yield t._networkClient.post(n,t._convertParamsToRequest(e),{headers:{loc:t._httpApiSettingService.userLocationInfo.region}}),s=Number(null!==(i=o.ret)&&void 0!==i?i:0),c=null!==(r=o.errmsg)&&void 0!==r?r:"";if(0!==s)return(0,a.wf)(null!=s?s:-1,null!=c?c:"");var u=t._convertResponseToResourcesData(o,e.historyRecordId);return(0,a.oW)(u)}catch(e){return(0,p.m)(e,-1,"[videoDreamina] batchGetResources api error")}})()}_convertParamsToRequest(e){return{item_id_list:e.resourceIds}}_convertResponseToResourcesData(e,t){return{list:(0,v.b)(e.data,g).itemList.map(e=>(0,f.C)(e,t))}}constructor(e){this._httpApiSettingService=e}}y=(0,s.gn)([(0,s.fM)(0,_.x),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],y)},439609:function(e,t,i){i.d(t,{v:function(){return r}});class r{constructor(){this.events={}}on(e,t){let i={once:!1,handler:t};return this.events[e]?this.events[e].push(i):this.events[e]=[i],this}once(e,t){let i={once:!0,handler:t};return this.events[e]?this.events[e].push(i):this.events[e]=[i],this}off(e,t){let i=this.events[e];return i?(t?this.events[e]=i.filter(e=>e.handler!==t):this.events[e]=[],this):this}async emit(e,t){let i=this.events[e];return i?.length?(this.events[e]=i.filter(e=>!e.once),await Promise.all(i.map(e=>e.handler(t))),this):this}subscribe(e,t){return this.on(e,t),()=>{this.off(e,t)}}}},208398:function(e,t,i){var r=i(26488);t.Z=r}}]);