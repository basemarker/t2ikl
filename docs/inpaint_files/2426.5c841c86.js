"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["2426"],{145044:function(e,t){t.Z={optionWrap:"optionWrap-kWaYAQ",optionContainer:"optionContainer-FfgEoQ",linearBg:"linearBg-JDZGSM",questionOption:"questionOption-EWQmdX",optionText:"optionText-_7sLLB",image:"image-sEHhhD",checkBox:"checkBox-hi28kS",active:"active-ZqwVFH"}},682823:function(e,t){t.Z={"modal-title":"modal-title-xJIBeP",modalTitle:"modal-title-xJIBeP",avatar:"avatar-SgmSLS","nick-name":"nick-name-WLGTuO",nickName:"nick-name-WLGTuO","link-text":"link-text-agpapp",linkText:"link-text-agpapp"}},420850:function(e,t,i){i.d(t,{FM:function(){return M},IY:function(){return D},RJ:function(){return H},WR:function(){return E},g0:function(){return x}});var r,o,n,a,s,c,l,d,u=i(876826),v=i(608358),p=i(484702),h=i(417699),m=i(799108),g=i(70137),_=i(217448),f=i(937696),y=i(603026),b=i(417391),w=i(295878),I=i(519169),k=i(712942),S=i(584072),T=i(216342),C=i(836413),P=i(81061);var L=(r=(0,u._)(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=yield e();if(i.ok)return i;for(var r=0;r<t-1&&!(i=yield e()).ok;r++);return i}),function(e){return r.apply(this,arguments)});var R=(o=(0,u._)(function*(e){var t=(0,v.ko)(e,p.N);if(!!(0,v.ko)(e,h.e).isOversea&&!t.isReady){var{promise:i,resolve:r}=(0,S.PQ)();t.onAllPaidStrategyChange(()=>r()),setTimeout(()=>{r()},6e4),yield i}}),function(e){return o.apply(this,arguments)}),A=e=>{var t=(0,v.ko)(e,p.N),i=!0;if(t.isReady){var r,o=t.getBenefitPaidStrategyFromResource(m.Zw,"basicVideoOperation");i=(null==o?void 0:null===(r=o[0])||void 0===r?void 0:r.paidMode)!=="limited_time_free"}var n=!i;t.updateIsInFreemiumStage(n)};var E=(0,T.Tx)("Commercial",(n=(0,u._)(function*(e,t){var i,r,o=(0,v.ko)(t,b.JF),n=yield L(()=>o.fetchUserCredit(e));if(n.ok){var a=(0,v.ko)(t,g.aG),s=n.value;a.updateCreditInfo(s.credit,s.creditsDetail,s.expiringCredits)}else throw Error("code: ".concat(n.code,"; msg: ").concat(n.msg,"; logid: ").concat(null!==(r=null===(i=n.errorInfo)||void 0===i?void 0:i.log_id)&&void 0!==r?r:""));return n}),function(e,t){return n.apply(this,arguments)}),"fetchUserCredit");var H=(0,T.Tx)("Commercial",(a=(0,u._)(function*(e,t){var i,r,o=(0,v.ko)(t,w.V),n=Number((0,v.ko)(t,h.e).isOversea?P.yM.OVERSEA_APP_ID:P.yM.CN_APP_ID),a=yield L(()=>o.fetchVIPInfo({aid:n,scene:"vip",needSignInfo:!0}));if(a.ok){var s=(0,v.ko)(t,_.q),c=a.value;yield R(t),s.setVipInfo(c)}else throw Error("code: ".concat(a.code,"; msg: ").concat(a.msg,"; logid: ").concat(null!==(r=null===(i=a.errorInfo)||void 0===i?void 0:i.log_id)&&void 0!==r?r:""));return a}),function(e,t){return a.apply(this,arguments)}),"fetchVipInfo");var x=(0,T.Tx)("Commercial",(s=(0,u._)(function*(e,t){var i,r=(0,v.ko)(t,p.N);var o=(i=(0,u._)(function*(){var i=yield(0,f.o)({containerService:t,ctx:e,needToSetValue:!1});return i.ok?i:(0,C.wf)(i.code,i.msg)}),function(){return i.apply(this,arguments)}),n=yield L(o);if(n.ok&&n.value){var{resourceStrategy:a}=n.value;if(a.length)return r.setPaidStrategy(a),A(t),n}throw Error("code: ".concat(n.code,"; msg: ").concat(n.msg,"; }"))}),function(e,t){return s.apply(this,arguments)}),"fetchPayStrategy");var O=(0,T.Tx)("Commercial",(c=(0,u._)(function*(e,t){var i,r,o=(0,v.ko)(t,I.Y),n=Number((0,v.ko)(t,h.e).isOversea?P.yM.OVERSEA_APP_ID:P.yM.CN_APP_ID),a=yield L(()=>o.fetchOverseaVIPPriceList(e,{aid:n,scene:"vip"}));if(a.ok){var s,c,l,d=(0,v.ko)(t,y.K),u=a.value;d.setVipPriceList(null!==(s=u.allPriceList)&&void 0!==s?s:[]),d.setDisplayInfo(null!==(c=null==u?void 0:u.displayInfo)&&void 0!==c?c:{}),d.setVipTabList(null!==(l=null==u?void 0:u.tabList)&&void 0!==l?l:[])}else throw Error("code: ".concat(a.code,"; msg: ").concat(a.msg,"; logid: ").concat(null!==(r=null===(i=a.errorInfo)||void 0===i?void 0:i.log_id)&&void 0!==r?r:""));return a}),function(e,t){return c.apply(this,arguments)}),"fetchOverseaVIPGoodsInfo");var M=(0,T.Tx)("Commercial",(l=(0,u._)(function*(e,t){var i,r,o=(0,v.ko)(t,I.Y),n=(0,v.ko)(t,h.e),{isOversea:a}=n;if(a)return O(e,t);var s=Number(n.isOversea?P.yM.OVERSEA_APP_ID:P.yM.CN_APP_ID),c=yield L(()=>o.fetchVIPPriceList(e,{aid:s,region:(0,k.yA)(),platform:7,scene:"vip"}));if(c.ok){var l,d,u=(0,v.ko)(t,y.K),p=c.value;u.setVipPriceList(null!==(l=p.vipPriceList)&&void 0!==l?l:[]),u.setVipTabList(null!==(d=null==p?void 0:p.tabList)&&void 0!==d?d:[])}else throw Error("code: ".concat(c.code,"; msg: ").concat(c.msg,"; logid: ").concat(null!==(r=null===(i=c.errorInfo)||void 0===i?void 0:i.log_id)&&void 0!==r?r:""));return c}),function(e,t){return l.apply(this,arguments)}),"fetchVIPGoodsInfo");var D=(0,T.Tx)("Commercial",(d=(0,u._)(function*(e,t){var i,r,o=(0,v.ko)(t,I.Y),n=yield L(()=>o.fetchCreditPriceList(e,{goodsTypes:["credit"]}));if(n.ok){var a,s=(0,v.ko)(t,y.K),c=n.value;s.setCreditPriceList(null!==(a=c.priceList)&&void 0!==a?a:[])}else throw Error("code: ".concat(n.code,"; msg: ").concat(n.msg,"; logid: ").concat(null!==(r=null===(i=n.errorInfo)||void 0===i?void 0:i.log_id)&&void 0!==r?r:""));return n}),function(e,t){return d.apply(this,arguments)}),"fetchCreditGoodsInfo")},885447:function(e,t,i){i.d(t,{c:()=>e4});var r=i("497973"),o=i("824096"),n=i("645968"),a=i("223960"),s=i("708625"),c=i("325563"),l=i("876826"),d=i("789786"),u=i("224671"),v=i("758261"),p=i("552786"),h=i("704976"),m=i("584072"),g=i("144690"),_=[u.$7.PublishImage,u.$7.PublishVideo,u.$7.PublishCanvas,u.$7.PublishShortVideo],f={[u.$7.PublishImage]:p.em.PUBLISH_AUTHORITY_IMAGE,[u.$7.PublishVideo]:p.em.PUBLISH_AUTHORITY_VIDEO,[u.$7.PublishCanvas]:p.em.PUBLISH_AUTHORITY_CANVAS,[u.$7.PublishCanvasTemplate]:p.em.PUBLISH_AUTHORITY_CANVAS_TEMPLATE,[u.$7.PublishStory]:p.em.PUBLISH_AUTHORITY_STORY,[u.$7.PublishShortVideo]:p.em.PUBLISH_AUTHORITY_SHORT_VIDEO};class y{getHasPublishAuthority(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=this;return(0,l._)(function*(){return(yield t._betaInitDeferred.promise,(Array.isArray(e)?e:[e]).some(e=>{var i=f[e];if(!i)return!1;var r=t._configurationService.getValue(i);return[p.Ve.RELEASED,p.Ve.BETA_AVAILABLE].includes(null==r?void 0:r.status)}))?Promise.resolve(!0):t._userService.aggregate.getHasPublishAuthority(e)})()}isDreaminaPublisher(){return this._userService.aggregate.isDreaminaPublisher()}constructor(e,t){this._userService=e,this._configurationService=t,this._betaInitDeferred=(0,m.PQ)(),this._timerId=void 0,this._timeoutMills=2e3,(0,g.Z)(this._configurationService.values)?(this._configurationService.onInit(()=>{this._betaInitDeferred.resolve(),this._timerId&&clearTimeout(this._timerId)}),this._timerId=setTimeout(()=>{this._betaInitDeferred.resolve()},this._timeoutMills)):this._betaInitDeferred.resolve()}}y=(0,d.gn)([(0,d.fM)(0,v.h),(0,d.fM)(1,h.l),(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",[void 0===v.h?Object:v.h,void 0===h.l?Object:h.l])],y);var b=i("884569"),w=i("800613"),I=i("8026"),k=i("297434"),S=i("135195"),T=i("216119"),C=i("930834"),P=i("104818"),L=i("368194"),R=i("561658"),A=i("782379"),E=i("251662"),H=i("724517"),x=i("60185"),O=i("605060"),M=i("19658"),D=i("690133"),F=i("980598"),U=i("117139"),N=i("331480"),j=i("559115"),V=i("70137"),B=i("30081"),G=i("603026"),Y=i("691208"),q=i("484702"),Z=i("668045"),W=i("217448"),K=i("990943"),z=i("952420"),Q=i("480553"),$=i("673721"),X=i("336234"),J=i("88383"),ee=i("532185"),et=i("932683"),ei=i("241047"),er=i("276879"),eo=i("865623"),en=i("216342"),ea=i("843698"),es=i("874800"),ec=i("434712"),el=i("260963"),ed=i("861251"),eu=i("850078");class ev extends es.JT{changePublishStatus(e,t,i){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=null===(r=this.activeInstance)||void 0===r?void 0:r.historyList.find(e=>{var i;return(null==e?!!void 0:null===(i=e.itemList)||void 0===i?!!void 0:!!i[0])&&e.itemList.map(e=>{var{commonAttr:i}=e,{publishedItemId:r,id:n}=i;return(o?r:n)===t}).includes(!0)});n&&(0,el.z)(()=>{var r=n.itemList.find(e=>(o?e.commonAttr.publishedItemId:e.commonAttr.id)===t);if(!!r)r.commonAttr.publishedItemId=i,e===ei.UN.Publish?r.commonAttr.hasPublished=!0:e===ei.UN.Delete&&(r.commonAttr.hasPublished=!1)})}deleteHistoryList(e){var t,i,r,o;null===(t=this._allInstance)||void 0===t||t.deleteHistoryList(e),null===(i=this._hdInstance)||void 0===i||i.deleteHistoryList(e),null===(r=this._miniInstance)||void 0===r||r.deleteHistoryList(e),null===(o=this._favoriteInstance)||void 0===o||o.deleteHistoryList(e)}setFavorite(e,t){var i,r,o,n,a,s,c,l;null===(i=this._allInstance)||void 0===i||i.setFavorite(e,t),null===(r=this._hdInstance)||void 0===r||r.setFavorite(e,t),null===(o=this._miniInstance)||void 0===o||o.setFavorite(e,t),null===(s=this._favoriteInstance)||void 0===s||s.setFavorite(e,t,(0,eu.Z)((null!==(c=null===(n=this._allInstance)||void 0===n?void 0:n.historyList)&&void 0!==c?c:[]).concat(this._favoriteInstance.historyList).concat(null!==(l=null===(a=this._hdInstance)||void 0===a?void 0:a.historyList)&&void 0!==l?l:[]),e=>e.historyRecordId)),this._onSetFavorite.fire(e,t)}setPageRoute(e){this._pageRoute=e}get pageRoute(){return this._pageRoute}setHistoryDetailVisible(e){this.historyDetailVisible=e}setHistoryRecordId(e){this.historyRecordId=e}setHistoryItemId(e){this.historyItemId=e}handleUrlParams(){var{recordId:e,itemId:t}=(0,eo.e)();e?(this.setHistoryDetailVisible(!0),this.setHistoryRecordId(e),this.setHistoryItemId(null!=t?t:"")):(this.setHistoryDetailVisible(!1),this.setHistoryRecordId(""),this.setHistoryItemId(""))}showHistoryDetail(e){var{recordId:t,itemId:i}=e;this.setHistoryRecordId(t),this.setHistoryDetailVisible(!0);var r=new URL(location.href);r.searchParams.set(er.R.recordId,t),i&&(this.setHistoryItemId(i),r.searchParams.set(er.R.itemId,i)),window.history.replaceState(null,document.title,r.href)}hideHistoryDetail(){this.setHistoryRecordId(""),this.setHistoryDetailVisible(!1);var e=new URL(location.href);e.searchParams.delete(er.R.recordId),e.searchParams.delete(er.R.itemId),window.history.replaceState(null,document.title,e.href)}getFirstPageHistoryList(e,t){var i=this;return(0,l._)(function*(){var r=[i._allInstance,i._hdInstance,i._favoriteInstance],o=r.find(e=>(null==e?void 0:e.type)===t);o&&(r=r.filter(e=>e!==o),yield o.getFirstPageHistoryList(e)),yield Promise.all(r.map(t=>null==t?void 0:t.getFirstPageHistoryList(e)))})()}changeActiveInstance(e){this.activeType=e;var t={[et.E.All]:this._allInstance,[et.E.SuperResolution]:this._hdInstance,[et.E.Generate]:this._miniInstance,[et.E.Favoraite]:this._favoriteInstance};return this.activeInstance=t[e],this.activeInstance}get superResolutionInstance(){return this._hdInstance}constructor(e){super(),this._containerService=e,this.historyDetailVisible=!1,this.historyRecordId="",this.historyItemId="",this._onSetFavorite=this._register(new ea.Q),this.onSetFavorite=this._onSetFavorite.event,this.activeType=et.E.All,(0,el.rC)(this),this.handleUrlParams(),this._allInstance=this._containerService.createInstance(ed.T,et.E.All),this._hdInstance=this._containerService.createInstance(ed.T,et.E.SuperResolution),this._miniInstance=this._containerService.createInstance(ed.T,et.E.Generate),this._favoriteInstance=this._containerService.createInstance(ed.T,et.E.Favoraite),this.activeInstance=this._allInstance}}(0,d.gn)([el.LO,(0,d.w6)("design:type",Boolean)],ev.prototype,"historyDetailVisible",void 0),(0,d.gn)([el.LO,(0,d.w6)("design:type",String)],ev.prototype,"historyRecordId",void 0),(0,d.gn)([el.LO,(0,d.w6)("design:type",String)],ev.prototype,"historyItemId",void 0),(0,d.gn)([el.aD.bound,(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",[Boolean]),(0,d.w6)("design:returntype",void 0)],ev.prototype,"setHistoryDetailVisible",null),(0,d.gn)([el.aD.bound,(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",[String]),(0,d.w6)("design:returntype",void 0)],ev.prototype,"setHistoryRecordId",null),(0,d.gn)([el.aD.bound,(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",[String]),(0,d.w6)("design:returntype",void 0)],ev.prototype,"setHistoryItemId",null),(0,d.gn)([(0,en.lI)("ImageAssetsHistoryService","getFirstPageHistoryList"),(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,void 0===et.E?Object:et.E]),(0,d.w6)("design:returntype",Promise)],ev.prototype,"getFirstPageHistoryList",null),ev=(0,d.gn)([(0,d.fM)(0,ec.t),(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",[void 0===ec.t?Object:ec.t])],ev);var ep=i("184613"),eh=i("548310"),em=i("200294"),eg=i("111242"),e_=i("618749"),ef=i("932011"),ey=i("959709"),eb=i("175120"),ew=i("747341"),eI=i("671962"),ek=i("462305"),eS=i("419887"),eT=i("341245"),eC=i("914841"),eP=i("14606"),eL=i("910629"),eR=i("333581"),eA=i("85952"),eE=i("401309"),eH=i("748312"),ex=i("547153"),eO=i("659519"),eM=i("102745"),eD=i("9156"),eF=i("725854"),eU=i("173590"),eN=i("81612"),ej=i("589543"),eV=i("653428"),eB=i("705408"),eG=i("487991"),eY=i("998519"),eq=i("690778"),eZ=i("657600"),eW=i("247923"),eK=i("651712"),ez=i("864722"),eQ=i("555192"),e$=i("724169"),eX=i("588718"),eJ=i("450264"),e0=i("243936"),e1=i("800365"),e6=i("728622"),e2=i("373704"),e8=i("143443"),e7=i("288196");function e4(e){e.register(eK.Q,ez.b),e.register(n.d,n.n),e.register(eP.A,eP.$),e.register(eL.M,eL.y),e.register(a.P,s.f),e.register(v.h,v.P),e.register(c.v,y),e.register(b.o,b.M),e.register(eR.E,eR.h),e.register(eA.p,eE.p),e.register(eH.Z,eH.N),e.register(ex.$,ex.H),e.register(eO.p,eM.z),e.register(eD.A,eD.n),e.register(eF.fQ,eF.dF),e.register(eU.m,eU.T),e.register(eN.m,eN.x),e.register(w.s,I.B),e.register(k.x,S.r),e.register(eQ.u,e$.g),e.register(ej.X,eV.C),e.register(T.D,C.g);e.register(P.P,L._),e.register(R.r,A.x),e.register(E.z,H.D),e.register(x.O,O.d),e.register(M.S,new r.M(D.N,[{}])),e.register(F.u,U.r),e.register(N.Dx,j.e),e.register(e8.m,e7.H),e.register(eX.i,eJ.v),e.register(V.aG,B.B),e.register(G.K,Y.Y),e.register(q.N,Z.E),e.register(W.q,K.s),e.register(z.v,Q.L),e.register($.y,X.v),e.register(eB.u,new r.M(eG.E,[],!1)),e.register(eY.F,new r.M(eq.i,[],!1)),e.register(e0.r,(0,o.l)(e1.T)),e.register(J.y,ee.G),e.register(et.N,ev),e.register(ep.M,eh.J),e.register(eZ._,eW.S),e.register(em.d,eg.Y),e.register(e_.g,(0,o.l)(ef.i)),e.register(e6.j,e2.b),e.register(ey.x,eb.P),e.register(ew.T,eI.Q),e.register(ek.X,eS.s),e.register(eT.U,eC.G)}},441752:function(e,t,i){i.d(t,{X:function(){return c}});var r=i(453282),o="".concat("b").concat("y").concat("t","ed"),n="".concat("c").concat("a").concat("p").concat("c").concat("u").concat("t","api"),a="".concat("b").concat("y").concat("t","evcloudapi"),s=()=>{var e,t,i,r,o,n,a,s;return(null===(t=window.__locationInfo)||void 0===t?void 0:null===(e=t.domain)||void 0===e?void 0:e.web_domain).includes("commercepro.capcut.com")||(null===(r=window.__locationInfo)||void 0===r?void 0:null===(i=r.domain)||void 0===i?void 0:i.web_domain).includes("pippit.capcut.com")?(null===(s=window.__locationInfo)||void 0===s?void 0:s.web_idc)==="maliva":null===(a=window.__locationInfo)||void 0===a?void 0:null===(n=a.domain)||void 0===n?void 0:null===(o=n.web_domain)||void 0===o?void 0:o.includes("https://edit-api-va.capcut.com")};function c(e){var{region:t}=e,i={imageHost:"",videoHost:"",videoFallbackHost:void 0,imageFallbackHost:void 0};return s()?(i.videoHost="https://vod-us-east-1.".concat(a,".com"),i.imageHost="https://imagex-va.".concat(n,".com"),i.videoFallbackHost="https://open-us-east-1.".concat(a,".com"),i.imageFallbackHost="https://open-us-east-1.".concat(a,".com"),i):"boe"===t?(i.videoHost="https://staging-openapi-".concat("b","oe.").concat(o,".org"),i.imageHost="https://staging-openapi-".concat("b","oe.").concat(o,".org"),i):"boei18n"===t?(i.videoHost="https://vas-".concat("b","oei18n.").concat(o,"ance.net"),i.imageHost="https://vas-".concat("b","oei18n.").concat(o,"ance.net"),i):"cn"===t?(i.videoHost="https://vod.".concat(o,"anceapi.com"),i.imageHost="https://imagex.".concat(o,"anceapi.com"),i.videoFallbackHost="https://open.".concat(o,"anceapi.com"),i.imageFallbackHost="https://open.".concat(o,"anceapi.com"),i):["us","gcp","sg","US-TTP"].includes(t)?(i.videoHost=r.P.videoHost,i.imageHost=r.P.imageHost,i.videoFallbackHost=r.P.videoFallbackHost,i.imageFallbackHost=r.P.imageFallbackHost,i):(i.videoHost=r.P.videoHost,i.imageHost=r.P.imageHost,i.videoFallbackHost=r.P.videoFallbackHost,i.imageFallbackHost=r.P.imageFallbackHost,i)}},62115:function(e,t,i){i.d(t,{v:function(){return h}});var r=i(876826),o=i(789786),n=i(719800),a=i(836413),s=i(504976),c=i(462956),l=i(178704),d=i(762274),u=i(144365),v=i(547725),p=i(56935);class h{connect(e,t){return this._store.has(e)?this._connect(e,t):Promise.resolve((0,s.rM)("db not found."))}invokeTransaction(e,t,i,o,n){var c,l=this;return new Promise((c=(0,r._)(function*(r){try{var c=(yield l._databasePool.getDatabase(e)).transaction(t,o,n),u=new d.Y(c,t);u.onError(e=>{r((0,s.j9)(e))}),u.onComplete(e=>{r((0,a.oW)(e))}),i(u),u.commit()}catch(e){r((0,s.j9)(e))}}),function(e){return c.apply(this,arguments)}))}readyCleanup(){this._cleanupMgr.mark()}_connect(e,t){var i,o=this;return new Promise((i=(0,r._)(function*(i){try{var r=yield o._databasePool.getDatabase(e),n=new c.T(r,t,o._databasePool,o._cleanupMgr);i((0,a.oW)(n))}catch(e){i((0,s.rM)(e))}}),function(e){return i.apply(this,arguments)}))}constructor(e,t){for(var i of(this._instantiation=t,this._store=new Map,e)){(0,p.Y2)(!this._store.has(i.id));var r=new Map;for(var o of i.tables)(0,p.Y2)(!r.has(o.name)),r.set(o.name,o);this._store.set(i.id,{version:i.version,tables:r})}this._databasePool=new u.T(this._store),this._cleanupMgr=this._instantiation.createInstance(l._,this._store,this._databasePool)}}(0,o.gn)([v.r,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[String,Array,Function,"undefined"==typeof IDBTransactionMode?Object:IDBTransactionMode,"undefined"==typeof IDBTransactionOptions?Object:IDBTransactionOptions]),(0,o.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],h.prototype,"invokeTransaction",null),h=(0,o.gn)([(0,o.fM)(1,n.T),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Array,void 0===n.T?Object:n.T])],h)},216086:function(e,t,i){i.d(t,{T:function(){return n}});var r=i(504976),o=i(836413);class n{set(e,t){if(!this._localstorage)return(0,r.b5)();try{this._localstorage.setItem(e,t)}catch(e){return(0,r.SW)(e)}return(0,o.ly)()}delete(e){if(!this._localstorage)return(0,r.b5)();try{this._localstorage.removeItem(e)}catch(e){return(0,r.nr)(e)}return(0,o.ly)()}query(e){if(!this._localstorage)return(0,r.b5)();try{var t=this._localstorage.getItem(e);if(t)return(0,o.oW)(t)}catch(e){return(0,r.HA)(e)}return(0,o.oW)(void 0)}queryAndParse(e,t){if(!this._localstorage)return(0,r.b5)();try{var i=this._localstorage.getItem(e);if(i)return(0,o.oW)(t(i))}catch(e){return(0,r.HA)(e)}return(0,o.oW)(void 0)}clear(){if(!this._localstorage)return(0,r.b5)();try{this._localstorage.clear()}catch(e){return(0,r.Ec)(e)}return(0,o.ly)()}constructor(){this._localstorage=window.localStorage}}},329753:function(e,t,i){i.d(t,{A:function(){return n}});var r=i(799108),o=i(899229);function n(e){var t=!1;if(e.isReady){var i,n=e.getBenefitPaidStrategyFromResource(r.Zw,(0,o.cq)({scene:r.hO.GenerateButton}));t=(null==n?void 0:null===(i=n[0])||void 0===i?void 0:i.paidMode)==="limited_time_free"}return t}},431400:function(e,t,i){i.d(t,{n:function(){return a}});var r=i(642273),o=i(601135),n=i(44938);function a(e){var t=new URLSearchParams(location.search).get("redirectUrl");if(t){localStorage.setItem(n.u.isRedirectFromUnLoginStatus,n.O.True);var i,a,s,c,l=(0,o.cP)(decodeURIComponent(t)),d=Object.entries(r.EZ).find(e=>{var t,i;return!!(0,o.LX)((0,o.i3)(e[1],r.Yp).pathname,null!==(t=null==l?void 0:l.pathname)&&void 0!==t?t:"")||!!/\/:\w+\?$/.test(e[1])&&(0,o.LX)((0,o.i3)(e[1].replace(/\/:\w+\?$/,""),r.Yp).pathname,null!==(i=null==l?void 0:l.pathname)&&void 0!==i?i:"")});if(!d)return!1;var u=(0,o.LX)((0,o.i3)(d[1],r.Yp).pathname,null!==(a=null==l?void 0:l.pathname)&&void 0!==a?a:"");return null==e||e.navigate(d[0],{replace:!0,params:Object.entries(null!==(s=null==u?void 0:u.params)&&void 0!==s?s:{}).reduce((e,t)=>("string"==typeof t[1]&&(e[t[0]]=t[1]),e),{}),query:null!==(c=null===(i=l.search)||void 0===i?void 0:i.slice(1))&&void 0!==c?c:""}),!0}return!1}},892542:function(e,t,i){i.d(t,{p:function(){return a}});var r=i(590839),o=i(735212),n=i(259273),a={[r.a.TitleBar]:[{id:n.$W.TitleBarSearch,position:"center",orderLevel:o.r.low,type:"Custom"}]}},317759:function(e,t,i){i.d(t,{p:function(){return a}});var r=i(590839),o=i(259273),n=i(642273),a={[r.a.PageRoute]:[{id:o.Sj.Block,path:n.EZ[o.Sj.Block],isNeedCache:!1,layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0},skeleton:()=>null}]}},823676:function(e,t,i){i.d(t,{p:function(){return u}});var r=i(772322),o=i(590839),n=i(259273),a=i(642273),s=i(708274),c=i(889715),l=i(150615);i(54891);var d=i(848303),u={[o.a.PageRoute]:[{id:n.Sj.ImageEdit,path:a.EZ[n.Sj.ImageEdit],layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0},isNeedCache:!1,skeleton:()=>(0,r.jsx)("div",{className:"image-editor-container static-ui"})}],[o.a.SideMenu]:[{id:n.Sj.ImageEdit,group:s.Bl.UserTools,position:"top",tooltips:()=>l.ZP.t("frame_change_canva_edit",{},"Canvas editor"),icon:e=>{var{selected:t,isHover:i}=e;return t||i?(0,r.jsx)(c.QWM,{}):(0,r.jsx)(c.Pn,{fill:d.Z.pageIconColor})},order:n.us.CanvasEditor}]}},104798:function(e,t,i){i.d(t,{D:function(){return r},M:function(){return o}});var r="ContentGenerationPage",o=120},47356:function(e,t,i){i.d(t,{I:function(){return r}});var r={id:"dreamina-text-art",version:1,tables:[i(901650).v]}},115468:function(e,t,i){i.d(t,{p:function(){return s}});var r=i(85728),o=i(881607),n=i(379311);class a{getEventParams(){var e=(0,o.cu)(this._params);return(0,r._)({},e)}constructor(e){this._params=e,this.eventName="ug_signup_status"}}function s(e,t){(0,n.Kl)(e,a,[t])}},944125:function(e,t,i){i.d(t,{Y:function(){return y}});var r=i(876826),o=i(85728),n=i(929753),a=i(789786),s=i(836413),c=i(819020),l=i(4978),d=i(242089),u=i(818292),v=i(243302),p=i(283349),h=i(442452),m=i(927457),g=i(804274),_=i(820266),f=i(423995);class y{getHistoryList(e){var t=this;return(0,r._)(function*(){try{var i=yield t._networkClient.post(t._getApi(c.b.GET_HISTORY),t._convertParamsToRequest(e));if("0"!==i.ret)return(0,s.wf)(Number(i.ret),i.errmsg);var r=t._convertResponseToData(i.data,e);return(0,s.oW)(r)}catch(e){return(0,m.m)(e,-1,"content generation get history failed")}})()}getCollectionHistoryList(e){var t=this;return(0,r._)(function*(){try{var i=yield t._networkClient.post(t._getApi(c.b.GET_HISTORY_COLLECTION),t._convertParamsToRequest(e));if("0"!==i.ret)return(0,s.wf)(Number(i.ret),i.errmsg);var r=t._convertCollectionResponseToData(i,e);return(0,s.oW)(r)}catch(e){return(0,m.m)(e,-1,"content generation get collection history failed")}})()}getCollectionHistoryListDetail(e){var t=this;return(0,r._)(function*(){try{var i=yield t._networkClient.post(t._getApi(c.b.GET_HISTORY_COLLECTION_DETAIL),(0,n._)((0,o._)({},t._convertParamsToRequest(e)),{history_group_key_md5:e.historyGroupKeyMd5}));if("0"!==i.ret)return(0,s.wf)(Number(i.ret),i.errmsg);var r=t._convertResponseToData((0,o._)({},i.data),e);return(0,s.oW)((0,n._)((0,o._)({},r),{historyGroupKeyMd5:i.data.history_group_key_md5,createdTime:i.data.created_time}))}catch(e){return(0,m.m)(e,-1,"content generation get collection history detail failed")}})()}getGenerateContentHistory(e,t,i){var o=this;return(0,r._)(function*(){try{var r=o._getApi(c.b.GET_HISTORY),n="".concat(r,"_").concat(e.type,"_").concat(e.direction),a=Date.now(),l=yield(0,d.O)(n,()=>o._networkClient.post(r,(0,g.fs)(e,g.zW)));if("0"!==l.ret)return(0,s.wf)(Number(l.ret),l.errmsg);var u=Date.now()-a,v=o._convertGenerateHistoryResponseToData(l,u,t,i);return(0,s.oW)(v)}catch(e){return(0,m.m)(e,-1,"get generate content history failed")}})()}_convertParamsToRequest(e){var t,i,r,o,n,a=[100,360,720].map(e=>({height:e,width:e,format:"webp"}));return{offset:0===e.offset?void 0:e.offset,count:e.count,history_type_list:null!==(r=e.historyTypeList)&&void 0!==r?r:[u.B.All,u.B.Text2Video,u.B.VideoBGM,u.B.GenerateAudio,u.B.Avatar2Video,u.B.VideoAudioEffect],direction:null!==(o=e.direction)&&void 0!==o?o:v.KB.PageDown,mode:e.mode,image_info:e.imageInfo,origin_image_info:e.originImageInfo,history_option:{story_id:null!==(n=null===(t=e.historyOption)||void 0===t?void 0:t.storyId)&&void 0!==n?n:"",multi_size_image_config:a,only_favorited:null===(i=e.historyOption)||void 0===i?void 0:i.onlyFavorited},is_pack_origin:!0}}_convertResponseToData(e,t){var i=(0,_.b)(e,g.zW),r=void 0!==t.hasPublishAuthority?{hasPublishAuthority:t.hasPublishAuthority}:void 0;return{list:i.recordsList.filter(e=>!!(0,p.w)(e.generateType)||((0,p.L)(e.generateType)?!!e.draftContent:!!e.itemList)).map(e=>(0,l.I)(e,{publishParams:r})).filter(e=>!!e),offset:i.nextOffset,hasMore:i.hasMore}}_convertCollectionResponseToData(e,t){var i=e.data,r={list:i.group_list.map(e=>(0,n._)((0,o._)({},this._convertResponseToData((0,o._)({},e),t)),{historyGroupKeyMd5:e.history_group_key_md5,createdTime:e.created_time})).filter(e=>!!e),offset:i.next_offset,hasMore:i.has_more};return(0,_.b)(r,g.zW)}_convertGenerateHistoryResponseToData(e,t,i,r){var{data:a}=(0,_.b)(e,g.zW);return(0,n._)((0,o._)({},a),{recordList:a.recordsList.filter(e=>!!e.itemList).map(e=>(0,f.J)(e,t,i,r))})}get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=(0,l.G)()),this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:e})}constructor(e){this._httpApiSettingService=e}}y=(0,a.gn)([(0,a.fM)(0,h.x),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===h.x?Object:h.x])],y)},759368:function(e,t,i){i.d(t,{P:function(){return f}});var r=i(876826),o=i(85728),n=i(929753),a=i(789786),s=i(836413),c=i(818292),l=i(243302),d=i(283349),u=i(128468),v=i(442452),p=i(927457),h=i(820266),m=i(804274),g=i(4978),_=i(819020);class f{getLocatedHistoryList(e){var t=this;return(0,r._)(function*(){try{var i=yield t._networkClient.post(t._getApi(_.b.LOCATE_TASK),t._convertParamsToRequest(e));if("0"!==i.ret)return(0,s.wf)(Number(i.ret),i.errmsg);var r=t._convertResponseToData(i.data,e);return(0,s.oW)(r)}catch(e){return(0,p.m)(e,-1,"content generation get history failed")}})()}getLocatedCollectionHistoryList(e){var t=this;return(0,r._)(function*(){try{var i=yield t._networkClient.post(t._getApi(_.b.LOCATE_HISTORY_COLLECTION),t._convertGroupParamsToRequest(e));if("0"!==i.ret)return(0,s.wf)(Number(i.ret),i.errmsg);var r=t._convertCollectionResponseToData(i);return(0,s.oW)(r)}catch(e){return(0,p.m)(e,-1,"content generation get collection history failed")}})()}_convertParamsToRequest(e){var t,i,r,o,n,a=[100,360,720].map(e=>({height:e,width:e,format:"webp"}));return{history_record_id:e.historyRecordId,pre_count:e.preCount,next_count:e.nextCount,history_type_list:null!==(r=e.historyTypeList)&&void 0!==r?r:[c.B.All,c.B.Text2Video,c.B.Avatar2Video,c.B.VideoBGM,c.B.VideoAudioEffect],direction:null!==(o=e.direction)&&void 0!==o?o:l.KB.PageDown,image_info:e.imageInfo,origin_image_info:e.originImageInfo,mode:e.mode,history_option:{story_id:null!==(n=null===(t=e.historyOption)||void 0===t?void 0:t.storyId)&&void 0!==n?n:"",multi_size_image_config:a,only_favorited:null===(i=e.historyOption)||void 0===i?void 0:i.onlyFavorited},is_pack_origin:!0}}_convertResponseToData(e,t){var i=(0,h.b)(e,m.zW),r=(null==t?void 0:t.hasPublishAuthority)!==void 0?{hasPublishAuthority:null==t?void 0:t.hasPublishAuthority}:void 0;return{list:i.recordsList.filter(e=>!!((0,d.w)(e.generateType)||(0,d.L)(e.generateType))||!!e.itemList).map(e=>(0,g.I)(e,{publishParams:r})).filter(e=>!!e),offset:i.nextOffset,hasMore:i.hasMore}}_convertGroupParamsToRequest(e){var t,i,r=[100,360,720].map(e=>({height:e,width:e,format:"webp"}));return{pre_count:e.preCount,next_count:e.nextCount,history_type_list:null!==(t=e.historyTypeList)&&void 0!==t?t:[c.B.All,c.B.Text2Video],image_info:e.imageInfo,origin_image_info:e.originImageInfo,mode:null!==(i=e.mode)&&void 0!==i?i:u.JU.Workbench,history_group_key_md5:e.historyGroupKeyMd5,history_option:(0,o._)({multi_size_image_config:r},(0,h.X)(e.historyOption))}}_convertCollectionResponseToData(e){var t=e.data,i={list:t.group_list.map(e=>(0,n._)((0,o._)({},this._convertResponseToData((0,o._)({},e))),{historyGroupKeyMd5:e.history_group_key_md5,createdTime:e.created_time})).filter(e=>!!e),offset:t.next_offset,hasMore:t.has_more};return(0,h.b)(i,m.zW)}get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=(0,g.G)()),this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:v.Y.DEFAULT,path:e})}constructor(e){this._httpApiSettingService=e}}f=(0,a.gn)([(0,a.fM)(0,v.x),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===v.x?Object:v.x])],f)},875733:function(e,t,i){i.d(t,{i:function(){return m}});var r=i(876826),o=i(85728),n=i(929753),a=i(789786),s=i(836413),c=i(172175),l=i(554157),d=i(712942),u=i(100470),v=i(280166),p=i(820266),h=i(804274);class m{generate(e,t,i){return this._request(e,"".concat((0,d.H4)()).concat(l.v.GENERATE),(0,p.X)(t),i)}getHistoryByIds(e,t){return this._request(e,"".concat((0,d.H4)()).concat(l.v.GET_HISTORY_BY_IDS),(0,p.X)(t))}_handleError(e,t){var i="ret"in t&&void 0!==t.ret,r=navigator.onLine?u.b.ErrClientCommon:u.b.ErrOffline,o=i?Number(t.ret):r,n=this._formatErrorMessage(t);return(0,s.wf)(o,n)}_request(e,t,i,a){var c=this;return(0,r._)(function*(){var r=Date.now(),l=c._environmentService.appId;try{var{data:d,logid:u}=yield c._networkClient.post(t,(0,n._)((0,o._)({},i),{http_common_info:{aid:l}}),{ctx:e,params:a});return{response:(0,s.oW)((0,p.b)(d,h.zW)),costTime:Date.now()-r,logId:u}}catch(t){return{response:c._handleError(e,t),costTime:Date.now()-r,logId:"ret"in t&&void 0!==t.ret?t.logid:""}}})()}constructor(e){this._environmentService=e,this._formatErrorMessage=e=>{var t,i,r="logid"in e?e.logid:"";return JSON.stringify({errMsg:"ret"in e?e.errmsg:"message: ".concat(null!==(t=e.message)&&void 0!==t?t:"",", stack: ").concat(null!==(i=e.stack)&&void 0!==i?i:""),logId:r})},this._networkClient=(0,c.G)()}}m=(0,a.gn)([(0,a.fM)(0,v.Y),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===v.Y?Object:v.Y])],m)},22991:function(e,t,i){i.d(t,{_:function(){return r}});var r=(0,i(971245).yh)("feed-filter-service")},518582:function(e,t,i){i.d(t,{VY:function(){return a},iQ:function(){return n},kx:function(){return s}});var r=i(433965),o=i(6080);function n(e){if((0,r.DF)(e))return[{key:e.commonAttr.id,width:null!==(i=e.width)&&void 0!==i?i:100,height:null!==(n=e.height)&&void 0!==n?n:100,coverUrlMap:e.commonAttr.coverUrlMap}];if((0,r.jD)(e))return[{key:e.commonAttr.id,width:null!==(a=e.image.largeImages[0].width)&&void 0!==a?a:100,height:null!==(s=e.image.largeImages[0].height)&&void 0!==s?s:100,coverUrlMap:e.commonAttr.coverUrlMap}];if((0,r.w3)(e)){var{originVideo:t}=e.video;return[{key:e.key,width:t.width,height:t.height,coverUrlMap:e.coverUrlMap}]}else{var i,n,a,s,c,l,d,u,v,{ratioWidth:p,ratioHeight:h}=(0,o.y)(null!==(u=null===(l=e.collection)||void 0===l?void 0:null===(c=l.itemList)||void 0===c?void 0:c.length)&&void 0!==u?u:0);return function(e,t,i){function r(e,t,i){var{width:r=100,height:o=100}=e,n=Math.min(t/r,i/o);return{key:e.commonAttr.id,width:Math.round(r*n),height:Math.round(o*n),coverUrlMap:e.commonAttr.coverUrlMap}}var o=[];switch(e.length){case 2:o=e.map(e=>r(e,t/2,i));break;case 3:o=e.map((e,o)=>0===o?r(e,t,4*i/7):r(e,t/2,3*i/7));break;case 4:o=e.map((e,o)=>0===o?r(e,t,2*i/3):r(e,t/3,i/3));break;case 5:o=e.map((e,o)=>0===o?r(e,t,i/2):r(e,t/2,i/4));break;case 6:o=e.map((e,o)=>0===o?r(e,2*t/3,2*i/3):1===o?r(e,t/3,2*i/3):r(e,t/3,i/3));break;case 7:o=e.map((e,o)=>0===o?r(e,t,i/2):r(e,t/3,i/4));break;default:o=e.map(e=>r(e,t,i))}return o}(null!==(v=null===(d=e.collection)||void 0===d?void 0:d.itemList)&&void 0!==v?v:[],p,h)}}function a(e){return{key:e.actKey,coverUrl:e.actCover}}function s(e){if((0,r.DF)(e))return[{coverUrl:e.commonAttr.coverUrl}];if((0,r.jD)(e))return[{coverUrl:e.commonAttr.coverUrl}];if((0,r.w3)(e))return[{coverUrl:e.coverUrl}];else{var t,i,o=null===(i=e.collection)||void 0===i?void 0:null===(t=i.itemList)||void 0===t?void 0:t[0];return o?[{coverUrl:o.commonAttr.coverUrl}]:[]}}},980072:function(e,t,i){i.d(t,{G:function(){return g}});var r,o=i(876826),n=i(244867),a=i(150615),s=i(608358),c=i(178589),l=i(259273),d=i(642273),u=i(357217),v=i(17248),p=i(591586),h=i(81185),m=i(491971);var g=(r=(0,o._)(function*(e,t){var i,r,o,g=(0,s.ko)(e,c.e),_=yield(0,v.O)(u.hJ.ModelCampaignCodeStart,e);if(!_){p.t.log("can't showUGNewFeatureUpdateModal cause result is nil ");return}var f=a.ZP.t(null!==(i=_.modelNameStarlingKey)&&void 0!==i?i:"",{},_.modelName);(0,n.L)({innerModalProps:{headerImgUrls:_.imageUrls,modalTitle:a.ZP.t("dre_new_model_online_popup_title",{model:f},"\u5373\u68A6AI {model} \u4E0A\u7EBF\uFF01"),modalDesc:a.ZP.t("dre_notification_join_beta_and_invite_desc",{model:f,number1:null!==(r=_.inviteTotalLimit)&&void 0!==r?r:10,number2:null!==(o=_.inviteRewardLimit)&&void 0!==o?o:6},"Dear dreamina user, you have obtained the qualification of {model} private test, and {number1} invitation to experience rights, to achieve {number2} people unlock 1 month that is dream member rewards;"),okButtonProps:{text:a.ZP.t("dre_new_model_online_popup_btn_try",{},"Try now"),onClick:()=>{(0,h.RL)(e,{popupType:h.s9.FirstLogin,action:h.pF.Use,activityName:u.Nd.FissionS30Model}),g.navigate(l.Sj.VideoGenerate,{state:{[d.SD.UgCampaignSelectModelReqKey]:_.modelReqKey}})}},cancelButtonProps:{text:a.ZP.t("dre_new_model_online_popup_btn_share",{},"Share with friends"),onClick:()=>{(0,h.RL)(e,{popupType:h.s9.FirstLogin,action:h.pF.Invite,activityName:u.Nd.FissionS30Model}),g.navigate(l.Sj.InviteFission,{state:{enterFrom:m.mE.ModelActivityPopup}})}}},otherModalProps:{maskClosable:!0,duration:200,autoFocus:!0,afterClose:t,onCancel:()=>{(0,h.RL)(e,{popupType:h.s9.FirstLogin,action:h.pF.Close,activityName:u.Nd.FissionS30Model})}}}),(0,h.RL)(e,{popupType:h.s9.FirstLogin,action:h.pF.Show,activityName:u.Nd.FissionS30Model})}),function(e,t){return r.apply(this,arguments)})},168112:function(e,t,i){i.d(t,{S:function(){return b}});var r=i(85728),o=i(249651),n=i(772322);i(304255),i(422689);var a=i(953032),s=i(552378),c=i(656744),l=i(2910),d=i(218571),u=i(233246),v=i(150564),p=i(150615),h=i(509320),m=i(649633),g=i(438536),_=i(105789),f=i.n(_),y=i(173683),b=e=>{var{guideProps:t,target:i,wrapStyle:_}=e,{title:b,content:w,image:I,disableCancel:k,cancelLabel:S,placement:T,cancel:C,confirm:P,confirmLabel:L,className:R,contentClassName:A,showCloseIcon:E=!0,showStepText:H=!0,stepText:x,stepIndex:O,steps:M=[],okText:D,nextText:F,skipText:U,showSkipButton:N=!1,showFooter:j=!0,showArrow:V=!0,blurToNext:B,mask:G,maskClosable:Y,maskClassName:q,arrowClassName:Z,closeClassName:W,maskPlaceholderClassName:K,maskBackgroundColor:z="rgba(0, 0, 0, .6)",placeholderRadius:Q=12,placeholderBorderColor:$,placeholderBorderWidth:X="2px",placeholderBorderStyle:J="solid",handleTargetClick:ee,clickToClose:et=!1,clickToCloseTooltip:ei=!1,clickTargetToClose:er=!1,resizeObserverSelectors:eo=[],mutationObserverSelectors:en=[],scrollContainerSelector:ea,mouseLeaveToClose:es=!1,offset:ec,useNewArrow:el}=t,[ed,eu]=(0,d.useState)(!0),ev=G?z:"transparent",[ep,eh]=(0,d.useState)(null!=_?_:{}),{run:em}=(0,a.default)(()=>{var e=(0,y.pX)(i,G||B);e&&eh(e)},200,[],{trailing:!0,leading:!1});(0,d.useEffect)(()=>(em(),window.addEventListener("resize",em),()=>{window.removeEventListener("resize",em)}),[em,i]),(0,d.useEffect)(()=>{for(var e of eo){var t=function(e){var t=new ResizeObserver(()=>{em()}),i=document.querySelector(e);if(i)return t.observe(i),{v:()=>{t.disconnect()}}}(e);if("object"===(0,o._)(t))return t.v}},[eo,em]),(0,d.useEffect)(()=>{for(var e of en){var t=function(e){var t=new MutationObserver(e=>{em()}),i=document.querySelector(e);if(i)return t.observe(i,{attributes:!0,childList:!1,subtree:!1}),{v:()=>{t.disconnect()}}}(e);if("object"===(0,o._)(t))return t.v}},[en,em]),(0,d.useEffect)(()=>{if(!!ea){var e=document.querySelector(ea);if(e)return e.addEventListener("scroll",em),()=>{null==e||e.removeEventListener("scroll",em)}}},[ea,em]);var eg=(e,t)=>{eu(!1),null==t||t(e)},e_=e=>{!e&&eg({from:h.c.VisibleChange},P)},ef=()=>{G&&Y&&eg({from:h.c.ClickMask},P),B&&eg({from:h.c.ClickMask},P)};(0,d.useEffect)(()=>{var e,t=()=>{eg({from:h.c.ClickTarget},P)};return et&&(null==(e=(0,y.nq)(i))||e.addEventListener("click",t)),()=>{e&&e.removeEventListener("click",t)}},[et,i]);var ey=(0,d.useRef)(null);(0,d.useEffect)(()=>{var e=t=>{t.stopPropagation(),document.body.removeEventListener("click",e,!0)},t=e=>{e.stopPropagation(),document.body.removeEventListener("mouseup",t,!0)},r=()=>{eg({from:h.c.ClickFocus},P),document.body.removeEventListener("mouseup",r,!0)},o=o=>{var n,a,s,c=(0,y.nq)(i);if(!((null===(n=ey.current)||void 0===n?void 0:n.contains(o.target))||(null===(a=document.querySelector(".lv-modal-wrapper"))||void 0===a?void 0:a.contains(o.target))||(null===(s=document.querySelector(".lv_cookie_banner-wrapper"))||void 0===s?void 0:s.contains(o.target)))){if((null==c?void 0:c.contains(o.target))||G&&Y||B){document.body.addEventListener("mouseup",r,!0);return}G&&(o.stopPropagation(),document.body.addEventListener("mouseup",t,!0),document.body.addEventListener("click",e,!0))}};if(er&&i)return document.body.addEventListener("mousedown",o,!0),()=>{document.body.removeEventListener("mousedown",o,!0)}},[er,i,Y,P,G,B]);var eb=(0,d.useCallback)(()=>{if(k||!N)return null;if(S){var e=typeof S;return"number"===e||"string"===e||"boolean"===e?(0,n.jsx)(c.Z,{type:"default",className:"guide-cancel-button",onClick:()=>eg.bind(void 0)({from:h.c.CancelLable},C),children:S}):(0,n.jsx)("div",{onClick:()=>eg.bind(void 0)({from:h.c.CancelLable},C),children:S})}return(0,n.jsx)(c.Z,{type:"default",className:"guide-cancel-button",onClick:()=>eg.bind(void 0)({from:h.c.CancelBtn},C),children:null!=U?U:p.oc.t("skip_web",{},"Skip")})},[S,C,k,N,U]),ew=(0,d.useCallback)(()=>{if(L){var e=typeof L;return"number"===e||"string"===e||"boolean"===e?(0,n.jsx)(c.Z,{type:"primary",className:"guide-confirm-button",onClick:()=>eg.bind(void 0)({from:h.c.ConfirmLabel},P),children:L}):(0,n.jsx)("div",{onClick:()=>eg.bind(void 0)({from:h.c.ConfirmLabel},P),children:L})}return(0,n.jsx)(c.Z,{type:"primary",className:"guide-confirm-button",onClick:()=>eg.bind(void 0)({from:h.c.ConfirmBtn},P),children:O===M.length?null!=D?D:p.oc.t("know_ok",{},"Ok"):null!=F?F:p.oc.t("next_web",{},"Next")})},[P,L,O,M.length,D,F]),eI=(0,d.useMemo)(()=>{var e=M.length;return H&&1!==e?x?x(O,e):"".concat(O,"/").concat(e):""},[x,O,M.length,H]),ek=(0,d.useMemo)(()=>{var e={};return(null==ec?void 0:ec.x)&&(e.marginLeft="".concat(null==ec?void 0:ec.x,"px")),(null==ec?void 0:ec.y)&&(e.marginTop="".concat(null==ec?void 0:ec.y,"px")),e},[ec]),eS=()=>(0,n.jsxs)("div",{ref:ey,className:"".concat(g.Z["service-guide-container"]," ").concat(null!=A?A:""),style:(0,r._)({},ek),children:[el?(0,n.jsx)("img",{className:g.Z["hover-tips-triangle"]+(Z?" ".concat(Z):""),src:(0,l.C)(m.Z,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"})}):null,E&&(0,n.jsx)("div",{className:g.Z["guide-close-icon"]+(W?" ".concat(W):""),onClick:()=>{eg({from:h.c.CloseIcon},C)},children:(0,n.jsx)(v.x8P,{})}),!!b&&(0,n.jsx)("div",{className:"guide-title",children:b}),(0,n.jsxs)("div",{className:"guide-content",children:[w,I?(0,n.jsx)("div",{className:"guide-content-image",children:(0,n.jsx)(u.Z,{src:(0,l.C)(I,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"})})}):null]}),j&&(0,n.jsxs)("div",{className:"guide-footer",children:[(0,n.jsx)("div",{className:"guide-step-text",children:eI}),(0,n.jsxs)("div",{className:"guide-step-buttons",children:[eb(),ew()]})]})]});return G||B?(0,n.jsx)("div",{style:(0,r._)({borderColor:ev},ep),className:f()(g.Z["guide-wapper"],q,{[g.Z["pointer-events-none"]]:er}),children:(0,n.jsx)(s.Z,{onClick:ee,clickToCloseTooltip:ei,onVisibleChange:e_,onClickOutside:ef,popup:()=>eS(),popupVisible:ed&&(0,y.YE)(ep),blurToHide:!1,clickToClose:et,mouseLeaveToClose:es,showArrow:V&&!el,arrowProps:{className:"guide-service-arrow"+(Z?" ".concat(Z):""),style:{display:el?"none":"block"}},className:f()(g.Z["guide-trigger"],R),position:T,updateOnScroll:!0,autoFitPosition:!0,autoFixPosition:!0,children:(0,n.jsxs)("div",{className:g.Z["guide-placeholder"]+(K?" ".concat(K):""),style:{"--guide-service-placeholder-radius":"".concat(Q,"px"),"--guide-service-placeholder-before-color":ev},children:[(0,n.jsx)("div",{className:g.Z["guide-placeholder-before"]}),(0,n.jsx)("div",{className:g.Z["guide-placeholder-after"],style:(0,r._)({},$?{borderColor:$}:{},X?{borderWidth:X}:{},J?{borderStyle:J}:{})})]})})}):(0,n.jsx)(s.Z,{onClick:ee,clickToCloseTooltip:ei,onVisibleChange:e_,onClickOutside:ef,popup:()=>eS(),popupVisible:ed&&(0,y.YE)(ep),blurToHide:!1,clickToClose:et,mouseLeaveToClose:es,showArrow:V&&!el,arrowProps:{className:"guide-service-arrow"+(Z?" ".concat(Z):""),style:{display:el?"none":"block"}},className:f()(g.Z["guide-trigger"],R,{[g.Z["pointer-events-none"]]:er}),position:T,updateOnScroll:!0,autoFitPosition:!0,autoFixPosition:!0,childrenPrefix:"akara",children:(0,n.jsx)("div",{className:g.Z["guide-placeholder-without-mask"],style:(0,r._)({borderRadius:Q},et?{zIndex:0}:{},$?{borderColor:$}:{},X?{borderWidth:X}:{},ep)})})}},396618:function(e,t,i){i.d(t,{C:function(){return u}});var r=i(876826),o=i(789786),n=i(319421),a=i(503006),s=i(280166),c=i(843698),l=i(874800),d=i(777936);class u extends l.JT{get isMuted(){return this._isMuted}mute(){this._isMuted=!0,this.queue=[]}unmute(){this._isMuted=!1}trigger(e){if(this._environmentService.isAutoTest||function(){var{searchParams:e}=new URL(window.location.href);return!!e.get("is_real_auto_test")}()||this._isMuted)return null;var{key:t}=e,i=this.keyValue.query(t);if(i.ok&&"true"===i.value)return null;var r=this.getCurrentShowState();if(r.show&&r.key===e.key||this.queue.find(t=>t.guideQueue.key===e.key))return null;var o=new n.f(e,this.storage);return this.queue.push(o),this._running||this._invoke(),o}clear(){var e,t;this.queue=[],null===(t=this._currentGuide)||void 0===t||null===(e=t.clear)||void 0===e||e.call(t)}getShowStateByKey(e){var t=this.keyValue.query(e);return t.ok&&"true"===t.value}getCurrentShowState(){var e;return{show:this._running,key:null===(e=this._currentGuide)||void 0===e?void 0:e.guideQueue.key}}setGuideShowed(e){this.keyValue.set(e,!0)}_next(){this.queue.length&&(this._running||this._invoke())}_invoke(){var e=this;return(0,r._)(function*(){var t=e.queue.shift();if(e._currentGuide=t,t){e._running=!0,e._onStateChange.fire(e.getCurrentShowState()),t.guideQueue.mask&&e._keybindingService.disableKeybinding();var i=t.onClear(()=>{e._running&&e._currentGuide===t&&(e._running=!1,e._currentGuide=void 0,e._onStateChange.fire(e.getCurrentShowState()),e._keybindingService.restoreKeybinding(),e._next(),i.dispose())});try{for(var r=yield t.invoke();!r.done&&"success"===r.status;)r=yield t.invoke()}catch(e){}e._running=!1,e._onStateChange.fire(e.getCurrentShowState()),t.guideQueue.mask&&e._keybindingService.restoreKeybinding(),i.dispose()}e._next()})()}constructor(e,t,i){super(),this.storage=e,this._environmentService=t,this._keybindingService=i,this.queue=[],this._running=!1,this._onStateChange=this._store.add(new c.Q),this.onStateChange=this._onStateChange.event,this._isMuted=!1,this.keyValue=this.storage.keyValue,this.queue=[]}}u=(0,o.gn)([(0,o.fM)(0,a.U),(0,o.fM)(1,s.Y),(0,o.fM)(2,d.d),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===a.U?Object:a.U,void 0===s.Y?Object:s.Y,void 0===d.d?Object:d.d])],u)},171344:function(e,t,i){i.d(t,{H:function(){return h}});var r=i(876826),o=i(85728),n=i(929753),a=i(789786),s=i(643590),c=i(416105),l=i(875649),d=i(442452),u=i(689739),v=i(836413),p=i(638106);class h{syncUrlToEverPhoto(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this;return(0,r._)(function*(){var r,a=i._httpApiSettingService.getRequestURL({domainType:d.Y.DEFAULT,path:"/lv/v2/intelligence/tts/curl_sync_everphoto"});t.headers=(0,n._)((0,o._)({},null!==(r=t.headers)&&void 0!==r?r:{}),{loc:i._httpApiSettingService.userLocationInfo.region,"x-lvweb-idc":i._httpApiSettingService.userLocationInfo.idc});try{var s=yield i._networkClient.post(a,{url:e.url,workspace_id:e.workspaceId},t);return(0,v.oW)({assetId:s.asset_id})}catch(e){return(0,v.Mx)(p.pY.NetworkFailed,"post data error.",e)}})()}constructor(e){var t;this._httpApiSettingService=e,this._networkClient=(t=new s.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,c.mH)(t),(0,l.e_)(t),t)}}(0,a.gn)([(0,u.K)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof SyncUrlToEverSpaceParams?Object:SyncUrlToEverSpaceParams,"undefined"==typeof NetworkRequestConfig?Object:NetworkRequestConfig]),(0,a.w6)("design:returntype",Promise)],h.prototype,"syncUrlToEverPhoto",null),h=(0,a.gn)([(0,a.fM)(0,d.x),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===d.x?Object:d.x])],h)},881965:function(e,t,i){i.d(t,{w:function(){return s}});var r=i(789786),o=i(936226),n=i(666565),a=i(813800);class s extends n.n{get resourceType(){return this._resourceType}parseHeycanResponseDataToResources(e){return(0,a.Fi)(e,this._resourceType)}constructor(e,t){super(t),this._resourceType=e}}s=(0,r.gn)([(0,r.fM)(1,o.Gw),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof AudioEffectType?Object:AudioEffectType,void 0===o.Gw?Object:o.Gw])],s)},836463:function(e,t,i){i.d(t,{G:function(){return s}});var r=i(473829),o=i(643590),n=i(875649),a=i(346526);function s(){var e=new o.y().build(o.D);return(0,n.i3)(e),(0,a.V)(e),(0,r.V)(e,{appVersion:""}),e}},552472:function(e,t,i){i.d(t,{Y:function(){return r}});function r(e){e.interceptors.response.use(e=>{if(200===e.status){var t,i=e.data;if((null==i?void 0:i.ret)==="0"||(null==i?void 0:null===(t=i.BaseResp)||void 0===t?void 0:t.StatusCode)===0||(null==i?void 0:i.status_code)===0)return Promise.resolve(e.data);if((null==i?void 0:i.ret)==="2013")return i.ret="0",i.data={has_more:!1,next_offset:0,library_item_list:[]},Promise.resolve(i)}return Promise.reject(e.data)})}},664107:function(e,t,i){i.d(t,{P:function(){return g}});var r=i(876826),o=i(789786),n=i(836413),a=i(346526),s=i(643590),c=i(107908),l=i(416105),d=i(875649),u=i(820266),v=i(927457),p=i(442452),h=i(280166),m=i(444110);class g{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new s.y().build({headers:{"Content-Type":"application/json",appid:String(e)},withCredentials:!0}),(0,c.x)(t,e),(0,l.mH)(t),(0,d.i3)(t),(0,a.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:p.Y.DEFAULT,path:e})}ssrWarmup(e,t){var i=this;return(0,r._)(function*(){try{var r=yield i._networkClient.post(i._getApi(m.b.SSR_WRAMUP),(0,u.X)(t),{ctx:e});if("0"!==r.ret)return(0,n.wf)(Number(r.ret),r.errmsg);return(0,n.oW)((0,u.b)(r.data))}catch(e){return(0,v.m)(e,-1,"ssr warmup error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}g=(0,o.gn)([(0,o.fM)(0,p.x),(0,o.fM)(1,h.Y),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===p.x?Object:p.x,void 0===h.Y?Object:h.Y])],g)},522449:function(e,t,i){i.d(t,{b:function(){return r}});var r={RECEIVE_CREDIT_POPUP:"/commerce/v1/common/entrance",PAID_STRATEGY:"/commerce/v1/resource/paid_strategy",QUERY_ORDER_RECORDS:"/lv/v1/purchase/purchase_record",QUERY_OVERSEA_ORDER_RECORDS:"/commerce/v3/trade/trade_records"}},599918:function(e,t,i){i.d(t,{g:function(){return u}});var r=i(85728),o=i(929753),n=i(474956),a=i(542994),s=i(521950),c=i(416794),l=i(296194),d=i(830563),u=e=>{var t,i,u,v,p,h,m,g=(0,s.I)(e);(0,c.o)(g),g.video.transcoded_video=(0,l.Z)(g.video.transcoded_video,(e,t)=>/^\d+_p$/.test(t));var _=(0,a.T)(g,n._g.DreaminaAiVideo),{statistic:f}=g,y=null!==(u=null!==(i=null!==(t=g.video.transcoded_video["720p"])&&void 0!==t?t:g.video.transcoded_video["360p"])&&void 0!==i?i:g.video.transcoded_video.origin)&&void 0!==u?u:g.video.origin_video,b=Object.keys(null!==(v=g.video.transcoded_video)&&void 0!==v?v:{});return(0,o._)((0,r._)({},_),{requestId:g.request_id,impressionId:g.impression_id,publishedItemId:g.common_attr.published_item_id,author:{avatar:g.author.avatar_url,name:g.author.name,uid:g.author.uid,secUid:g.author.sec_uid},video:{duration:g.video.duration,durationMs:BigInt(g.video.duration_ms),watermarkType:g.video.watermark_type,originVideo:y&&{definition:y.definition,format:y.format,height:y.height,size:y.size,width:y.width,videoUrl:y.video_url},videoTranscodeInfo:b.reduce((e,t)=>{var i,n,a=null!==(n=null===(i=g.video.transcoded_video)||void 0===i?void 0:i[t])&&void 0!==n?n:{},s=(0,o._)((0,r._)({},e),{videoUrl:a.video_url});return(0,o._)((0,r._)({},e),{[t]:s})},{}),videoId:g.video.video_id,transcodeStatus:g.video.transcode_status,videoSizeType:g.video.video_size_type},fixedVdaStatus:g.video.vda_status===d.X.Encoding&&b.length?d.X.EncodeSuccess:g.video.vda_status,statistic:{usageNum:null!==(p=f.usage_num)&&void 0!==p?p:0,hasFavorited:null!==(h=f.has_favorited)&&void 0!==h&&h,favoriteNum:null!==(m=f.favorite_num)&&void 0!==m?m:0},coverUrlMap:g.common_attr.cover_url_map,categoryIdList:g.category_id_list,actData:g.act_data?{weeklyChallengeList:g.act_data.weekly_challenge_list.map(e=>{var{act_key:t,act_name:i,award_ranking:r}=e;return{actKey:t,actName:i,awardRanking:r}})}:void 0,competitionData:g.competition_data?{competitionKey:g.competition_data.competition_key,competitionTitle:g.competition_data.competition_title,award:g.competition_data.award}:void 0,shortVideoData:g.short_video_data?{aiTools:g.short_video_data.ai_tools,storyId:g.short_video_data.story_id,downloadable:g.short_video_data.downloadable}:void 0})}},774449:function(e,t,i){i.d(t,{q:function(){return n},v:function(){return o}});var r=i(940140),o={traceInviteLink:{hostNameType:r.b_.Default,url:"/mweb_referral/invite_trace"},getInviteLinkInfo:{hostNameType:r.b_.Default,url:"/mweb_referral/share_channel"}},n={cn:"/luckycat/cn/jianying/campaign/v1",oversea:"/luckycat/i18n/capcut/campaign/v1"}},640481:function(e,t,i){i.d(t,{b:function(){return r}});var r={TRANSFER_PHOTO:"/mweb/v1/transfer_canvas"}},370188:function(e,t,i){i.d(t,{T:function(){return d}});var r=i(789786),o=i(936226),n=i(116244),a=i(897727),s=i(484876),c=i(878891),l=i(280166);class d extends c.k{get resourceType(){return a.g.Image}parseHeycanResponseDataToResources(e){return(0,n.Ar)(e)}buildCustomRequest(){return{loki_optional:{app_version:this._environmentService.appVersion,device_platform:"web"},pack_optional:{large_image_formats:s.r,need_thumb:!0}}}constructor(e={},t,i){super(e,t),this._environmentService=i}}d=(0,r.gn)([(0,r.fM)(1,o.Gw),(0,r.fM)(2,l.Y),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof ICollectionResourcesRepositoryParam?Object:ICollectionResourcesRepositoryParam,void 0===o.Gw?Object:o.Gw,void 0===l.Y?Object:l.Y])],d)},364170:function(e,t,i){i.d(t,{n:function(){return u}});var r=i(85728),o=i(789786),n=i(897727),a=i(553247),s=i(721434),c=i(936226),l=i(442452),d=i(807744);class u extends a.d{buildCustomRequest(e){return{search_option:(0,r._)({cc_web_use_new_search:!0},this._buildFilterParams(e)),pack_optional:{need_thumb:!0,thumb_opt:'{"is_support_webp":1}'}}}filterServiceResponse(e,t){return t.data.effect_item_list=t.data.effect_item_list.filter(e=>{var t,i=!!e.video.origin_video,r=Object.keys(null!==(t=e.video.transcoded_video)&&void 0!==t?t:{}).length>0;return i||r}),Promise.resolve(t)}get resourceType(){return n.g.Video}get _searchApi(){return this._httpApiSettingService.getRequestURL({domainType:l.Y.DEFAULT,path:d.bl.SEARCH})}parseHeycanResponseDataToResources(e){return(0,s.Mk)(e)}_buildFilterParams(e){var t,i,r,o={};return(null===(t=e.filters)||void 0===t?void 0:t.colors)&&(o.custom_colors=e.filters.colors.map(e=>({R:e[0],G:e[1],B:e[2]}))),(null===(i=e.filters)||void 0===i?void 0:i.aspectRatios)&&(o.custom_aspect_ratios=e.filters.aspectRatios),(null===(r=e.filters)||void 0===r?void 0:r.onlyCommercial)&&(o.filter_uncommercial=e.filters.onlyCommercial),o}constructor(e,t){super(e),this._httpApiSettingService=t}}u=(0,o.gn)([(0,o.fM)(0,c.Gw),(0,o.fM)(1,l.x),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===c.Gw?Object:c.Gw,void 0===l.x?Object:l.x])],u)}}]);