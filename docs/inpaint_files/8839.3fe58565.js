"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["8839"],{755020:function(e,t,r){var n,i;r.d(t,{q:function(){return n}}),(i=n||(n={})).Video="video_web",i.Photo="photo_web",i.DigitalHuman="digital_human",i.TextTemplate="text-template",i.Sticker="default",i.SubtitleTemplate="subtitle-templates",i.AiAvatarMask="aiavatarmask",i.AutoBeautyShape="auto-beauty",i.AutoBeautyFace="auto-beauty2",i.AutoBeautyBody="auto-beauty3",i.AutoBeautyMakeup="makeup",i.DreaminaAiVideo="ai_ttov_tool",i.DreaminaFont="fonts",i.Tone="tone",i.MaterialLib="material-lib",i.Effects="effects2",i.FaceProp="face-prop",i.SystemFont="system-fonts",i.Font="fonts",i.Flower="flower",i.VoiceChange="voice-change",i.Filter="filter",i.VideoBackground="canvas",i.VideoMotion="video",i.TextMotion="text",i.StickerMotion="sticker",i.Transitions="transitions",i.ShapeAnimation="shape-animation",i.PathAnimation="path-animation",i.Graffiti="graffiti",i.MattingStroke="matting_stroke",i.TextGlow="text_glow",i.CurveHSL="curve-hsl",i.Mask="videomask",i.Emoji="emoji",i.SmartColorAdjust="smart_color_adjust",i.Integration="integration",i.Bubble="bubble",i.Mix="mix",i.CurvePreset="curve_adjust_preset",i.CurveSpeed="curvespeed"},590601:function(e,t){t.Z={buttonContainer:"buttonContainer-r_AGaD",standard:"standard-rZkvyg",cancelBtn:"cancelBtn-xJ3x2c",authorCertificationContent:"authorCertificationContent-ShNH0t"}},349722:function(e,t){t.Z={pageIconFill:"pageIconFill-mzULno",searchContainer:"searchContainer-kiCRJX"}},175831:function(e,t,r){r.d(t,{Ap:function(){return i.A},OL:function(){return n.O},Z9:function(){return c.Z},b2:function(){return a.b},cr:function(){return s.c},ms:function(){return o.m}});var n=r(265921),i=r(173750),a=r(565733),o=r(693914),s=r(625613),c=r(880301)},557856:function(e,t,r){r.d(t,{C:function(){return a}});var n=r(259273),i=r(558032),a={[n.Sj.ImageEdit]:i.lw.CUSTOM,[n.Sj.StoryEditor]:i.lw.CUSTOM,[n.Sj.Workflow]:i.lw.CUSTOM,[n.Sj.WorkflowEditor]:i.lw.CUSTOM,[n.Sj.Asset]:i.lw.CUSTOM,[n.Sj.Home]:i.lw.CUSTOM,[n.Sj.ImageGenerate]:i.lw.CUSTOM,[n.Sj.VideoGenerate]:i.lw.CUSTOM,[n.Sj.Activity]:i.lw.CUSTOM,[n.Sj.GuestPerson]:i.lw.CUSTOM,[n.Sj.WorkDetailPage]:i.lw.CUSTOM,[n.Sj.LipSync]:i.lw.CUSTOM,[n.Sj.ActionCopy]:i.lw.CUSTOM,[n.Sj.Explore]:i.lw.PAGE_RENDERED,[n.Sj.Login]:i.lw.PAGE_RENDERED,[n.Sj.NoUsePermission]:i.lw.PAGE_RENDERED,[n.Sj.Block]:i.lw.PAGE_RENDERED,[n.Sj.DataSubjectRequestDownload]:i.lw.PAGE_RENDERED,[n.Sj.DataSubjectRequest]:i.lw.PAGE_RENDERED,[n.Sj.DataSubjectRequestSubmit]:i.lw.PAGE_RENDERED,[n.Sj.DataSubjectRequestBlock]:i.lw.PAGE_RENDERED,[n.Sj.Default]:i.lw.PAGE_RENDERED,[n.Sj.FallBack]:i.lw.PAGE_RENDERED,[n.Sj.Visionary]:i.lw.PAGE_RENDERED,[n.Sj.VideoHome]:i.lw.PAGE_RENDERED,[n.Sj.AudioGenerate]:i.lw.PAGE_RENDERED,[n.Sj.CookieManage]:i.lw.PAGE_RENDERED,[n.Sj.InviteFission]:i.lw.PAGE_RENDERED,[n.Sj.ThirdPartyCallback]:i.lw.PAGE_RENDERED,[n.Sj.History]:i.lw.PAGE_RENDERED,[n.Sj.HistoryDetail]:i.lw.PAGE_RENDERED,[n.Sj.SearchResult]:i.lw.PAGE_RENDERED,[n.Sj.Personal]:i.lw.PAGE_RENDERED,[n.Sj.Community]:i.lw.PAGE_RENDERED,[n.Sj.WorkDetailShare]:i.lw.PAGE_RENDERED}},670479:function(e,t,r){r.d(t,{c:function(){return i}});var n=r(556932);function i(){localStorage.removeItem(n.oA)}},961503:function(e,t,r){r.d(t,{X:function(){return i}});var n=r(786377);function i(){var e=n.Z.get("capcut_locale");e&&"zh-Hans"!==e&&n.Z.set("capcut_locale","zh-Hans",{expires:30})}},772246:function(e,t,r){r.d(t,{S:function(){return n}});var n={ACCESS_TIME_LIMIT:"200201",SOURCE_IS_OVERTIME:"200202",VIDEO_TRANSCODE_FAIL:"4010"}},460461:function(e,t,r){r.d(t,{K:function(){return i}});var n,i=((n={}).noNormalVideo="fe-200000",n.onlyOneShare="200205",n.fileNotExit="2360",n.fileNotFound="2345",n.fileUnderReviewVisitLimit="2390",n.getFileFailed="2350",n.shareNotExit="2361",n.shareOff="2348",n.notLogin="1015",n.maxVisitors="200212",n.passwordError="2349",n.noVersion="noVersion",n.notCluster="notCluster",n.needIdentifyingCode="2362",n.noAllowJoin="2306",n)},407270:function(e,t,r){r.d(t,{Hk:function(){return u},KB:function(){return l},VY:function(){return i}});var n,i=((n={}).SEO="SEO",n.Soical="Social",n.SEM="SEM",n.Paidads="Paidads",n.Referal="Referral",n.Direct="Direct",n.Product="product",n.CapCut="CapCut",n),a={google:[/([^\/]+\.)?google(\.[^\/]+)(\/|$)/i],bing:[/([^\/]+\.)?bing\.com(\/|$)/i],yahoo:[/([^\/]+\.)?yahoo\.com(\/|$)/i],duckduckgo:[/([^\/]+\.)?duckduckgo\.com(\/|$)/i],yandex:[/([^\/]+\.)?yandex\.com(\/|$)/i],naver:[/([^\/]+\.)?naver\.com(\/|$)/i],facebook:[/([^\/]+\.)?facebook\.com(\/|$)/i,/([^\/]+\.)?fb\.com(\/|$)/i,/([^\/]+\.)?fb\.me(\/|$)/i],youtube:[/([^\/]+\.)?youtube\.com(\/|$)/i,/([^\/]+\.)?youtu\.be(\/|$)/i],twitter:[/([^\/]+\.)?twitter\.com(\/|$)/i,/([^\/]+\.)?t\.co(\/|$)/i],tiktok:[/([^\/]+\.)?tiktok\.com(\/|$)/i],instagram:[/([^\/]+\.)?instagram\.com(\/|$)/i,/([^\/]+\.)?instagr\.am(\/|$)/i],linkedin:[/([^\/]+\.)?linkedin\.com(\/|$)/i],survey:[/survey\.isnssdk\.com(\/|$)/i],baidu:[/([^\/]+\.)?baidu\.com(\/|$)/i],sougou:[/([^\/]+\.)?sougou\.com(\/|$)/i],toutiao:[/([^\/]+\.)?toutiao\.com(\/|$)/i],so:[/([^\/]+\.)?so\.com(\/|$)/i],hao123:[/([^\/]+\.)?hao123\.com(\/|$)/i],sm:[/([^\/]+\.)?sm\.cn(\/|$)/i]},o={SEO:[...a.google,...a.bing,...a.yahoo,...a.duckduckgo,...a.yandex,...a.naver,...a.baidu,...a.sougou,...a.toutiao,...a.so,...a.hao123,...a.sm],Social:[...a.facebook,...a.youtube,...a.twitter,...a.tiktok,...a.instagram,...a.linkedin],product:[...a.survey]},s=new Map(Object.keys(o).reduce((e,t)=>(o[t].forEach(r=>{e.push([r,t])}),e),[])),c=new Map(Object.keys(a).reduce((e,t)=>(a[t].forEach(r=>{e.push([r,t])}),e),[]));function u(e){var t,r=[...c.keys()].find(t=>t.test(e));return null!==(t=c.get(r))&&void 0!==t?t:e}function l(e){var t,r=[...s.keys()].find(t=>t.test(e));return null!==(t=s.get(r))&&void 0!==t?t:function(e){try{var t=new URL(e.startsWith("http")?e:"https://".concat(e));if(["capcut.com","capcut.net"].find(e=>t.host.includes(e)))return"CapCut";return"Referral"}catch(e){return"Referral"}}(e)}},777995:function(e,t,r){var n=r(85728),i=r(929753),a=r(772322);r(246923);var o=r(25614),s=r(195291),c=r(317087),u=r(586571),l=(e,t,r)=>{var l=null==r?void 0:null===(p=r.getContainer)||void 0===p?void 0:p.call(r);if(!l){var p,v,_="string"==typeof t?t:(0,n._)({icon:"loading"===e?(0,a.jsx)(c.Z,{wrapperStyle:{width:20,height:20}}):void 0},t);return null===o.Z||void 0===o.Z?void 0:null===(v=o.Z[e])||void 0===v?void 0:v.call(o.Z,_)}var h="string"==typeof t?{content:t,type:e}:(0,i._)((0,n._)({},t),{type:e}),f="",g=(e,t)=>{if(!!e){Array.isArray(t)&&(t=t.join(" "));var{top:r,left:n,width:i}=l.getBoundingClientRect();e.style.width="".concat(i,"px"),e.style.top="".concat(r+24,"px"),e.style.left="".concat(n,"px"),e.className="".concat(e.className," ").concat(t)}};if(d.instances.has(l)){var y=d.instances.get(l);f=null==y?void 0:y.add(h),g(null==y?void 0:y.__dom,h.className)}else{var m=document.createElement("div");m.classList.add(u.Z["ve-message-wrapper"]),(0,s.render)((0,a.jsx)(o.Z,{ref:e=>{f=(null==e?void 0:e.add(h))||"",e.__dom=m,d.instances.set(l,e)},icon:"loading"===e?(0,a.jsx)(c.Z,{wrapperStyle:{width:20,height:20}}):void 0}),m),g(m,h.className),document.body.appendChild(m)}return()=>{var e;f&&(null===(e=d.instances.get(l))||void 0===e||e.remove(f))}};class d extends o.Z{}d.instances=new Map,d.success=(e,t)=>l("success",e,t),d.info=(e,t)=>l("info",e,t),d.warning=(e,t)=>l("warning",e,t),d.error=(e,t)=>l("error",e,t),d.loading=(e,t)=>l("loading",e,t),d.normal=(e,t)=>l("normal",e,t),t.Z=d},104805:function(e,t,r){r.d(t,{x:function(){return l}});var n=r(876826),i=r(789786),a=r(216342),o=r(806663),s=r(693895),c=r(490165),u=r(165870);class l extends u.g{run(e,t){var r;return t.invokeFunction((r=(0,n._)(function*(t){var r=t.get(c.D),n=t.get(s.W);return r.hasLogin?yield n.initialize(e):(0,o.V)(r.onDidLogin)(()=>{n.initialize(e)}),n}),function(e){return r.apply(this,arguments)}))}constructor(...e){super(...e),this.taskName="INIT_WORKSPACE_SERVICE"}}(0,i.gn)([(0,a.lI)("task","initPureWorkspaceService"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IInstantiationService?Object:IInstantiationService]),(0,i.w6)("design:returntype",void 0)],l.prototype,"run",null)},350195:function(e,t,r){r.d(t,{n:function(){return u}});var n=r(876826),i=r(324897),a=r(477134),o=r(700645),s=r(867713),c=r(98902);function u(e){return l.apply(this,arguments)}function l(){return(l=(0,n._)(function*(e){var{bid:t,userId:r,region:u,storageService:l,slardarService:d}=e;try{var p,v=yield(0,a.getTraceRetrievalTasks)(t,r,u);if(v&&v.length>0){;v.forEach((p=(0,n._)(function*(e){try{var{traceName:t,startTime:r,endTime:p}=e,v=yield i.k.queryDB(l,{traceName:t,startTimeLower:r,startTimeUpper:p});if(v.ok){var _=v.value;yield Promise.all(_.map(e=>(Object.assign(e,{retrieval:!0}),new Promise(t=>{(0,o.n)((0,n._)(function*(){(0,c.Ok)(e,d),yield i.k.deleteTrace(l,[e.traceId]),t(null)}),{priorityLevel:s.q.IdlePriority})})))),(0,a.finishRetrievalTask)(e._id,u)}}catch(e){d.captureException("report-trace-retrieval-error",e),console.error(e)}}),function(e){return p.apply(this,arguments)}))}i.k.cleanupExpiredTrace(l)}catch(e){console.error(e)}})).apply(this,arguments)}},107908:function(e,t,r){r.d(t,{x:function(){return d}});var n,i=r(876826),a=r(416105),o=r(52533),s=r(121608),c=r.n(s),u=e=>{var t=[];return Object.entries(e).forEach(e=>{!(0,o.Z)(e[1])&&t.push("".concat(e[0],"=").concat(e[1]))}),t.join("&")};var l=(n=(0,i._)(function*(e,t){var n=new(yield r.e("187").then(r.bind(r,357994))).default;return n.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1I/Ml9Qkp6reos86Tjbd1R6q+\nbQwviSEmZzqtrhfGI+iMGKA74XSctUu8ZnWhOKsG5+PujMrIJX2WMRP0E5lhJpCh\nfgK3aiNikvgigORzf0Lz39XS46eAHJrPbMaQiabDfd/+CjkvxbV+LW3oPdoZj9Mn\n38OEHt9qVkUlvpv76wIDAQAB\n-----END PUBLIC KEY-----"),n.verify(e,t,c().SHA256)}),function(e,t){return n.apply(this,arguments)});function d(e,t){var r;e.interceptors.response.use((r=(0,i._)(function*(e){var r,{response:n,ret:i,systime:o,sign:s}=null!==(r=e.data)&&void 0!==r?r:{},c={appid:t,appvr:a.QW,"device-time":e.config.headers["device-time"],pf:a.PF,response:n,ret:i,systime:o};return s&&!(yield l(u(c),s))?Promise.reject(Error("Error: auth error",{cause:e})):e}),function(e){return r.apply(this,arguments)}))}},948914:function(e,t,r){r.d(t,{f:function(){return d}});var n=r(789786),i=r(843698),a=r(874800),o=r(56935),s=r(722552),c=r(503006),u=r(786377),l="CAPCUT_THEME";class d extends a.JT{getTheme(){var e,t=this.storageService.keyValue.query(l);return t.ok&&t.value?((0,o.ZB)(t.value),e=t.value):(e=s.h.Light,this.storageService.keyValue.set(l,e)),e}setTheme(e){u.Z.set(l,e),this.storageService.keyValue.set(l,e),this._onDidThemeChange.fire(e)}constructor(e){super(),this.storageService=e,this._onDidThemeChange=this._register(new i.Q),this.onDidThemeChange=this._onDidThemeChange.event}}d=(0,n.gn)([(0,n.fM)(0,c.U),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===c.U?Object:c.U])],d)},890712:function(e,t,r){r.d(t,{_:()=>p});var n=r("876826"),i=r("85728"),a=r("150615"),o=r("244650"),s=r("219925"),c=r("241854");let u="undefined"!=typeof CUSTOM_DISABLE_COMMERCE&&CUSTOM_DISABLE_COMMERCE,l="undefined"!=typeof CUSTOM_DISABLE_COMMERCE_COMMERCEPRO&&CUSTOM_DISABLE_COMMERCE_COMMERCEPRO;var d=r("533901"),p=new class e{_initInjectedGeoBlockStrategy(){if(!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement))return;var e,t=window.geo_block_config;if(!!t)null===(e=t.forEach)||void 0===e||e.call(t,e=>{var{url:t=[],country_codes:r,geo_name_ids:n}=null!=e?e:{};t.forEach(e=>{var{path:t}=e;if(!this._geoBlockStrategyMap[t])this._geoBlockStrategyMap[t]={countryCodes:r,geoNameIds:n}})})}_getGeoNameIdFromGateWay(){var e=window.ip_location_info,{Country:t,Subdivisions:r}=null!=e?e:{},n=null==t?void 0:t.GeoNameID;return{countryGeoNameId:n,cityGeoNameId:(null==r?void 0:r.length)&&r[0].GeoNameID}}_common(){return(0,n._)(function*(){var{vip_entrance:e}=yield s.k.getEntrances();return null==e?void 0:e.enable})()}_enableSVip(){return(0,n._)(function*(){var{vip_entrance:e}=yield s.k.getEntrances();return null==e?void 0:e.svip_enable})()}_abTest(e){return(0,o.y)().getABTestConfig(e,!1)}_abTestSync(e){return(0,o.y)().getABTestConfigSync(e,!1)}_checkRegion(e){return(0,n._)(function*(){var t,r;return!(null===(r=yield c.W.getAppIsInvalidInCurrentRegion(e))||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.invalid)})()}_checkPopup(){return(0,n._)(function*(){var e,t;return!(null===(t=yield c.W.checkPopup())||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.need_check)})()}_i18n(e){return e.includes(a.ZP.language)}_isNotSensitiveInGateway(){return!window.is_sensitive_region}_language(e){return e.some(e=>{var t,r;return!!(null===(r=window.navigator)||void 0===r?void 0:null===(t=r.language)||void 0===t?void 0:t.startsWith(e))})}_isCountryInWL(e){var{countryGeoNameId:t}=this._getGeoNameIdFromGateWay();return t&&e.includes(t)}_isCityInWL(e){var{cityGeoNameId:t}=this._getGeoNameIdFromGateWay();return t&&e.includes(t)}_isCountryNotInBL(e){var{countryGeoNameId:t}=this._getGeoNameIdFromGateWay();return!(t&&e.includes(t))}_isCityNotInBL(e){var{cityGeoNameId:t}=this._getGeoNameIdFromGateWay();return!(t&&e.includes(t))}_isCurRegionInList(e){var t,r,n;return e.includes(null!==(n=null===(r=this._currentZone)||void 0===r?void 0:null===(t=r.region)||void 0===t?void 0:t.toUpperCase())&&void 0!==n?n:"")}_doStrategies(e,t){var r=this;return(0,n._)(function*(){try{switch(e){case"abTest":return yield r._abTest(t.name);case"checkRegion":return yield r._checkRegion(t.appId);case"checkPopup":return t&&(yield r._checkPopup());case"enableSVip":return t&&(yield r._enableSVip());case"common":return t.test&&(yield r._common());default:return r._doStrategiesSync(e,t)}}catch(e){return!1}})()}_doStrategiesSync(e,t){switch(e){case"alwaysAllow":return!0;case"abTestSync":return this._abTestSync(t.name);case"i18n":return this._i18n(t.langs);case"language":return this._language(t.langs);case"isSensitiveInGateway":return t&&!this._isNotSensitiveInGateway();case"notSensitiveInGateway":return t&&this._isNotSensitiveInGateway();case"countryWL":return this._isCountryInWL(t);case"cityWL":return this._isCityInWL(t);case"countryBL":return this._isCountryNotInBL(t);case"cityBL":return this._isCityNotInBL(t);case"curRegionInList":return this._isCurRegionInList(t);case"curRegionOutList":return!this._isCurRegionInList(t);default:return!1}}assembleStrategies(e){var t=this;return(0,n._)(function*(){var r;return(yield Promise.all(e.map((r=(0,n._)(function*(e){return(yield Promise.all(Object.keys(e).map(r=>t._doStrategies(r,e[r])))).every(e=>e)}),function(e){return r.apply(this,arguments)})))).some(e=>e)})()}assembleStrategiesSync(e){return e.some(e=>Object.keys(e).every(t=>this._doStrategiesSync(t,e[t])))}isGeoBlock(e){var t=this._geoBlockStrategyMap[e],r=!!t;return r&&(0,o.y)().report("geo_block",(0,i._)({path:e},t)),r}isAllow(e){var t,{scene:r,isWhiteUser:n}=e;return n||u||l?Promise.resolve(!0):this.assembleStrategies(null!==(t=d.z[r])&&void 0!==t?t:[])}isAllowSync(e){var t,{scene:r,isWhiteUser:n}=e;return!!n||!!u||this.assembleStrategiesSync(null!==(t=d.z[r])&&void 0!==t?t:[])}updateCurrentZone(e){this._currentZone=e}constructor(){this._geoBlockStrategyMap={},this._initInjectedGeoBlockStrategy()}}},7836:function(e,t,r){r.d(t,{$:function(){return a},b:function(){return i}});var n,i=((n={}).DSRDialog="DSRDialog",n.BirthdayFillDialog="BirthdayFillDialog",n.PrivacyPolicyDialog="PrivacyPolicyDialog",n.UGShareReflowDialog="UGShareReflowDialog",n.UGNewCampaignDialog="UGNewCampaignDialog",n.UGCampaignOfflineDialog="UGCampaignOfflineDialog",n.NoviceQuestionnaire="NoviceQuestionnaire",n.AppDownloadDialog="AppDownloadDialog",n.ProductHuntDialog="ProductHuntDialog",n.PublishStoryDialog="PublishStoryDialog",n),a={DSRDialog:1002,BirthdayFillDialog:1001,PrivacyPolicyDialog:1e3,UGShareReflowDialog:100,UGNewCampaignDialog:99,UGCampaignOfflineDialog:98,NoviceQuestionnaire:9,AppDownloadDialog:8,ProductHuntDialog:7,PublishStoryDialog:6}},628231:function(e,t,r){r.d(t,{Y:function(){return d}});var n=r(876826),i=r(886076),a=r(259435),o=r(487736);function s(e){var{userProfile:t}=e,{name:r="",uid:n=""}=null!=t?t:{};return{userId:n,userName:r,webId:n}}function c(){return(c=(0,n._)(function*(e,t,r){var n=[r].map(r=>t.aggregate.getUserPortraitTaskSetting({user:e,type:r})),i=(yield Promise.all(n)).filter(e=>e.ok).filter(e=>e.value.taskId).map(e=>e.value);return i.length?i:null})).apply(this,arguments)}function u(){return(u=(0,n._)(function*(e){var{feelGoodService:t,accountService:r,type:n}=e;if(!t||!r)return null;var i=s(r);return yield function(e,t,r){return c.apply(this,arguments)}(i,t,n)})).apply(this,arguments)}function l(){return(l=(0,n._)(function*(e){var{configurationService:t,dreaminaSettingsDataService:r}=e;if(!(yield null==t?void 0:t.abTestManager.getBooleanAbTestValueAsync("show_portrait_survey_modal",!1)))return!1;location.search.includes("show_survey_next")&&(yield r.updateSettings({occupationalQuestionnaire:!1}));var[,n]=(yield r.getSettings()).pair();return(null==n?!void 0:!n.occupationalQuestionnaire)&&!0})).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,n._)(function*(e){var t,{feelGoodService:r,containerService:c,accountService:d,storageService:p,reportService:v,type:_,successCb:h,onClose:f,configurationService:g,dreaminaSettingsDataService:y}=e;if(!r||!d||!g||!(yield function(e){return l.apply(this,arguments)}({configurationService:g,dreaminaSettingsDataService:y})))return!1;var m=s(d),S=yield function(e){return u.apply(this,arguments)}(e),w=(0,a.C)(c,o.M.NoviceQuestionnaire);if(!(null==S?void 0:S.length))return w.unmount(),!1;var k=(t=(0,n._)(function*(e){var t=yield r.aggregate.postSurveysSubmit(e,m),n=t.every(e=>e.ok),i=t.map(e=>e.code).join(","),a=t.map(e=>e.msg).join(",");return!n&&(null==v||v.reportDevEvent("feelGoodSubmitFail",{code:i,err_msg:a})),n}),function(e){return t.apply(this,arguments)});return(0,i.Jd)({surveysData:S,accountService:d,reportService:v,containerService:c,storageService:p,onSubmit:k,type:_,title:"",successCb:h,onClose:f,dreaminaSettingsDataService:y}),!0})).apply(this,arguments)}},186676:function(e,t,r){r.d(t,{W:function(){return w}});var n=r(772322),i=r(2910),a=r(218571),o=r(150615),s=r(369617),c=r(949057),u=r(642273),l=r(185617),d=r(323947),p=r(832226),v=r(854626),_=r(995474),h=r(653061),f=r(333433),g=r(259273),y=r(712942),m=r(604488),S=r(523912),w=()=>{var e,t=(0,f.X)(),{isOverSea:r}=(0,a.useContext)(c.FN),w=(0,y.TR)(),k=[g.Sj.Login,g.Sj.Block,g.Sj.DataSubjectRequestDownload,g.Sj.DataSubjectRequest,g.Sj.DataSubjectRequestBlock,g.Sj.DataSubjectRequestSubmit,g.Sj.NoUsePermission].includes(null!==(e=null==t?void 0:t.routeId)&&void 0!==e?e:"");if(!l.lY||k)return null;var b=o.oc.t("mweb_open_by_computer",{},"Open Dreamina on your desktop for a seamless experience:").replace(/[:：-]?[\s：]*{website}|{website}:[\s：]/g,"");return(0,n.jsxs)("div",{className:d.Z.mobileTipsBanner,children:[(0,n.jsx)(h.k,{sizePickMode:"picture",sources:[{srcSet:v,type:"image/webp"}],src:(0,i.C)(p,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),className:d.Z.image,crossOrigin:"anonymous"}),(0,n.jsx)("div",{className:d.Z.icon,children:(0,n.jsx)("img",{src:(0,i.C)(S,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"})})}),(0,n.jsx)("div",{className:d.Z.text,children:b}),(0,n.jsx)("div",{className:d.Z.button,onClick:()=>{try{var e="".concat(location.origin).concat(u.NU),t=!r&&w===y.wt.Online,n="https://jimeng.".concat(m.P5,"i").concat(m.aj,"nyi").concat(m.zQ,"g.com/s/i2Uwtdew/");(0,_.u)(t?n:e).then(()=>{s.s.success(o.oc.t("copy_success",{},"Copied"))})}catch(e){s.s.warning(o.oc.t("copy_failed_please_retry",{},"Couldn't copy. Try again."))}},children:o.oc.t("ccug_copy_link",{},"Copy link")})]})}},581483:function(e,t,r){r.d(t,{p:function(){return p}});var n=r(772322),i=r(590839),a=r(259273),o=r(642273),s=r(889715),c=r(150615),u=r(708274),l=r(848303),d=r(185617),p={[i.a.PageRoute]:[{id:a.Sj.Personal,path:o.EZ[a.Sj.Personal],isNeedCache:!d.lY,skeleton:()=>null},{id:a.Sj.GuestPerson,path:o.EZ[a.Sj.GuestPerson],isNeedCache:!1}],[i.a.SideMenu]:[{id:a.Sj.Personal,group:u.Bl.Main,title:()=>c.ZP.t("homepage_top_myspace_button",{},"Profile"),tooltips:()=>c.ZP.t("homepage_top_myspace_button",{},"Profile"),icon:e=>{var{selected:t,isHover:r}=e;return t||r?(0,n.jsx)(s.BDK,{}):(0,n.jsx)(s.oTW,{fill:l.Z.pageIconColor})},appendDividerAfter:!0,position:"top",order:a.us.Personal}]}},903152:function(e,t,r){r.d(t,{p:function(){return o}});var n=r(590839),i=r(259273),a=r(642273),o={[n.a.PageRoute]:[{id:i.Sj.WorkflowEditor,path:a.EZ[i.Sj.WorkflowEditor],layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0},skeleton:()=>null}],[n.a.SideMenu]:[]}},864757:function(e,t,r){r.d(t,{M:function(){return c}});var n=r(85728),i=r(379311),a=r(70529);class o{getEventParams(){return(0,n._)({},this._params)}constructor(e){this._params=e,this.eventName="dependency_injection_error"}}class s extends Error{constructor(e){super(e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="DependencyInjectionError"}}function c(e,t){(0,i.S$)(e,o,[t]),e.invokeFunction(e=>{var r=e.get(a.m),i=new s(t.dependencyId);r.reportDevError("dependency_injection_error",i,(0,n._)({},t))})}},343271:function(e,t,r){r.d(t,{HF:function(){return u},RA:function(){return s},f4:function(){return o}});var n,i,a=r(379311);var o=((n={}).Show="show",n.Close="close",n.Login="login",n.Use="use",n.Confirm="confirm",n);var s=((i={}).LoginPopup="login_popup",i.UsePopup="use_popup",i.InvalidPopup="invalid_popup",i);class c{getEventParams(){var{action:e,activityName:t,popupType:r}=this._params;return{action:e,activity_name:t,popup_type:r}}constructor(e){this._params=e,this.eventName="invitee_model_popup"}}function u(e,t){(0,a.Kl)(e,c,[t])}},491971:function(e,t,r){r.d(t,{Cx:function(){return u},O$:function(){return o},mE:function(){return s}});var n,i,a=r(379311);var o=((n={}).Show="show",n.Copy="copy",n.Vip="vip",n.ClickInviteDetail="click_invite_detail",n);var s=((i={}).ModelActivityPopup="model_activity_popup",i.ModelActivityUseToast="model_activity_use_toast",i.SideBanner="side_banner",i.SystemMessage="system_message",i.CommunityMessage="community_message",i);class c{getEventParams(){var{action:e,enterFrom:t,inviteeCnt:r,activityName:n}=this._params;return{action:e,enter_from:null!=t?t:"side_banner",invitee_cnt:r,activity_name:n}}constructor(e){this._params=e,this.eventName="model_invite_page"}}function u(e,t){(0,a.Kl)(e,c,[t])}},584015:function(e,t,r){r.d(t,{b:function(){return o}});var n=r(85728),i=r(379311);class a{getEventParams(){return(0,n._)({},this._params)}constructor(e){this._params=e,this.eventName="behavior_perf"}}function o(e,t){(0,i.S$)(e,a,[t])}},670927:function(e,t,r){r.d(t,{k:function(){return o}});var n=r(379311),i=()=>{var e="",t=document.createElement("canvas").getContext("webgl"),r=null==t?void 0:t.getExtension("WEBGL_debug_renderer_info");return r&&t&&(e=t.getParameter(r.UNMASKED_RENDERER_WEBGL)),e};class a{getEventParams(){var e,t;return{cpu_cores:navigator.hardwareConcurrency,memory:null!==(t=null===(e=navigator)||void 0===e?void 0:e.deviceMemory)&&void 0!==t?t:0,gpu_info:i()}}constructor(){this.eventName="device_info_report"}}function o(e){(0,n.S$)(e,a)}},406843:function(e,t,r){r.d(t,{v:function(){return i}});var n=r(940140),i={getWeeklyChallengeList:{hostNameType:n.b_.Default,url:"/mweb/v1/get_weekly_challenge_list"},getWeeklyChallengeDetail:{hostNameType:n.b_.Default,url:"/mweb/v1/get_weekly_challenge_detail"},getWeeklyChallengeWorkList:{hostNameType:n.b_.Default,url:"/mweb/v1/get_weekly_challenge_work_list"}}},113219:function(e,t,r){r.d(t,{H:function(){return u}});var n=r(716467),i=r(965058),a=r(168179),o=r(761436),s=r(541177);class c{convert(){var e=new a.DAImageGenerateAbilities,t=new a.DAImageNormalHDAbility,r=new a.DAPostEditParam;return r.generateType=a.DAAIGCGenerateType.normalHD,r.itemId=this._params.itemId,r.originHistoryId=this._params.originHistoryId,r.historyOption=(0,o.J)(this._params.historyOption),r.canvasDraftImage=(0,s.f)(this._params.canvasDraftImage),t.posteditParam=r,e.normalHD=t,e}constructor(e){this._params=e}}class u extends i.${getComponent(e){var t,r=new a.DAImageBaseComponent;return r.generateType=a.DAImageGenerateType.normalHD,r.aigcMode=n.sc[null!==(t=e.mode)&&void 0!==t?t:a.DAAIGCMode.workbench],r.abilities=new c(e).convert(),r}}},251662:function(e,t,r){r.d(t,{z:function(){return n}});var n=(0,r(971245).yh)("lazy-offscreen-canvas-editor-service")},681751:function(e,t,r){r.d(t,{h:()=>l});var n=r("876826"),i=r("789786"),a=r("836413"),o=r("874800"),s=r("243494"),c=r("894412");function u(e,t){return{id:e.id,packageId:e.key,name:e.name,size:e.size||0,cover:t,meta:e.meta,userName:e.author||"",createdAt:e.createdAt||0,updatedAt:e.updatedAt||0}}class l extends o.JT{getUserDraft(e){var t=this;return(0,n._)(function*(){var r,n,i=e instanceof s.yt?e.config:e,o=yield t._userMaterialsService.getEvercloudInstance(i.workspaceId);yield o.forceSyncPullUpdates();var c=yield o.getPackages();(null==i?void 0:i.filterDraftType)!==void 0&&(c=c.filter(e=>e.subType===i.filterDraftType));var l=c.length,d=null!==(r=null==i?void 0:i.limit)&&void 0!==r?r:t._defaultCount,p=null!==(n=null==e?void 0:e.offset)&&void 0!==n?n:t._defaultOffset,v=c.slice(p,p+d),_=yield o.getAssetsByMd5(v.map(e=>e.coverMd5).filter(e=>e)),h=(0,s.ib)(i,{list:v.map(e=>{var t=_.find(t=>t.md5===e.coverMd5);return u(e,t?{url:t.previewUrl,key:t.previewKey}:void 0)}),total:l},{hasMore:d+p<l,offset:p+d});return(0,a.oW)(h)})()}getUserDraftByIDs(e){var t=this;return(0,n._)(function*(){var r=yield t._userMaterialsService.getEvercloudInstance(e.workspaceId);yield r.forceSyncPullUpdates();var n=yield r.getPackages();void 0!==e.filterDraftType&&(n=n.filter(t=>t.subType===e.filterDraftType));var i=n,o=yield r.getAssetsByMd5(i.map(e=>e.coverMd5).filter(e=>e)),c=(0,s.ib)(e,{list:i.map(e=>{var t=o.find(t=>t.md5===e.coverMd5);return u(e,t?{url:t.previewUrl,key:t.previewKey}:void 0)}),total:n.length});return(0,a.oW)(c)})()}renameUserDraft(e){var t=this;return(0,n._)(function*(){var r=yield t._userMaterialsService.getEvercloudInstance(e.workspaceId);try{yield r.renamePackages({key:e.id,name:e.name})}catch(e){return(0,a.wf)(-1,"unexpected")}return(0,a.ly)()})()}deleteUserDraft(e){var t=this;return(0,n._)(function*(){var r=yield t._userMaterialsService.getEvercloudInstance(e.workspaceId);try{Promise.all(e.ids.map(e=>r.deletePackageById(e)))}catch(e){return(0,a.wf)(-1,"unexpected")}return(0,a.ly)()})()}constructor(e){super(),this._userMaterialsService=e,this._defaultCount=50,this._defaultOffset=0}}l=(0,i.gn)([(0,i.fM)(0,c.b),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===c.b?Object:c.b])],l)},638098:function(e,t,r){r.d(t,{d:function(){return p}});var n=r(876826),i=r(85728),a=r(929753),o=r(82615),s=r(836413),c=r(56935),u=r(928885),l=r(365379),d=r(911727);class p{setUserId(e){var t;this._config.userId=e,null===(t=this._sdk)||void 0===t||t.setOption({userId:e})}uploadFile(e,t,r){var i=this;return(0,n._)(function*(){if((0,c.Y2)(e.spaceName,"use vod must set `spaceName` in uploader."),yield i._ensureSdk(e),!i._sdk)return(0,s.wf)(-1,"sdk undefined.");var n=(0,l.N)(i._sdk,{file:t,stsToken:i._convertToken(e),cancellationToken:r});return(0,s.oW)(n)})()}uploadVideo(e,t,r){var i=this;return(0,n._)(function*(){if((0,c.Y2)(e.spaceName,"use vod must set `spaceName` in uploader."),yield i._ensureSdk(e),!i._sdk)return(0,s.wf)(-1,"sdk undefined.");var n=(0,d.I)(i._sdk,{file:t,stsToken:i._convertToken(e),cancellationToken:r});return(0,s.oW)(n)})()}_ensureSdk(e){var t=this;return(0,n._)(function*(){if(!t._sdk){if(!t._mutex.tryLock()){yield t._mutex.lockShared(),t._mutex.unLockShared();return}try{var n,o,s;n=(yield r.e("7163").then(r.t.bind(r,594631,23))).default,t._sdk=new n((0,a._)((0,i._)({userId:t._config.userId,appId:t._config.appId,region:e.region,stsToken:t._convertToken(e),logDomain:void 0,videoConfig:{spaceName:e.spaceName,processAction:t._config.actions},objectConfig:{spaceName:e.spaceName,processAction:t._config.actions}},(0,u.X)(null!==(o=e.overlayRegion)&&void 0!==o?o:e.region),null!==(s=t._overlayHost)&&void 0!==s?s:{}),{getSliceFunc:t._config.getSliceFunc}))}finally{t._mutex.unLock()}}})()}_convertToken(e){return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,SessionToken:e.sessionToken,ExpiredTime:e.expiredTime,CurrentTime:e.currentTime}}constructor(e,t){this._config=e,this._overlayHost=t,this._mutex=new o.L}}},218353:function(e,t,r){r.d(t,{z:()=>p});var n,i=r("789786"),a=r("936226"),o=r("897727"),s=r("680534");var c=((n={})[n.UNKNOWN=0]="UNKNOWN",n[n.HEYCAN=1]="HEYCAN",n[n.LOKI=2]="LOKI",n[n.MUSIC=3]="MUSIC",n[n.TUCHONG=5]="TUCHONG",n[n.BRAND=6]="BRAND",n[n.VIMO=7]="VIMO",n),u=r("755020"),l=r("557343"),d=r("813800");class p extends s.A{get resourceType(){return o.g.Song}get resourcePanelType(){return u.q.Integration}parseHeycanResponseDataToResources(e){return(0,d.Fi)(e,this.resourceType)}getHeycanSongById(e){var t=e.ids.map(t=>{var r;return{id:t,effect_type:o.g.Song,source:null!==(r=null==e?void 0:e.source)&&void 0!==r?r:c.MUSIC}});return this.batchGetResources({items:t})}constructor(e,t){super(e,t)}}p=(0,i.gn)([(0,i.fM)(0,a.Gw),(0,i.fM)(1,l.L),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===a.Gw?Object:a.Gw,void 0===l.L?Object:l.L])],p)},406630:function(e,t,r){r.d(t,{x:function(){return i}});var n,i=((n={})[n.normal=0]="normal",n)},746290:function(e,t,r){r.d(t,{I:function(){return i}});var n,i=((n={}).AiVideo="Gen_Video_Discover",n.Carousel="dreamina-short-video",n.Tone="dreamina_tone",n.VideoTemplate="video_template",n)},312670:function(e,t,r){r.d(t,{G:function(){return a}});var n=r(474956),i=r(343695);class a extends i.L{get resourceType(){return n._g.Font}}},193265:function(e,t,r){r.d(t,{w:function(){return s}});var n=r(265510),i=r(405151),a=r(474956),o=r(755020);class s extends i.B{get resourceType(){return a._g.Font}get resourcePanelType(){return o.q.Font}parseHeycanResponseDataToResources(e){return(0,n.n)(e)}buildCustomRequest(e){var t,r;return{panel:e.panel,client_ab_param:e.clientABParam,panel_source:e.panelSource,category_id:Number(e.categoryId),pack_optional:{need_thumb:null!==(t=e.enableAlbum)&&void 0!==t&&t,only_commercial:null!==(r=e.onlyCommercial)&&void 0!==r&&r}}}}},504867:function(e,t,r){r.d(t,{b:function(){return n}});var n={TRENDING:"/artist/v1/library/giphy/trending",SEARCH:"/artist/v1/library/giphy/search",SEARCH_WORDS:"/artist/v1/library/giphy/search_words",MGET_BY_IDS:"/artist/v1/library/giphy/mget_by_ids"}},536110:function(e,t,r){r.d(t,{i:function(){return o}});var n=r(789786),i=r(434712),a=r(552639);class o{getFeatureBetaTestPermission(e){return this._repository.getFeatureBetaTestPermission(e)}submitFeatureBetaTestSurvey(e){return this._repository.submitFeatureBetaTestSurvey(e)}constructor(e){this._containerService=e,this._serviceBrand=void 0,this._repository=this._containerService.createInstance(a.$)}}o=(0,n.gn)([(0,n.fM)(0,i.t),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===i.t?Object:i.t])],o)},611346:function(e,t,r){r.d(t,{q:function(){return i}});var n=r(836413),i=e=>{if(e instanceof Error)return(0,n.Mx)(-1,e.message,e);if((0,n.oi)(e))return(0,n.Mx)(e.code,e.msg,e);var t=(()=>{if(!("object"==typeof e&&e&&"err_no"in e)||"string"!=typeof e.err_no&&"number"!=typeof e.err_no)return -1;var t="number"==typeof e.err_no?e.err_no:parseInt(e.err_no,10);return Number.isNaN(t)?-1:t})(),r="object"==typeof e&&e&&"err_tips"in e&&"string"==typeof e.err_tips?e.err_tips:"unknown error";return(0,n.wf)(t,r,e)}},20675:function(e,t,r){r.d(t,{L:function(){return n}});var n=e=>{var t,r,n,i,a,o,s,c,u,{story:l}=e,{storyId:d,draftId:p,name:v,desc:_,cover:h,createAt:f,modifyAt:g,storyVersion:y,assetOption:m}=l,S={imageUri:null!==(n=null==h?void 0:h.imageUri)&&void 0!==n?n:"",imageUrl:null!==(i=null==h?void 0:h.imageUrl)&&void 0!==i?i:"",width:null!==(a=null==h?void 0:h.width)&&void 0!==a?a:0,height:null!==(o=null==h?void 0:h.height)&&void 0!==o?o:0,format:null!==(s=null==h?void 0:h.format)&&void 0!==s?s:"",everPhoto:{assetId:null!==(c=null==h?void 0:null===(t=h.everPhoto)||void 0===t?void 0:t.assetId)&&void 0!==c?c:"",workspaceId:null!==(u=null==h?void 0:null===(r=h.everPhoto)||void 0===r?void 0:r.workspaceId)&&void 0!==u?u:""}};return{draftId:null!=p?p:"",storyId:String(null!=d?d:""),name:null!=v?v:"",desc:null!=_?_:"",cover:S,storyVersion:String(null!=y?y:""),createAt:null!=f?f:0,modifyAt:null!=g?g:0,hasFavored:(null==m?void 0:m.hasFavorited)||!1}}},130942:function(e,t,r){r.d(t,{d:function(){return y}});var n=r(876826),i=r(789786),a=r(836413),o=r(346526),s=r(643590),c=r(416105),u=r(875649),l=r(820266),d=r(442452),p=r(280166),v=r(240514),_=r(76252),h=r(282148),f=r(611346),g=r(150615);class y{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new s.y().build({headers:{"Content-Type":"application/json",appid:String(e),lan:g.ZP.language},withCredentials:!0}),(0,v.C)(t),(0,c.mH)(t),(0,u.i3)(t),(0,o.V)(t),t)}return this._networkClientInstance}_getApi(e){var t="".concat((0,_.H)()?h.l.oversea:h.l.cn);return this._httpApiSettingService.getRequestURL({domainType:d.Y.DEFAULT,path:"".concat(t).concat(e)})}fetchCommonResource(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(h.b.COMMON_RESOURCE),(0,l.X)(e));return(0,a.oW)((0,l.b)(r.data))}catch(e){return(0,f.q)(e)}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}y=(0,i.gn)([(0,i.fM)(0,d.x),(0,i.fM)(1,p.Y),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===d.x?Object:d.x,void 0===p.Y?Object:p.Y])],y)},868629:function(e,t,r){r.d(t,{X:function(){return o}});var n=r(895131),i=r(265587),a=[50,360,720].map(e=>({width:e,height:e,format:"webp"}));class o extends n.C{parseHeycanResponseDataToResources(e){return(0,i.Q)(e)}buildCustomRequest(e){var t,r,n,i;return{category_id:e.categoryId,image_info:null!==(n=e.imageInfo)&&void 0!==n?n:{height:2e3,width:2e3,format:"webp"},pack_item_opt:{need_data_integrity:!0,need_follow_info:null===(t=e.packItemOpt)||void 0===t?void 0:t.needFollowInfo,input_image_multi_size_conf:null!==(i=null===(r=e.packItemOpt)||void 0===r?void 0:r.inputImageMultSizeConf)&&void 0!==i?i:a}}}}},893826:function(e,t,r){r.d(t,{G:function(){return l}});var n=r(85728),i=r(929753),a=r(442452),o=r(895131),s=r(599918),c=r(564992),u=r(929544);class l extends o.C{get getResourcesApi(){return this._httpApiSettingService.getRequestURL({domainType:a.Y.DEFAULT,path:c.b.GET_RECOMMEND_SHORT_VIDEO_RESOURCE_BY_CATEGORY})}get requestConfig(){return{params:{aid:this._environmentService.appId,aigc_flow_version:u.currentDreaminaAgreementVersion}}}parseHeycanResponseDataToResources(e){return(0,s.g)(e)}buildCustomRequest(e){var t;return{category_id:e.categoryId,image_info:null!==(t=e.imageInfo)&&void 0!==t?t:{height:2e3,width:2e3,format:"webp"},feed_refer:e.feedRefer,filter:e.filter?{work_type_list:e.filter.workTypeList,filter_map:e.filter.filterMap}:void 0,pack_item_opt:(0,i._)((0,n._)({},e.packItemOpt),{need_data_integrity:!0})}}}},680564:function(e,t,r){r.d(t,{B:function(){return n}});var n=e=>!!e.aigcVideoParam},205255:function(e,t,r){r.d(t,{R:function(){return _}});var n=r(876826),i=r(789786),a=r(442452),o=r(836413),s=r(346526),c=r(76252),u=r(643590),l=r(416105),d=r(820266),p=r(280166),v=r(596220);class _{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(!function(e){e.interceptors.response.use(e=>{var t=e.data;return 200===e.status&&0===t.err_no?Promise.resolve(t):Promise.reject(t)})}(e=new u.y().build(u.D)),(0,l.mH)(e),(0,s.V)(e),e)}return this._networkClientInstance}get _api(){return(0,c.H)()?v.bV:v.DB}verificationInviteCode(e){var t=this;return(0,n._)(function*(){try{var r=new URL(t._getUrl(t._api.VERIFICATION_INVITE_CODE));r.searchParams.set("aid",t._getAid().toString());var n=yield t._networkClient.post(r.toString(),(0,d.X)(e),{withCredentials:!0});if(0!==n.err_no)return(0,o.wf)(n.err_no,n.err_tips);return(0,o.oW)(n.data.status_code)}catch(e){return(0,o.Mx)(-1,"verificationInvitationCode api error.",e)}})()}_getUrl(e){return this._httpApiSettingService.getRequestURL({domainType:a.Y.DEFAULT,path:e})}_getAid(){return this._environmentService.appId}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}_=(0,i.gn)([(0,i.fM)(0,a.x),(0,i.fM)(1,p.Y),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===a.x?Object:a.x,void 0===p.Y?Object:p.Y])],_)},629593:function(e,t,r){r.d(t,{b:function(){return n}});var n={MPACK_IMAGE:"/mweb/v1/mpack_image"}},879026:function(e,t,r){r.d(t,{f:function(){return s}});var n=r(562092),i=r(201636),a=r(804274),o=r(224671),s=e=>{var t,r,{common_attr:s,clone_voice_info:c}=e,{id:u,effect_id:l,title:d,loki_info:p,web_extra:v,effect_type:_}=s,h=(0,a.fs)((0,n.D)(v),a.zW),f=(0,a.fs)((0,n.D)(h.tonetype),a.zW),g={itemPlatform:i.oH.Loki,id:u};return _===o.O5.DreaminaCloneTone&&(g.itemPlatform=i.oH.Local,g.id=u),{id:u,resourceId:l,title:d,lokiInfo:p,isVip:null!==(t=null==h?void 0:h.isVip)&&void 0!==t&&t,disableSpeedRate:null!==(r=null==h?void 0:h.disableSpeechRate)&&void 0!==r&&r,toneType:f,effectType:_,cloneVoiceInfo:c?(0,a.fs)(c,a.zW):void 0,idInfo:g}}},30169:function(e,t,r){r.d(t,{J:()=>y});var n=r("789786"),i=r("719800"),a=r("874800"),o=r("876826"),s=r("442452"),c=r("643590"),u=r("904337"),l=r("416105"),d=r("875649"),p=r("927457"),v=r("465456"),_=r("836413"),h=r("346526"),f=()=>{var e=new c.y().build({headers:{"Content-Type":"application/json",ch:"online"},withCredentials:!0});return(0,u.$)(e),(0,l.mH)(e),(0,d.i3)(e),(0,h.V)(e),e};class g{get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=f()),this._networkClientInstance}get _api(){return this._httpApiSettingService.getRequestURL({domainType:s.Y.DEFAULT,path:v.b.TTS_GENERATE})}generate(e,t){var r=this;return(0,o._)(function*(){try{var n=yield r._networkClient.post(r._api,e,{params:t});if("0"!==n.ret)return(0,_.wf)(Number(n.ret),n.errmsg);var{payload:i,data:a}=n.data,o={payload:JSON.parse(i),data:a};return(0,_.oW)(o)}catch(e){return(0,p.m)(e,-1,"generate tts error")}})()}constructor(e){this._httpApiSettingService=e}}g=(0,n.gn)([(0,n.fM)(0,s.x),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.x?Object:s.x])],g);class y extends a.JT{generate(e,t){return this._ttsGenerateRepository.generate(e,t)}constructor(e){super(),this._instantiationService=e,this._ttsGenerateRepository=this._instantiationService.createInstance(g)}}y=(0,n.gn)([(0,n.fM)(0,i.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===i.T?Object:i.T])],y)},401309:function(e,t,r){r.d(t,{p:function(){return u}});var n=r(85728),i=r(216342),a=r(247170),o=r(128468),s=r(104170),c=r(624780);class u{get repository(){return this._repository}publishCanvasImage(e){var{title:t,description:r,activityKeys:n,coverUri:o,workspaceId:c,draftId:u}=e;return(0,i.Rr)(e=>this.repository.publish(e,{itemType:s.$.Canvas,title:t,description:r,actKeyList:n,icon:o,canvasData:{workspaceId:c,draftId:u}}),{contextType:a.zO.Task,processName:"canvas",operationName:"publishCanvasImage"})}transferEverPhotoAssets(e){var{workspaceId:t,assetIds:r}=e;return(0,i.Rr)(e=>this._repository.transferEverPhotoAssets(e,{assetList:r.map(e=>({workspaceId:t,assetId:e}))}),{contextType:a.zO.Task,processName:"canvas",operationName:"transferEverPhotoAssets"})}publishImageHistory(e){var{itemIds:t}=e;return(0,i.Rr)(e=>this.repository.publish(e,{itemType:s.$.Image,itemIdList:t,mode:o.JU.Canvas}),{contextType:a.zO.Task,processName:"canvas",operationName:"publishImageHistory"})}publishTextArtHistory(e){var{itemIds:t}=e;return(0,i.Rr)(e=>this.repository.publish(e,{itemType:s.$.TextArt,itemIdList:t,mode:o.JU.Canvas}),{contextType:a.zO.Task,processName:"canvas",operationName:"publishTextArtHistory"})}publishCanvasDraft(e){var{title:t,description:r,activityKeys:c,coverUri:u,workspaceId:l,draftId:d,draftUri:p,publishedItemIds:v,transferredImageUris:_,paintingImageUris:h,sensitiveTextInfos:f}=e;return(0,i.Rr)(e=>this.repository.publish(e,{itemType:s.$.Canvas,mode:o.JU.Canvas,title:t,description:r,actKeyList:c,icon:u,canvasData:{workspaceId:l,draftId:d,draftFile:{fileUri:p},itemIdList:v,everPhotoList:_.map(e=>({imageUri:e})),brushList:h.map(e=>({imageUri:e})),textList:f.map(e=>{var{text:t,artEffect:r}=e;return(0,n._)({text:t},r?{itemId:r.currentItemId,runeList:r.textInfos.flatMap(e=>{var{charInfos:t}=e;return Object.values(t)}).map(e=>({fileUri:e}))}:null)})}}),{contextType:a.zO.Task,processName:"canvas",operationName:"publishCanvasDraft"})}constructor(){this._repository=(0,i.bu)("ProductionRepository",new c.E)}}},66176:function(e,t,r){r.d(t,{i:function(){return _}});var n=r(876826),i=r(789786),a=r(836413),o=r(346526),s=r(442452),c=r(643590),u=r(416105),l=r(875649),d=r(927457),p=r(640481),v=r(879976);class _{transferAiPhoto(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getApi(p.b.TRANSFER_PHOTO),{workspace_id:e.workspaceId,item_id:e.itemId});if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.oW)({workspaceId:r.data.workspace_id,assetId:r.data.asset_id})}catch(e){return(0,d.m)(e,-1,"transfer ai photo fail error")}})()}get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new c.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,v.V)(e),(0,u.mH)(e),(0,l.i3)(e),(0,o.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:s.Y.DEFAULT,path:e})}constructor(e){this._httpApiSettingService=e}}_=(0,i.gn)([(0,i.fM)(0,s.x),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===s.x?Object:s.x])],_)},64790:function(e,t,r){r.d(t,{j:function(){return c}});var n=r(836413),i=r(820266),a=r(804274),o=r(588735),s=r(535823),c=e=>{var{ret:t,errmsg:r,logid:c,data:u}=e;if("0"!==t||!u)return(0,n.wf)(Number(t),r||"aigc submit task error",{logId:c});if(u&&0!==Number(u.code))return(0,n.wf)(Number(u.code),"submit error",{logId:c,data:(null==u?void 0:u.aigc_data)&&u.code!==o.sb.RateLimit&&(0,s.ZF)((0,i.b)(u.aigc_data,a.zW))});var l=(0,s.ZF)((0,i.b)(u.aigc_data,a.zW));return l.generateId=c,(0,n.oW)(l)}},316115:function(e,t,r){r.d(t,{n:function(){return n}});function n(e){return!!e&&e.startsWith("blob:")}},707882:function(e,t,r){r.d(t,{S:function(){return c}});var n=r(789786),i=r(936226),a=r(721434),o=r(897727),s=r(662307);class c extends s.J{get resourceType(){return o.g.Video}parseHeycanResponseDataToResources(e){return(0,a.Mk)(e)}constructor(e){super(e),this._capcutAccountService=e}}c=(0,n.gn)([(0,n.fM)(0,i.Gw),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===i.Gw?Object:i.Gw])],c)},601057:function(e,t,r){r.d(t,{r:function(){return d}});var n=r(85728),i=r(929753),a=r(789786),o=r(557343),s=r(677761),c=r(56935),u=r(44924),l=r(322289);class d{reportBusinessEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};void 0===t.url_path&&(t.url_path=location.pathname);var{immediately:i=!1,important:a=!0}=r;a?this._teaAdapterService.ensureTrack(e,t,i):this._teaAdapterService.track(e,t,i),r.syncServer&&((0,c.ZB)(this._requestStub),this._requestStub(e,(0,n._)({session_id:this._teaAdapterService.getSessionId()},this._teaAdapterService.getCommonEventParams(),t),this._teaAdapterService.getTeaConfig()))}reportBusinessEventByServer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.ZB)(this._requestStub);var r=this._teaAdapterService.getTeaConfig();this._requestStub(e,(0,n._)({session_id:this._teaAdapterService.getSessionId()},this._teaAdapterService.getCommonEventParams(),t),r)}reportBusinessExitEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.reportBusinessEvent(e,t,(0,i._)((0,n._)({},r),{immediately:!0}))}reportDevEvent(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this._slardarAdapterService.sendEvent(e,(t={},Object.entries(r).forEach(e=>{var[r,n]=e;("number"==typeof n||"string"==typeof n)&&(t[r]=n)}),t),n)}reportDevResource(e){this._slardarAdapterService.reportResource(e)}reportDevPerf(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._slardarAdapterService.sendCustomPerfMetric(e,t,(r={},Object.entries(n).forEach(e=>{var[t,n]=e;"string"==typeof n&&(r[t]=n)}),r))}reportDevError(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._slardarAdapterService.captureException(e,t,r)}createReporter(e,t){(0,c.Y2)(!this._reporters.has(e),"reporter existed.");var r=new l.O(t,this);return this._reporters.set(e,r),r}createSamplingReporter(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new u.R(r,this,t);return this._reporters.set(e,n),n}getReporter(e){return(0,c.Y2)(this._reporters.has(e),"reporter not existed."),this._reporters.get(e)}reportPv(e,t){this._teaAdapterService.reportPv(e,t)}constructor(e,t,r){this._requestStub=e,this._teaAdapterService=t,this._slardarAdapterService=r,this._reporters=new Map}}d=(0,a.gn)([(0,a.fM)(1,s.w),(0,a.fM)(2,o.L),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object,void 0===s.w?Object:s.w,void 0===o.L?Object:o.L])],d)},161970:function(e,t,r){r.d(t,{v:function(){return m}});var n=r(876826),i=r(85728),a=r(789786),o=r(302107),s=r(567934),c=r(843698),u=r(836413),l=r(638106),d=r(378081),p=r(56935),v=r(233307),_=r(861534),h=r(765652),f=r(312518),g=r(503006);function y(e,t){return"".concat(e,"_").concat(t)}class m{get onSuccess(){return this._value?(0,s.V)(this._value):this._onSuccess.event}get onFail(){return this._error?(0,s.V)(this._error):this._onFail.event}get key(){return this._options.key}get status(){return this._status}get value(){return this._value}get sourceFrom(){return this._sourceFrom}get error(){return this._error}get downloadType(){return this._downloadType}set downloadType(e){this._config.downloadType=e}fetch(){var e=this;return(0,n._)(function*(){if(e._status=v.lh.Loading,e._clearCacheIfExist&&(yield e._deleteResourceCacheIfExist()),e._databaseFirst&&(yield e._fetchByStorage()),e._status===v.lh.Loading)e._options.url.startsWith("blob:")?yield e._fetchByBlobUrl():yield e._fetchByNetwork()})()}cancel(){this._downloadService.remove(this),this._cancellationTokenSource.cancel(),this._fireFail((0,u.wf)(l.pY.Cancelled,"download task canceled."))}startImmediately(){this._downloadService.startImmediately(this)}equal(e){return(0,o.v)(this._options,e._options)&&(0,o.v)(this._compareConfig,e._compareConfig)}toJSON(){return{options:this._options,config:this._compareConfig}}get _compareConfig(){var e={};return this._config.cacheInDatabase&&(e.cacheInDatabase=this._config.cacheInDatabase),this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),this._config.headers&&(e.headers=this._config.headers),this._config.disableTokenHeaders&&(e.disableTokenHeaders=this._config.disableTokenHeaders),e}get _downloadType(){var e;return null!==(e=this._config.downloadType)&&void 0!==e?e:v._5.Idle}get _cacheInDatabase(){var e;return null===(e=this._config.cacheInDatabase)||void 0===e||e}get _databaseFirst(){var e;return null===(e=this._config.databaseFirst)||void 0===e||e}get _clearCacheIfExist(){var e;return null!==(e=this._config.clearCacheIfExist)&&void 0!==e&&e}get _headers(){return this._config.headers}get _disableTokenHeaders(){var e;return null!==(e=this._config.disableTokenHeaders)&&void 0!==e&&e}_deleteResourceCacheIfExist(){var e=this;return(0,n._)(function*(){var t=yield e._storageService.database.connect(_.g.id,h.d.name);if(!t.ok)return!1;var r=t.value,[n]=(yield r.delete(e._options.key,{durability:"relaxed"})).pair();return(!n||!!n.ok)&&!0})()}_fetchMetaByStorage(){var e=this;return(0,n._)(function*(){var t=yield e._storageService.database.connect(_.g.id,h.d.name);if(!t.ok)return t;var r=t.value,[n,i]=(yield r.query(e._options.key,{durability:"relaxed"})).pair();return n&&!n.ok?n:i?(0,u.oW)(i):(0,l.PX)()})()}_fetchDetailByStorage(e){var t=this;return(0,n._)(function*(){var r=yield t._storageService.database.connect(_.g.id,h.z.name);if(!r.ok)return r;var n=r.value,[i,a]=(yield n.query(y(e.uniqueId,e.decryptHash),{durability:"relaxed"})).pair();return i&&!i.ok?i:a?(0,u.oW)(a):(0,l.PX)()})()}_fetchByStorage(){var e=this;return(0,n._)(function*(){var t=e._fetchDetailByStorage({uniqueId:e._options.uniqueId,decryptHash:e._options.decryptHash}),[r,n]=(yield e._fetchMetaByStorage()).pair();if(r||n.uniqueId!==e._options.uniqueId||n.decryptHash!==e._options.decryptHash)return;var[i,a]=(yield t).pair();if(!i)e._fireSuccess({key:e._options.key,url:e._options.url,uniqueId:e._options.uniqueId,decryptHash:e._options.decryptHash,contentType:n.contentType,buffer:a.buffer},v.Gu.Cache)})()}_fetchByNetwork(){var e=this;return(0,n._)(function*(){try{var t,r,n={};if(t=e._options.url,!/http(s)?:\/\/lf\d-lv-buz\.vlabstatic\.com/.test(t)&&t.match(/origin/)){var[a,o]=(yield e._evercloudTokenDataService.getEvercloudToken()).pair();!a&&!e._disableTokenHeaders&&(n={"x-everphoto-global-session-token":o.token,"x-everphoto-token":o.token})}var s=yield e._networkClient.request({method:"GET",url:e._options.url,headers:(0,i._)({},e._headers,n),withCredentials:e._config.withCredentials,signal:e._cancellationTokenSource.signal}),c=s.data,l=null!==(r=s.headers["content-type"])&&void 0!==r?r:"";e._fireSuccess({key:e._options.key,url:e._options.url,uniqueId:e._options.uniqueId,decryptHash:e._options.decryptHash,buffer:c,contentType:l},v.Gu.Online),e._cacheInDatabase&&e._cache(c,l)}catch(t){if(e._cancellationTokenSource.token.isCancellationRequested)return;e._fireFail((0,u.Mx)(-1,"download error.",t))}})()}_fetchByBlobUrl(){var e=this;return(0,n._)(function*(){try{var t,r=yield fetch(e._options.url),n=yield r.arrayBuffer(),i=null!==(t=r.headers.get("content-type"))&&void 0!==t?t:"";e._fireSuccess({key:e._options.key,url:e._options.url,uniqueId:e._options.uniqueId,decryptHash:e._options.decryptHash,buffer:n,contentType:i},v.Gu.Memory)}catch(t){e._fireFail((0,u.Mx)(l.pY.Interrupted,"download error.",t))}})()}_fireSuccess(e,t){if(!this._cancellationTokenSource.token.isCancellationRequested)(0,p.Y2)(this._status===v.lh.Loading),this._status=v.lh.Completed,this._value=e,this._sourceFrom=t,this._onSuccess.fire()}_fireFail(e){if(this._status!==v.lh.Error)this._status=v.lh.Error,this._error=e,this._onFail.fire(this._error)}_cache(e,t){var r=this;return(0,n._)(function*(){(yield r._cacheDetail(e)).ok&&r._cacheMeta(t)})()}_cacheMeta(e){var t=this;return(0,n._)(function*(){var r=yield t._storageService.database.connect(_.g.id,h.d.name);if(!r.ok)return r;var n=r.value,i={key:t._options.key,contentType:e,uniqueId:t._options.uniqueId,decryptHash:t._options.decryptHash};return n.set(t._options.key,i,{durability:"relaxed"})})()}_cacheDetail(e){var t=this;return(0,n._)(function*(){var r=yield t._storageService.database.connect(_.g.id,h.z.name);if(!r.ok)return r;var n=r.value,i=y(t._options.uniqueId,t._options.decryptHash);return n.set(i,{uniqueIdWithDecryptHash:i,buffer:e},{durability:"relaxed"})})()}constructor(e,t,r,n,i,a){this._config=e,this._options=t,this._networkClient=r,this._downloadService=n,this._storageService=i,this._evercloudTokenDataService=a,this._status=v.lh.Waiting,this._onSuccess=new c.Q,this._onFail=new c.Q,this._cancellationTokenSource=new d.A}}m=(0,a.gn)([(0,a.fM)(4,g.U),(0,a.fM)(5,f.o),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof IDownloadConfig?Object:IDownloadConfig,"undefined"==typeof IDownloadOptions?Object:IDownloadOptions,"undefined"==typeof NetworkClientInstance?Object:NetworkClientInstance,"undefined"==typeof ResourceDownloadService?Object:ResourceDownloadService,void 0===g.U?Object:g.U,void 0===f.o?Object:f.o])],m)},954746:function(e,t,r){r.d(t,{H:function(){return a}});var n=r(56935),i=r(233307);class a{addTask(e){(0,n.Y2)(e.downloadType===i._5.Eager),(0,n.Y2)(!this._tasks.has(e),"duplicate task."),this._waitingTasks.push(e),this._tasks.add(e),this._tryStart()}removeTask(e){var t=this._waitingTasks.indexOf(e);t>=0&&this._waitingTasks.splice(t,1),this._tasks.delete(e)}_tryStart(){this._next()}_next(){if(this._activeTasks.size===this._concurrency)return;var e=this._waitingTasks.splice(0,1)[0];if(!!e)this._executeTask(e)}_executeTask(e){this._activeTasks.add(e),e.fetch().finally(()=>{this._activeTasks.delete(e),this._tasks.delete(e),this._next()})}constructor(e){this._concurrency=e,this._activeTasks=new Set,this._waitingTasks=[],this._tasks=new Set,(0,n.Y2)(this._concurrency>0)}}}}]);