"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["5912"],{761358:function(e,t){t.Z={"side-menu-narrow-screen-width":"1366px",sideMenuNarrowScreenWidth:"1366px","side-menu-narrow-width":"74px",sideMenuNarrowWidth:"74px","side-menu-wide-width":"238px",sideMenuWideWidth:"238px","activity-middle-screen-width":"1280px",activityMiddleScreenWidth:"1280px","activity-large-screen-width":"1536px",activityLargeScreenWidth:"1536px","explore-feed-max-width":"1650px",exploreFeedMaxWidth:"1650px","explore-feed-max-width-screen-min-width":"1936px",exploreFeedMaxWidthScreenMinWidth:"1936px"}},782148:function(e,t){t.Z={masterpieceModalWrapper:"masterpieceModalWrapper-B2_7bS",masterpieceModal:"masterpieceModal-ALIZTp",masterpieceModalHeader:"masterpieceModalHeader-IccNPM",title:"title-FEUan2",closeBtn:"closeBtn-9FjgMA",contentContainer:"contentContainer-_d4Xm7",contentWrapper:"contentWrapper-xRy0AJ",leftContainer:"leftContainer-uhQ7Yn",rightContainer:"rightContainer-l6oy69",item:"item-MquwtD",publishContainer:"publishContainer-mZ9SA4",publishCollection:"publishCollection-J0jj0S",publishButtonContainer:"publishButtonContainer-EdFO_z",btn:"btn-z4nKKP",publishButton:"publishButton-noiIcU",cancelButton:"cancelButton-ynqds2",label:"label-ONP26R",controll:"controll-s0Dlv0",videoControll:"videoControll-CQ8ViE",row:"row-llZE_T",content:"content-v1qv82",switch:"switch-eZIqd4",textareaWrapper:"textareaWrapper-y0gmvg",isFocus:"isFocus-Lg7ZKO"}},4046:function(e,t){t.Z={optionWrap:"optionWrap-NnlhiE",optionContainer:"optionContainer-OdatpP",linearBg:"linearBg-t9pMoB",multiSelectTip:"multiSelectTip-fnTE6w",question2Option:"question2Option-ChsGyk",active:"active-Kzso3o",optionText:"optionText-QvzwBW",textWrap:"textWrap-SaSBM8",hideOptionText:"hideOptionText-fhQ_YM",optionDescription:"optionDescription-v0X3VT",image:"image-v1XQVb"}},54891:function(){},673652:function(){},326783:function(e){e.exports="data:image/webp;base64,UklGRogQAABXRUJQVlA4WAoAAAAYAAAApwAAugAAQUxQSMQEAAABoEbbtqlHOtW2bcW2U7Zt27Zt27aDclWckdcq23a9UV/66zin8b0vD/fu7p8RMQEk5JdffpkQ7viAC+6ujEUnZLqNHZ+d443Ll4OPsfNZbX6ApGpyPusY3wwM19qLVNb7yfIIGFyrJrPB57tB0Cwun01o31VXcr47n7Fp7892l1bApOts8qSWX0rIteUBtqJ9XWnJlD7C1r023V0a3ffa2OJHG70ugdJzL9lslmN+MshfcM1+ZmYhMBcojYT16fA4FuzTTXVFVHq9ncX79Glp0bjPsrOInzLnDo0MqfKVQOJY7EkCuSm4XIGw6KOFUeea6EYJY6LwsoRxTXgsisos/mGCWC2Byy+KIVcCHCaEqSzDbSL4zCYFFsFUlmOc9WJZltUtd0caT9612FmW53prxbFMu1kpneVa3TJlr7Jkc6pbZBBLePpLFih/gqV84C2zNc5kWWd4mcivxcHbLPOjVcxRL+keyz+9uRlUxlDdWtXFKAYyAyaOMiQEisqGVIRiiCGtoZhqSH8odhsyGopMQyZAcc6QmVAohiyH4o4ha6CwGbICikJDFkPBhqz8X8ZuyBIonhuyB6YkKM7o1erxY77OUJ7Sqc1jhtPWuEZpHX7M4ceP0fj3Nf8SrWZUbRVK8FYeLKy6OdeVgU127jgyHOyMD0PbzZmu2Gx3Zic2l5y5hQ07w+C6a4WhU1GrBjo9tAajM0drNDrbYMrSGovOGZhuaA1BJ0erHTrPtZqgc1OrDDr3tb5H508tQucJTBc1mmSgc9zRaoY39+1/tWeAD/1ARDcQYlsUNWGM1bfWg8Qd0lDaoaJ0UlVBOquyitHxkwyycgilXxejdKo3Sr9XQSn1G5QOUjZIi2gfSG2pG0jh5IZR7ktEjyE6SkSLIOpBRGEIFX1BRIRQIv17GEB1HVAuPA9edDQfnQeDSbMQnXe0NoIzhZzERiWUZmhVzczGhjRnZmeD08bRbMb3YZ8XidwZ4vVEAzDiJjQapAQaBFIheYNUQJSG0V2ifhitI6JnEDUjokkI5bxDRN/mArSR/j0eoCAHr/wKzzRyHJELzhXSHoPN81gn6Bg0Q8npM8DspRLehGXvWyUJQmXvh1TicBsiqvo96RhpQySKdK2Ah1qTdC73BAw1inQv/wwK1Y8MdLkNxP0AMjYLBsWHjE4EQfmCjJ8BgfIGmbFrnvzWkUnrXb4suSlkWm/JtSQzH5fYkwpkbkVav5HZ30+R1GEy/0ePpDS9lMl+KNP57FmWsTp9erSJYhelF7PMi47v6Ottgjpb7Qzhrc3lDQlZ94fdjgLf+r2ufrsYylvMh3Ryucp4Kt66XGVElW91cMeEFR0qMKg6uKMSUTK6AQrpOA6T+3p8Z4ekmR40DpEtpO+xc3Ckkt5wKKT7J+ewUF7Rj2g1ELlLyNjNz1C4HERGf74ZgwVvkQmDM+SnBJFJK+3Lk9jFixebkYk99kls7Mtk8s6HpKS0JEuOPiOZa/N8ybIu+/blyuLwkACyes31t0T38MDw0iTIgJ7xt0R1YXcbHxKsS7XNrIqlMHlde08StXvFCftOi+BC0rS6QSRBr3IDlx1LumONpKUjqseSdH8oXanz6KXMcUlHkwx1MHtgtdLhL9N/YFZQOCAqCwAAkEUAnQEqqAC7AD9xoMRatKunpDN4zYqQLglsCHABgP9dsOPgI3awumR2J2FP6bxH/w3cI7TZhwSRl9/jbL2eh/+/OT+8f+7giuAq3VP3PUtjLXxdL2n/FxwBxy52Ghg8T3isoHDj1yCIMBV72vSf2Cx8DHUEr+9KXH4N+y3xybTypWEuti8ucJmZPpb6Do1ceEiaezjL4Gt/hy6KfAML+oOy22w3awEyruPyBHx3QSWZXHT4I7sKiagIII9k/6VMi2XDl6RQyTQGNSE3bS4NtB/0eMKezMnh2CAASU+b11w3bzcbhTaeulxb3VP7WYWbU3RkQMpoAzqeus0Se6jiAmvHNGd/s/caKB5llgkuAXQn6olsrj1c6aOli9bfnTWg+zCHyySi1/T3pXUHhyOAP5N3w9QaooXwr8sZ8Kn5t1eaze6BJXB/dCLQKJenZoG0BDvSp5AwTHJiMI0c61mxzItC3shPqHC49WlMJO2+fifz8d5Ftx0o63W7A80N/La+rJxisdAqeZkBSi6nAqxdttoMcw6W12HQqdMSNnUvFm0B1dKJT7/N7mAiNM2hJeWHIN2nCkl2Myo//FquYKItTUwCDEy0Tdu9FFWR6fsjf9vclN6Kr/Ml2oOL/RM35dcBuYNKs79fEk13XdhQT0M5xL8B2Fh+KRAprSU9At7/ffAJbTA+cpOqqGfYxeCbRZWNimv83NjG6GtAYfz66X5MzMUiFPQ73yfBOvojTjU8Yfmf2Dv0AAD+VFgIT8cKyV0eiEkoY2jFtRJO8Qej/R/KBU93H/eOHeIP/Zwm8ckoSyxIV3uhSiOHjWo4OOQoPFFNTpWgxiQlQ6KAPJ7a4kosRJ4H9AwXeSMsYVUcqJbzIJvxq3X8TcBlX76CW5VCuR16pehbn/v1vblNK6s6Xfn3cdKzGjClXLJ20z4WZvbyM4m9pvo1cuxuyE5YMf8/2c2YpiiB6/WavcuPXvmWb3LYqOVq3//E54ipDleSVNMcge8KH1uL2HJQXFCmzKZwvD6C3/uxtnYsFfN/sxiRqDneaA4YF+J8AmMkAgW8a5VlgDDTaaIGjb87h9IX9t2+OkDD98C/iFy0YMpmykh/LDqSSL+ApKUuehXYWTCmQin5wvo9iSUELnSjl+6eqRBHBUuxVZ9/LYlvC/MtDdOTeiQLrxOldtIXXEYpszqvQinli5rQchSBwkiVnwAdvwoQWTKUv2UqathSWGhNf8CYf7sbVhBJlL73Brtes8y+PrTdB25ZboiuERYsXOE6xgEJzre8wdWyVfBbWhwVLZuuY3XLUo0Og9rtrufqcjC0jMEC37jX359M8BsK5MvnWmEMvk8bcQVg+ekqdaUZtd4z8+RLzBaAWCfvFiWL6Px2eNtsoT0ZjqBnAOdNspHqPb/2iza227UcmLcdfJ720f3TJvHCMcMC4bVY4j0k28nQ+5kE/31zbRvjSXUgMydzCUk6ZaF1dTVvNa6Qds9U4xjJnT1GgxP6a6FAGg/tgC6UsaPmNXZdfix+80hzLDlfJP55Cf9NwOcvNtgRAr7KZ1kGHSL6yquOPg1PaxJZ1wXdy+KmKmHpsbg34TwPu81BlHkieiSXhCOUdwpwX8nz1YyW9B/m+j95Khvm6zQp8OamdLFfwpZOaDl5PQVT5kMS+f8n2h3tz3k3UaobU81oAZpXX/VQPzUb5sDR1UiTonMf8tPGJFL95E9WUUGk1bZjZYLWb/FrzO//skO+Tb2eMrGWKUqn2JgsZteXxn7nVrGeRXEArcRyML1gFIO0+FciIgHPqdCxTdsKbx2CTShOafU/un4lewqagMWgfjC2F4VfcZfuZltS2LMenF1RCl1ARDFo3i3df5H+II7Jq7Ur5Dt4rw01ffAuW5PkqrnmiUC/yuTOKPynEIWLz03ONBVfjLjVLRrtayHf6PlWXN5Xg9NqHAD1IJquApCv6J4q9Sk2L1OVP8QSKECznIoZY1iGQXDyjZu06QORphtx4MN5l2FkgJikFBVg6pK3SiJYR1iT9u32MCr7yBh3L6lsWaVcAaiNrGeibhnTYZQWU5zN3sRZafpOvepNwC5mnlQVRabj0NuD7i4LEw2MMYX5dfCyjJc9UgSECgXt7EOLnTHu7QOW/g4LQYKW3JVqQD/14NrHpIcjvl21cvf41YRoZziVmmdyWDIkX58Bll4mdWfzMA0111tHJjfi9XYufJcDrnzN+dbXT9kcTVfzIa0AIduabzBv9K0w7PIUKO5tyuFChkt/3pMKINyYfNV64HVuXed8cdbjfPcTEqD5/S+EOq/JgQk1hc8Cod25/L5y2gUp3qazJ0VdTYMG50v/IPiQ8ucOTXFLu0xHG318marbE3LE21P5LdPHeFiKFa/8GKqqhyw2aTZeeL+bWJmXq+urNU17k22shARLnUnRI5rTTsEqNaLTm+M3HslktUw/fY/DgCMjB9Gf5lfJ19qX5HVyqYgNHIrNOQBoKTgEQxLeNcI0Bf6fh9zLvv/PcBjP1OW6T3hVn9kTspll9v+9EQgHgrjDwE+JZF1ldmOusSkPndA0/ilswooIY4qCL/y7uzI8UGprwzijoJU7YPmf8t8d4nZw0Id7/HsfTtVKOqhl/EsDcBX8gIciLFz3nuhM+xY8tQ2+DBgRF8OmU7zG34bx99vzDrXk3mP/WbmgM5YyoEmTLDamYJi3IPdm3NXDZNrfTJW/uw+GqVyG0acI+3a1SoXXH+h/am539Q0t78rdw++gJDyZUal2X7okADjvozv1X3fi4+wNM4FMg7cKxwKe9dRIQT3bDhIlvO1mhoFGLkUDl7NTLE7FW/VYnLAVDzOSAGGjTQJ7rTTFVQ7N9Yo0qSH5PTEZ8LcCZXmjkQHmlndZkN8hGmD8TnL3jBn7LHa5iIa/xViOR7ARNvi6ZtGcDPG7/el8JCP8fnWGI5C10Oj/leNhP1N6H71QeBEPJkIet2SY4GGmHR/He0QPzxL7LIrwJCnMw9CtXui+jq4UanfmgT90sD7N4hH0P1hEYDXduCztyKCvHb+u+K5bVOIo9O6ahf60ZveTSEsJr51WkfJuTlB8hjg6Dwov0Z76I7Tfk7H2xIrdZh4vwuV0uu+mI9YNkBgAGgLH89eVRk/IHQvv+0iU6Z2Zf8kc37NMMcUa+PQleJIOdz7Xnlk4hcgv/Qda1i2VTMRx2Ps193KGnNkfQRuCHaYWwWfwxp3cE5BHlDPmtDkzt73mbZhaKpIQbOY7eFDokP0T3bJgf5JRuv5jl8F1QaKNOxOw8dWBNsrAkOKO7DAyGVyGmcXUfXyQckWffzQ0hxp9kslZ7NMRaBOZPQKq6juI+L7EV+ztYdbG2tbNcKnBC0qyykr7GWN/jFJkgq9e3Vbn80Pd728eTXJfdulI9V7cwpCww6Ge+FezBEJzdydIfAD5UyFzZwUvMiFT+k1ZRvL1WKCvONuzvbD07gk8y7wrI8ykcu/pEuUC7B6hbS/xiiXF3j7O9QATUBYHQiapGVoeXfyZjoKWeqIuGcBHzF4khSe/KIUWtyDy9RbTymDWufZMVJpapxpK0k4TFtrTrUQkDGHQEKSY1hURq3iqSHwV10Xylkm+Wo5D9M7G5mzeJshy31JMbA354moEFiBVOC4ZC6BPoywyOmp6gf4o9vxdAh49f6PMsTjJvhqvzuu1uyxVmFpEbECpj6xrSTIFSqttwDGVds85dbHCI+p9XUArprM4/+zKvyU7eCuWjBw6+n/xYEBenAFUAp0k0rZ7/+PNsQBFzF4Ceuwa1AtncoJ6JpguU/Uf4A8fmLYZ//V+e//XqxzUAigAAABFWElGbAAAAE1NACoAAAAQRXhpZk1ldGEABQEaAAUAAAABAAAAUgEbAAUAAAABAAAAWgEoAAMAAAABAAIAAAExAAIAAAAKAAAAYgITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAABZXpnaWYuY29tAA=="},832226:function(e,t,r){e.exports=r.p+"static/image/mobile-tips-banner-bg.4a3f26c9.png"},854626:function(e){e.exports="data:image/webp;base64,UklGRh4LAABXRUJQVlA4IBILAAAQcwCdASrcBeAAPtFoq1K/ta2noNqog/AaCWlu4WYKMxSUQ6rW/a37zniC+gt1fQL+TVP8A18uksYte8GrlP0AwpYRZLdwXoRWEBEwJb2TZEoOCLFoiinlJtpu+PrAF4A3uVnGtXamnwhg+secJvX6L1KfWPNqafCGD6x538Noidpvf+bAkPzfGBkGm48bLT4s3f8M43mMTP8qf9xD8+/LK/1ihZ0kdp2EPNNTTLyad8pfXxIF4PFOAFB1lrOpCApXyTWPmBr+4Yr6YQ1NDCuo0r1IlEwHc/jzNll9wbNPhDB9Y82yr/9/zWNgdMHyMDH4WmMcPhDB9ZsKP+bvkl02OpP0d4Oa89/1IBw0TAjzGZ/3hh7BNDB9Y82pp8JNIxdyRuAEeOLlcoCAs47m0xjh8IYPrIDk7pASydgxLk4h1RtceloKNoFbedQWY7LTqV+lsnB95JK8fXxHfVjzamlUvQTSK0DIiLu3/gTnrxbTGOHwhg/fJ/vGKjkUmYQG//xxXeMvNO6bEknR8IybzY+dYBHS3802Lz6E2mMcPhDB+1BwktywiLw38PvNr8dw0w+EMH1jzhNowzBPSQULC/zyn9k09hBv6Wlu2Siv6eZn7BnCXrh8IYPrHm1NKn9WQAAY8yqzDMJoUdSLqOe1D6+I76waObbdrpBn5Nmu6nkUZi6BnJjkITurhalNrDu0jUlsD4SS0xjh8IYPrHnS7+0sbno87EOb4x33EBT+lUBMZrV2pqReY5SLp51RxSQo1hTUFCxcpilmKCSPPm2vDaGx4Kcx5tTT4QwfWPNqakWUTdFp7+DAICceIGrfBDoP+jo1iz8n0w+MbZ+CKOrpQL5egy25ixF51OE7Gdept4WSgt9VldWTRCXoTaYxw+EMH1kB0bSku4VV4TCFZjBv08ywpuUf/FeLohP6aD6ygyrpgKQIUBSC+xbDODEvNUEcqKZzHH1jzamnwhg+sebVMWXUKYCK7bv/zXBppWSKQQaOw6eFnmObEk7QN8L3EEklgKlcsMUx5RVVZH+P9uw7VhnFk48lEfWPNqafCGD6WdhtFbTq2q3Sg/ZH/v5+w43sB42/JCwoYThAPrvixZakQV4tr25/Ol7ExJjjzamnwhg+sebU0+JFDKLAFs6PJhp4jjVjFqI5dfZ6DZ5hSPFwJcI/KjHwxowpuLdJoYPrHm1NPhDB9Y82pp8JNNN2G4gKV57sTrOL7uvSfLoDubW4xfnPgAD+95pbo0OfqlpNDb7L+WPX/K/04+lfwsaUyy2h42gnCeVb8v3Wu6jsY3TqY9tmA2s55G2RBNLxi0HGEk+xwcZAOHQ6fPfADZghmnECqYtgGSmzGrxwCSMp3gd96GYO9AYEyyNJpK0ujTWFd4tQYamIR8hyn0r6ZzMdt6HgDaHMrlwVLYR3vYfQSuBC6G5MjVgvIFPRTz95wx6qoP01I8Mluau0I1zSTDjzKytN+zMLfZ6hbW1HmYW+z1HOQLDn6d8z3IEOCUTqa5cO65hlhSIksF318bEWQ3HYLvr42IshuOwXfXxsSijsPoISdeQAAaYFt2VM55blavCOb7HIFZzpaEhSAnJGxUGWVMZcydRdEt7dh0r/LltoEZXfzUHsPDG2XA6ll5XBlkV5cxVry41hyRIFqFKZ0wTq3oAAAAAAXMqgtf3eXvY1GpnaFX31JSEb+n219khzoBoAAAA+flYBRynpF9Lx2xFIA1HnVHsOnoma1GzDl2HBLJLLd4cTzogGn2ys17aOEAwu89ot7syXK70ZUzwrf0QUgL6cRw3cPdCmezjrpFEFKCpB8tUI8WMF0Q70Xz/AAAAAChqgxu9o+5Dz5fGJ9TNruCpw6jojJF4BsYbYQ4J4gAAAAQ7awqFm499i3nlF+VMqNQDOpweAt6XqhmEo4+YoV/3Vj3D5unSyNv1LmO7UVQx8c6tN0NddfaE5XINW33s+S3frYjSyj/+5NmAWemZBB8VS6xggpHW4WEU83vBIAAAA3e90Ief6eytb4vi9USlPMQrGUehlDs5EKBHF2RAAAACzRy07b8mUpa6v7l8mTNtUKMnQWtEHGIUygJCHXiFmNj3uQvkRXom/Itm8qaD6LRnDYn79kyumxyXK89eC2703lwqTg4huVR+608neOiVmSQAAAAVxqndP0drZPCIS4OrYtGOsptTV0oUC1DeokpThERomRFOkwUmgAAAAXmqUXH+Bj3/S9S+vn45eOUpAOrT1xsezlYg6EIA5To/IUvWxw8+dHPkFWD4guzxNINa9j9i17oAeBClUXN6M7VEor71M1zPZg0stS3Dm2Z8tCAAAAAoaoGchefHZ08ywVgts5Uo3QXBTSVEskS5WksytWqE7ORt0L2ZXUAAABA2ya5Wm0Y4sJoIshF9IYVO2SsUedHc/zL9Sa1kfPVKJeN9iwFWMlF8bHsjUEvd71mw16zHd5PipjnP8kJzwmOPZfOpau7712ZZnUegx6xX4lCrsxkCcLUQAAAACn9TiE3MuAuJD5+Z4L77i8ynFtm0+iPzJp8bh1z1XzoVYd2tqWeCh7s86woAAAAbxPSGQrnu+m9jIgFYicH++aiH87pdFJVIrXvxe1jA7aQfTrvbic7KUCeDCHhWgcQ1tvAcdXKCwSaMHgxAoJNN7CuV7+jE9dZJSvPtbNHdojp6AAAAAAKB95Fat1sVpaUbtc0TTpIXIEzMW1sDxvm2Yay8vRrOmLc8sSaA+WH+fmBVRltYcBoh0sP5+AAKHuEFCBRd7LYMg0FYYy072zGmq9ChYPSgbuEMgmotdQH4+KJK2ujFtKOllzwKSnkr9AiHvxNe/p/5JAoAIYjMMawvqVywTHHSTEQ4NHo3gz4327sdHSYAAAAAMk3FiS7krjZhWobcMzVzcrJPN8puYUpMZfN8fFtfsdZw/KFEfbDpbrm/YX7/5CUz2pQiFFTw66ilVtgek4gxZimtZq5lI2LAsGDSBiLZpcLVWwMDbARyUQI0Nah/MRk5ZR6H2WZrq6MtuG5asFVVro1QuynnksIW6LJoo7A18kquvgYVOQTHwGFCAAAAAMw0t9A2ozVNK6bO7SkjH5+cyxoHf01eAhy7So5dImFE7mw/HZG3EY/YIZ3r+g0o6rDowuUVGV9oLAqAmUoOvsxc0qDe9L9DdMYf/wa2kO7qI+YjdsdoINm31z+fGYnMgZ8JihUQExWv0OfJbkhElAJ0DmpjTjvFCU5M3BqrtCHRXVd+7bzzdS9KpDl0am0AAAAACEVV2uRAGssIZ8F6ru9RbUXwBLiZXLrEDNLkpQgn54udsY6j/n6t+osXUcO1WNnXF6nBE87caDaV67um1xKJIOp8C6uwhemKjk4gwP0gzjFRHiVFDrmbpP42cN6vTySGa83PjCf7jD41DSXDIf0SfrA1RRmlYj/Qc8rN4AAAAAAACDirBk4RzULB86l6o6FNclNoP8V3mj3Rq1YXeZx4sRfZbPujR6sv4S2CFcVUFqwMMcrbo4UdjMLv+5Y7NGlEdGF9Lbcv98ninn2KkRbES+e7BJBLQAmftTPUevQtI0KLLf/kxZ6v7AAAAAAAF1WC9KhW3SN0z15R1trfu+tkYBmJPKiKwRpd1MMHjOWlmoU0pAMzN9GL8ZQa2is/798pqXQ1pnnn0oZVygu2hImE0pHVoLAHg3ZL9fY4o/kHpwAAAAAAAADGTTI7raZqnOrSNhJK2kUeth5Bzj2CO8eNMlrB1+13gAcP8QsiXrx+IEkQme8beY15qqod7qYoiRzP9y7t/3oQAAA=="},395626:function(e,t,r){r.d(t,{V:()=>l});var i=r("772322");r("422689");var n=r("656744");r("218571");var a="back-btn-RoNkwT",o=r("66003"),s=r("178589"),c=r("567739"),u=r("150615"),d=r("889715"),l=()=>{var e=(0,o.G)(s.e);return(0,i.jsx)(n.Z,{className:a,icon:(0,i.jsx)(d.Z7Q,{}),onClick:()=>{(0,c.n)(e)},children:u.ZP.t("frame_change_back_btn",{},"Back")})}},693914:function(e,t,r){r.d(t,{m:function(){return d}});var i=r(259273);i.$W.SiderMenuFeedBack,()=>Promise.all([r.e("2190"),r.e("4958")]).then(r.bind(r,201089));var n={id:i.$W.SiderMenuStoryAgent,loader:()=>r.e("2190").then(r.bind(r,292792))},a={id:i.$W.SiderMenuInvitation,loader:()=>Promise.all([r.e("2707"),r.e("6918"),r.e("2190"),r.e("7161")]).then(r.bind(r,942474))},o={id:i.$W.SiderMenuAppDownload,loader:()=>Promise.all([r.e("2190"),r.e("3061")]).then(r.bind(r,538642))},s={id:i.$W.SiderMenuNotification,loader:()=>Promise.all([r.e("4889"),r.e("2126"),r.e("2190"),r.e("6202"),r.e("6676"),r.e("2550")]).then(r.bind(r,154672))},c={id:i.$W.SiderMenuActivity,loader:()=>Promise.all([r.e("2190"),r.e("9580")]).then(r.bind(r,404728))},u={id:i.$W.SiderMenuBusinessLicense,loader:()=>r.e("2190").then(r.bind(r,26561))};i.$W.SiderMenuProductHunt,()=>Promise.all([r.e("2190"),r.e("9860")]).then(r.bind(r,746021));var d=[a,o,s,c,u,n]},173750:function(e,t,r){r.d(t,{A:function(){return F}});var i=r(532352),n=r(317759),a=r(1326),o=r(541164),s=r(508729),c=r(46821),u=r(878293),d=r(331162),l=r(177394),p=r(581483),_=r(823676),v=r(677793),h=r(776486),g=r(972979),m=r(663190),f=r(154147),y=r(251700),C=r(36604),w=r(639384),I=r(903152),S=r(10335),b=r(406951),T=r(457651),R=r(314916),k=r(42060),E=r(797661),P=r(564030),A=r(390957),L=r(840853),D=r(892542),O=r(33024),M=r(39368),F=[i.p,n.p,a.p,o.p,s.p,c.p,u.p,d.p,l.p,p.p,h.p,g.p,m.p,f.p,v.p,C.p,w.p,I.p,b.p,y.p,P.p,_.p,S.p,...(0,M.I)()?[O.p]:[],T.p,R.p,k.p,E.p,...(0,M.I)()?[D.p]:[],A.p,L.p]},41553:function(e,t,r){r.d(t,{M:()=>E});var i=r("876826"),n=r("789786"),a=r("608358"),o=r("490165"),s=r("460029"),c=r("734383"),u=r("70137"),d=r("37454"),l=r("799108"),p=r("379311"),_=r("217448");class v{getEventParams(){var{status:e,duration:t,stage:r,errMsg:i}=this._params,{isVip:n,currentVipLevel:a}=this._vipService;return{status:e,duration:t,stage:r,err_msg:i,is_vip:n?1:0,user_subscribe_type:n?l.TK[a]:0,credit_now:this._commercialCreditService.localCredit}}constructor(e,t,r){this._params=e,this._vipService=t,this._commercialCreditService=r,this.eventName="init_commercial_data_dev"}}function h(e,t){(0,p.S$)(e,v,[t])}v=(0,n.gn)([(0,n.fM)(1,_.q),(0,n.fM)(2,u.aG),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof IParams?Object:IParams,void 0===_.q?Object:_.q,void 0===u.aG?Object:u.aG])],v);var g=r("937696"),m=r("989390"),f=r("986831");class y{getEventParams(){var{type:e,submitId:t,creditsDiff:r,status:i}=this._params,{isVip:n,currentVipLevel:a}=this._vipService;return{type:e,status:i,submit_id:t,credits_diff:r,is_vip:n?1:0,user_subscribe_type:n?l.TK[a]:0,credit_now:this._commercialCreditService.localCredit}}constructor(e,t,r){this._params=e,this._vipService=t,this._commercialCreditService=r,this.eventName="credits_sync_confirm"}}y=(0,n.gn)([(0,n.fM)(1,_.q),(0,n.fM)(2,u.aG),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof IParams?Object:IParams,void 0===_.q?Object:_.q,void 0===u.aG?Object:u.aG])],y);var C=r("914026"),w=r("216342"),I=r("247170"),S=r("836413"),b=r("420850"),T=r("688078"),R=r("650248");class k{doWhenUserLogin(e){var t=this;return(0,i._)(function*(){var r=yield t._firstStep(e),i=yield t._secondStep(e);return(0,a.ko)(t._containerService,u.aG).syncRemoteCreditHistory(),[r,i]})()}doWhenIsVip(e){var t=this;return(0,i._)(function*(){var r=[(0,b.IY)(e,t._containerService)];return(yield Promise.allSettled(r)).filter(e=>"fulfilled"===e.status).map(e=>e.value)})()}_firstStep(e){var t=this;return(0,i._)(function*(){(0,s.Ie)(d.j.INIT_COMMERCIAL_DATA_FIRST_STEP),(0,a.ko)(t._containerService,u.aG).init();var r,i=[(0,b.g0)(e,t._containerService),(0,b.WR)(e,t._containerService),(0,b.RJ)(e,t._containerService)],n=yield Promise.allSettled(i);(0,s.oe)(d.j.INIT_COMMERCIAL_DATA_FIRST_STEP);var{duration:o}=null!==(r=(0,s.XH)(d.j.INIT_COMMERCIAL_DATA_FIRST_STEP))&&void 0!==r?r:{},c=n.every(e=>"fulfilled"===e.status),l=c?void 0:n.filter(e=>"rejected"===e.status).map(e=>e.reason).join(",");return(h(t._containerService,{duration:o,stage:"step1",status:c?"success":"error",errMsg:l}),c)?(0,S.ly)():(0,S.wf)(-1,"init commercial data first step error ".concat(l))})()}_secondStep(e){var t=this;return(0,i._)(function*(){(0,s.Ie)(d.j.INIT_COMMERCIAL_DATA_SECOND_STEP);var r,i=[(0,b.FM)(e,t._containerService),(0,b.IY)(e,t._containerService)],n=yield Promise.allSettled(i);(0,s.oe)(d.j.INIT_COMMERCIAL_DATA_SECOND_STEP);var{duration:a}=null!==(r=(0,s.XH)(d.j.INIT_COMMERCIAL_DATA_SECOND_STEP))&&void 0!==r?r:{},o=n.every(e=>"fulfilled"===e.status),c=o?void 0:n.filter(e=>"rejected"===e.status).map(e=>e.reason).join(",");return(h(t._containerService,{duration:a,stage:"step2",status:o?"success":"error",errMsg:c}),o)?(0,S.ly)():(0,S.wf)(-1,"init commercial data second step error ".concat(c))})()}constructor(e){this._containerService=e}}(0,n.gn)([(0,c.Ds)(500,{leading:!0,trailing:!1}),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,n.w6)("design:returntype",Promise)],k.prototype,"doWhenUserLogin",null),(0,n.gn)([(0,c.Ds)(500,{leading:!0,trailing:!1}),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,n.w6)("design:returntype",Promise)],k.prototype,"doWhenIsVip",null);var E=e=>{var t=(0,w.bu)("FetchCommercialDataTask",new k(e)),r=(0,a.ko)(e,o.D),i=(0,a.ko)(e,_.q),n=(0,a.ko)(e,u.aG);r.hasLogin&&t.doWhenUserLogin((0,I.fC)()),r.onDidLogin(()=>{t.doWhenUserLogin((0,I.fC)())}),i.isVip?(t.doWhenIsVip((0,I.fC)()),window.Slardar("context.set","isVip",i.isVip)):i.onIsVipChange(e=>{t.doWhenIsVip((0,I.fC)()),window.Slardar("context.set","isVip",e)}),i.onVipInfoChange(()=>{(0,b.FM)((0,I.fC)(),e)});var s=(0,T.Z)(b.WR,500,{trailing:!0,leading:!1}),c=(0,T.Z)(g.o,500,{trailing:!1,leading:!0}),d=(0,R.default)(m.B,3e4,{trailing:!1,leading:!0});n.onLocalCreditChange((t,r,i,n)=>{if(t===f.h.SYNCED){var a,o;a=e,o={type:t,creditsDiff:i,submitId:n,source:r,status:0===i?"success":"error"},(0,p.S$)(a,y,[o])}s((0,I.fC)(),e)}),window.addEventListener("visibilitychange",()=>{r.hasLogin&&"visible"===document.visibilityState?(n.syncRemoteCreditHistory(),(0,b.RJ)((0,I.fC)(),e),c({containerService:e}),d(e)):n.stopSyncRemoteCreditHistory()}),window.addEventListener("click",()=>{(0,C.z)(e),d(e)})}},512606:function(e,t,r){r.d(t,{y:function(){return i}});var i=()=>{var e,t,r=null===(e=window)||void 0===e?void 0:e.editorResourcePrefetcher;null==r||null===(t=r.setDomainFilter)||void 0===t||t.call(r,e=>!(e.includes("mcs")||e.includes("mon"))&&!e.includes("get_unread_count")&&!0)}},893704:function(e,t,r){r.d(t,{P:()=>v});var i=r("772322");r("2910"),r("685626"),r("218571");var n=r("570126"),a=r("642273"),o=r("949057"),s=r("185617"),c=r("105789"),u=r.n(c),d=r("66003"),l=r("191902"),p=r("186676"),_=e=>{var{buildRegion:t,containerService:r,platformUiConfigurationService:n}=e;return r?(0,i.jsx)(o.FN.Provider,{value:{buildRegion:t,isOverSea:!1},children:(0,i.jsx)(d.$,{instantiationService:r,children:(0,i.jsxs)("div",{className:u()({"mobile-not-ipad":s.lY,"global-mweb-container":!0,"global-mweb-container-firefox":l.vU}),children:[(0,i.jsx)(p.W,{}),null,n.render()]})})}):(0,i.jsx)(i.Fragment,{})};function v(e,t,r){var o=document.getElementById("csr-root");location.pathname.includes(a.ln.dataSubjectRequest)?(document.body.setAttribute("lv-theme","light"),o.classList.add("class","lv-theme-force_light")):(document.body.setAttribute("lv-theme-version","2.0"),document.body.setAttribute("lv-theme","dark"),o.classList.add("class","lv-theme-force_dark")),n.createRoot(o).render((0,i.jsx)(_,{buildRegion:e,containerService:t,platformUiConfigurationService:r}))}r("601817")},57712:function(e,t,r){r.d(t,{m:function(){return i}});function i(){var e=new URLSearchParams(window.location.search);if(e.get("video_debug_publish")){var t=e.get("video_debug_publish");t&&localStorage.setItem("videoPublishDebug",t)}}},9575:function(e,t,r){r.d(t,{d:()=>o});var i=r("259273"),n=(e,t)=>{e?t.setSideMenuClassName("mweb-side-menu-container  mweb-side-menu-right-border"):t.setSideMenuClassName("mweb-side-menu-container")},a=(e,t)=>{var r,a=[i.Sj.HistoryDetail,i.Sj.WorkDetailPage,i.Sj.WorkDetailShare],{currentKeepAliveData:o}=t;n(a.includes(null!==(r=null==o?void 0:o.routeId)&&void 0!==r?r:"")||e,t)},o=e=>{var t=()=>{a(!1,e)};t(),e.onKeepAliveChange(t)}},695581:function(e,t,r){r.d(t,{B:function(){return n}});var i,n=((i={}).Start="Start",i.UserInit="UserInit",i.Prepare="Prepare",i.Render="Render",i.Completed="Completed",i)},646204:function(e,t,r){r.d(t,{Q:function(){return _}});var i=r(85728),n=r(929753),a=r(806663),o=r(471605),s=r(490165),c=r(76252),u=r(677761),d=r(217448),l=r(417699);function p(e,t){return{userId:t.uid,hasLogin:e}}function _(e){e.invokeFunction(e=>{var t,r,_,v,h,g,m,f,y,C,w,I=e.get(s.D),S=e.get(o.S),b=e.get(u.w),T=e.get(l.e),R=document.createElement("canvas").getContext("webgl") instanceof WebGLRenderingContext?"1":"0",k={branch:T.appScmBuildBranch,resolution:null!==(m=window._canvas_resolution)&&void 0!==m?m:480,gpu_exist:R,network_type:null!==(f=null===(v=navigator.connection)||void 0===v?void 0:v.effectiveType)&&void 0!==f?f:"",downlink:null!==(y=null===(h=navigator.connection)||void 0===h?void 0:h.downlink)&&void 0!==y?y:"",rtt:null!==(C=null===(g=navigator.connection)||void 0===g?void 0:g.rtt)&&void 0!==C?C:""};b.setCustomParams(k),b.setCustomParams({language:S.currentLocale}),b.setConfig({language:S.currentLocale}),I.hasLogin?b.setConfig((0,n._)((0,i._)({},p(I.hasLogin,I.userProfile)),{userType:12})):((0,c.H)()?b.setConfig({userId:"",userType:14,region:(null===(w=window.__locationInfo)||void 0===w?void 0:w.code)||""}):b.setConfig({userType:14,userId:""}),(0,a.V)(I.onDidLogin)(()=>{b.setConfig(p(I.hasLogin,I.userProfile))})),t=b,r=e.get(d.q),t.setCommonEventParams({is_vip:(_=r).isVipReady?_.isVip?1:0:-1}),r.onVipInfoChange(e=>{t.setCommonEventParams({is_vip:e.flag?1:0})})})}},261623:function(e,t,r){r.d(t,{H:function(){return a}});var i=r(557343),n=r(677761),a=e=>{e.invokeFunction(e=>{var t=e.get(n.w),r=e.get(i.L),a={branch:"release/520"};t.setCustomParams(a),r.setEventParams(a);var o=Object.entries(a).reduce((e,t)=>{var[r,i]=t;return void 0!==i&&(e[r]=String(i)),e},{});r.setCaptureParams(o),r.setLogParams(a)})}},859840:function(e,t,r){r.d(t,{C:function(){return n}});var i=r(70529);function n(e,t,r){r.invokeFunction(e=>e.get(i.m)).reportDevEvent("agw-inject:".concat(e),{success:t?"true":"false"})}},649842:function(e,t,r){r.d(t,{Ao:function(){return n},Q0:function(){return a},Uo:function(){return o},hq:function(){return s}});var i=r(320402),n=()=>window.location.host.includes("-boe")?i.s.Boe:window.location.host.includes("capcut-os")||window.location.host.includes("_____________")?i.s.Ppe:i.s.Online;function a(){return!1}function o(){var{searchParams:e}=new URL(window.location.href);return"0"!==e.get("__force_high_quality__")}var s=()=>(0,i.a.Cn)},166715:function(e,t,r){var i=r(660178);r(395248),r(2910),r(150615),i.w.setConfig({projectId:532,subProjectName:"cc_dreamina",customRoute:"",reportOnly:!1,storageKey:"ARGUS_STORAGE_OPEN_REDIRECT",frontWhiteUrl:'["._______________",".vlabstatic.com"]',frontBlackUrl:"[]",bid:"cc_dreamina",region:"cn",cacheTimeFront:12,checkTimeLimit:1.5,limitLevel:5})},686658:function(e,t,r){r.d(t,{u:function(){return c}}),r(395248);var i=r(423342),n=r(608358),a=r(331480),o=r(490165),s=r(150615);function c(e){var t=(0,n.ko)(e,o.D),r=(0,n.ko)(e,a.Dx),c=()=>{var e=r.registerEventHandler(a.Te.IllegalAccountKickOut,()=>{i.Z.error({title:s.ZP.t("account_block_toast_offline",{},"\u4E0B\u7EBF\u63D0\u9192"),content:s.ZP.t("account_block_toast_offline_text",{},"\u8D26\u53F7\u5DF2\u4E0B\u7EBF,\u8BF7\u91CD\u65B0\u767B\u5F55"),onOk:()=>{t.logout(),e.dispose()},maskClosable:!1})})};r.state!==a.D8.OPEN?r.onOpen(c):c()}},649679:function(e,t,r){r.d(t,{B:function(){return o}});var i=r(165870),n=r(591586),a=r(651531);class o extends i.g{run(e,t,r){var{debugConsoleStatus:i,isProd:a}=t;!1===i||a&&!0!==i?n.t.hideConsole():(n.t.showConsole(),n.t.setEnvironmentFlag(a)),this.configLogInstance(r)}configLogInstance(e){e.invokeFunction(e=>{var t=e.get(a.VZ),r=()=>void 0,i=t.createLogger("dreamina-global-logger");Object.assign(i,{time:r,timeEnd:r,log:r}),n.t.setLogInstance(i)})}constructor(...e){super(...e),this.taskName="INIT_CONSOLE_LOG_TASK"}}},326182:function(e,t,r){r.d(t,{C:()=>nH});var i,n=r("497973"),a=r("824096"),o=r("627176"),s=r("672215"),c=r("799029"),u=r("876826"),d=r("836413"),l=r("971055");class p{getUploadToken(e){var t=this;return(0,u._)(function*(){try{var r=yield t._repository.getUploadToken(e);return(0,d.oW)(r)}catch(e){return(0,d.wf)(-1,"mweb data-service getUploadToken api failed")}})()}constructor(){this._repository=new l.z}}var _=r("442452"),v=r("138021"),h=r("463922"),g=r("789786"),m=r("719800"),f=r("346526"),y=r("643590"),C=r("416105"),w=r("875649"),I=r("636601"),S=r("232351");class b{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build(y.D),(0,f.V)(e),(0,C.mH)(e),(0,w.i3)(e),e)}return this._networkClientInstance}getDraftShareInfo(e){var t=this;return(0,u._)(function*(){try{var r,i,n=yield t._networkClient.post(t._api(),{package_key:e.packageKey,workspace_id:e.workspaceId},{withCredentials:!0}),a=Number(null!==(r=n.ret)&&void 0!==r?r:0),o=null!==(i=n.errmsg)&&void 0!==i?i:"";if(0!==a)return(0,d.wf)(null!=a?a:-1,null!=o?o:"");return(0,d.oW)(n.data)}catch(e){return(0,d.wf)(-1,"getDraftShareInfo api error")}})()}_api(){return"".concat(I._L.getVar("web_domain")).concat(S.b.GET_SHARE_INFO)}}class T{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build(y.D),(0,f.V)(e),(0,C.mH)(e),(0,w.i3)(e),e)}return this._networkClientInstance}getWorkspaceInfoExternal(e){var t=this;return(0,u._)(function*(){try{var r,i,n=yield t._networkClient.post(t._api(),{file_id:e.packageKey,workspace_id:e.workspaceId,source_type:e.sourceType},{withCredentials:!0}),a=Number(null!==(r=n.ret)&&void 0!==r?r:0),o=null!==(i=n.errmsg)&&void 0!==i?i:"";if(0!==a)return(0,d.wf)(null!=a?a:-1,null!=o?o:"");return(0,d.oW)(n.data)}catch(e){return(0,d.wf)(-1,"get_workspace_info_external api error")}})()}_api(){return"".concat(I._L.getVar("web_domain")).concat(S.b.GET_WORKSPACE_INFO_EXTERNAL)}}class R{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build(y.D),(0,f.V)(e),(0,C.mH)(e),(0,w.i3)(e),e)}return this._networkClientInstance}applyToDraft(e){var t=this;return(0,u._)(function*(){try{var r,i,n=yield t._networkClient.post(t._api(),{package_key:e.packageKey,workspace_id:e.workspaceId},{withCredentials:!0}),a=Number(null!==(r=n.ret)&&void 0!==r?r:0),o=null!==(i=n.errmsg)&&void 0!==i?i:"";if(0!==a)return(0,d.wf)(null!=a?a:-1,null!=o?o:"");return(0,d.oW)(n.data)}catch(e){var s,c,u,l=null!==(c=null!==(s=null==e?void 0:e.errmsg)&&void 0!==s?s:null==e?void 0:e.message)&&void 0!==c?c:"applyToDraft api error",p=null!==(u=null==e?void 0:e.ret)&&void 0!==u?u:-1;return(0,d.wf)(p,l)}})()}_api(){return"".concat(I._L.getVar("web_domain")).concat(S.b.APPLICATION_CREATE)}}class k{getDraftShareInfo(e){return this._getDraftShareInfoRepository.getDraftShareInfo(e)}getWorkspaceInfoExternal(e){return this._getWorkspaceInfoExternalRepository.getWorkspaceInfoExternal(e)}applyToDraft(e){return this._applyToDraftRepository.applyToDraft(e)}constructor(e){this._instantiationService=e,this._getDraftShareInfoRepository=this._instantiationService.createInstance(b),this._getWorkspaceInfoExternalRepository=this._instantiationService.createInstance(T),this._applyToDraftRepository=this._instantiationService.createInstance(R)}}k=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],k);var E=r("693895"),P=r("584072"),A=r("843698"),L=r("874800"),D=r("56935"),O=r("616603");class M extends L.JT{get available(){return this._available}get workspaceList(){return this._workspaceList}get workspaceExpandInfoMap(){(0,D.ss)("\u4E0D\u5408\u7406\u4F9D\u8D56\u9879\uFF0C\u540E\u7EED\u5E94\u8BE5\u5355\u72EC\u62C6\u591A\u4E00\u4E2A\u4E13\u95E8\u7528\u6237\u4ED8\u8D39\u6269\u5BB9\u7684service\u3002\u4E0E\u8BE5\u670D\u52A1\u89E3\u8026\u5F00\u80FD\u529B")}initialize(e){var t=this;return(0,u._)(function*(){if(!t._available){try{if(!t._options.disableGatewayInject&&"undefined"!=typeof window){var e,r,i,n;if(t._workspaceList=null!==(n=null===(r=JSON.parse(window.__userWorkspaces))||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.workspace_infos)&&void 0!==n?n:[],!(null===(i=t._workspaceList)||void 0===i?void 0:i.length))throw Error("invalid value");t._available=!0,t._onDidWorkspaceChange.fire(t._workspaceList)}}catch(e){}!t._available&&(yield t.refreshWorkspaceList())}})()}getWorkspace(e){return this.workspaceList.find(t=>t.workspace_id===e)}triggerWorkspaceListChange(){this.refreshWorkspaceList()}refreshWorkspaceList(){var e=this;return(0,u._)(function*(){if(e._refreshLocker)return e._refreshLocker.promise;e._refreshLocker=(0,P.PQ)();var t=yield e._workspaceDataService.getWorkspace({liteAppId:e._options.liteAppId});if(!t.ok){e._refreshLocker.reject(t),e._refreshLocker=void 0;return}e._workspaceList=t.value.value.list.map(e=>{var t;return{workspace_id:(t=e).workspaceId,name:t.name,space_id:t.spaceId,role:t.role,caller_nickname:t.callerNickname,member_limit:t.memberLimit,member_cnt:t.memberCount,owner:t.owner,owner_name:t.ownerName,quota:t.quota,usage:t.usage,avatar_color:t.avatarColor,invitation_link:t.invitationLink,expire_time:t.expireTime,region:t.region,idc:t.idc,dcName:t.idc,space_idc:t.spaceIdc,space_host:t.spaceHost,space_type:t.spaceType,space_res_host:t.spaceResHost,raw_space_type:t.rawSpaceType,has_brand_permission:t.hasBrandPermission}}),e._onDidWorkspaceChange.fire(e._workspaceList),e._refreshLocker.resolve(),e._refreshLocker=void 0,e._available=!0})()}refreshUserSpace(){(0,D.ss)("un expected")}constructor(e,t){super(),this._options=e,this._workspaceDataService=t,this._available=!1,this._workspaceList=[],this._onDidWorkspaceChange=this._store.add(new A.Q),this.onDidWorkspaceChange=this._onDidWorkspaceChange.event,this._onDidWorkspaceExpandInfoMapChange=this._store.add(new A.Q),this.onDidWorkspaceExpandInfoMapChange=this._onDidWorkspaceExpandInfoMapChange.event}}M=(0,g.gn)([(0,g.fM)(1,O.z),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[Object,void 0===O.z?Object:O.z])],M);var F=r("599647"),N=r("370188"),x=r("85728"),U=r("897727"),j=r("553247"),V=r("116244");class B extends j.d{buildCustomRequest(e){return{search_option:(0,x._)({cc_web_use_new_search:!0},this._buildFilterParams(e))}}get resourceType(){return U.g.Image}parseHeycanResponseDataToResources(e){return(0,V.Ar)(e)}_buildFilterParams(e){var t,r,i,n={};return(null===(t=e.filters)||void 0===t?void 0:t.colors)&&(n.custom_colors=e.filters.colors.map(e=>({R:e[0],G:e[1],B:e[2]}))),(null===(r=e.filters)||void 0===r?void 0:r.aspectRatios)&&(n.custom_aspect_ratios=e.filters.aspectRatios),(null===(i=e.filters)||void 0===i?void 0:i.onlyCommercial)&&(n.filter_uncommercial=e.filters.onlyCommercial),n}}var H=r("875421"),G=r("114107"),W=r("936226"),q=r("666565");class Y extends q.n{get resourceType(){return U.g.Image}parseHeycanResponseDataToResources(e){return(0,V.Ar)(e)}constructor(e){super(e),this._capcutAccountService=e}}Y=(0,g.gn)([(0,g.fM)(0,W.Gw),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===W.Gw?Object:W.Gw])],Y);var Z=r("831210"),K=r("755020"),z=r("484876"),Q=r("474956");class J extends Z.L{get resourcePanelType(){return K.q.Photo}get resourceType(){return Q._g.Photo}parseHeycanResponseDataToResources(e){return(0,V.Ar)(e)}buildCustomRequest(e){var t;return{pack_optional:{large_image_formats:z.r,need_thumb:!0,only_commercial:null!==(t=e.onlyCommercial)&&void 0!==t&&t}}}}var X=r("765417"),$=r("389633");class ee extends $.g{buildCustomRequest(e){return{search_option:(0,x._)({cc_web_use_new_search:!0},this._buildFilterParams(e))}}get resourceType(){return U.g.Image}parseHeycanResponseDataToResources(e){return(0,V.Ar)(e)}_buildFilterParams(e){var t,r,i,n={};return(null===(t=e.filters)||void 0===t?void 0:t.colors)&&(n.custom_colors=e.filters.colors.map(e=>({R:e[0],G:e[1],B:e[2]}))),(null===(r=e.filters)||void 0===r?void 0:r.aspectRatios)&&(n.custom_aspect_ratios=e.filters.aspectRatios),(null===(i=e.filters)||void 0===i?void 0:i.onlyCommercial)&&(n.filter_uncommercial=e.filters.onlyCommercial),n}}var et=r("662307");class er extends et.J{get resourceType(){return U.g.Image}parseHeycanResponseDataToResources(e){return(0,V.Ar)(e)}constructor(e){super(e),this._capcutAccountService=e}}er=(0,g.gn)([(0,g.fM)(0,W.Gw),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===W.Gw?Object:W.Gw])],er);var ei=r("88629"),en=r("615704");class ea extends L.JT{getPhotos(e){return this._getPhotoRepository.getResources(e)}getBrandPhotos(e){return this._getBrandPhotosRepository.getResources(e)}getPhotosByCategory(e){return this._getPhotoByCategoryRepository.getResources(e)}batchGetPhotos(e){var{isFromBrand:t=!1}=e;return t?this._getBrandPhotosByIdsRepository.getResourcesByIds({ids:e.resourceIds}):this._batchGetPhotoRepository.batchGetResources(e)}batchGetTuchongPhotos(e){return this._batchGetTuchongPhotoRepository.batchGetResources(e)}searchPhoto(e){return this._searchPhotoRepository.searchResources(e)}searchTuchongPhoto(e){return this._searchTuchongPhotoRepository.searchResources(e)}getCollections(e){return this._collectionPhotoRepository.getCollections(e)}addToCollection(e){return this._collectionPhotoRepository.addToCollection(e)}removeFromCollection(e){return this._collectionPhotoRepository.removeFromCollection(e)}order(e){return this._orderRepository.order(e)}getCategories(e){return this._getPhotoCategoriesRepository.getCategories(e)}constructor(e={},t){super(),this.collectionParam=e,this._instantiationService=t,this._searchPhotoRepository=this._instantiationService.createInstance(B),this._collectionPhotoRepository=this._instantiationService.createInstance(new n.M(N.T,[e],!1)),this._getPhotoRepository=this._instantiationService.createInstance(H.B),this._getPhotoByCategoryRepository=this._instantiationService.createInstance(X.y),this._orderRepository=this._instantiationService.createInstance(G.x),this._batchGetPhotoRepository=this._instantiationService.createInstance(Y),this._batchGetTuchongPhotoRepository=this._instantiationService.createInstance(er),this._getPhotoCategoriesRepository=this._instantiationService.createInstance(J),this._searchTuchongPhotoRepository=this._instantiationService.createInstance(ee),this._getBrandPhotosRepository=this._instantiationService.createInstance(ei.Y),this._getBrandPhotosByIdsRepository=this._instantiationService.createInstance(en.G)}}ea=(0,g.gn)([(0,g.fM)(1,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof ICollectionResourcesRepositoryParam?Object:ICollectionResourcesRepositoryParam,void 0===m.T?Object:m.T])],ea);var eo=r("211809"),es=r("243494"),ec=r("927457"),eu=r("504867"),ed=r("27902"),el=r("150615"),ep=r("12939");class e_{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build(y.D),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}getGifsByCategory(e){var t=this;return(0,u._)(function*(){var r=(0,es.ky)(e)?e.config:e;try{var i,n,a=yield t._networkClient.post(t._api,(0,x._)({type:r.category},t._getTokenParams(e)),(0,ep._)(t._capcutAccountService.userProfile.region,el.ZP.language)),o=Number(null!==(i=a.ret)&&void 0!==i?i:0),s=null!==(n=a.errmsg)&&void 0!==n?n:"";if(0!==o)return(0,d.wf)(null!=o?o:-1,null!=s?s:"");var c=t._convertResponseToQueryToken(r,a);return(0,d.oW)(c)}catch(e){return(0,ec.m)(e,-1,"getGifs api error")}})()}_getTokenParams(e){var t,r;return(0,es.ky)(e)?{offset:e.offset,count:null!==(t=e.config.limit)&&void 0!==t?t:50}:{offset:0,count:null!==(r=e.limit)&&void 0!==r?r:50}}_convertResponseToQueryToken(e,t){var{data:r}=t,i=r.next_offset,n=r.has_more,a=r.library_item_list.map(e=>(0,ed.g)(e));return(0,es.ib)(e,{list:a},{hasMore:n,offset:i})}get _api(){return"".concat(I._L.getVar("web_domain")).concat(eu.b.TRENDING)}constructor(e){this._capcutAccountService=e}}e_=(0,g.gn)([(0,g.fM)(0,W.Gw),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===W.Gw?Object:W.Gw])],e_);var ev=r("552472");class eh{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build(y.D),(0,ev.Y)(e),(0,f.V)(e),e)}return this._networkClientInstance}searchGifs(e){var t=this;return(0,u._)(function*(){var r=(0,es.ky)(e)?e.config:e;try{var i,n,a=yield t._networkClient.post(t._api,(0,x._)({type:r.category,from:r.from,query:r.query},t._getTokenParams(e)),(0,ep._)(t._capcutAccountService.userProfile.region,el.ZP.language)),o=Number(null!==(i=a.ret)&&void 0!==i?i:0),s=null!==(n=a.errmsg)&&void 0!==n?n:"";if(![0,2013].includes(o)){if(1e3===o)return(0,d.wf)(null!=o?o:-1,el.ZP.t("the_keyword_is_invalid__please_re_enter",{},"\u5173\u952E\u8BCD\u65E0\u6548\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"));return(0,d.wf)(null!=o?o:-1,null!=s?s:"")}var c=t._convertResponseToQueryToken(r,a);return(0,d.oW)(c)}catch(e){if("1000"===e.ret||"2013"===e.ret)return(0,d.wf)(Number(e.ret),el.ZP.t("the_keyword_is_invalid__please_re_enter",{},"\u5173\u952E\u8BCD\u65E0\u6548\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"));return(0,ec.m)(e,-1,"searchGifs api error")}})()}_getTokenParams(e){var t,r;return(0,es.ky)(e)?{offset:e.offset,count:null!==(t=e.config.limit)&&void 0!==t?t:50}:{offset:0,count:null!==(r=e.limit)&&void 0!==r?r:50}}_convertResponseToQueryToken(e,t){var{data:r}=t,i=r.next_offset,n=r.has_more,a=r.library_item_list.map(e=>(0,ed.g)(e));return(0,es.ib)(e,{list:a,requestId:t.logid},{hasMore:n,offset:i})}get _api(){return"".concat(I._L.getVar("web_domain")).concat(eu.b.SEARCH)}constructor(e){this._capcutAccountService=e}}eh=(0,g.gn)([(0,g.fM)(0,W.Gw),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===W.Gw?Object:W.Gw])],eh);var eg=r("192455"),em=r("170486");class ef extends L.JT{getGifsByCategory(e){return this._getGifsByCategoryRepository.getGifsByCategory(e)}getGifsByIds(e){return this._getGifsByIdsRepository.getGifsByIds(e)}getTrendingSearchWords(){return this._getTrendingSearchWordsRepository.getTrendingSearchWords()}searchGifs(e){return this._searchGifsRepository.searchGifs(e)}constructor(e){super(),this._instantiationService=e,this._getGifsByCategoryRepository=this._instantiationService.createInstance(e_),this._searchGifsRepository=this._instantiationService.createInstance(eh),this._getGifsByIdsRepository=this._instantiationService.createInstance(eg.d),this._getTrendingSearchWordsRepository=this._instantiationService.createInstance(em.x)}}ef=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],ef);var ey=r("280515"),eC=r("165991"),ew=r("319820"),eI=r("233307"),eS=r("437769"),eb=r("903355"),eT=r("161970"),eR=r("3771"),ek=r("954746"),eE=r("503006"),eP=r("861534"),eA=r("765652"),eL=1/0;function eD(e){return JSON.stringify(e)}class eO{warmup(){this._instantiationService.invokeFunction(e=>{var t=e.get(eE.U);t.database.connect(eP.g.id,eA.d.name),t.database.connect(eP.g.id,eA.z.name)})}download(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[r,i]=this._getOrCreateTask(e,t);return i?r:(this._recordTask(r),r)}remove(e){e.downloadType===eI._5.Eager?this._immediatelyQueue.removeTask(e):this._idleQueue.removeTask(e)}startImmediately(e){if(!(e.status>=eI.lh.Loading)&&e.downloadType!==eI._5.Eager)this._idleQueue.removeTask(e),e.downloadType=eI._5.Eager,this._immediatelyQueue.addTask(e)}_recordTask(e){e.onFail(()=>{this._tasks.delete(e)}),e.onSuccess(()=>{this._tasks.delete(e),this._taskCache.put(eD(e),e)}),this._tasks.add(e),e.downloadType===eI._5.Eager?this._immediatelyQueue.addTask(e):this._idleQueue.addTask(e)}_getOrCreateTask(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._instantiationService.createInstance(new n.M(eT.v,[t,e,this._networkClient,this])),i=this._taskCache.get(eD(r));if(i)return(0,D.Y2)(i.status!==eI.lh.Error),[i,!0];for(var a of this._tasks)if((0,D.Y2)(a.status!==eI.lh.Completed&&a.status!==eI.lh.Error),a.equal(r))return[a,!0];return[r,!1]}constructor(e){var t;this._instantiationService=e,this._tasks=new Set,this._taskCache=new eS.o(100,3e5),this._networkClient=(t=(0,eb.e)({responseType:"arraybuffer"}),(0,f.V)(t,{retries:2}),t),this._idleQueue=this._instantiationService.createInstance(new n.M(eR.J,[])),this._immediatelyQueue=this._instantiationService.createInstance(new n.M(ek.H,[eL]))}}eO=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],eO);var eM=r("998052"),eF=r("928114"),eN=r("77922"),ex=r("347853"),eU=r("712823"),ej=r("689842"),eV=r("680359"),eB=r("628125"),eH=r("312518"),eG=r("788917"),eW=r("73347"),eq=r("904337"),eY=r("820266"),eZ=r("629593"),eK=r("879976");function ez(e){return e?e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase()):""}class eQ{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,eK.V)(e),(0,eq.$)(e),(0,C.mH)(e),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}packImage(e){var t=this;return(0,u._)(function*(){try{var r=(0,eY.X)(e),i=yield t._networkClient.post(t._getApi(eZ.b.MPACK_IMAGE),r);if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});var n=(0,eY.b)(i.data,ez);return(0,d.oW)(n)}catch(e){return(0,ec.m)(e,-1,"packImage")}})()}constructor(e){this._httpApiSettingService=e}}eQ=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],eQ);class eJ{packImage(e){return this._dreaminaImageRepository.packImage(e)}constructor(e){this._instantiationService=e,this._dreaminaImageRepository=this._instantiationService.createInstance(eQ)}}eJ=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],eJ);var eX=r("675601"),e$=r("153318"),e0=r("58425"),e1=r("523197"),e6=r("401492"),e2={VIDEO_GENERATION_PREPROCESSING:"/mweb/v1/video_generate/pre_process"};class e7{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,eq.$)(e),(0,C.mH)(e),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}preprocess(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e2.VIDEO_GENERATION_PREPROCESSING}),(0,eY.X)({inputList:e}),t);return(0,d.oW)((0,eY.b)(i))}catch(e){return(0,ec.P)(e)}})()}constructor(e){this._httpApiSettingService=e}}e7=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],e7);class e8{detectFacesInReferenceImage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return(0,u._)(function*(){var{signal:i}=t,n=yield r._repository.preprocess([{scene:e6.Y.VideoTemplateImageDetect,submitId:(0,e1.Rl)(),videoTemplateImageDetect:{image:{imageUri:e}}}],{signal:i});if(!n.ok)return n;var{taskList:[a]}=n.value.data;return(0,d.oW)(a)})()}constructor(e){this._repository=e.createInstance(e7)}}e8=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],e8);var e3=r("640336"),e5=r("929753"),e9=r("804274"),e4=r("149478"),te=r("280166"),tt={TASK_SUBMIT:"/mweb/v1/aigc_draft/generate",TASK_QUERY:"/mweb/v1/get_history_by_ids",GENERATE_LYRICS:"/mweb/v1/generate_lyrics"};class tr{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,eK.V)(e),(0,eq.$)(e),(0,C.mH)(e),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}submitTask(e,t){var r=this;return(0,u._)(function*(){try{var i=r._environmentService.appId,n=(0,eY.X)(e),a=yield r._networkClient.post(r._getApi(tt.TASK_SUBMIT),(0,e5._)((0,x._)({},n),{http_common_info:{aid:i}}),{params:(0,x._)({aid:i},t)});if("0"!==a.ret)return(0,d.wf)(Number(a.ret),a.errmsg,{logId:a.logid});return(0,d.oW)((0,e4.v)((0,eY.b)(a.data.aigc_data,e9.zW)))}catch(e){return(0,ec.P)(e)}})()}queryTasks(e){var t=this;return(0,u._)(function*(){try{var r=(0,eY.X)(e),i=yield t._networkClient.post(t._getApi(tt.TASK_QUERY),r);if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});var n=Object.keys(i.data).reduce((e,t)=>{var r=i.data[t];return r?(0,e5._)((0,x._)({},e),{[t]:(0,e4.v)((0,eY.b)(r,e9.zW))}):e},{});return(0,d.oW)(n)}catch(e){return(0,ec.P)(e)}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}tr=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.fM)(1,te.Y),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x,void 0===te.Y?Object:te.Y])],tr);var ti=r("453604");class tn{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,eK.V)(e),(0,eq.$)(e),(0,C.mH)(e),(0,ti.d)(e),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}generateLyrics(e,t){var r=this;return(0,u._)(function*(){try{var i=(0,eY.X)(e),n=yield r._networkClient.post(r._getApi(tt.GENERATE_LYRICS),(0,x._)({},i),{params:(0,x._)({needRefresh:!1},t)});if("0"!==n.ret)return(0,d.wf)(Number(n.ret),n.errmsg,{logId:n.logid});var a=(0,eY.b)(n.data,e9.zW);return(0,d.oW)(a)}catch(e){return(0,ec.P)(e)}})()}constructor(e){this._httpApiSettingService=e}}tn=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],tn);class ta{submitTask(e,t){return this._taskRepository.submitTask(e,t)}queryTasks(e){return this._taskRepository.queryTasks(e)}generateLyrics(e,t){return this._algorithmRepository.generateLyrics(e,t)}constructor(e){this._instantiationService=e,this._taskRepository=this._instantiationService.createInstance(tr),this._algorithmRepository=this._instantiationService.createInstance(tn)}}ta=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],ta);var to=r("978420"),ts=r("968035"),tc=r("746290");class tu extends ts.V{getPanelType(){return tc.I.AiVideo}}var td=r("868629"),tl=r("564992");class tp{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,eK.V)(e),(0,C.mH)(e),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}markFavorite(e){var t=this;return(0,u._)(function*(){try{var r=(0,eY.X)(e),i=yield t._networkClient.post("".concat(t._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:tl.b.MARK_FAVORITE})),r);if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);return(0,d.oW)(!0)}catch(e){return(0,ec.m)(e,-1,"mark favorite error")}})()}constructor(e){this._httpApiSettingService=e}}tp=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],tp);var t_=r("472874"),tv=r("895131"),th=r("265587");class tg extends tv.C{parseHeycanResponseDataToResources(e){return(0,th.Q)(e)}get getResourcesApi(){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:tl.b.GET_FAVORITE_LIST})}buildCustomRequest(){return{image_type:4}}}var tm=r("995098"),tf=r("893826"),ty=r("91172");class tC{fetchFeedCategories(){return this._feedCategoriesRepository.getCategories()}fetchFeedResourceByCategory(e){return this._getFeedResourceByCategoryRepository.getResources(e)}fetchCarouselCategories(){return this._carouselCategoryRepository.getCategories()}markFavorite(e){return this._feedUserActionRepository.markFavorite(e)}fetchFavoriteAiVideoResource(e){return this._getFavoriteAiVideoRepository.getResources(e)}fetchShowcaseVideoByCategory(e){return this._getShowcaseVideoByCategoryRepository.getResources(e)}fetchRecommendShowcaseVideoByCategory(e){return this._getRecommendShowcaseVideoByCategoryRepository.getResources(e)}fetchVideoDetail(e){return this._feedCommonRepository.fetchVideoDetail(e)}constructor(e){this._instantiationService=e,this._feedCategoriesRepository=this._instantiationService.createInstance(tu),this._getFeedResourceByCategoryRepository=this._instantiationService.createInstance(td.X),this._feedUserActionRepository=this._instantiationService.createInstance(tp),this._carouselCategoryRepository=this._instantiationService.createInstance(t_.l),this._getFavoriteAiVideoRepository=this._instantiationService.createInstance(tg),this._getShowcaseVideoByCategoryRepository=this._instantiationService.createInstance(tm.i),this._getRecommendShowcaseVideoByCategoryRepository=this._instantiationService.createInstance(tf.G),this._feedCommonRepository=this._instantiationService.createInstance(ty.d)}}tC=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],tC);var tw=r("787205"),tI=r("522449");class tS{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new y.y().build({headers:{"Content-Type":"application/json",appid:String(e)},withCredentials:!0}),(0,C.mH)(t),(0,w.i3)(t),(0,f.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.COMMERCE,path:e})}fetchPaidStrategy(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._getApi(tI.b.PAID_STRATEGY),(0,eY.X)(t),{ctx:e});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);return(0,d.oW)((0,eY.b)(i.data))}catch(e){return(0,ec.m)(e,-1,"fetch paid strategy error")}})()}fetchReceiveCreditPopup(){var e=this;return(0,u._)(function*(){try{var t=yield e._networkClient.post(e._getApi(tI.b.RECEIVE_CREDIT_POPUP),{});if("0"!==t.ret)return(0,d.wf)(Number(t.ret),t.errmsg);return(0,d.oW)((0,eY.b)(t.data))}catch(e){return(0,ec.m)(e,-1,"fetch receive credit popup error")}})()}fetchOrderRecords(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(tI.b.QUERY_ORDER_RECORDS),(0,eY.X)(e));if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return r.data.record_list.map(e=>{"MONTH"===e.cycle_unit&&(e.cycle_unit=12===e.cycle?"YEAR":"MONTH")}),(0,d.oW)((0,eY.b)(r.data))}catch(e){return(0,ec.m)(e,-1,"fetchOrderRecords error")}})()}fetchOverseaOrderRecords(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(tI.b.QUERY_OVERSEA_ORDER_RECORDS),(0,eY.X)(e));if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return r.data.record_list=r.data.trade_records,r.data.record_list.map(e=>{var t,r;(null==e?void 0:null===(r=e.sku_info)||void 0===r?void 0:null===(t=r.sku_cycle)||void 0===t?void 0:t.cycle_unit)==="MONTH"&&(e.sku_info.sku_cycle.cycle_unit=12===e.sku_info.sku_cycle.cycle?"YEAR":"MONTH")}),(0,d.oW)((0,eY.b)(r.data))}catch(e){return(0,ec.m)(e,-1,"fetchOverseaOrderRecords error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}tS=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.fM)(1,te.Y),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x,void 0===te.Y?Object:te.Y])],tS);var tb=r("216342");class tT{fetchPaidStrategy(e,t){return this._commerceRepository.fetchPaidStrategy(e,t)}fetchReceiveCreditPopup(){return this._commerceRepository.fetchReceiveCreditPopup()}fetchOrderRecords(e){return this._commerceRepository.fetchOrderRecords(e)}fetchOverseaOrderRecords(e){return this._commerceRepository.fetchOverseaOrderRecords(e)}constructor(e){this._instantiationService=e,this._commerceRepository=(0,tb.bu)("CommerceRepository",this._instantiationService.createInstance(tS))}}tT=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],tT);var tR=r("519169"),tk=r("804362"),tE=r("633397"),tP={en:"EN",ar:"AR","ja-JP":"JA","ko-KR":"KO","th-TH":"TH","pt-BR":"PT","zh-Hant-HK":"ZH-HANT-HK","zh-Hant-TW":"ZH-HANT-TW","zh-Hant":"ZH-CN","zh-Hans":"ZH","es-LA":"ES","id-ID":"ID","fil-PH":"FIL","ms-MY":"MS","ru-RU":"RU","tr-TR":"TR","vi-VN":"VI","my-MM":"MY","cs-CZ":"CS","nl-NL":"NL","fi-FI":"FI","fr-FR":"FR","de-DE":"DE","el-GR":"EL","hu-HU":"HU","it-IT":"IT","km-KH":"KM","pl-PL":"PL","ro-RO":"RO","es-ES":"ES","sv-SE":"SV","he-IL":"HE","uk-UA":"UK","ur-PK":"UR"};class tA{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new y.y().build({headers:{"Content-Type":"application/json",appid:String(e),lan:el.ZP.language},withCredentials:!0}),(0,C.mH)(t),(0,w.i3)(t),(0,f.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.COMMERCE,path:e})}fetchVIPPriceList(e,t){var r=this;return(0,u._)(function*(){try{var i,n=yield r._networkClient.post(r._getApi(tE.b.VIP_PRICE_LIST),(0,eY.X)(t),{ctx:e});if("0"!==n.ret)return(0,d.wf)(Number(n.ret),n.errmsg);return null===(i=n.data.vip_price_list)||void 0===i||i.map(e=>{var t;e.change_type=null!==(t=null==e?void 0:e.change_type)&&void 0!==t?t:tk.N.LATERAL,e.cycle_unit="MONTH"===e.cycle_unit&&12===e.subscribe_cycle?"YEAR":e.cycle_unit}),(0,d.oW)((0,eY.b)(n.data))}catch(e){return(0,ec.P)(e)}})()}fetchCreditPriceList(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._getApi(tE.b.CREDIT_PRICE_LIST),(0,eY.X)(t),{ctx:e});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);return(0,d.oW)((0,eY.b)(i.data))}catch(e){return(0,ec.P)(e)}})()}fetchOverseaVIPPriceList(e,t){var r=this;return(0,u._)(function*(){try{var i,n,a=yield r._networkClient.post(r._getApi(tE.b.OVERSEA_VIP_PRICE_LIST),(0,eY.X)(t),{ctx:e,headers:{lan:null!==(n=tP[el.ZP.language])&&void 0!==n?n:"EN"}});if("0"!==a.ret)return(0,d.wf)(Number(a.ret),a.errmsg);return null===(i=a.data.all_price_list)||void 0===i||i.map(e=>{var t;e.change_type=null!==(t=null==e?void 0:e.change_type)&&void 0!==t?t:tk.N.LATERAL,e.cycle_unit="MONTH"===e.cycle_unit&&12===e.subscribe_cycle?"YEAR":e.cycle_unit}),(0,d.oW)((0,eY.b)(a.data))}catch(e){return(0,ec.P)(e)}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}tA=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.fM)(1,te.Y),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x,void 0===te.Y?Object:te.Y])],tA);class tL{fetchVIPPriceList(e,t){return this._goodsDataService.fetchVIPPriceList(e,t)}fetchCreditPriceList(e,t){return this._goodsDataService.fetchCreditPriceList(e,t)}fetchOverseaVIPPriceList(e,t){return this._goodsDataService.fetchOverseaVIPPriceList(e,t)}constructor(e){this._instantiationService=e,this._goodsDataService=(0,tb.bu)("GoodsRepository",this._instantiationService.createInstance(tA))}}tL=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],tL);var tD=r("143608"),tO=r("4149"),tM=r("256408"),tF=r("606505"),tN=r("417391"),tx=r("107908"),tU={USER_CREDIT:"/commerce/v1/benefits/user_credit",USER_CREDIT_HISTORY:"/commerce/v1/benefits/user_credit_history",CREDIT_RECEIVE:"/commerce/v1/benefits/credit_receive"};class tj{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new y.y().build({headers:{"Content-Type":"application/json",appid:String(e)},withCredentials:!0}),(0,tx.x)(t,e),(0,C.mH)(t),(0,w.i3)(t),(0,f.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.COMMERCE,path:e})}fetchUserCredit(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(tU.USER_CREDIT),{},{ctx:e});if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return(0,d.oW)((0,eY.b)(r.data))}catch(e){return(0,ec.P)(e)}})()}fetchUserCreditHistory(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._getApi(tU.USER_CREDIT_HISTORY),(0,eY.X)(t),{ctx:e});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);return(0,d.oW)((0,eY.b)(i.data))}catch(e){return(0,ec.m)(e,-1,"fetch user credit history error")}})()}receiveCredit(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._getApi(tU.CREDIT_RECEIVE),(0,eY.X)(null!=t?t:{}),{ctx:e});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);return(0,d.oW)((0,eY.b)(i.data))}catch(e){return(0,ec.m)(e,-1,"receive credit error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}tj=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.fM)(1,te.Y),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x,void 0===te.Y?Object:te.Y])],tj);class tV{fetchUserCredit(e){return this._creditRepository.fetchUserCredit(e)}fetchUserCreditHistory(e,t){return this._creditRepository.fetchUserCreditHistory(e,t)}receiveCredit(e,t){return this._creditRepository.receiveCredit(e,t)}constructor(e){this._instantiationService=e,this._creditRepository=(0,tb.bu)("CreditRepository",this._instantiationService.createInstance(tj))}}tV=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],tV);var tB=r("304483"),tH=r("844624"),tG=r("834951"),tW=r("702928"),tq=r("216822");class tY{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new y.y().build({headers:{"Content-Type":"application/json",appid:String(e)},withCredentials:!0}),(0,tx.x)(t,e),(0,C.mH)(t),(0,w.i3)(t),(0,f.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.COMMERCE,path:e})}makeOverseaOrder(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._getApi(tq.b.MAKE_OVER_SEA_PAY_ORDER),(0,eY.X)(t),{ctx:e});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);return(0,d.oW)((0,eY.b)(i.data))}catch(e){return(0,ec.m)(e,-1,"make oversea  order error")}})()}queryOverseaOrderStatus(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._getApi(tq.b.GET_OVER_SEA_ORDER_STATUS),(0,eY.X)(t),{ctx:e});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);var n=(0,eY.b)(i.data);return n.status=tW.P[n.preOrderStatus],n.sysTime=Number(i.systime),(0,d.oW)(n)}catch(e){return(0,ec.m)(e,-1,"get oversea order status error")}})()}makeOverseaOrderV3(e,t){var r=this;return(0,u._)(function*(){try{var i=yield r._networkClient.post(r._getApi(tq.b.MAKE_OVER_SEA_PAY_ORDER_V3),(0,eY.X)(t),{ctx:e});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg);return(0,d.oW)((0,eY.b)(i.data))}catch(e){return(0,ec.m)(e,-1,"make oversea V3 order error")}})()}queryOverseaOrderStatusV3(e,t){var r=this;return(0,u._)(function*(){try{var i,n,a=yield r._networkClient.post(r._getApi(tq.b.GET_OVER_SEA_ORDER_STATUS_V3),(0,eY.X)(t),{ctx:e});if("0"!==a.ret)return(0,d.wf)(Number(a.ret),a.errmsg);return a.data.status=tW.P[a.data.order_status],a.data.sys_time=Number(a.systime),a.data.purchase_date=null===(i=a.data.payment_info)||void 0===i?void 0:i.purchase_date,a.data.payment_method=null===(n=a.data.payment_info)||void 0===n?void 0:n.payment_method,(0,d.oW)((0,eY.b)(a.data))}catch(e){return(0,ec.m)(e,-1,"queryOverseaOrderStatusV3  error")}})()}cancelSubscriptionV3(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(tq.b.CANCEL_VIP_AUTO_V3),(0,eY.X)(e));if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return(0,d.oW)((0,eY.b)(r.data))}catch(e){return(0,ec.m)(e,-1,"cancelSubscriptionV3 error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}(0,g.gn)([(0,tb.lI)("OverseaOrderRepository","makeOverseaOrder"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeOverseaOrderParams?Object:IMakeOverseaOrderParams]),(0,g.w6)("design:returntype",Promise)],tY.prototype,"makeOverseaOrder",null),(0,g.gn)([(0,tb.lI)("OverseaOrderRepository","queryOverseaOrderStatus"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGetOverseaOrderStatusParams?Object:IGetOverseaOrderStatusParams]),(0,g.w6)("design:returntype",Promise)],tY.prototype,"queryOverseaOrderStatus",null),(0,g.gn)([(0,tb.lI)("OverseaOrderRepository","makeOverseaOrderV3"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeOverseaOrderV3Params?Object:IMakeOverseaOrderV3Params]),(0,g.w6)("design:returntype",Promise)],tY.prototype,"makeOverseaOrderV3",null),(0,g.gn)([(0,tb.lI)("OverseaOrderRepository","queryOverseaOrderStatusV3"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IQueryOverseaOrderV3Params?Object:IQueryOverseaOrderV3Params]),(0,g.w6)("design:returntype",Promise)],tY.prototype,"queryOverseaOrderStatusV3",null),(0,g.gn)([(0,tb.lI)("OverseaOrderRepository","cancelSubscriptionV3"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof ICancelSubscriptionParams?Object:ICancelSubscriptionParams]),(0,g.w6)("design:returntype",Promise)],tY.prototype,"cancelSubscriptionV3",null),tY=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.fM)(1,te.Y),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x,void 0===te.Y?Object:te.Y])],tY);class tZ{makeUnautoVIPOrder(e,t){return this._vipOrderRepository.makeUnautoVIPOrder(e,t)}makeAutoVIPOrder(e,t){return this._vipOrderRepository.makeAutoVIPOrder(e,t)}queryVIPOrderStatus(e,t){return this._vipOrderRepository.queryVIPOrderStatus(e,t)}cancelAutoVipOrder(e){return this._vipOrderRepository.cancelAutoVipOrder(e)}cancelVIPOrder(e){return this._vipOrderRepository.cancelVIPOrder(e)}makeCreditOrder(e,t){return this._creditOrderRepository.makeCreditOrder(e,t)}queryCreditOrderStatus(e,t){return this._creditOrderRepository.queryCreditOrderStatus(e,t)}cancelCreditOrder(e){return this._creditOrderRepository.cancelCreditOrder(e)}makeOverseaOrder(e,t){return this._overseaOrderRepository.makeOverseaOrder(e,t)}queryOverseaOrderStatus(e,t){return this._overseaOrderRepository.queryOverseaOrderStatus(e,t)}makeOverseaOrderV3(e,t){return this._overseaOrderRepository.makeOverseaOrderV3(e,t)}queryOverseaOrderStatusV3(e,t){return this._overseaOrderRepository.queryOverseaOrderStatusV3(e,t)}cancelSubscriptionV3(e){return this._overseaOrderRepository.cancelSubscriptionV3(e)}getPreCreateInfo(e){return this._vipOrderRepository.getPreCreateInfo(e)}constructor(e){this._instantiationService=e,this._vipOrderRepository=this._instantiationService.createInstance(tH.X),this._creditOrderRepository=this._instantiationService.createInstance(tG.W),this._overseaOrderRepository=this._instantiationService.createInstance(tY)}}(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","makeUnautoVIPOrder"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeVIPUnautoOrderParams?Object:IMakeVIPUnautoOrderParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"makeUnautoVIPOrder",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","makeAutoVIPOrder"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeVipAutoOrderParams?Object:IMakeVipAutoOrderParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"makeAutoVIPOrder",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","queryVIPOrderStatus"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IQueryOrderStatusParams?Object:IQueryOrderStatusParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"queryVIPOrderStatus",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","makeCreditOrder"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeCreditOrderParams?Object:IMakeCreditOrderParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"makeCreditOrder",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","queryCreditOrderStatus"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IQueryOrderStatusParams?Object:IQueryOrderStatusParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"queryCreditOrderStatus",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","makeOverseaOrder"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeOverseaOrderParams?Object:IMakeOverseaOrderParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"makeOverseaOrder",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","queryOverseaOrderStatus"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IGetOverseaOrderStatusParams?Object:IGetOverseaOrderStatusParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"queryOverseaOrderStatus",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","makeOverseaOrderV3"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IMakeOverseaOrderV3Params?Object:IMakeOverseaOrderV3Params]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"makeOverseaOrderV3",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","queryOverseaOrderStatusV3"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IQueryOverseaOrderV3Params?Object:IQueryOverseaOrderV3Params]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"queryOverseaOrderStatusV3",null),(0,g.gn)([(0,tb.lI)("DreaminaPayDataService","cancelSubscriptionV3"),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof ICancelSubscriptionParams?Object:ICancelSubscriptionParams]),(0,g.w6)("design:returntype",void 0)],tZ.prototype,"cancelSubscriptionV3",null),tZ=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],tZ);var tK=r("295878"),tz=r("492778"),tQ=r("342070"),tJ=r("580536"),tX=r("899792"),t$=r("26980"),t0=r("110551"),t1=r("829509"),t6=r("257843"),t2=r("247170"),t7=r("798627");class t8{getAssetsList(e){return this._dreaminaAssetsRepository.getAssetsList(e)}getStoryAssetsList(e){return this._dreaminaAssetsRepository.getStoryList(e)}getCanvasAssetList(e,t){return this._dreaminaAssetsRepository.getCanvasAssetList((0,t2.fC)(),t)}getAudioAssetList(e){return this._dreaminaAssetsRepository.getAudioAssetList(e)}markFavorite(e){return this._dreaminaAssetsRepository.markFavorite(e)}constructor(e){this._instantiationService=e,this._dreaminaAssetsRepository=this._instantiationService.createInstance(t7.G)}}t8=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],t8);var t3=r("515347"),t5=r("471462"),t9=r("622323"),t4=r("718385"),re=r("705408"),rt=r("487991"),rr=r("998519"),ri=r("690778"),rn=r("649337"),ra=r("355593"),ro=r("687550");class rs{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build(y.D),(0,w.i3)(e),(0,C.mH)(e),(0,f.V)(e),e)}return this._networkClientInstance}get _api(){return"".concat(I._L.getVar("web_domain")).concat(ra.b.GET_USER_PERMISSION)}getUserPermission(e){var t=this;return(0,u._)(function*(){performance.mark("GET_USER_PERMISSION_START");try{try{var r=window.__user_permissions;if(r)return window.__user_permissions=null,(0,d.oW)((0,ro.n)(r))}catch(e){}try{var i,n=yield t._networkClient.post(t._api,e,{withCredentials:!0});if("0"!==n.ret)return(0,d.wf)(Number(n.ret),null!==(i=n.errmsg)&&void 0!==i?i:"");return(0,d.oW)((0,ro.P)(n))}catch(e){return(0,ec.m)(e,-1,"getUserPermission api error")}}finally{performance.mark("GET_USER_PERMISSION_END")}})()}}var rc=r("785797");class ru extends L.JT{getUserPermission(e){return this._userPermissionRepository.getUserPermission(e)}constructor(e){super(),this._instantiationService=e,this._userPermissionRepository=this._instantiationService.createInstance(rs)}}(0,g.gn)([(0,rc.o)(),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof IGetUserPermissionParams?Object:IGetUserPermissionParams]),(0,g.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],ru.prototype,"getUserPermission",null),ru=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],ru);var rd=r("835993"),rl=r("395399");class rp extends L.JT{getEffectAbTest(){return this._effectAbTestRepository.getEffectAbTest()}constructor(e){super(),this._instantiationService=e,this._effectAbTestRepository=this._instantiationService.createInstance(rl.E)}}(0,g.gn)([(0,rc.o)(),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[]),(0,g.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],rp.prototype,"getEffectAbTest",null),rp=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],rp);var r_=r("271177"),rv=r("659090"),rh=r("917598"),rg=r("879026");class rm extends tv.C{parseHeycanResponseDataToResources(e){return(0,rg.f)(e)}buildCustomRequest(e){return{category_key:e.categoryKey,panel:tc.I.Tone,panel_source:rh.M8.Loki,app_id:1775}}}var rf=r("707752");class ry{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build({headers:{"Content-Type":"application/json",ch:"online"},withCredentials:!0}),(0,eK.V)(e),(0,eq.$)(e),(0,C.mH)(e),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}submitTask(e){var t=this;return(0,u._)(function*(){try{var r=t._environmentService.appId,i=yield t._networkClient.post(t._getApi(rf.b.SUBMIT_TASK),e,{params:{aid:r}});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});var n=(0,eY.b)(i.data,e9.zW);return(0,d.oW)(n)}catch(e){return(0,ec.P)(e)}})()}getToneItemListById(e){var t=this;return(0,u._)(function*(){try{var r=t._environmentService.appId,i=yield t._networkClient.post(t._getApi(rf.b.GET_LOCAL_ITEM_LIST),e,{params:{aid:r}});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});var n=i.data.item_list.map(e=>(0,rg.f)(e)),a=(0,eY.b)(n,e9.zW);return(0,d.oW)(a)}catch(e){return(0,ec.P)(e)}})()}getUserGeneratedToneList(e){var t=this;return(0,u._)(function*(){try{var r=t._environmentService.appId,i=yield t._networkClient.post(t._getApi(rf.b.GET_USER_LOCAL_ITEM_LIST),e,{params:{aid:r}});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});var n=i.data.item_list.map(e=>(0,rg.f)(e)),a=(0,eY.b)(n,e9.zW);return(0,d.oW)({data:a,hasMore:i.data.has_more,nextOffset:i.data.next_offset})}catch(e){return(0,ec.P)(e)}})()}deleteGeneratedTone(e){var t=this;return(0,u._)(function*(){try{var r=t._environmentService.appId,i=yield t._networkClient.post(t._getApi(rf.b.DELETE_VOICE),e,{params:{aid:r}});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});return(0,d.oW)(i)}catch(e){return(0,ec.P)(e)}})()}renameGeneratedTone(e){var t=this;return(0,u._)(function*(){try{var r=t._environmentService.appId,i=yield t._networkClient.post(t._getApi(rf.b.UPDATE_VOICE),e,{params:{aid:r}});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});return(0,d.oW)(i)}catch(e){return(0,ec.P)(e)}})()}queryTask(e){var t=this;return(0,u._)(function*(){try{var r=t._environmentService.appId,i=yield t._networkClient.post(t._getApi(rf.b.QUERY_TASK),e,{params:{aid:r}});if("0"!==i.ret)return(0,d.wf)(Number(i.ret),i.errmsg,{logId:i.logid});var n=(0,eY.b)(i.data,e9.zW);return(0,d.oW)(n)}catch(e){return(0,ec.P)(e)}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}ry=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.fM)(1,te.Y),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x,void 0===te.Y?Object:te.Y])],ry);class rC extends L.JT{getToneCategories(){var e=this;return(0,u._)(function*(){var t=yield e._getCategoriesRepository.getCategories();return t.ok?(0,d.oW)({list:t.value.list.map(e=>(0,e5._)((0,x._)({},e),{categoryKey:e.category_key}))}):t})()}getToneResources(e){return this._getResourcesRepository.getResources(e)}toneSubmitTask(e){return this._generateToneTaskRepository.submitTask(e)}getToneItemListById(e){return this._generateToneTaskRepository.getToneItemListById(e)}getUserGeneratedToneList(e){return this._generateToneTaskRepository.getUserGeneratedToneList(e)}deleteGeneratedTone(e){return this._generateToneTaskRepository.deleteGeneratedTone(e)}renameGeneratedTone(e){return this._generateToneTaskRepository.renameGeneratedTone(e)}queryGenerateToneTask(e){return this._generateToneTaskRepository.queryTask(e)}constructor(e){super(),this._instantiationService=e,this._getCategoriesRepository=this._instantiationService.createInstance(rv.U),this._getResourcesRepository=this._instantiationService.createInstance(rm),this._generateToneTaskRepository=this._instantiationService.createInstance(ry)}}rC=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],rC);var rw=r("369440"),rI=r("30169"),rS=r("647990"),rb={LIP_SYNC_DETECTION:"/mweb/v1/lip_sync_pre_process"},rT=()=>{var e=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0});return(0,eq.$)(e),(0,C.mH)(e),(0,w.i3)(e),(0,f.V)(e),e};class rR{get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=rT()),this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}submitLipSyncDetectionTask(e,t){var r=this;return(0,u._)(function*(){try{var i=(0,eY.X)(e),n=yield r._networkClient.post(r._getApi(rb.LIP_SYNC_DETECTION),(0,e5._)((0,x._)({},i),{scene:i.video_input_info?"lip_sync_user_video":void 0}),{params:t});return(0,d.oW)((0,eY.b)(n))}catch(e){return(0,ec.m)(e,-1,"detect lip sync error")}})()}constructor(e){this._httpApiSettingService=e}}rR=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],rR);var rk=r("123944");class rE{submitTask(e,t){return this._lipSyncDetectionRepository.submitLipSyncDetectionTask(e,t)}queryTask(e){return this._lipSyncRepository.queryTask({taskIdList:e})}constructor(e){this._instantiationService=e,this._lipSyncDetectionRepository=this._instantiationService.createInstance(rR),this._lipSyncRepository=this._instantiationService.createInstance(rk.s)}}rE=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],rE);var rP=r("262238"),rA=r("639643"),rL=r("90075"),rD=r("536110"),rO=r("325398"),rM=r("870421"),rF=r("918046");class rN extends rM.r{get resourceType(){return Q._g.Font}parseEffectsToResources(e){return e.map(e=>(0,rF.ey)(e))}}var rx=r("514689"),rU=r("969015"),rj=r("294202"),rV=r("892611"),rB=r("319909"),rH=r("275646"),rG=r("589214");class rW{shouldUseRace(){return!1}get _networkClient(){if(!this._networkClientInstance){var e=function(e){var{addBusinessPlugins:t}=e,r=new y.y().build(y.D);return t(r,[o.U.Preload]),(0,w.i3)(r),(0,f.V)(r),r}(this._clientPluginService);this._networkClientInstance=this.shouldUseRace()?(0,rV.d)(e,this._storageService,this._accountService.uniqueId,this._configurationService.disableRequestCache):(0,rV.D)(e,this._storageService,this._accountService.uniqueId,this._configurationService.disableRequestCache)}return this._networkClientInstance}_getWhiteUserPermission(){var e=this;return(0,u._)(function*(){if(!e._accountService.hasLogin)return!1;var[t,r]=(yield e._userPermissionDataService.getUserPermission({})).pair();return!t&&!!r.publishWebTemplatePermission||!1})()}getResources(e){var t=this;return(0,u._)(function*(){var r=e instanceof es.yt?e.config:e;try{var i=t.convertGetResourcesByCategoryToRequest(e),n=yield t._doGetResources(i);if(!n.ok)return n;var a=t._convertGetResourcesByCategoryToQueryToken(r,n.value),o=yield t.filterResources(a);return(0,d.oW)(o)}catch(e){return(0,ec.m)(e,-1,"getResourcesByCategory api error")}})()}filterResources(e){var t=this;return(0,u._)(function*(){var{disableFilterVipResource:r}=e.config;if(!r){var i=yield t._getWhiteUserPermission();!t._configurationService.getAppConfigurationValue("vip.disableFilter")&&(yield(0,rH.g)(i,t.resourceType))&&(e.value.list=e.value.list.filter(e=>!e.isVip))}return e})()}_doGetResources(e){var t=this;return(0,u._)(function*(){var r,i,n=yield t._networkClient.postWithCache(t._api,e,{withCredentials:!0}),a=null===(r=n.BaseResp)||void 0===r?void 0:r.StatusCode,o=null===(i=n.BaseResp)||void 0===i?void 0:i.StatusMessage;return 0!==a?(0,d.wf)(null!=a?a:-1,null!=o?o:"do getResources error"):(0,d.oW)(n)})()}convertGetResourcesByCategoryToRequest(e){var t,r,i,n,a=e instanceof es.yt?e.config:e,o=null===(t=this._configurationService.abTestManager)||void 0===t?void 0:t.getBooleanAbTestValue(rB.o.NewTransitionEffectEnabled),s=this._environmentService.isAutoTest||o?rj.Nb.New:rj.Nb.Old,c={panel:a.panel||this._configurationService.resourcePanel[this.resourceType],appVersion:this._environmentService.appVersion,sdkVersion:null!==(r=a.sdkVersion)&&void 0!==r?r:rG.f4,lang:el.ZP.language,category:null!==(i=a.category)&&void 0!==i?i:"all",hasCategoryEffects:!1,cc_web_version:s},u=this.buildCustomRequest(a),{limit:d,offset:l}=(0,es.ky)(e)?(0,e5._)((0,x._)({},e.config.limit?{limit:e.config.limit}:void 0),{offset:null!==(n=e.offset)&&void 0!==n?n:0}):(0,x._)({},this.defaultQueryToken,e.limit?{limit:e.limit}:void 0);return(0,e5._)((0,x._)({},c,u,d?{limit:d}:void 0),{offset:l,sortingPosition:l})}get defaultQueryToken(){return{offset:0}}buildCustomRequest(e){return{}}get _api(){return"".concat(I._L.getVar("web_domain")).concat(rx.bl.GET_RESOURCES_BY_CATEGORY)}_convertGetResourcesByCategoryToQueryToken(e,t){var r,i=this.parseEffectsToResources(t.data.CategoryEffects.Effects,null===(r=t.data.UrlPrefix)||void 0===r?void 0:r[0]),{HasMore:n,SortingPosition:a}=t.data.CategoryEffects;return(0,es.ib)(e,{list:i},{hasMore:n,offset:a})}constructor(e,t,r,i,n,a,o){this._accountService=e,this._configurationService=t,this._storageService=r,this._effectAbTestService=i,this._environmentService=n,this._userPermissionDataService=a,this._clientPluginService=o}}rW=(0,g.gn)([(0,g.fM)(0,W.Gw),(0,g.fM)(1,rU.Ui),(0,g.fM)(2,eE.U),(0,g.fM)(3,rd.c),(0,g.fM)(4,te.Y),(0,g.fM)(5,rn.c),(0,g.fM)(6,o.a),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===W.Gw?Object:W.Gw,void 0===rU.Ui?Object:rU.Ui,void 0===eE.U?Object:eE.U,void 0===rd.c?Object:rd.c,void 0===te.Y?Object:te.Y,void 0===rn.c?Object:rn.c,void 0===o.a?Object:o.a])],rW);class rq extends rW{buildCustomRequest(e){var t,r;return{enable_album:null!==(t=e.enableAlbum)&&void 0!==t&&t,only_commercial:null!==(r=e.onlyCommercial)&&void 0!==r&&r}}get resourceType(){return Q._g.Font}parseEffectsToResources(e,t){return e.map(e=>(0,rF.ey)(e,t))}}var rY=r("312670"),rZ=r("813605"),rK=r("396275");class rz extends rZ.h{get brandResourceType(){return rK.Q.Font}parseResponseDataToResources(e){return(0,rF.ey)(e,void 0,!0)}}var rQ=r("324069");class rJ extends rQ.i{parseResponseDataToResources(e){return(0,rF.ey)(e,void 0,!0)}}var rX=r("475407"),r$=r("405151"),r0=r("490165"),r1=r("807744"),r6=r("557343");class r2 extends r$.B{get resourceType(){return Q._g.Font}get resourcePanelType(){return this._configurationService.resourcePanel[Q._g.Font]}get getResourcesApi(){return"".concat(this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:r1.bl.GET_CATEGORY_RESOURCE}))}parseHeycanResponseDataToResources(e){return(0,rF.es)(e)}buildCustomFilterParams(){return Promise.resolve({})}buildCustomRequest(e){var t;return{category_key:e.category,panel:this._configurationService.resourcePanel[Q._g.Font],panel_source:rh.M8.Loki,app_id:null!==(t=e.appID)&&void 0!==t?t:rh.br,loki_opt:{loki_biz_id:e.lokiAppID}}}constructor(e,t,r,i,n,a,o,s){super(e,t,r,i,a,o,s),this._httpApiSettingService=n}}r2=(0,g.gn)([(0,g.fM)(0,r0.D),(0,g.fM)(1,rn.c),(0,g.fM)(2,rd.c),(0,g.fM)(3,rU.Ui),(0,g.fM)(4,_.x),(0,g.fM)(5,r6.L),(0,g.fM)(6,o.a),(0,g.fM)(7,eE.U),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===r0.D?Object:r0.D,void 0===rn.c?Object:rn.c,void 0===rd.c?Object:rd.c,void 0===rU.Ui?Object:rU.Ui,void 0===_.x?Object:_.x,void 0===r6.L?Object:r6.L,void 0===o.a?Object:o.a,void 0===eE.U?Object:eE.U])],r2);var r7=r("265510"),r8=r("680534");class r3 extends r8.A{get resourceType(){return U.g.Font}get resourcePanelType(){return K.q.Font}parseHeycanResponseDataToResources(e){return(0,r7.n)(e)}constructor(e,t){super(e,t)}}r3=(0,g.gn)([(0,g.fM)(0,W.Gw),(0,g.fM)(1,r6.L),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===W.Gw?Object:W.Gw,void 0===r6.L?Object:r6.L])],r3);var r5=r("193265"),r9=r("32927"),r4=r("824547"),ie="loki2vimo",it=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"p0";return e.abTestManager.getAbTestValue("".concat(ie,"-").concat(t),{})},ir=(e,t)=>e["".concat(ie,"_").concat(t)]||{};var ii=(i=(0,u._)(function*(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p0";return"vimo"===ir((yield it(e,r)),t).panel_path}),function(e,t){return i.apply(this,arguments)}),ia=(e,t,r)=>{var i,n=e instanceof es.yt?e.config:e,a={clientABParam:{loki2vimo:t},panelSource:(null==r?void 0:r.isSkipSetPanelSourceNull)?n.panelSource:null};return e instanceof es.yt?(null===(i=e.combineConfig)||void 0===i||i.call(e,(0,x._)({},a)),e):(0,r4.Z)(e,(0,x._)({},a))},io=(e,t,r)=>({items:e.map(e=>({id:e,effect_type:t,source:r||rj.Hw.LOKI}))});class is extends L.JT{getFont(e){var t=this;return(0,u._)(function*(){return(yield ii(t._configurationService,t._getHeycanFontByCategoryRepository.resourcePanelType))?t._getHeycanFontByCategoryRepository.getResources(e):t._fontRepository.getResources(e)})()}getBrandFonts(e){return this._getBrandFontsRepository.getResources(e)}batchGetFontsByIds(e){var t=this;return(0,u._)(function*(){var{isFromBrand:r=!1}=e;return r?t._getBrandFontsByIdsRepository.getResourcesByIds(e):e.source===rj.Hw.LOKI?t._batchGetFontRepository.batchGetResources(e):"loki"===ir((yield it(t._configurationService)),t._batchGetHeycanFontRepository.resourcePanelType).panel_path&&e.source!==rj.Hw.HEYCAN?t._batchGetFontRepository.batchGetResources(e):t._batchGetHeycanFontRepository.batchGetResources(io(e.ids,t._batchGetHeycanFontRepository.resourceType,e.source))})()}getFontCategories(e){var t=this;return(0,u._)(function*(){var r=yield it(t._configurationService);return"vimo"===ir(r,t._getHeycanFontCategoriesRepository.resourcePanelType).panel_path?t._getHeycanFontCategoriesRepository.getCategories(ia(e,r)):t._getFontCategoriesRepository.getCategories(e)})()}getDreaminaFontCategories(){return this._getDreaminaFontCategoriesRepository.getCategories({panelSource:rh.M8.Loki,appID:rh.br})}getDreaminaFonts(e){return this._getDreaminaFontsRespository.getResources(e)}constructor(e={},t,r){super(),this._options=e,this._instantiationService=t,this._configurationService=r,this._fontRepository=this._instantiationService.createInstance(rq),this._batchGetFontRepository=this._instantiationService.createInstance(rN),this._getFontCategoriesRepository=this._instantiationService.createInstance(rY.G),this._getBrandFontsRepository=this._instantiationService.createInstance(rz),this._getBrandFontsByIdsRepository=this._instantiationService.createInstance(rJ),this._getDreaminaFontCategoriesRepository=this._instantiationService.createInstance(rX.F),this._getDreaminaFontsRespository=this._instantiationService.createInstance(r2),this._getHeycanFontByCategoryRepository=this._instantiationService.createInstance(r5.w),this._getHeycanFontCategoriesRepository=this._instantiationService.createInstance(r9.K),this._batchGetHeycanFontRepository=this._instantiationService.createInstance(r3),this._options.fixedRegion&&(this._getHeycanFontCategoriesRepository.setFixedRegion(this._options.fixedRegion),this._getHeycanFontByCategoryRepository.setFixedRegion(this._options.fixedRegion))}}is=(0,g.gn)([(0,g.fM)(1,m.T),(0,g.fM)(2,rU.Ui),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[Object,void 0===m.T?Object:m.T,void 0===rU.Ui?Object:rU.Ui])],is);var ic=r("266049"),iu=r("536170"),id=r("337337"),il=r("329220"),ip=r("335415"),i_=r("114924"),iv=r("214350"),ih=r("377000");class ig{getCharacterList(e){return this._dreaminaCharacterRepository.getCharacterList(e)}createCharacter(e,t){return this._dreaminaCharacterRepository.createCharacter(e,t)}deleteCharacter(e){return this._dreaminaCharacterRepository.deleteCharacter(e)}updateCharacter(e,t){return this._dreaminaCharacterRepository.updateCharacter(e,t)}getCharacter(e){return this._dreaminaCharacterRepository.getCharacter(e)}getCharacterRefImageList(e){return this._dreaminaCharacterRepository.getCharacterRefImageList(e)}constructor(e){this._instantiationService=e,this._dreaminaCharacterRepository=this._instantiationService.createInstance(ih.w)}}ig=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],ig);var im=r("972918"),iy=r("904761"),iC=r("150657"),iw=r("942696");class iI{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,tx.x)(t,e),(0,eK.V)(t),(0,C.mH)(t),(0,w.i3)(t),(0,f.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}getShortLink(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(iw.b.GET_SHORT_LINK),e);if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return(0,d.oW)(r.data)}catch(e){return(0,ec.m)(e,-1,"get short link error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}iI=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.fM)(1,te.Y),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x,void 0===te.Y?Object:te.Y])],iI);var iS=r("480451");class ib{getShortLink(e){return this._shortLinkRepository.getShortLink(e)}getShortLinkFromUG(e){return this._shortLinkRepositoryFromUG.getShortLink(e)}constructor(e){this._instantiationService=e,this._shortLinkRepository=this._instantiationService.createInstance(iI),this._shortLinkRepositoryFromUG=this._instantiationService.createInstance(iS.e)}}ib=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],ib);var iT=r("573441"),iR={DELETE_STYLE:"/mweb/v1/style/delete_style_item",GET_STYLE_LIST:"/mweb/v1/style/get_style_item_list",CREATE_STYLE:"/mweb/v1/style/mcreate_style_item"};class ik{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new y.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,eK.V)(e),(0,C.mH)(e),(0,w.i3)(e),(0,f.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}getStyleList(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(iR.GET_STYLE_LIST),(0,eY.X)(e));if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return(0,d.oW)((0,eY.b)(r.data))}catch(e){return(0,ec.m)(e,-1,"get style list error")}})()}createStyle(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(iR.CREATE_STYLE),(0,eY.X)(e));if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return(0,d.oW)((0,eY.b)(r.data))}catch(e){return(0,ec.m)(e,-1,"create style error")}})()}deleteStyle(e){var t=this;return(0,u._)(function*(){try{var r=yield t._networkClient.post(t._getApi(iR.DELETE_STYLE),(0,eY.X)(e));if("0"!==r.ret)return(0,d.wf)(Number(r.ret),r.errmsg);return(0,d.oW)((0,eY.b)(r.data))}catch(e){return(0,ec.m)(e,-1,"delete style error")}})()}constructor(e){this._httpApiSettingService=e}}ik=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],ik);class iE{getStyleList(e){return this._dreaminaStyleRepository.getStyleList(e)}createStyle(e){return this._dreaminaStyleRepository.createStyle(e)}deleteStyle(e){return this._dreaminaStyleRepository.deleteStyle(e)}constructor(e){this._instantiationService=e,this._dreaminaStyleRepository=this._instantiationService.createInstance(ik)}}iE=(0,g.gn)([(0,g.fM)(0,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===m.T?Object:m.T])],iE);var iP=r("471543"),iA=r("599998"),iL=r("651712"),iD=r("864722"),iO=r("951729"),iM=r("724086"),iF=r("945873"),iN=r("15857"),ix=r("91781"),iU=r("777995");class ij extends L.JT{success(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._addNotification(e,ix.zb.Success,t,r)}info(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._addNotification(e,ix.zb.Info,t,r)}warning(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._addNotification(e,ix.zb.Warning,t,r)}error(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._addNotification(e,ix.zb.Error,t,r)}normal(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._addNotification(e,ix.zb.Normal,t,r)}loading(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._addNotification(e,ix.zb.Loading,t,r)}updateLoading(e,t,r){iU.Z[ix.zb.Loading]((0,x._)({id:e,content:t},r))}close(e,t){this._removeNotificationFromList(e)}_addNotification(e,t,r,i){var n=this._findDuplicated(e);n?n.close():this._notificationList.length===this._maxNotifications&&this._notificationList[0].close();var a=Date.now(),o=iU.Z[t]((0,e5._)((0,x._)({content:e,onClose:()=>this._onClose(a)},i),{style:r.style})),s=()=>{this._isNotificationExisted(a)&&(o(),this._removeNotificationFromList(a))};return this._notificationList.push({message:e,severity:t,id:a,close:s}),{closeNotification:s,id:a}}_findDuplicated(e){return this._notificationList.find(t=>t.message===e)}constructor(...e){super(...e),this._notificationList=[],this._maxNotifications=ix.DT,this._isNotificationExisted=e=>-1!==this._notificationList.findIndex(t=>t.id===e),this._removeNotificationFromList=e=>{this._notificationList=this._notificationList.filter(t=>t.id!==e)},this._onClose=e=>{this._removeNotificationFromList(e)}}}var iV=r("842118"),iB=r("175873"),iH=r("820072"),iG=r("671381"),iW=r("894412"),iq=r("702095");class iY extends L.JT{get uploaderType(){var e;return(null===(e=this._options.uploaderConfig)||void 0===e?void 0:e.type)===iG.f7.Vod?iG.f7.Vod:iG.f7.Normal}upload(e){var t=this;return(0,u._)(function*(){try{var r,i=Object.assign({},{times:1},e.retry),n=yield t._userMaterialService.getEvercloudInstance(e.workspaceId),a="".concat(e.file.name,"-").concat(Date.now().valueOf,"-").concat(Math.floor(1e3*Math.random())),o=0,s=r=>{var i;return new Promise((i=(0,u._)(function*(i){try{var s,c=yield n.uploadAsset({file:e.file,fileType:e.skipTranscode?"file":void 0,flags:e.uploadFlag,workspaceId:e.workspaceId,autoPromote:e.autoPromote,skipDuplicate:!0,meta:e.bussinessMeta,folderId:null!==(s=e.folderId)&&void 0!==s?s:iq.ZF,isMultiDefTranscode:e.isMultiDefTranscode,transcodeTemplateType:e.transcodeTemplateType,uploaderType:null==r?void 0:r.uploaderType,uploaderConfig:null==r?void 0:r.uploaderConfig});t._uploadTaskMap.set(a,c),c.onUploadMetaReady=t=>{var r;null===(r=e.onUploadMetaReady)||void 0===r||r.call(e,t)},c.onProgress=t=>{var r,{done:i,total:n}=t;n&&(o=Math.max(o,i/n),null===(r=e.onProgress)||void 0===r||r.call(e,o))},c.onFinish=t=>{if("success"===t.status){if(!(t.entryId||t.fileId)){i((0,d.wf)(-1,"assetId is undefined after finishing upload."));return}e.onFinish((0,d.oW)({md5:t.md5,assetId:t.entryId||t.fileId})),i((0,d.ly)())}if("cancel"===t.status&&(e.onFinish((0,d.wf)(iG.H9.Cancel,"cancel upload")),i((0,d.ly)())),"error"===t.status){var r,{code:n,msg:a}=null!==(r=t.errInfo)&&void 0!==r?r:{},o=null!=n?n:iG.H9.Unknown,s=(0,d.wf)(o,null!=a?a:"unknown failure.");[iG.H9.Cancel,iG.H9.EncodingNotSupport,iG.H9.Insufficient,iG.H9.InvalidFormat,iG.H9.InvalidMaterialInformation,iG.H9.InvalidMaterialName,iG.H9.NotMatchExtFormat].includes(o)&&(e.onFinish(s),i((0,d.ly)())),i(s)}}}catch(e){var u,l=(0,d.wf)(null!==(u=e.code)&&void 0!==u?u:-1,e.message||e.msg||"unknown failure.");i(l)}}),function(e){return i.apply(this,arguments)}))};var c=(r=(0,u._)(function*(r){var n={uploaderConfig:{type:iG.f7.Normal}};if((null===(u=t._options)||void 0===u?void 0:null===(o=u.uploaderConfig)||void 0===o?void 0:o.type)===iG.f7.Vod){var o,u,d,l=null===(d=t._options)||void 0===d?void 0:d.uploaderConfig.noCopy;n=r>=i.times?{uploaderConfig:{type:iG.f7.Normal}}:{uploaderConfig:{type:iG.f7.Vod,noCopy:l}}}var p=yield s(n);if(!p.ok){if(r>=i.times){e.onFinish(p),t._uploadTaskMap.delete(a);return}c(r+1);return}t._uploadTaskMap.delete(a)}),function(e){return r.apply(this,arguments)});return c(0),(0,d.oW)({taskId:a,requestId:a})}catch(e){return(0,d.wf)(iG.H9.Unknown,"upload Asset failure: ".concat(null==e?void 0:e.message))}})()}cancel(e){var t;return this._uploadTaskMap.has(e)?(null===(t=this._uploadTaskMap.get(e))||void 0===t||t.cancel(),(0,d.ly)()):(0,d.wf)(-1,"not found task")}constructor(e,t){super(),this._options=e,this._userMaterialService=t,this._uploadTaskMap=new Map}}iY=(0,g.gn)([(0,g.fM)(1,iW.b),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof IUserMaterialUploadServiceOptions?Object:IUserMaterialUploadServiceOptions,void 0===iW.b?Object:iW.b])],iY);var iZ=r("264546"),iK=r("125370"),iz=r("447135"),iQ=r("958223"),iJ=r("80489"),iX=r("833215"),i$=r("681751"),i0=r("777936"),i1=r("328631"),i6=r("509320"),i2=r("396618"),i7=r("819340"),i8=r("434712"),i3=r("772026"),i5=r("119866"),i9=r("171344");function i4(e,t){var r;return"".concat(e,"-").concat(JSON.stringify(null!==(r=t.actions)&&void 0!==r?r:""))}class ne{preloadImageXSdk(){this._preloadBytedUploaderSdk()}preloadVodSdk(){this._preloadBytedUploaderSdk()}getImageXUploader(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._getUploaderCache(i4(e,r),t);if(i)return i;var n=this._containerService.createInstance(t),a=this._containerService.createInstance(i3.A,e,n,r);return this._setUploaderCache(i4(e,r),t,a),a}getVodUploader(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._getUploaderCache(i4(e,r),t);if(i)return i;var n=this._containerService.createInstance(t),a=this._containerService.createInstance(i5.e,e,n,r);return this._setUploaderCache(i4(e,r),t,a),a}syncUrlToEverSpace(e){return this._getSyncEverPhotoRepository().syncUrlToEverPhoto(e)}_getSyncEverPhotoRepository(){return!this._syncEverPhotoRepository&&(this._syncEverPhotoRepository=this._containerService.createInstance(i9.H)),this._syncEverPhotoRepository}_getUploaderCache(e,t){if(this._caches.has(e))return this._caches.get(e).get(t)}_setUploaderCache(e,t,r){!this._caches.has(e)&&this._caches.set(e,new Map),this._caches.get(e).set(t,r)}_preloadBytedUploaderSdk(){var e=this;return(0,u._)(function*(){if(!e._hasPreloadBytedUploaderSdk){e._hasPreloadBytedUploaderSdk=!0;yield r.e("7163").then(r.t.bind(r,594631,23))}})()}constructor(e){this._containerService=e,this._hasPreloadBytedUploaderSdk=!1,this._caches=new Map}}ne=(0,g.gn)([(0,g.fM)(0,i8.t),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===i8.t?Object:i8.t])],ne);var nt=r("588718"),nr=r("450264"),ni=r("722552"),nn=r("948914"),na=r("62115"),no=r("216086");class ns{constructor(e,t){this.keyValue=new no.T,this.database=t.createInstance(na.v,e)}}ns=(0,g.gn)([(0,g.fM)(1,m.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[Array,void 0===m.T?Object:m.T])],ns);var nc=r("572072"),nu=r("736646"),nd=r("293419"),nl=r("900875"),np=r("47356"),n_=r("163596"),nv=r("683519"),nh=r("214090"),ng=r("263206"),nm=r("468567"),nf=r("70529");class ny{reportBySlardar(e,t){if(!this._notNeedReportToSlardarEvents.includes(e))this._reportService.reportDevEvent(e,t)}constructor(e){this._reportService=e,this._notNeedReportToSlardarEvents=[]}}ny=(0,g.gn)([(0,g.fM)(0,nf.m),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===nf.m?Object:nf.m])],ny);var nC=r("520593"),nw=r("260963");class nI{setLikeDataMap(e){var t=(0,x._)({},this.likeDataMap,e);this.likeDataMap=t}markFavorite(e,t){var r=this.likeDataMap[e];r&&(0,nw.z)(()=>{var i=(0,e5._)((0,x._)({},r),{hasFavorited:t,favoriteNum:r.favoriteNum+=t?1:-1}),n=(0,e5._)((0,x._)({},this.likeDataMap),{[e]:i});this.likeDataMap=n})}constructor(){this.likeDataMap={},(0,nw.rC)(this)}}(0,g.gn)([nw.LO,(0,g.w6)("design:type","undefined"==typeof Record?Object:Record)],nI.prototype,"likeDataMap",void 0),(0,g.gn)([nw.aD,(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",["undefined"==typeof Record?Object:Record]),(0,g.w6)("design:returntype",void 0)],nI.prototype,"setLikeDataMap",null),(0,g.gn)([nw.aD,(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[String,Boolean]),(0,g.w6)("design:returntype",void 0)],nI.prototype,"markFavorite",null);var nS=r("276632"),nb=r("326099"),nT=r("873237"),nR=r("138460"),nk=r("462537"),nE=r("650248"),nP=r("369617");class nA extends L.JT{registerMenuFileDragHandler(e){this._menuDragHandlerMap.set(e.containerId,e)}dispose(){document.removeEventListener("mouseleave",this._onMouseleave),document.removeEventListener("dragover",this._onDragOver),document.removeEventListener("drop",this._onDrop),document.removeEventListener("dragleave",this._handleDragLeave),super.dispose()}_isOuterFile(e){var t;return(null===(t=e.dataTransfer)||void 0===t?void 0:t.types.length)&&e.dataTransfer.types.includes("Files")}_registerDocumentListener(){document.addEventListener("mouseleave",this._onMouseleave),document.addEventListener("dragover",this._preventDefaultBehavior),document.addEventListener("dragover",this._onDragOver),document.addEventListener("drop",this._onDrop),document.addEventListener("dragleave",this._handleDragLeave)}_handleDragOver(e){if(!!this._isOuterFile(e))this._preventDefaultBehavior(e),this._getDragHandlers().forEach(t=>{t.handleDropOver&&t.handleDropOver(this._checkIsDropInTargetRect(e,t))})}_handleDrop(e){if(!this._isOuterFile(e))return;if(this._preventDefaultBehavior(e),this._getDragHandlers().forEach(r=>{this._checkIsDropInTargetRect(e,r)&&(t=r)}),!t)return;this._changeDragStatus(!1);var t,{files:r}=e.dataTransfer;if(!!r){var i=[];for(var n of r){var a=n.name.toLowerCase(),o=".".concat(a.split(".").pop());t.isAcceptFile(n.type,o)?i.push(n):nP.s.warning({content:el.ZP.t("dre_story_toast_format_limit1_exceed",{},"\u5E73\u53F0\u6682\u4E0D\u652F\u6301\u8BE5\u7D20\u6750\u683C\u5F0F"),style:{top:36}})}t.handleDrop(i),this._closeAllHandlersOverDragging()}}_checkIsDropInTargetRect(e,t){var{clientX:r,clientY:i}=e,n=document.getElementById(t.containerId);if(!n)return!1;var a=n.getBoundingClientRect(),o=a.left+window.pageXOffset,s=a.top+window.pageYOffset;if(!(r>=o&&r<=o+a.width&&i>=s&&i<=s+a.height))return!1;var c=document.elementFromPoint(r,i);return n===c||n.contains(c)}_getDragHandlers(){return[...this._menuDragHandlerMap.values()]}_changeDragStatus(e){this._setIsDragging(e),this._getDragHandlers().forEach(t=>{var r;return null===(r=t.dragStatusChangeListener)||void 0===r?void 0:r.call(t,e)})}_preventDefaultBehavior(e){e.preventDefault(),e.stopPropagation()}_closeAllHandlersOverDragging(){this._getDragHandlers().forEach(e=>{var t;null===(t=e.handleDropOver)||void 0===t||t.call(e,!1)})}constructor(){super(),this._menuDragHandlerMap=new Map,this._onDragOver=(0,nE.default)(e=>{if(this._preventDefaultBehavior(e),!!this._isOuterFile(e))this._handleDragOver(e),this._changeDragStatus(!0)},50,{trailing:!1}),this.isDragging=!1,this._onMouseleave=e=>{this._preventDefaultBehavior(e),this._changeDragStatus(!1),this._closeAllHandlersOverDragging()},this._onDrop=e=>{this._handleDrop(e)},this._setIsDragging=e=>{(0,nw.z)(()=>this.isDragging=e)},this._handleDragLeave=e=>{if(this._preventDefaultBehavior(e),!!this.isDragging)!document.body.contains(null==e?void 0:e.relatedTarget)&&(this._changeDragStatus(!1),this._closeAllHandlersOverDragging())},this._registerDocumentListener(),(0,nw.rC)(this,{isDragging:nw.LO})}}var nL=r("364767"),nD=r("219940"),nO=r("970419"),nM=r("734122"),nF=r("22991"),nN=r("100470"),nx=[{filterKey:"\u5185\u5BB9\u4E3B\u4F53",filterName:"\u5185\u5BB9\u4E3B\u4F53",workTypeList:["video","image"],subItemList:[{filterKey:"\u4EBA\u7269",filterName:"\u4EBA\u7269",opTagList:[]},{filterKey:"\u52A8\u7269",filterName:"\u52A8\u7269",opTagList:[]},{filterKey:"\u9759\u7269",filterName:"\u9759\u7269",opTagList:[]},{filterKey:"\u5546\u54C1",filterName:"\u5546\u54C1",opTagList:[]}]},{filterKey:"\u98CE\u683C",filterName:"\u98CE\u683C",workTypeList:["video","image"],subItemList:[{filterKey:"\u5199\u5B9E",filterName:"\u5199\u5B9E",opTagList:[]},{filterKey:"\u63D2\u753B",filterName:"\u63D2\u753B",opTagList:[]}]},{filterKey:"\u5E94\u7528\u573A\u666F",filterName:"\u5E94\u7528\u573A\u666F",workTypeList:["video","image"],subItemList:[{filterKey:"\u63D2\u753B",filterName:"\u63D2\u753B",opTagList:[]},{filterKey:"\u8BBE\u8BA1",filterName:"\u8BBE\u8BA1",opTagList:[]}]},{filterKey:"\u8282\u65E5\u70ED\u70B9",filterName:"\u8282\u65E5\u70ED\u70B9",workTypeList:["video","image"],subItemList:[{filterKey:"\u6A2A\u56FE",filterName:"\u6A2A\u56FE",opTagList:[]},{filterKey:"\u65B9\u56FE",filterName:"\u65B9\u56FE",opTagList:[]},{filterKey:"\u7AD6\u56FE",filterName:"\u7AD6\u56FE",opTagList:[]}]}];class nU{_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:_.Y.DEFAULT,path:e})}getFilterDataList(){var e=this;return(0,u._)(function*(){try{if(e._filterList.length)return(0,d.oW)(e._filterList);var t=yield new Promise(e=>{setTimeout(()=>{e(nx)},1e3)}),r=(0,eY.b)(t);return e._filterList=null!=r?r:[],(0,d.oW)(e._filterList)}catch(e){var{ret:i,errmsg:n}=e||{},a=i?Number(i):nN.b.ErrCommon;return(0,d.wf)(a,null!=n?n:"unknown error")}})()}constructor(e){var t;this._httpApiSettingService=e,this._filterList=[],this._networkClient=(t=new y.y().build(y.D),(0,w.i3)(t),(0,C.mH)(t),(0,f.V)(t),t)}}nU=(0,g.gn)([(0,g.fM)(0,_.x),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===_.x?Object:_.x])],nU);var nj=r("626325"),nV=r("651531"),nB=r("753150");function nH(e,t){e.register(o.a,new n.M(s.E,[[nj.f]],!1)),e.register(iL.Q,iD.b),e.register(c.X,p),e.register(ni.X,nn.f),e.register(_.x,v.s),e.register(iO.Y,iM.X),e.register(iF.H,iN.$),e.register(h.q,k),e.register(ix.lT,ij),e.register(eE.U,new n.M(ns,[[eP.g,nc.n,nu.v,iA.P,nd.R,nl.Z,iP.p,np.I,n_.$,nv.O]])),e.register(E.W,new n.M(M,[{liteAppId:513695,disableGatewayInject:!0}])),e.register(F.B,new n.M(ea,[],!1)),e.register(iV.w,(0,a.l)(iB.q,[iH.x])),e.register(eo.N,ef),e.register(O.z,ey.y),e.register(iG.ec,new n.M(iY,[{}])),e.register(iZ.T,iK.z),e.register(iW.b,new n.M(iz.x,[!1])),e.register(iQ.H,iJ.w),e.register(iX.k,i$.h),e.register(eC.x,ew.m),e.register(eI.tx,eO),e.register(eM.W,eF.k),e.register(eN.c,ex.z),e.register(eU._,ej.o),e.register(eV.Z,eB.u);e.register(nV.VZ,new n.M(nB.c,[t])),e.register(nh.p,ng.k),e.register(eH.o,eG._),e.register(nm.x,new n.M(ny)),e.register(eW.b,eJ),e.register(eX.g,e$.F),e.register(e0.c,e8),e.register(e3.W,ta),e.register(to.t,tC),e.register(tw.$,tT),e.register(tR.Y,tL),e.register(tD.j,tO.b),e.register(tM.D,tF.P),e.register(tN.JF,tV),e.register(tB.fJ,tZ),e.register(tK.V,tz.h),e.register(tQ.q,tJ.m),e.register(tX.sR,t$.k),e.register(t0.T,t1.B),e.register(t6.K,t8),e.register(t3.h,t5.M);e.register(nC.G,nI),e.register(nS.N,nb.G),e.register(i0.d,i1.J),e.register(i6.W,i2.C),e.register(t9.hv,t4.I),e.register(nT.AA,nR.T),e.register(re.u,new n.M(rt.E,[],!1)),e.register(rr.F,new n.M(ri.i,[],!1)),e.register(rn.c,ru),e.register(rd.c,rp),e.register(nk.R,nA),e.register(r_.b,rC),e.register(rw.m,rI.J),e.register(rS.$,rE),e.register(rP.Jp,rA.e),e.register(nL.C,nD.L),e.register(rL.S,rD.i),e.register(rO.H,new n.M(is,[{}],!1)),e.register(ic.l,iu.C),e.register(id.$,il.S),e.register(ip.K,i_.n),e.register(iv.W,ig),e.register(im.S,iy.S),e.register(nO.G,nM.v),e.register(nF._,nU);e.register(iC.l,ib),e.register(iT.L,iE),e.register(i7.Z,ne),e.register(nt.i,nr.v)}},871876:function(e,t,r){r.d(t,{H:()=>u});var i=r("649842");class n{constructor(e){var t,r,i,n;this.isDev=e.isDev,this.isProd=e.isProd,this.isInternal=e.isInternal,this.isAutoTest=null!==(t=e.isAutoTest)&&void 0!==t&&t,this.appVersion=null!==(r=e.appVersion)&&void 0!==r?r:"0.0.1",this.appId=null!==(i=e.appId)&&void 0!==i?i:0,this.highQuality=null!==(n=e.highQuality)&&void 0!==n&&n}}var a=r("718323");class o extends n{get region(){return this._getRegion()}constructor(e){super(e);var{appScmBuildVersion:t,appScmBuildBranch:r,veBuildId:i,veFullBuildVersion:n,sdkVersion:o,appVersion:s,draftVersion:c,isDev:u,isProd:d,isInternal:l,appEnv:p,isOversea:_,getRegion:v}=e;this.appScmBuildVersion=t,this.appScmBuildBranch=r,this.veBuildId=i,this.veFullBuildVersion=n,this.sdkVersion=o,this.appVersion=s,this.draftVersion=c,this.isDev=u,this.isProd=d,this.isInternal=l,this.isSIMD="simd"===(0,a.l)().wasmType,this._getRegion=v,this.appEnv=p,this.isOversea=_;var{searchParams:h}=new URL(window.location.href),g=h.get("__debug_console__");"1"===g?this.debugConsoleStatus=!0:"0"===g?this.debugConsoleStatus=!1:this.debugConsoleStatus=void 0,"0"===h.get("__debug_load_contribution_idle__")&&(this.debugLoadContributionIdle=!1),this.isContributionDebugMode="1"===h.get("debugContribution")}}var s=r("712942"),c=r("589214");function u(){var e=(0,i.Ao)(),t=(0,i.Q0)(),r=(0,i.Uo)();return new o({appEnv:e,isOversea:t,isDev:!1,isProd:!0,isInternal:!1,appScmBuildVersion:"1.0.0.3674",appScmBuildBranch:"release/520",veBuildId:0x12ee8651,veFullBuildVersion:"1.0.1.".concat(0x12ee8651),appVersion:c.$U,sdkVersion:c.f4,draftVersion:c.Mr,appId:Number((0,s.Iv)()),getRegion:i.hq,highQuality:r})}},271107:function(e,t,r){r.d(t,{H:()=>N});var i=r("876826"),n=r("85728"),a=r("929753"),o=r("497973"),s=r("903355"),c=r("585567"),u=r("712942"),d=r("601057"),l=r("70529"),p=r("14606"),_=r("758261"),v=(0,r("971245").yh)("jianying-user-data-service"),h=r("675401"),g=r("555175"),m=r("660178"),f=r("789786"),y=r("2910"),C=r("806663"),w=r("843698"),I=r("562092"),S=r("874800"),b=r("836413"),T=r("56935"),R=r("917598"),k=r("280166"),E=r("490165"),P=r("677761"),A=r("107354"),L=r("309994"),D=r("208398"),O=r("260963"),M=r("651531");m.w.setConfig({projectId:532,subProjectName:"cc_dreamina",customRoute:"",reportOnly:!1,storageKey:"ARGUS_STORAGE_OPEN_REDIRECT",frontWhiteUrl:'["._______________",".vlabstatic.com"]',frontBlackUrl:"[]",bid:"cc_dreamina",region:"cn",cacheTimeFront:12,checkTimeLimit:1.5,limitLevel:5});class F extends S.JT{onDidChangeVipInfo(){return(0,T.ss)()}get userVipInfo(){return(0,T.ss)()}get uniqueId(){return this.hasLogin?this.userProfile.uid:this._webId}initialize(){var e=this;return(0,i._)(function*(){e._accountSDK=new A.WebInterfaceSdk({aid:Number(e._params.appId),scene:"normal",region:e._params.region,isOversea:!1,printLog:!1,isBoe:!1}),yield e._getUserLoginStatus();try{var t=yield e._teaReportService.getWebId();(0,O.z)(()=>{e._observableData.userProfile&&(e._observableData.userProfile.webId=t)}),e._webId=t}catch(t){e._logger.warn("account service get webId failure: ".concat(t))}e._listenLoginStatusChange()})()}login(e,t){var{isMobile:r=!1,loginBackUrl:i,platformAppId:n}=e,a={assignLoginBackUrl:i,platformAppId:n};if(r){var o,s=null===(o=this._generateLoginUrlParams(a))||void 0===o?void 0:o[0];s&&window.location.replace(m.w.protectUrl({targetUrl:(0,y.C)(s,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1teHNZM2s1-zJSd$pHeFph$*w2WTIxTmRtTklTblph%0Zac$pFTT$kR1F5$m1sT%0wNT$XW*s1ZWxwW$NqSmhWMD$zWTNrNWF*a3l%blpr$np$d1RESndjRmx-TlRWaFZ6$n$%RmRH-Wxre%9%RmlibE-wWXpK$2$X%nRiR3Bh$Xp$d1l6Skdl$m96$m5vPQ",isBlank:!0}))}else{var c=this._generateLoginUrlParams(a);window.open(m.w.protectUrl({targetUrl:(0,y.C)(...c,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1teHNZM2s1-zJSd$pHeFph$*w2WTIxTmRtTklTblph%0Zac$pFTT$kR1F5$m1sT%0wNT$XW*s1ZWxwW$NqSmhWMD$zWTNrNWF*a3l%blpr$np$d1RESndjRmx-TlRWaFZ6$n$%RmRH-Wxre%9%RmlibE-wWXpK$2$X%nRiR3Bh$Xp$d1l6Skdl$m96$m5vPQ",isBlank:!0}))}t&&(0,C.V)(this._onLoginStatusChange.event)(t)}logout(e){var t=this;return(0,i._)(function*(){(0,T.Y2)(t._accountSDK,"accountSDK is not been initialized"),yield t._accountSDK.login.logout({next:e,need_redirect:0}),t._onDidLogout.fire(E.d.CurrentTab),localStorage.removeItem(L.zL)})()}get userProfile(){return(0,T.Y2)(void 0!==this._observableData.userProfile,"user profile is undefined"),this._observableData.userProfile}get hasLogin(){return(0,T.Y2)(void 0!==this._hasLogin,"hasLogin is not been initialized"),this._hasLogin}_getUserLoginStatus(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,i._)(function*(){if(t.fromLogin=e,Number(t._params.appId)===R.L2){yield t._getJimengUserLoginStatus(e);return}(0,T.Y2)(t._accountSDK,"accountSDK is not been initialized");try{var r=t._getUserInfoFromGW();if(null==r?void 0:r.ok){var{uid:i,nickName:n,avatar:a}=r.value;(0,O.z)(()=>{t._observableData.userProfile={uid:String(i),name:n,avatar:a,webId:t._webId}}),t._hasLogin=!0,t._onDidLogin.fire();return}var o=yield t._accountSDK.login.checkLogin({}).catch(r=>{throw t._reportService.reportDevEvent("jimengLoginStatus",{type:"checkLogin",status:"error",code:null==r?void 0:r.error_code,msg:null==r?void 0:r.description,logId:null==r?void 0:r.log_id,from:e?"login":"initial"}),r});(0,T.Y2)(o,"userData is undefined");var s=o.app_id===Number(t._params.appId);!s&&Number(t._params.appId)===R.L2&&(t._reportService.reportDevEvent("jimengLoginStatus",{type:"invalidAppid",status:"error",from:e?"login":"initial"}),yield t.logout(""),(0,T.Y2)(s,"appid is not valid"));var c=o.avatar_url;(0,O.z)(()=>{t._observableData.userProfile={uid:String(o.user_id),name:o.name,avatar:c,webId:t._webId}}),t._hasLogin=!0,t._onDidLogin.fire()}catch(e){localStorage.removeItem(L.zL),t._hasLogin=!1,(0,O.z)(()=>{t._observableData.userProfile=void 0})}})()}_getJimengUserLoginStatus(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,i._)(function*(){(0,T.Y2)(t._accountSDK,"accountSDK is not been initialized");var r="";try{var i=t._getUserInfoFromGW();if(null==i?void 0:i.ok){var{uid:n,nickName:a,avatar:o}=i.value;(0,O.z)(()=>{t._observableData.userProfile={uid:String(n),name:a,avatar:o,webId:t._webId}}),t._hasLogin=!0,t._onDidLogin.fire();return}var s=yield t._accountSDK.login.checkLogin({}).catch(r=>{throw t._reportService.reportDevEvent("jimengLoginStatus",{type:"checkLogin",status:"error",code:null==r?void 0:r.error_code,msg:null==r?void 0:r.description,logId:null==r?void 0:r.log_id,from:e?"login":"initial"}),r});(0,T.Y2)(s,"userData is undefined");var c=s.app_id===Number(t._params.appId);!c&&(t._reportService.reportDevEvent("jimengLoginStatus",{type:"invalidAppid",status:"error",from:e?"login":"initial"}),yield t.logout(""),(0,T.Y2)(c,"appid is not valid")),r=s.avatar_url,(0,O.z)(()=>{t._observableData.userProfile={uid:String(s.user_id),name:s.name,avatar:"",webId:t._webId}}),t._userService.getDreaminaUserInfo().then(e=>{var i;e.ok&&(null===(i=e.value)||void 0===i?void 0:i.avatarUrl)&&(0,O.z)(()=>{if(t._observableData.userProfile){var i,n;t._observableData.userProfile.avatar=null!==(i=e.value.avatarUrl)&&void 0!==i?i:r,t._observableData.userProfile.name=null!==(n=e.value.name)&&void 0!==n?n:t._observableData.userProfile.name}})}).catch(),t._hasLogin=!0,t._onDidLogin.fire()}catch(e){localStorage.removeItem(L.zL),t._hasLogin=!1,(0,O.z)(()=>{t._observableData.userProfile=void 0})}})()}_getUserInfoFromGW(){try{if(window.__userInfoStringify){var{data:{user_info:e}}=(0,I.D)(window.__userInfoStringify);return(0,b.oW)({uid:e.user_id,nickName:e.nick_name,avatar:e.avatar_urls.avatar_url_small})}return(0,b.wf)(-1,"__userInfoStringify is undefined")}catch(e){return(0,b.wf)(-1,e)}}_generateLoginUrlParams(e){var{assignLoginBackUrl:t,platformAppId:r}=null!=e?e:{},i=window.screen.height,n=window.screen.width,a=(i-L.xk-L.h)/2,o=(n-L.ai)/2,s="".concat(location.origin).concat(L.vt.LOGIN_PATH),c=null!=t?t:"".concat(location.origin).concat(L.vt.LOGIN_STATUS_PATH),u="".concat(s,"?account_sdk_source=web&aid=").concat(this._params.appId,"&next=").concat(encodeURIComponent(c),"&platform_app_id=").concat(null!=r?r:L.AJ.PLATFORM_APP_ID);return[u,"name=login","fullscreen=1,width=".concat(L.ai,",height=").concat(L.h,",top=").concat(a,",left=").concat(o)]}_listenLoginStatusChange(){window.addEventListener("storage",this._listenStorage,!1)}dispose(){window.removeEventListener("storage",this._listenStorage,!1),super.dispose()}constructor(e,t,r,i,a,o){super(),this._environmentService=t,this._userService=r,this._teaReportService=i,this._reportService=a,this._loggerService=o,this._observableData={userProfile:void 0},this._onDidLogin=this._store.add(new w.Q),this.onDidLogin=this._onDidLogin.event,this._onDidLogout=this._store.add(new w.Q),this.onDidLogout=this._onDidLogout.event,this._onDidUserProfileChange=this._store.add(new w.Q),this.onDidChangeProfile=this._onDidUserProfileChange.event,this._onLoginStatusChange=this._store.add(new w.Q),this.onLoginStatusChange=this._onLoginStatusChange.event,this._webId="",this.fromLogin=!1,this._listenStorage=e=>{if(e.key===L.zL){if(!e.newValue&&e.oldValue){this._onDidLogout.fire(E.d.OtherTab);return}var t,r,i,n,a,o=D.Z.parse(null!==(t=null==e?void 0:e.newValue)&&void 0!==t?t:"");if(!o){this._reportService.reportDevEvent("jimengLoginStatus",{type:"auth",status:"error",msg:"query is invalidate. query: ".concat(o),from:"login"}),this._onLoginStatusChange.fire({status:g.I.Fail,type:"auth",msg:"query is invalidate. query: ".concat(o),from:"login"});return}o.error_code?(this._reportService.reportDevEvent("jimengLoginStatus",{type:"auth",status:"error",code:null!==(r=o.error_code)&&void 0!==r?r:"",msg:null!==(i=o.error_msg)&&void 0!==i?i:"",from:"login"}),this._onLoginStatusChange.fire({status:g.I.Fail,type:"auth",code:null!==(n=o.error_code)&&void 0!==n?n:"",msg:null!==(a=o.error_msg)&&void 0!==a?a:"",from:"login"})):"true"===o.success?(this._getUserLoginStatus(!0),this._onLoginStatusChange.fire({status:g.I.Success})):(this._reportService.reportDevEvent("jimengLoginStatus",{type:"auth",status:"error",msg:"query is invalidate. query: ".concat(JSON.stringify(o)),from:"login"}),this._onLoginStatusChange.fire({status:g.I.Fail,type:"auth",msg:"query is invalidate. query: ".concat(JSON.stringify(o)),from:"login"}))}},this._logger=this._loggerService.createLogger("account"),this._params=(0,n._)({appId:L.Fk.APP_ID,region:L.Fk.CHANNEL},e),(0,O.rC)(this)}}(0,f.gn)([O.LO,(0,f.w6)("design:type",Object)],F.prototype,"_observableData",void 0),(0,f.gn)([O.Fl,(0,f.w6)("design:type",void 0),(0,f.w6)("design:paramtypes",[])],F.prototype,"userProfile",null),F=(0,f.gn)([(0,f.fM)(1,k.Y),(0,f.fM)(2,_.h),(0,f.fM)(3,P.w),(0,f.fM)(4,l.m),(0,f.fM)(5,M.VZ),(0,f.w6)("design:type",Function),(0,f.w6)("design:paramtypes",[Object,void 0===k.Y?Object:k.Y,void 0===_.h?Object:_.h,void 0===P.w?Object:P.w,void 0===l.m?Object:l.m,void 0===M.VZ?Object:M.VZ])],F);function N(e,t,r){var m,f,y,C=new d.r((m=t,f=(0,s.e)({headers:{"Content-Type":"application/json",appid:c.T}}),y=(0,i._)(function*(e){var t,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=yield m.getWebId();f.request({method:"POST",url:"".concat((0,u.H4)(),"/mweb/v1/batch_collect?web_id=").concat(c),data:{events:[{event_name:"server_".concat(e),params:JSON.stringify(o)}],header:(0,a._)((0,n._)({},null!==(r=null==s?void 0:s.header)&&void 0!==r?r:{}),{custom:JSON.stringify(null!==(i=null==s?void 0:null===(t=s.header)||void 0===t?void 0:t.custom)&&void 0!==i?i:{})})},withCredentials:!0})}),function(e){return y.apply(this,arguments)}),t,r);e.registerInstance(l.m,C);e.register(p.A,p.$),e.register(_.h,_.P),e.register(v,h.O),e.register(g.E,new o.M(F,[{appId:c.T}],!1))}},241854:function(e,t,r){r.d(t,{W:function(){return u}});var i=r(876826),n=r(467475),a=r(702251),o=r(73809),s={baseURL:"/lv/v1",method:"POST",headers:{loc:n.yM.CHANNEL,lan:n.yM.LAN,pf:n.yM.APP_PF,appvr:n.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":n.yM.APP_SDK_VERSION}},c=a.ZP.createAxios(s);c.interceptors.request.use(e=>{var{pf:t,appvr:r,tdid:i}=s.headers;return Object.assign(e.headers,(0,o.O)({url:"".concat(e.baseURL).concat(e.url),pf:t,appvr:r,tdid:i})),e}),c.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);var t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)});var u={getTrendingTools:()=>(0,i._)(function*(){return yield c({url:"/intelligence/trending_tools"})})(),getRecentUseTools:()=>(0,i._)(function*(){return yield c({url:"/intelligence/recent_use_tools"})})(),checkPopup:()=>(0,i._)(function*(){return yield c({url:"/intelligence/check_popup"})})(),getAppIsInvalidInCurrentRegion:e=>c({method:"post",data:{app_id:e},url:"/lite/config/check_region",withCredentials:!0})}},463904:function(e,t,r){r.d(t,{p:()=>S});var i=r("876826"),n=r("85728"),a=r("929753"),o=r("467475"),s=r("772246"),c=r("732830"),u=r("978269"),d=r("998873"),l=r("257212"),p=r("701907"),_=r("310869"),v=r("229192"),h=r("460461"),g={EVER_CLOUD:{BELOW_VERSION:40008,INSUFFICIENT_SPACE:20113,INVALID_IDC:1037},WEB_CUSTOME_CODE:{ASSET_TRANSCODE_FAIL:-11001},NO_SIGN_UPLOAD:s.S,COMMENT:{Err_NoCommentPermission:2363,Err_CommentPublishFailed:2364,Err_CommentPublishFailedDuplication:2365,Err_CommentPublishingProhibited:2366,Err_CommentPublishFailedRateLimit:2367,Err_CommentPublishFailedRiskControl:2368,Err_CommentDeletionFailed:2369,Err_DeletionFailedNoPermission:2370,Err_CommentListFetchFailed:2371,Err_ShareToGroupMermberFailed:2372},FILM_CODE:c.G,COMMERCE:u.J,SIGN_UP_CODE:l.k,USER_CODE:l.P,CREATE_WORKSPACE_CODE:p.e,PIPO:d.$,WORKSPACE_UPLOAD_LINK_CODE:p.u,GROUP:_.o,SHARE:{FILE_NO_ACCESS:"2317",FILE_NOT_FOUND:"2345",FILE_BANNED:"2360",SHARE_INFO_NOT_FOUND:"2361",FILE_UPLOADING:"2386",ERROR_GET_SHARED_INFO:"2377"},AUTHORIZED:v.e,SHARE_ERROR_CODE:h.K},m=r("150615"),f=r("702251"),y=r("73809"),C=r("578771"),w={baseURL:"",method:"POST",headers:{loc:o.yM.CHANNEL,lan:m.ZP.language||o.yM.LAN,pf:o.yM.APP_PF,appvr:o.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":o.yM.APP_SDK_VERSION}},I=f.ZP.createAxios(w);I.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);var t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}),(0,C.Z)(I,{retries:3,resetTimeout:!0,retryDelay:1e3,isRetry:e=>{var t,r;return Number(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.ret)!==g.EVER_CLOUD.INVALID_IDC&&Number(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.ret)!==g.EVER_CLOUD.INSUFFICIENT_SPACE}});var S={getEverPhotoToken:()=>(0,i._)(function*(){var e="/lv/v1/ever_photo/get_token",{pf:t,appvr:r,tdid:i}=w.headers;return yield I({url:e,data:{},headers:(0,n._)({},(0,y.O)((0,a._)((0,n._)({url:e},w.headers),{pf:t,appvr:r,tdid:i})))})})(),getWorkspaceEverPhotoToken:()=>(0,i._)(function*(){var e="/cc/v1/workspace/get_ever_photo_token",{pf:t,appvr:r,tdid:i}=w.headers;return yield I({url:e,data:{},headers:(0,n._)({},(0,y.O)((0,a._)((0,n._)({url:e},w.headers),{pf:t,appvr:r,tdid:i})))})})(),getEverPhotoUserSpace:e=>(0,i._)(function*(){var t="/lv/v1/ever_photo/get_user_space",{pf:r,appvr:i,tdid:o}=w.headers;return yield I({url:t,data:{workspace_id:e},headers:(0,n._)({},(0,y.O)((0,a._)((0,n._)({url:t},w.headers),{pf:r,appvr:i,tdid:o})))})})(),promoteAsset:e=>(0,i._)(function*(){var t="/lv/v1/ever_photo/promote_asset",{pf:r,appvr:i,tdid:o}=w.headers;return yield I({url:t,data:{asset_id:e.assetId,space_id:e.spaceId,workspace_id:e.workspaceId},headers:(0,n._)({},(0,y.O)((0,a._)((0,n._)({url:t},w.headers),{pf:r,appvr:i,tdid:o})))})})(),prepareUpload:e=>(0,i._)(function*(){var t="/lv/v1/asset/prepare_upload_cloud",{pf:r,appvr:i,tdid:o}=w.headers;return yield I({url:t,data:(0,a._)((0,n._)({},e),{is_web_user:!0}),headers:(0,n._)({},(0,y.O)((0,a._)((0,n._)({url:t},w.headers),{pf:r,appvr:i,tdid:o})))})})(),createAsset:e=>(0,i._)(function*(){var t="/lv/v1/asset/create_cloud_asset",{pf:r,appvr:i,tdid:o}=w.headers;return yield I({url:t,data:(0,a._)((0,n._)({},e),{is_web_user:!0}),headers:(0,n._)({},(0,y.O)((0,a._)((0,n._)({url:t},w.headers),{pf:r,appvr:i,tdid:o})))})})(),getDownloadUrl:e=>(0,i._)(function*(){var t="/lv/v1/ever_photo/get_external_download_url",{pf:r,appvr:i,tdid:o}=w.headers;return yield I({url:t,data:{asset_id:e.assetId,workspace_id:e.workspaceId,max_time:e.maxTime,ttl:e.ttl},headers:(0,n._)({},(0,y.O)((0,a._)((0,n._)({url:t},w.headers),{pf:r,appvr:i,tdid:o})))})})()}},57465:function(e,t,r){r.d(t,{EE:function(){return a},rH:function(){return n},up:function(){return o}});var i,n={pro:"vip",standard:"standard"};function a(e){return(null==e?void 0:e.cur_vip_level)!==void 0||(null==e?!!void 0:!!e.expired_vip_level)||(null==e?!!void 0:!!e.vip_levels)||(null==e?!!void 0:!!e.old_benefit)||!1}var o=((i={}).SHARK_RISK_ERROR="-6",i.RISK_ERROR="36010107",i.CROSS_PLATFORM_MAC="36010109",i.CROSS_PLATFORM_IOS="36010110",i.CROSS_GROUP="36010111",i)},495044:function(e,t,r){r.d(t,{g:function(){return i}});var i={RECENT_LIST_FILE_TYPE:"RECENT_LIST_FILE_TYPE",RECENT_LIST_VIEW_TYPE:"RECENT_LIST_VIEW_TYPE",LIST_VIEW_TYPE:"LIST_VIEW_TYPE",LIST_DISPLAY_TYPE:"LIST_DISPLAY_TYPE",LIST_SORT_BY:"LIST_SORT_BY",RECYCLE_LIST_SORT_BY:"RECYCLE_LIST_SORT_BY",LIST_SORT_DIRECTION:"LIST_SORT_DIRECTION",RECYCLE_LIST_SORT_DIRECTION:"RECYCLE_LIST_SORT_DIRECTION",COOKIE_CONSENT_PROMPT_CONFIG:"COOKIE_CONSENT_PROMPT_CONFIG",THIRTPARTY_FEEDBACK:"THIRTPARTY_FEEDBACK",LV_TASK_CENTER:"LV_TASK_CENTER",THIRDPARTY_CLOUD_AUTH:"THIRDPARTY_CLOUD_AUTH",SURVEY_OPEN:"SURVEY_OPEN",CLOUD_STORAGE_PAYMENT_AND_BINDING:"CLOUD_STORAGE_PAYMENT_AND_BINDING",THIRDPARTY_SHARE_AUTH:"undefined"!=typeof window&&window._IS_FOR_BUSINESS?"PLATFORM_BUSINESS_THIRDPARTY_CLOUD_AUTH":"THIRDPARTY_SHARE_AUTH",CAPCUT_THEME:"CAPCUT_THEME",CAPCUT_TEMPLATE_VIDEO_VOLUME:"CAPCUT_TEMPLATE_VIDEO_VOLUME",GUIDE_FROM_TEAM_INVITE:"GUIDE_FROM_TEAM_INVITE",GUIDE_FROM_SIGN_UP:"GUIDE_FROM_SIGN_UP",COMPREHENSIVE_SEARCH_HISTORY:"COMPREHENSIVE_SEARCH_HISTORY",CC_WEB_IM_CONFIG:"CC_WEB_IM_CONFIG",LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE:"LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE",FACEBOOK_AUTH_STORAGE:"FACEBOOK_AUTH_STORAGE",CAPCUT_WORKSPACE_TTS_TCC_CONFIG:"CAPCUT_TTS_TCC_CONFIG",CAPCUT_CATEGORY_AND_VOICE_LIST_STORAGE:"CAPCUT_CATEGORY_AND_VOICE_LIST_STORAGE"}},453282:function(e,t,r){r.d(t,{P:function(){return i}});var i={appId:348188,videoHost:"https://vod-normal-sg.capcutapi.com",videoFallbackHost:"https://vod-normal-sg.capcutapi.com",imageHost:"https://imagex-normal-sg.capcutapi.com",imageFallbackHost:"https://imagex-normal-sg.capcutapi.com"}},554960:function(e,t,r){r.d(t,{MY:function(){return d},XX:function(){return u},tc:function(){return c}}),r(914028);var i,n,a,o=e=>"".concat("HAS_SHOW_PWA_GUIDANCE","_").concat(e),s=()=>{var e=navigator.userAgent.indexOf("edge")>-1;return!!(("chrome"===browser().name||e)&&"serviceWorker"in navigator)||!1};var c=(i="undefined"!=typeof window,a=(n=e=>!!i&&!!window.matchMedia&&window.matchMedia(e).matches)("(display-mode: standalone)"),()=>{var e=n("(display-mode: standalone)"),t=n("(display-mode: fullscreen)");return a=!!e||t&&a}),u=()=>{var e;if(c())e=!1;else if("undefined"!=typeof window){var t=new URL(window.location.href).searchParams;e=(null==t?void 0:t.get("open_from_pwa"))||void 0}return!!e},d=()=>{var e="not_pwa";if("undefined"!=typeof window&&c()){var t=new URL(window.location.href).searchParams;e=(null==t?void 0:t.get("pwa_from"))||"capcut"}return e}},842121:function(e,t,r){function i(){for(var e=[{s:"windows",r:/Windows/},{s:"android",r:/Android/},{s:"CrOS",r:/CrOS/},{s:"linux",r:/(Linux|X11)/},{s:"ios",r:/(iPhone|iPad|iPod)/},{s:"macOrIpad",r:/Mac OS X/},{s:"mac",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],t="unknown",r=0;r<e.length;r++){var i=e[r];if(i.r.test(window.navigator.userAgent)){t=i.s,"macOrIpad"===i.s&&(t="MacIntel"===window.navigator.platform&&"number"==typeof window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>1?"ios":"mac");break}}return t}function n(){try{var e,t=window.navigator.userAgent;return(null===(e=[{match:"Chrome",value:"Chrome"},{match:"Firefox",value:"Firefox"},{match:"Safari",value:"Safari"},{match:["MSIE","Trident"],value:"Microsoft Internet Explorer"},{match:"Lark",value:"Lark"},{match:"TTWebView",value:"TTWebView"},{match:"Edge",value:"Microsoft Edge"}].find(e=>("string"==typeof e.match&&(e.match=[e.match]),e.match.some(e=>t.includes(e)))))||void 0===e?void 0:e.value)||""}catch(e){return""}}function a(){try{var e="";return window.LV_WEB_VERSION?e=window.LV_WEB_VERSION:window.gfdatav1&&(e=window.gfdatav1.ver),e=e.split(".").filter((e,t)=>1!==t).join(".")}catch(e){return""}}function o(){try{return window._currentBranch||""}catch(e){return""}}r.d(t,{Sf:function(){return a},aM:function(){return o},ly:function(){return i},qs:function(){return n}})},594055:function(e,t,r){r.d(t,{g:function(){return a}});var i=r(876826),n=r(82615);class a{flushToken(){var e=this;return(0,i._)(function*(){if(!!(Date.now()-e._lastFlushTokenTime>e._tokenMaxAge)){if(!e._flushMutex.tryLock()){yield e._flushMutex.lockShared(),e._flushMutex.unLockShared();return}try{yield e.init(),e._lastFlushTokenTime=Date.now()}finally{e._flushMutex.unLock()}}})()}constructor(){this._flushMutex=new n.L,this._lastFlushTokenTime=0,this._tokenMaxAge=6e5}}},226690:function(e,t,r){r.d(t,{Q:function(){return u}});var i=r(876826),n=r(85728),a=r(929753),o=r(856024),s=r(467475),c=r(594055);class u extends c.g{init(){var e=this;return(0,i._)(function*(){var t=yield o.q.getUploadToken(void 0,{biz:e.props.spaceName});e.stsToken={AccessKeyId:t.access_key_id,SecretAccessKey:t.secret_access_key,SessionToken:t.session_token,ExpiredTime:t.expired_time,CurrentTime:t.current_time},e.config=(0,a._)((0,n._)({userId:"unknow",appId:Number(s.yM.APP_ID),useServerCurrentTime:!0},e.props),{videoConfig:{spaceName:t.space_name}})})()}getStsToken(){return this.stsToken}getConfig(){return this.config}constructor(e){super(),this.props=e}}},666324:function(e,t,r){r.d(t,{A:()=>v});var i=r("876826"),n=r("85728"),a=r("150615"),o=r("467475"),s=r("702251"),c=r("578771"),u=r("73809"),d={baseURL:"/lv/v1",method:"POST",headers:{loc:o.yM.CHANNEL,lan:a.ZP.language||o.yM.LAN,pf:o.yM.APP_PF,appvr:o.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":o.yM.APP_SDK_VERSION},params:{}},l=s.ZP.createAxios(d);l.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);var t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}),(0,c.Z)(l,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});var p={getUploadToken:e=>(0,i._)(function*(){var{workspaceId:t}=e,r="/asset/prepare_upload_cloud";return yield l({url:r,headers:(0,n._)({},(0,u.O)((0,n._)({url:"".concat(d.baseURL).concat(r)},d.headers))),data:{space_id:"0",workspace_id:t,is_web_user:!0}})})()},_=r("594055");class v extends _.g{init(){var e=this;return(0,i._)(function*(){var t,{workspaceId:r,userId:i}=e._props;if(!r)throw Error(JSON.stringify({code:-1,msg:"[error]no parameter workspaceid passed in."}));try{t=yield p.getUploadToken({workspaceId:r})}catch(e){var n=e.data||e;throw Error(JSON.stringify({code:n.ret||n.code,msg:n.errmsg||e.msg}))}e._stsToken={AccessKeyId:t.security_token.access_key_id,SecretAccessKey:t.security_token.secret_access_key,SessionToken:t.security_token.session_token,ExpiredTime:t.security_token.expired_time,CurrentTime:t.security_token.current_time},e._config={userId:null!=i?i:t.everphoto_user_id,appId:t.app_id,useServerCurrentTime:!0,videoHost:t.upload_domain.includes("://")?t.upload_domain:"https://".concat(t.upload_domain),videoConfig:{spaceName:t.service_id},objectConfig:{spaceName:t.service_id}}})()}getStsToken(){return this._stsToken}getConfig(){return this._config}constructor(e){super(),this._props=e}}},558980:function(e,t,r){r.d(t,{v:function(){return u}});var i=r(876826),n=r(85728),a=r(929753),o=r(856024),s=r(467475),c=r(594055);class u extends c.g{init(){var e=this;return(0,i._)(function*(){var t=yield o.q.getUploadToken(o.D.temp);e.stsToken={AccessKeyId:t.access_key_id,SecretAccessKey:t.secret_access_key,SessionToken:t.session_token,ExpiredTime:t.expired_time,CurrentTime:t.current_time},e.config=(0,a._)((0,n._)({userId:"unknow",appId:Number(s.yM.APP_ID),useServerCurrentTime:!0},e.props),{videoConfig:{spaceName:t.space_name}})})()}getStsToken(){return this.stsToken}getConfig(){return this.config}constructor(e){super(),this.props=e}}},165046:function(e,t,r){r.d(t,{d:function(){return o}});var i=r(876826),n=r(85728),a=[100006,100026,100028];class o{init(){var e=this;return(0,i._)(function*(){if(!e._uploader){yield e._auth.init();var t=Object.assign({getSliceFunc:e=>e>0xc800000?0xa00000:2097152,uploadSliceCount:3},e._auth.getConfig()),{default:i}=yield r.e("7163").then(r.t.bind(r,594631,23));e._uploader=new i(t)}return yield e._auth.flushToken(),e._uploader})()}upload(e){var t=this;return(0,i._)(function*(){var r,o,{file:s,type:c="image",onSuccess:u,onProgress:d,onError:l,onStart:p}=e;try{o=yield t.init()}catch(e){null==l||l({extra:{error:e,errorCode:e.code,message:e.msg}})}var _=o.addFile({file:s,stsToken:t._auth.getStsToken(),type:c});o.start(_),null==p||p(_,s),o.on("progress",e=>{if(e.key===_)null==d||d((0,n._)({key:_},e))}),o.on("complete",e=>{if(e.key===_)null==u||u((0,n._)({key:_},e.uploadResult))});var v=0;return o.on("error",(r=(0,i._)(function*(e){var r;if(e.key===_){if(a.includes(Number(null==e?void 0:null===(r=e.extra)||void 0===r?void 0:r.errorCode))&&v<1){v++,yield t._auth.init(),o.refreshSTSToken(t._auth.getStsToken()),o.start(_);return}null==l||l(e)}}),function(e){return r.apply(this,arguments)})),o})()}cancel(e){var t;return null===(t=this._uploader)||void 0===t?void 0:t.cancel(e)}constructor(e){this._uploader=null,this._auth=e}}},136419:function(e,t,r){r.d(t,{Q:function(){return s}});var i=r(876826),n=r(85728),a=r(441752),o=[100006,100026,100028];class s{init(){var e=this;return(0,i._)(function*(){if(!e.uploader){yield e.auth.init();var t=Object.assign({getSliceFunc:e=>e>0xc800000?0xa00000:2097152,uploadSliceCount:3},e.auth.getConfig());!t.videoHost&&delete t.videoHost,!t.imageHost&&delete t.imageHost;var{default:i}=yield r.e("7163").then(r.t.bind(r,594631,23));e.uploader=new i((0,n._)({},(0,a.X)({region:t.region}),t))}return yield e.auth.flushToken(),e.uploader})()}upload(e){var t=this;return(0,i._)(function*(){var r,{file:a,type:s="image",onSuccess:c,onProgress:u,onError:d,onStart:l}=e,p=yield t.init(),_=p.addFile({file:a,stsToken:t.auth.getStsToken(),type:s});p.start(_),null==l||l(_,a),p.on("progress",e=>{if(e.key===_)null==u||u((0,n._)({key:_},e))}),p.on("complete",e=>{if(e.key===_)null==c||c((0,n._)({key:_},e.uploadResult))});var v=0;return p.on("error",(r=(0,i._)(function*(e){var r;if(e.key===_){if(o.includes(Number(null==e?void 0:null===(r=e.extra)||void 0===r?void 0:r.errorCode))&&v<1){v++,yield t.auth.init(),p.refreshSTSToken(t.auth.getStsToken()),p.start(_);return}null==d||d(e)}}),function(e){return r.apply(this,arguments)})),p})()}cancel(e){var t;return null===(t=this.uploader)||void 0===t?void 0:t.cancel(e)}constructor(e){this.uploader=null,this.auth=e}}},317087:function(e,t,r){var i=r(772322);r(218571);var n=r(105789),a=r.n(n);r(480043);t.Z=e=>{var{className:t,wrapperClassName:n,wrapperStyle:o,style:s}=e;return(0,i.jsx)("div",{className:a()("icon-smart-effect-bg",n),style:o,children:(0,i.jsx)("img",{className:a()("icon-smart-effect-img",t),src:r(309380),style:s,alt:"smart effect icon"})})}},734383:function(e,t,r){r.d(t,{Ds:function(){return n}});var i=r(688078);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,n,a){var o=a.value;return a.value=(0,i.Z)(o,e,t),a}}var a=[],o=[],s=function(e){var[t,r,i]=e;r.call(t,...i)};(0,i.Z)(()=>{for(;o.length;)s(o.shift());for(;a.length;)s(a.shift())})},761899:function(e,t,r){r.d(t,{P:function(){return i}});function i(){var e,t,r=new Promise((r,i)=>{e=r,t=i});return{resolve:e,reject:t,promise:r}}},556932:function(e,t,r){r.d(t,{oA:function(){return i}}),r(940140);var i="CAPCUT_THEME"},14598:function(e,t,r){r.d(t,{b:function(){return a}});var i=r(216342),n=r(247170);function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var o=new e;return r[0]instanceof n._y&&(o=(0,i.bu)(o.taskName,o)),o.run(...r)}},489216:function(e,t,r){r.d(t,{Z:function(){return c}});var i=r(165870),n=r(216342),a=r(471543),o=r(161094);function s(e){var t=e.toJSON();return Object.assign(t,{createTime:e.spans[0].startTime,startTime:e.spans[0].startTime,endTime:e.spans[0].startTime+e.spans[0].duration}),t}class c extends i.g{run(e,t){var r=[];n.Cz.registerSaveInDatabase(e=>{r.push(e)}),t.database.connect(a.p.id,o.t.name).then(e=>{e.ok&&(e.value.setMany(r.map(e=>({key:e.traceId,value:s(e)}))),n.Cz.registerSaveInDatabase(t=>{e.value.set(t.traceId,s(t))}))}).catch(t=>{(0,n.JJ)(e,n.cl.string("register-trace-save-method-error",t.message))})}constructor(...e){super(...e),this.taskName="REGISTER_TRACE_SAVE_METHOD_TASK"}}},518063:function(e,t,r){r.d(t,{v:function(){return n}});var i=r(824547);class n{addParams(e){this.data=(0,i.Z)({},this.data,e)}constructor(){this.event="evercloud_sdk_get_token",this.data={}}}},689739:function(e,t,r){r.d(t,{K:function(){return o}});var i=r(876826);function n(e,t,r){return a.apply(this,arguments)}function a(){return(a=(0,i._)(function*(e,t,r){var{retryTimes:i,delay:a}=r;try{return yield e.apply(this,t)}catch(r){if(--i<0)throw r;return yield new Promise(e=>setTimeout(e,a)),n.apply(this,[e,t,{retryTimes:i,delay:a}])}})).apply(this,arguments)}function o(e){var{retryTimes:t=1,delay:r=200}=null!=e?e:{};return function(e,i,a){var o=a.value;return a.value=function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];return n.apply(this,[o,i,{retryTimes:t,delay:r}])},a}}},551369:function(e,t,r){r.d(t,{a:function(){return a}});var i=r(876826),n=r(947259);function a(e,t){var r,{retryTimes:a=0,delay:o=200}=null!=t?t:{};var s=(r=(0,i._)(function*(t){0!==t&&(0,n._)(o);var r=yield e();if(!r.ok)return t>=a?r:s(t+1);return r}),function(e){return r.apply(this,arguments)});return s(0)}},288196:function(e,t,r){r.d(t,{H:function(){return a}});var i=r(497973),n=r(143443),a=new i.M(n.c,[new URL(r(586177),r.b)])},23502:function(e,t,r){r.d(t,{n:function(){return i}});var i=(0,r(971245).yh)("cookie-consent")},178704:function(e,t,r){r.d(t,{_:function(){return u}});var i=r(549947),n=r(876826),a=r(700645),o=r(836413),s=r(504976),c=r(405317);class u{mark(){if(!this._mark)this._mark=!0,(0,a.n)(()=>{this.cleanup()})}cleanup(){return(this._mark=!1,1===this._status)?Promise.resolve((0,o.ly)()):(this._status=1,this._cleanup())}_calcType(){return(this._times=this._times%3,3==this._times++)?1:0}_cleanup(){var e=this;return(0,n._)(function*(){var t;t=0===e._calcType()?.5:1;try{return yield e._cleanupDatabases(t),(0,o.ly)()}catch(e){return(0,s.Y_)(e)}finally{e._status=0}})()}_getCount(e){return new Promise((t,r)=>{var i=e.count();i.onsuccess=()=>{t(i.result)},i.onerror=e=>{r(e)}})}_cleanupTable(e,t,r){var a,o=this;return new Promise((a=(0,n._)(function*(n,a){var s=e.transaction(t,"readwrite"),u=s.objectStore(t);if(!u.indexNames.contains("updateTime")){n();return}s.onabort=()=>{a(s.error)},s.onerror=()=>{a(s.error)},s.oncomplete=()=>{n()};var d=u.index("updateTime"),l=IDBKeyRange.lowerBound(0),p=Math.floor((yield o._getCount(d))*r),_=0,v,h=!1,g=!1;try{for(var m,f=(0,i._)((0,c.v)(d,l,"next"));h=!(m=yield f.next()).done;h=!1){var y=m.value;if(y&&_<p)y.delete(),_++;else break}}catch(e){g=!0,v=e}finally{try{h&&null!=f.return&&(yield f.return())}finally{if(g)throw v}}}),function(e,t){return a.apply(this,arguments)}))}_cleanupDatabases(e){var t=this;return(0,n._)(function*(){for(var r of t._schemas.keys()){var i=yield t._databasePool.getDatabase(r);for(var n of i.objectStoreNames)yield t._cleanupTable(i,n,e)}})()}constructor(e,t){this._schemas=e,this._databasePool=t,this._status=0,this._times=0,this._mark=!1}}},405317:function(e,t,r){r.d(t,{v:function(){return a}});var i=r(876826);class n{next(){var e=this;return(0,i._)(function*(){return(e._continue(),e._currentCursor=yield e._waiting,e._currentCursor)?{value:e._currentCursor,done:!1}:{value:e._currentCursor,done:!0}})()}[Symbol.asyncIterator](){return this}_updateWaiting(){this._waiting=new Promise(e=>{this._resolve=e})}_continue(){var e;this._updateWaiting(),null===(e=this._currentCursor)||void 0===e||e.continue()}constructor(e){this._request=e,this._currentCursor=null,this._request.onsuccess=()=>{this._resolve(this._request.result)},this._request.onerror=()=>{this._resolve(null)}}}function a(e,t,r){return new n(e.openCursor(t,r))}},722552:function(e,t,r){r.d(t,{X:function(){return o},h:function(){return a}});var i,n=r(971245);var a=((i={}).Dark="dark",i.Light="light",i),o=(0,n.yh)("theme-service")},533901:function(e,t,r){r.d(t,{S:function(){return o},z:function(){return c}});var i,n=r(559309),a=r(796670);var o=((i={}).common="common",i.enableSVip="enableSVip",i.beauty="beauty",i.autoCut="autoCut",i.voiceClone="voiceClone",i.tts="tts",i.voiceChanger="voiceChanger",i.avTranslator="avTranslator",i.urlToVideo="urlToVideo",i.utvDontDialog="utvDontDialog",i.textToVideo="textToVideo",i.aigcVideo="aigcVideo",i.long2Short="long2Short",i.digitalHuman="digitalHuman",i.aiCreator="aiCreator",i.aiCreatorPlatform="aiCreatorPlatform",i),s=[n.yp.US,n.yp.GB,n.yp.CA,n.yp.AU,n.yp.NZ],c={common:[{common:{test:!0}}],enableSVip:[{enableSVip:{test:!0}}],beauty:[{countryBL:[6254930,294640],cityBL:[4896861],curRegionOutList:[n.yp.IL,n.yp.PS]}],autoCut:[{cityBL:[4896861]}],voiceClone:[{cityBL:[4896861],curRegionInList:[n.yp.US,n.yp.GB,n.yp.CA,n.yp.AU,n.yp.NZ,n.yp.JP,n.yp.ES,n.yp.MX,n.yp.ID,n.yp.PT,n.yp.BR]}],avTranslator:[{checkRegion:{appId:581541},abTestSync:{name:"enable_workspace_video_translator_smart_tools_entry"}}],urlToVideo:[{alwaysAllow:!0,notSensitiveInGateway:!0}],utvDontDialog:[{isSensitiveInGateway:!0},{curRegionInList:s},{language:{langs:["en"]}},{i18n:{langs:[a.zE.English.key]}}],textToVideo:[{i18n:{langs:[a.zE.English.key]}}],aigcVideo:[{abTestSync:{name:"enable_workspace_aigc_smart_tools_entry"}}],long2Short:[{checkPopup:!0}],digitalHuman:[{alwaysAllow:!0}],aiCreatorPlatform:[{cityBL:[4896861],curRegionInList:[n.yp.US,n.yp.GB,n.yp.CA,n.yp.AU,n.yp.NZ]},{cityBL:[4896861],i18n:{langs:[a.zE.English.key,a.zE.French.key,a.zE.Indonesian.key]}}],aiCreator:[{cityBL:[4896861]}]}},637923:function(e,t,r){r.d(t,{r:()=>v});var i,n,a,o,s,c,u,d,l=((i={}).DEFAULT="default",i.DARK="dark",i.LIGHT="light",i);var p=((n={})[n.UNLOGIN=0]="UNLOGIN",n[n.LOGIN=1]="LOGIN",n);var _={lang:null!==(a=(d=new URLSearchParams(location.search)).get("lang"))&&void 0!==a?a:"",theme:null!==(o=d.get("theme"))&&void 0!==o?o:l.DEFAULT,pcSessionId:null!==(s=d.get("pcSessionId"))&&void 0!==s?s:"",appChannel:null!==(c=d.get("appChannel"))&&void 0!==c?c:"",isPcLogin:Number(d.get("isPcLogin"))===p.LOGIN,did:null!==(u=d.get("did"))&&void 0!==u?u:""},v=e=>_[e]},216997:function(e,t,r){r.d(t,{m:function(){return s}});var i=r(876826),n=r(2910),a=r(584072),o=r(369617);function s(e,t){return c.apply(this,arguments)}function c(){return(c=(0,i._)(function*(e,t){if(e.size>5242880)return o.s.error(t("competition_apply_error_upload_maxsize")),!1;var r,i,s,c=URL.createObjectURL(e);var u=yield(r=c,i=document.createElement("img"),s=(0,a.PQ)(),i.onload=()=>{s.resolve(!0)},i.onerror=()=>{s.resolve(!1)},setTimeout(()=>{s.resolve(!1)},1e4),i.src=(0,n.C)(r,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),s.promise);return URL.revokeObjectURL(c),!!u||(o.s.error(t("competition_apply_error_upload_format")),!1)})).apply(this,arguments)}},603521:function(e,t,r){r.d(t,{Z:()=>S});var i=r("772322");r("937287"),r("109163"),r("500375");var n=r("74494"),a=r("372675"),o=r("628071"),s=r("725798"),c={container:"container-izVzWa",isDragging:"isDragging-noc37h",dragging:"dragging-zlyZP7",empty:"empty-XdBbbS",button:"button-oqhbb3",loading:"loading-UmE93q",uploadingText:"uploadingText-Z3OHgu",cancel:"cancel-r9k21D",cancelButton:"cancelButton-Fyklt_",uploaded:"uploaded-mCGlRK",video:"video-Ot3cxR",retry:"retry-jE48Vf",uploadError:"uploadError-ghhlpN",errorText:"errorText-QtBd6d",errorButtons:"errorButtons-JJsUK4",transcodingContainer:"transcodingContainer-NNe7Od",transcoding:"transcoding-UvykvE",transcodingDesc:"transcodingDesc-SNWCmd",transcodingProgress:"transcodingProgress-viF0V8"},u=r("889715"),d=r("150615"),l=r("967355"),p=r("773421"),_=r("218571"),v=r("105789"),h=r.n(v),g=r("95581"),m=r("301191"),f=r("451733"),y=r("462537"),C=r("66003"),w=r("304916"),I="VIDEO_PUBLISH_UPLOAD_DRAG_ID",S=(0,s.Pi)(function(e){var t,{data:r,publishManager:s,onSelectLocalFile:v,onSelectDreaminaStory:S,onDropFile:b,onCancel:T}=e,[R,k]=(0,_.useState)(!1),E=(0,C.G)(y.R),P=(0,_.useRef)(null),A=()=>{g.h.confirm({title:d.ZP.t("duanpian_confirm_cancel_upload",{},"Confirm Cancel Upload"),content:d.ZP.t("duanpian_after_clicking_confirm_the_upload_will_be_terminated",{},"After Clicking Confirm the Upload Will Be Terminated"),icon:null,okText:d.ZP.t("duanpian_confirm",{},"Confirm"),cancelText:d.ZP.t("duanpian_cancel",{},"Cancel"),onOk:()=>{T()}})},L=()=>(0,i.jsxs)("div",{className:c.transcodingContainer,children:[(0,i.jsxs)("div",{className:c.transcoding,children:[(0,i.jsx)(n.Z,{size:16,className:c.transcodingProgress}),d.ZP.t("Transcoding_123",{},"Transcoding...")]}),(0,i.jsx)("div",{className:c.transcodingDesc,children:d.ZP.t("Transcodin_publishing_123",{},"Feel free to post while we transcode your content.")})]});return(0,_.useEffect)(()=>{E.registerMenuFileDragHandler({containerId:I,handleDrop:e=>{var t=e[0];t&&(s.reportPublishPage("drag_upload"),b(t))},isAcceptFile:(e,t)=>!0,handleDropOver:e=>k(e)})},[E,b,s]),(0,i.jsxs)("div",{className:h()(c.container,R&&c.isDragging),id:I,children:[R&&(0,i.jsx)("div",{className:c.dragging,children:(0,i.jsx)("div",{className:c.draggingText,children:d.ZP.t("duanpian_drag_to_upload_works",{},"Drag to Upload Works")})}),"empty"===r.type&&(0,i.jsxs)("div",{className:c.empty,children:[!1,(0,i.jsx)(a.Z,{content:d.ZP.t("duanpian_local_upload"),children:(0,i.jsx)("div",{className:c.button,onClick:()=>{v(),s.reportPublishPage("click_upload")},children:(0,i.jsx)(u.jek,{size:16})})})]}),(0,w.nr)(r)&&(0,i.jsxs)("div",{className:c.loading,children:[(0,i.jsx)("div",{className:c.progress,children:(0,i.jsx)(o.Z,{size:"large",percent:r.progress,type:"circle",color:"#EBF8FF",trailColor:"#D6F1FF33"})}),(0,i.jsxs)("div",{className:c.uploadingText,children:["exporting"===r.type?d.ZP.t("duanpian_synthesizing"):d.ZP.t("duanpian_uploading"),"..."]}),(0,i.jsx)("div",{className:c.cancel,children:(0,i.jsx)(l.J,{onClick:()=>{A(),s.reportPublishPage("cancel_upload")},type:"tertiary",text:d.ZP.t("duanpian_cancel"),className:c.cancelButton})})]}),(0,w.jV)(r)&&(0,i.jsxs)("div",{className:c.uploaded,children:[(0,i.jsx)("div",{className:c.video,children:(0,i.jsx)(p.Y,{ref:P,url:null!==(t=r.preview)&&void 0!==t?t:"",renderLoading:()=>r.preview?(0,i.jsx)(m.g,{className:c.loading}):L(),maskCoverUrl:r.coverPreview,fullscreenPlayHide:f.e8})}),(0,i.jsx)("div",{className:c.retry,children:(0,i.jsx)(l.J,{PrevIcon:u.o3y,type:"tertiary",text:d.ZP.t("duanpian_re_upload"),className:c.retryButton,onClick:()=>{v(),s.reportPublishPage("reupload")}})})]}),"uploadError"===r.type&&(0,i.jsxs)("div",{className:c.uploadError,children:[(0,i.jsxs)("div",{className:c.errorText,children:[(0,i.jsx)(u.lS8,{}),r.isFromExport?d.ZP.t("duanpian_synthesis_failed_please_try_again"):d.ZP.t("duanpian_upload_failed_try_again")]}),(0,i.jsxs)("div",{className:c.errorButtons,children:[!1,(0,i.jsx)(a.Z,{content:d.ZP.t("duanpian_local_upload"),children:(0,i.jsx)("div",{className:c.button,onClick:()=>{v(),s.reportPublishPage("click_upload")},children:(0,i.jsx)(u.jek,{size:16})})})]})]})]})})},304916:function(e,t,r){r.d(t,{g9:function(){return u},jV:function(){return p},nr:function(){return _},tb:function(){return c},v8:function(){return l}});var i=r(876826),n=r(2910),a=r(584072),o=r(836413),s=r(369617);function c(e,t){return e.duration>1800?(s.s.error(t("competition_upload_error_duration")),(0,o.wf)(-1,"competition_upload_error_duration")):e.videoWidth<704||e.videoHeight<704?(s.s.error(t("competition_upload_error_resolution")),(0,o.wf)(-1,"competition_upload_error_resolution")):(0,o.ly)()}function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,i._)(function*(e,t){var r,i,u,d=URL.createObjectURL(e);var l=yield(r=d,i=document.createElement("video"),u=(0,a.PQ)(),i.onloadedmetadata=()=>{u.resolve((0,o.oW)(i))},i.onerror=()=>{u.resolve((0,o.wf)(-1,"failed to load video"))},setTimeout(()=>{u.resolve((0,o.wf)(-1,"failed to load video, timeout"))},1e4),i.src=(0,n.C)(r,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),u.promise);if(!l.ok||0===l.value.videoWidth||0===l.value.videoHeight)return(0,o.oW)("needTranscode");var p=c({duration:l.value.duration,videoWidth:l.value.videoWidth,videoHeight:l.value.videoHeight},t);return p.ok?l.value.duration>1800?(s.s.error(t("competition_upload_error_duration")),(0,o.wf)(-1,"competition_upload_error_duration")):l.value.videoWidth<704||l.value.videoHeight<704?(s.s.error(t("competition_upload_error_resolution")),(0,o.wf)(-1,"competition_upload_error_resolution")):e.size>1048576e3?(s.s.error(t("competition_upload_error_maxsize")),(0,o.wf)(-1,"competition_upload_error_maxsize")):(0,o.oW)("passed"):p})).apply(this,arguments)}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{frameTimeInSeconds:.01,extension:"jpg"};return new Promise(r=>{var i=document.createElement("canvas"),a=document.createElement("video"),o=document.createElement("source"),s=i.getContext("2d"),c=URL.createObjectURL(e);if(a.style.display="none",i.style.display="none",o.setAttribute("src",(0,n.C)(c,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"})),a.setAttribute("crossorigin","anonymous"),a.setAttribute("preload","metadata"),a.appendChild(o),document.body.appendChild(i),document.body.appendChild(a),!!s)a.currentTime=t.frameTimeInSeconds,a.load(),a.addEventListener("loadedmetadata",function(){i.width=a.videoWidth,i.height=a.videoHeight}),a.addEventListener("loadeddata",function(){setTimeout(()=>{s.drawImage(a,0,0,a.videoWidth,a.videoHeight),r(i.toDataURL("image/".concat(t.extension))),URL.revokeObjectURL(c),a.remove(),i.remove()},200)})})},p=e=>["uploaded","exported","imported"].includes(e.type),_=e=>["uploading","importing","exporting"].includes(e.type)},30081:function(e,t,r){r.d(t,{B:()=>A});var i=r("876826"),n=r("789786"),a=r("642273"),o=r("259273"),s=r("247170"),c=r("836413"),u=r("178589"),d=r("834634"),l=r("434712"),p=r("490165"),_=r("260963"),v=r("484702"),h=r("70137"),g=r("417391"),m=r("37454"),f=r("44938"),y=r("460029"),C=r("217940"),w=r("379311");class I{getEventParams(){var{status:e,duration:t,logId:r,errMsg:i}=this._params;return{status:e,duration:t,log_id:r,err_msg:i}}constructor(e){this._params=e,this.eventName="receive_credit_dev"}}function S(e,t){(0,w.S$)(e,I,[t])}var b=r("216342"),T=r("246940"),R=r("612405");class k{get receiveCreditResult(){return this._observableData.receiveCreditResult}get hasShow(){return this._observableData.hasShow}setHasShow(){(0,_.z)(()=>{this._observableData.hasShow=!0})}setReceiveCreditResult(e){this._observableData.receiveCreditResult=e}receiveCredit(e){var t=this;return(0,i._)(function*(){if(!!t._getIsNeedToTriggerReceive()){t._hasGetReceived=!0,t._markReceiveCreditsTime(),(0,y.Ie)(m.j.RECEIVE_CREDIT);var r,i,n,a=yield t._creditDataService.receiveCredit(e,{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),o=(0,C.Y)(m.j.RECEIVE_CREDIT);if(a.ok){var s=a.value;t._onReceiveCreditOk(s.isFirstReceive),S(t._containerService,{duration:o,status:"success"})}else"1501"===a.code.toString()?S(t._containerService,{duration:o,status:"duplicate_receive",errMsg:a.msg,logId:null===(r=a.cause)||void 0===r?void 0:r.log_id}):"1503"===a.code.toString()?S(t._containerService,{duration:o,status:"receive_acquire_lock",errMsg:a.msg,logId:null===(i=a.cause)||void 0===i?void 0:i.log_id}):S(t._containerService,{duration:o,status:"error",errMsg:a.msg,logId:null===(n=a.cause)||void 0===n?void 0:n.log_id});return t.setReceiveCreditResult(a),a}})()}_getIsNeedToTriggerReceive(){if(!this._hasGetReceived)return!0;var e=T.T.getItem(f.u.receiveCreditsTime);if(!e)return!0;var t=Date.now(),r=Number(e);return!(0,R.w)(r,t)&&!0}_markReceiveCreditsTime(){T.T.setItem(f.u.receiveCreditsTime,Date.now().toString())}constructor(e,t,r){this._onReceiveCreditOk=e,this._containerService=t,this._creditDataService=r,this._observableData=(0,_.LO)({receiveCreditResult:void 0,hasShow:!1}),this._hasGetReceived=!1}}(0,n.gn)([(0,b.lI)("CreditReceiveManager","receiveCredit"),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,n.w6)("design:returntype",Promise)],k.prototype,"receiveCredit",null),k=(0,n.gn)([(0,n.fM)(1,l.t),(0,n.fM)(2,g.JF),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Function,void 0===l.t?Object:l.t,void 0===g.JF?Object:g.JF])],k);var E=r("107551"),P=r("589643");class A{get isLocalCreditReady(){return this._localCreditHelper.isLocalCreditReady}get localCredit(){return this._localCreditHelper.localCredit}get creditInfo(){return this._creditObservableData.creditInfo}get expiringCreditInfoList(){var{expiringCreditInfoList:e}=this._creditObservableData;return e}get isFirstReceived(){return this._creditObservableData.isFirstReceived}get creditHistoryList(){return this._creditObservableData.creditHistoryList[this.historyType]}get loadingCreditHistory(){return this._creditObservableData.loadingCreditHistory[this.historyType]}get historyType(){return this._creditObservableData.historyType}get creditReceiveManager(){return this._creditReceiveManager}get creditsDetail(){return this._creditObservableData.creditsDetail}init(){this._localCreditHelper.init(),this._commercialStrategyService.onIsInFreemiumStageChange(e=>{if(!e)this._handleReceive()})}resetHistoryData(){(0,_.z)(()=>{this._creditObservableData.creditHistoryList={[h.Pi.NOT_LIMITED]:[],[h.Pi.CONSUMED]:[],[h.Pi.ISSUED]:[]},this._creditObservableData.hasMoreHistory={[h.Pi.NOT_LIMITED]:!0,[h.Pi.CONSUMED]:!0,[h.Pi.ISSUED]:!0},this._creditObservableData.loadingCreditHistory={[h.Pi.NOT_LIMITED]:!1,[h.Pi.CONSUMED]:!1,[h.Pi.ISSUED]:!1},this._creditObservableData.historyType=h.Pi.NOT_LIMITED,this._historyCursor={[h.Pi.NOT_LIMITED]:"0",[h.Pi.CONSUMED]:"0",[h.Pi.ISSUED]:"0"}})}syncHistoryData(e,t){var r=this;return(0,i._)(function*(){if(!!r._userAccountService.hasLogin)yield r._getCreditHistory(e,t)})()}changeHistoryType(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=this;return(0,i._)(function*(){(0,_.z)(()=>{n._creditObservableData.historyType=t}),r&&(yield n.loadMoreCreditHistory(e))})()}loadMoreCreditHistory(e){var t=this;return(0,i._)(function*(){return!!t.hasMoreCreditHistory()&&!!t._userAccountService.hasLogin&&(!!(yield t._getCreditHistory(e)).ok||!1)})()}_getCreditHistory(e,t){var r=this;return(0,i._)(function*(){var i=null!=t?t:r.historyType;if(r._creditObservableData.loadingCreditHistory[i])return(0,c.ly)();(0,_.z)(()=>{r._creditObservableData.loadingCreditHistory[i]=!0});var n=yield(0,P._)(e,r._containerService,r._historyCursor[i],r._getDataServiceCreditHistoryType(i));if((0,_.z)(()=>{r._creditObservableData.loadingCreditHistory[i]=!1}),!n.ok)return(0,c.wf)(n.code,n.msg,n.cause);var{newCursor:a,records:o,hasMore:s}=n.value;return r._historyCursor[i]=null!=a?a:"0",(0,_.z)(()=>{r._creditObservableData.creditHistoryList[i]=r._creditObservableData.creditHistoryList[i].concat(o),r._creditObservableData.hasMoreHistory[i]=s}),(0,c.ly)()})()}_getDataServiceCreditHistoryType(e){return e===h.Pi.CONSUMED?d.P.CONSUMED:e===h.Pi.ISSUED?d.P.ISSUED:void 0}hasMoreCreditHistory(){return this._creditObservableData.hasMoreHistory[this.historyType]}syncRemoteCreditHistory(){this._localCreditHelper.syncRemoteCreditHistory()}stopSyncRemoteCreditHistory(){this._localCreditHelper.stopSyncRemoteCreditHistory()}disposeFetchTask(){this._localCreditHelper.dispose()}addLocalCreditHistory(e){return this._localCreditHelper.addLocalCreditHistory(e)}updateCreditInfo(e,t,r){(0,_.z)(()=>{this._creditObservableData.creditInfo=e,this._creditObservableData.expiringCreditInfoList=null!=r?r:[],this._creditObservableData.creditsDetail=t})}setIsFirstReceived(e){(0,_.z)(()=>{this._creditObservableData.isFirstReceived=e})}_handleReceive(){var e;if(!(this._commercialStrategyService.isInFreemiumStage||(null===(e=this._platformUiConfigurationService.currentRoutePath)||void 0===e?void 0:e.includes(a.EZ[o.Sj.ThirdPartyCallback]))))this._userAccountService.hasLogin?this._creditReceiveManager.receiveCredit((0,s.fC)()):this._userAccountService.onDidLogin(()=>{this._creditReceiveManager.receiveCredit((0,s.fC)())})}_onReceiveCreditOk(e){this.setIsFirstReceived(e),this.syncRemoteCreditHistory()}constructor(e,t,r,i){this._containerService=e,this._commercialStrategyService=t,this._userAccountService=r,this._platformUiConfigurationService=i,this._creditObservableData=(0,_.LO)({creditInfo:{vipCredit:0,giftCredit:0,purchaseCredit:0},creditsDetail:{vipCredits:[],giftCredits:[],purchaseCredits:[]},expiringCreditInfoList:[],isFirstReceived:!1,creditHistoryList:{[h.Pi.NOT_LIMITED]:[],[h.Pi.CONSUMED]:[],[h.Pi.ISSUED]:[]},hasMoreHistory:{[h.Pi.NOT_LIMITED]:!0,[h.Pi.CONSUMED]:!0,[h.Pi.ISSUED]:!0},loadingCreditHistory:{[h.Pi.NOT_LIMITED]:!1,[h.Pi.CONSUMED]:!1,[h.Pi.ISSUED]:!1},historyType:h.Pi.NOT_LIMITED}),this._historyCursor={[h.Pi.NOT_LIMITED]:"0",[h.Pi.CONSUMED]:"0",[h.Pi.ISSUED]:"0"},this._localCreditHelper=this._containerService.createInstance(E.W),this._creditReceiveManager=this._containerService.createInstance(k,this._onReceiveCreditOk.bind(this)),this.onLocalCreditChange=this._localCreditHelper.onLocalCreditChange}}A=(0,n.gn)([(0,n.fM)(0,l.t),(0,n.fM)(1,v.N),(0,n.fM)(2,p.D),(0,n.fM)(3,u.e),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===l.t?Object:l.t,void 0===v.N?Object:v.N,void 0===p.D?Object:p.D,void 0===u.e?Object:u.e])],A)},962484:function(e,t,r){r.d(t,{D:function(){return p}});var i=r(876826),n=r(789786),a=r(584072),o=r(843698),s=r(247170),c=r(100470),u=r(434712),d=r(490165),l=r(589643);class p{get intervalTime(){return this._initialIntervalTime}get timer(){return this._timer}startPolling(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this._doFetch();var t=this;this._timer=setTimeout((0,i._)(function*(){yield t._doFetch(),t.reset(!1)}),this._initialIntervalTime)}changeIntervalTime(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e!==this._initialIntervalTime)this._initialIntervalTime=e,this.stopPolling(),t&&this.startPolling()}reset(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.stopPolling(),this.startPolling(e)}stopPolling(){this._timer&&(clearTimeout(this._timer),this._timer=null)}dispose(){this.stopPolling()}_doFetch(){var e=this;return(0,i._)(function*(){var t,r=!1,i=!1,n=0,o=[];if(!e._accountService.hasLogin){e.stopPolling();return}do{var[u,d]=(yield(0,a.Hp)(()=>(0,l._)((0,s.Tg)(),e._containerService,t),2e3)).pair();if(u){if(u.code===c.b.ErrLogin){e.stopPolling();break}if((n+=1)>3)break}if(d){var{newCursor:p,records:_,hasMore:v}=d;i=v,t=p;var h=_.findIndex(t=>{var r;return t.submitId===(null===(r=e._initialRecord)||void 0===r?void 0:r.submitId)});r||(r=-1!==h);var g=_.slice(0,r?h+1:_.length);o.push(...g)}}while(!r&&i);e._creditHistoryChange.fire(o)})()}constructor(e=5e3,t,r,i){this._initialIntervalTime=e,this._initialRecord=t,this._containerService=r,this._accountService=i,this._timer=null,this._creditHistoryChange=new o.Q,this.onCreditHistoryChange=this._creditHistoryChange.event}}p=(0,n.gn)([(0,n.fM)(2,u.t),(0,n.fM)(3,d.D),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0,Object,void 0===u.t?Object:u.t,void 0===d.D?Object:d.D])],p)},589643:function(e,t,r){r.d(t,{_:function(){return o}});var i=r(608358),n=r(216342),a=r(417391),o=(0,n.Tx)("commercial-credit-service",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=arguments.length>3?arguments[3]:void 0;return(0,i.ko)(t,a.JF).fetchUserCreditHistory(e,{count:20,cursor:r,historyType:n})},"fetchUserCreditHistory")},468327:function(e,t,r){r.d(t,{U:function(){return n}});var i=r(834634),n=e=>{var{amount:t,historyType:r}=e;return r===i.P.CONSUMED?-t:t}},691208:function(e,t,r){r.d(t,{Y:function(){return a}});var i=r(843698),n=r(260963);class a{get vipPriceList(){return this._observableData.vipPriceList}get creditPriceList(){return this._observableData.creditPriceList}get vipTabList(){return this._observableData.vipTabList}get onDisplayInfoChange(){return this._onDisplayInfoChange.event}setVipPriceList(e){(0,n.z)(()=>{this._observableData.vipPriceList=e})}setCreditPriceList(e){(0,n.z)(()=>{this._observableData.creditPriceList=e})}setDisplayInfo(e){this.displayInfo=e,this._onDisplayInfoChange.fire(e)}setVipTabList(e){(0,n.z)(()=>{this._observableData.vipTabList=e})}constructor(){this.displayInfo={},this._observableData=(0,n.LO)({vipPriceList:[],creditPriceList:[],vipTabList:[]}),this._onDisplayInfoChange=new i.Q}}},140615:function(e,t,r){r.d(t,{G:function(){return i}});var i="mock_author_id"},984951:function(e,t,r){r.d(t,{F:function(){return d}});var i=r(876826),n=r(44938),a=r(351064),o=r(475578),s=r(224671),c=r(100470);function u(e){a.X.showSuccess({onOk:()=>window.location.reload()}),localStorage.setItem(e,s.OR.True)}function d(e,t){return l.apply(this,arguments)}function l(){return(l=(0,i._)(function*(e,t){var r,i,d,l,p,_,v,h,g,{inviteCode:m,canVerify:f,hasCodeResumeKey:y}=(i=null!==(r=localStorage.getItem(n.u.authorInviteCode))&&void 0!==r?r:"",d="".concat(n.u.authorInviteCodeHasResumedPrefix).concat(i),l=localStorage.getItem(d)===s.OR.True,p=!!(i&&!l),{inviteCode:i,canVerify:p,hasCodeResume:l,hasCodeResumeKey:d});if(!f||!e)return!0;var C=c.b.ErrSuccess;if(a.X.load(!0),yield e.aggregate.getHasPublishAuthority())u(y);else{var{ErrSuccess:w,ErrAuthorMarkUpInviteCodeHasUsed:I}=c.b,{code:S}=yield e.repository.postAuthorMarkupInviteCode({inviteCode:m});(C=S)===w?u(y):C===I?(a.X.showFail(),localStorage.setItem(y,s.OR.True)):a.X.showRetry({onRetry:()=>window.location.reload()})}return _=C,v=m,h=t,g=_===c.b.ErrSuccess?o.T9.Success:o.T9.Fail,null==h||h.reportBusinessEvent("auth_status",{status:g,network_code:_,author_invite_link_id:v},{syncServer:!0}),!1})).apply(this,arguments)}},351350:function(e,t,r){r.d(t,{Q:function(){return u}});var i,n=r(876826),a=r(314443),o=r(608358),s=r(70529),c=r(936226);var u=(i=(0,n._)(function*(e){var t=(0,o.ko)(e,c.Gw),r=(0,o.ko)(e,s.m);try{var{token:i,state:n}=(yield a.S4.login()).data;yield t.loginWithAuthToken({token:i,state:n})}catch(e){var u=Error("\u672A\u77E5\u9519\u8BEF");e instanceof Error?u=e:"string"==typeof e&&(u=Error(e)),r.reportDevError("capcut_pc_login_err",u)}}),function(e){return i.apply(this,arguments)})},936102:function(e,t,r){r.d(t,{h:function(){return a}});var i=r(819277),n=r(474956),a=(e,t)=>{var r=(0,i.l)(n._g.DreaminaAiVideo,t);return e.add(t.key,r.resource),r.resource}},910683:function(e,t,r){r.d(t,{W:function(){return a}});var i=r(819277),n=r(474956),a=(e,t)=>{var r=(0,i.l)(n._g.DreaminaShowCaseVideo,t);return e.add(t.key,r.resource),r.resource}},411803:function(e,t,r){r.d(t,{l:function(){return s}});var i=r(876826),n=r(56935),a=r(685665),o=r(843698);class s{get isFinished(){return this._isFinished}get onIsFinishedChanged(){return this._onIsFinishedChanged.event}proceed(){var e=this;return(0,i._)(function*(){yield e._processingLock.acquire(),e._isProcessing=!0;var t,r,i=null===(r=e._interceptorChainArray)||void 0===r?void 0:null===(t=r[e._currentIndex])||void 0===t?void 0:t.needToProceedNext;if("boolean"==typeof i&&!i||e._currentIndex+1>=e._interceptorChainArray.length){e._updateIsFinished(),e._processingLock.release();return}e._currentIndex=e._currentIndex+1;var n=e._interceptorChainArray[e._currentIndex];(yield n.getCanShow())?(n.onDialogClosed(()=>{e._processingLock.release(),e.proceed()}),n.interceptToShowDialog()):(e._processingLock.release(),e.proceed())})()}addInterceptor(e){this._isProcessing&&(0,n.ss)("Not allowed to add interceptor when processing"),this._interceptorChainArray.find(t=>t.interceptKey===e.interceptKey)&&(0,n.ss)("Not allowed to add interceptor when has found same interceptor"),this._interceptorChainArray.push(e),this._interceptorChainArray.sort((e,t)=>t.priority-e.priority)}addInterceptors(e){e.forEach(e=>{this.addInterceptor(e)})}_updateIsFinished(){this._isFinished=!0,this._onIsFinishedChanged.fire(!0)}constructor(){this._interceptorChainArray=[],this._isProcessing=!1,this._isFinished=!1,this._onIsFinishedChanged=new o.Q,this._processingLock=new a.w,this._currentIndex=-1}}},155058:function(e,t,r){r.d(t,{C:function(){return s}});var i,n=r(876826),a=r(761899),o=r(806663);var s=(i=(0,n._)(function*(e){var{promise:t,resolve:r}=(0,a.P)();if(e.isFinished)return r();(0,o.V)(e.onIsFinishedChanged)(()=>{r()});yield t}),function(e){return i.apply(this,arguments)})},335737:function(e,t,r){r.d(t,{d:function(){return i}});function i(e,t){var r;return{performanceEntry:e,businessInfo:{createPid:t.createPid,resolveSource:t.resolveSource,resolveTime:null!==(r=t.resolveTime)&&void 0!==r?r:performance.now()}}}},490730:function(e,t,r){r.d(t,{f:function(){return o}});var i=r(803625),n=r(526967),a=r(642273);function o(){var e=(0,i.TK)();if(!e)return null;var t=e.itemId,r=n.ho.Image,{itemType:o}=e;return"".concat(location.origin).concat(a.NU).concat(a.wN.workDetail,"/").concat(t,"?").concat(n.KL.workDetailType,"=").concat(r,"&").concat(n.KL.itemType,"=").concat(o,"&scene=template")}},567739:function(e,t,r){r.d(t,{n:function(){return n}});var i=r(259273),n=e=>{var t,r;(null===(r=e.currentKeepAliveData)||void 0===r?void 0:null===(t=r.locationState)||void 0===t?void 0:t.hasBack)?e.navigateBack():e.navigate(i.Sj.Home)}},886076:function(e,t,r){r.d(t,{Jd:()=>x});var i=r("876826"),n=r("85728"),a=r("929753"),o=r("772322");r("395248");var s=r("423342"),c=r("150615"),u=r("889715"),d="userPortrait-LcwlGF",l="closeBtn-fgdbvo",p="footer-SzF0OW",_="next-n5iIsI",v=r("218571"),h=r("967355"),g=r("632960"),m=r("259435"),f=r("487736"),y=r("42197");r("109163");var C=r("372675"),w=r("105789"),I=r.n(w),S=r("145044"),b=r("653061");function T(e){var t,{options:r}=e,[i,n]=(0,v.useState)(null===(t=e.value)||void 0===t?void 0:t[0]),a=t=>{if(t.key!==(null==i?void 0:i.key)){var r;n(t),null===(r=e.onChange)||void 0===r||r.call(e,t)}};return(0,o.jsx)("div",{className:S.Z.optionWrap,children:r.map(e=>(0,o.jsxs)("div",{className:I()(S.Z.questionOption,{[S.Z.active]:(null==i?void 0:i.key)===e.key}),onClick:()=>a(e),children:[(0,o.jsx)(b.k,{src:e.img,className:S.Z.image,style:{width:e.imgSize?"".concat(e.imgSize,"px"):"24px",height:e.imgSize?"".concat(e.imgSize,"px"):"24px"}}),(0,o.jsx)("div",{className:S.Z.optionText,children:(0,o.jsx)(C.Z,{content:c.ZP.t(e.content),children:c.ZP.t(e.content)})}),(null==i?void 0:i.key)===e.key&&(0,o.jsx)(u.G$l,{className:S.Z.checkBox})]},e.key))})}var R=r("27409"),k=e=>(0,o.jsxs)("div",{className:R.Z.survey,children:[(0,o.jsxs)("div",{className:R.Z.header,children:[(0,o.jsx)("div",{className:R.Z.title,style:{marginTop:e.questionItem.titleDescription?0:"5px"},children:c.ZP.t(e.questionItem.title)}),(0,o.jsx)("div",{className:R.Z.desc,children:c.ZP.t(e.questionItem.titleDescription)})]}),(0,o.jsxs)("div",{className:R.Z.body,children:[e.questionItem.type===g.wz.MultiSelect?(0,o.jsx)(y.h,{value:e.defaultSelected,onChange:e.onChange,options:e.questionItem.options},e.questionItem.id):null,e.questionItem.type===g.wz.SingleSelect?(0,o.jsx)(T,{value:e.defaultSelected,onChange:e.onChange,options:e.questionItem.options},e.questionItem.id):null]})]}),E=r("44938"),P=(e,t,r)=>{if(!!r)r.keyValue.set("".concat(E.u.userPortraitSurveyAnswer,"_").concat(t),JSON.stringify(e))},A=e=>e.map(e=>[e.questionMap[e.firstQuestionKey]]),L=(e,t,r)=>{for(var i=0,n=0;n<t;n++)i+=e[n].questionCount;return i+r+1},D=(e,t)=>{for(var r={surveyIndex:0,questionIndex:0},i=0;i<e.length;i++){var n=!0;r.surveyIndex=i;for(var a=0;a<e[i].length;a++){var o=e[i][a];if(a<e[i].length-1?r.questionIndex=a+1:r.questionIndex=a,!t[o.id]){n=!1;break}}if(!n)break}return r},O=(e,t,r)=>{var[i,n]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{r(D(e,t)),n(!0)},[]),i},M=r("369617"),F=["student","art_professional","designer","tv_film_professional","digital_marketing","social_media","tech_professional","other"],N=e=>{var t,r,s,g,m,{surveysData:f,onSubmit:y,onClose:C,storageService:w,reportService:I,accountService:S}=e,[b,T]=(0,v.useState)(0),[R,E]=(0,v.useState)(0),D=A(f),[N,x]=(0,v.useState)({}),[U,j]=(0,v.useState)(!1),V=D[b][R],B=null!==(g=null===(r=N[V.id])||void 0===r?void 0:r.val)&&void 0!==g?g:[],H=L(f,b,R),G=null!==(m=null==S?void 0:null===(s=S.userProfile)||void 0===s?void 0:s.uid)&&void 0!==m?m:"",W=()=>({question_id:V.id,question_rank:H,question_title:V.title,option:B.map(e=>e.content).join(",")});var q=(t=(0,i._)(function*(){var e={},t=f.map((t,r)=>{var i=D[r].map(e=>e.id),n={};return i.forEach(e=>{n[e]=N[e]}),D[r].forEach((r,i)=>{var a=null===(c=n[r.id].val)||void 0===c?void 0:null===(s=c[0])||void 0===s?void 0:s.id,o=r.options.findIndex(e=>e.id===a);if(-1!==o){var s,c,u,d=F[o];e[null!==(u=t.questionReportName[i])&&void 0!==u?u:r.id]=d}}),{taskVersion:t.taskVersion,taskId:t.taskId,submitId:t.submitId,data:n,timeCost:0,type:t.type}});null==I||I.reportBusinessEvent("questionnaire_submmit",e),j(!0);var r=yield y(t);j(!1),r?(M.s.success(c.ZP.t("quest_submittoast",{},"Submitted")),null==C||C()):M.s.warning(c.ZP.t("quest_networkerrortoast",{},"Network error. Check your internet connection and try again.")),null==C||C()}),function(){return t.apply(this,arguments)}),Y=O(D,N,e=>{var{surveyIndex:t,questionIndex:r}=e;E(r),T(t)});return(0,v.useEffect)(()=>{Y&&(null==I||I.reportBusinessEvent("questionnaire_show",W()))},[V,Y]),(0,o.jsxs)("div",{className:d,children:[(0,o.jsx)(u.Rnl,{className:l,onClick:()=>{null==I||I.reportBusinessEvent("questionnaire_close",W()),null==C||C()}}),(0,o.jsx)(k,{questionItem:V,defaultSelected:B,onChange:e=>{var t=e instanceof Array;null==I||I.reportBusinessEvent("questionnaire_click_option",(0,a._)((0,n._)({},W()),{option:t?e.map(e=>e.content).join(","):e.content})),x(r=>{var i=(0,a._)((0,n._)({},r),{[V.id]:{type:V.type,val:t?e:[e]}});return P(i,G,w),i})}}),(0,o.jsx)("div",{className:p,children:(0,o.jsx)(h.J,{loading:U,disabled:0===B.length,className:_,text:c.ZP.t("survey_btn",{},"\u5F00\u542F\u5373\u68A6"),onClick:q})})]})},x=e=>{var{containerService:t,dreaminaSettingsDataService:r}=e,i=(0,m.X)(t,f.M.NoviceQuestionnaire),c=s.Z.confirm({wrapClassName:"userPortraitModal",footer:null,escToExit:!1,afterClose:()=>{var t;null==i||i.unmount(),null===(t=e.onClose)||void 0===t||t.call(e)},icon:null,closeIcon:null,closable:!0,focusLock:!1,maskClosable:!1,autoFocus:!1,content:(0,o.jsx)(N,(0,a._)((0,n._)({},e),{type:g.Rs.Image,onClose:()=>c.close()}))});r.updateSettings({occupationalQuestionnaire:!0})}},19349:function(e,t,r){r.d(t,{S:function(){return n}});var i=r(185617);class n{static setViewportScaleInMobileNotIpad(){var e=document.querySelector('meta[name="viewport"]');if(!!e&&!!i.lY&&!this._hasSetViewPort){var t="width=device-width, initial-scale=0.4, shrink-to-fit=no, viewport-fit=cover, minimum-scale=0.3, maximum-scale=3.0, user-scalable=no";e.content=t,setTimeout(()=>{e.content=t.replace("user-scalable=no","user-scalable=yes")},1e3),this._hasSetViewPort=!0}}static resetViewport(){var e=document.querySelector('meta[name="viewport"]');if(!!e&&!!this._hasSetViewPort)e.content="width=device-width, initial-scale=1.0, shrink-to-fit=no, viewport-fit=cover, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no",this._hasSetViewPort=!1}}n._hasSetViewPort=!1},165460:function(e,t,r){r.d(t,{WI:function(){return c},ZB:function(){return u}});var i=r(314068),n=r(423381),a=r(140615),o=r(224671),s=r(243302);function c(e){return e===o.O5.Collection?o.O5.Collection:o.O5.Single}function u(e){var{itemId:t,coverUrl:r,itemType:c,secUid:u}=e;return{commonAttr:{coverUrl:r,coverUri:"",publishedItemId:t,effectType:null!=c?c:o.O5.Single,id:t,effectId:"",createTime:Date.now(),description:"",hasPublished:!0,status:o.Ll.Online,itemUrls:[]},author:{name:"",avatarUrl:"",uid:a.G,secUid:null!=u?u:""},aigcImageParams:{generateType:s.pi.Unknown,templateSource:o.Q8.Default,promptSource:o.U_.Template,templateId:"",generateCount:1,generateId:"",text2imageParams:{prompt:"",seed:-1,sampleStrength:n.C,negativePrompt:"",imageRatio:o.jP.OneOne,largeImageInfo:i.jg,modelConfig:{iconUrl:"",modelNameStarlingKey:"",modelReqKey:"",modelTipStarlingKey:"",feats:[]}},requestId:"",aigcCntList:[],originPromptSource:"",lastRequestId:"",originRequestId:""},blendParams:{},image:{largeImages:[]},statistic:{usageNum:0,favoriteNum:0,hasFavorited:!1}}}},333433:function(e,t,r){r.d(t,{X:function(){return o}});var i=r(66003),n=r(178589),a=r(218571),o=()=>{var e=(0,i.G)(n.e),[t,r]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{r(null==e?void 0:e.currentKeepAliveData),null==e||e.onKeepAliveChange(e=>{r(e)})},[]),t}},64513:function(e,t,r){r.d(t,{X:()=>L});var i=r("876826"),n=r("85728"),a=r("929753"),o=r("772322");r("395248");var s=r("423342"),c=r("66003"),u=r("806663"),d=r("725798"),l={storySelectorModalWrapper:"storySelectorModalWrapper-n11eZh",storySelectorModal:"storySelectorModal-sFyrTs",storySelectorModalHeader:"storySelectorModalHeader-apDFwx",title:"title-yFKmU2",closeBtn:"closeBtn-sjOjs0",contentContainer:"contentContainer-UVH8b9",list:"list-noD1zF",local:"local-iofmeY",upload:"upload-A3JguI",publishContainer:"publishContainer-D8FZrd",publishButtonContainer:"publishButtonContainer-cgmv7u",btn:"btn-g6R_so",publishButton:"publishButton-FhPMOG",storyItemContainer:"storyItemContainer-jIbRJT",empty:"empty-sBwzyd",emptyItem:"emptyItem-r7eJ5l"},p=r("538638"),_=r("693895"),v=r("184613"),h=r("150615"),g=r("889715"),m=r("967355"),f=r("105789"),y=r.n(f);r("109163");var C=r("372675"),w=r("2910"),I=r("792023"),S=r("419608"),b=r("405013"),T=(0,d.Pi)(function(e){var t,r,{story:i,isSelected:n,onSelected:a}=e,{imgSrc:s}=(0,S.j)({tokenKey:null!==(t=i.key)&&void 0!==t?t:"",src:(0,w.C)(i.cover.imageUrl,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),srcKey:null!==(r=i.key)&&void 0!==r?r:"",decryptUrl:i.cover.imageUrl.includes("data:")?i.cover.imageUrl:void 0});return(0,o.jsxs)("div",{className:y()(I.Z.container,n&&I.Z.selected),onClick:a,children:[(0,o.jsxs)("div",{className:I.Z.cover,children:[(0,o.jsx)("img",{draggable:!1,className:I.Z.image,src:(0,w.C)(s,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),alt:"",crossOrigin:"anonymous"}),(0,o.jsxs)("div",{className:I.Z.coverMask,children:[(0,o.jsx)("img",{draggable:!1,src:(0,w.C)(s,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),crossOrigin:"anonymous"}),(0,o.jsx)("div",{className:I.Z.coverMaskBack})]})]}),(0,o.jsx)("div",{className:I.Z.content,children:(0,o.jsxs)("div",{className:I.Z.text,children:[(0,o.jsx)(C.Z,{position:"tl",content:i.name||h.ZP.t("dre_story_project_untitled",{},"undefined"),triggerProps:{mouseEnterDelay:1e3},checkOverflow:!0,children:(0,o.jsx)("p",{children:i.name||h.ZP.t("dre_story_project_untitled",{},"undefined")})}),(0,o.jsx)("span",{children:(0,b.Vl)(i.modifyAt)})]})}),(0,o.jsx)("div",{className:I.Z.radio,children:n&&(0,o.jsx)(g.DLY,{fontSize:10})})]})}),R=r("218571"),k=r("779561"),E=r("259273"),P=r("178589"),A=(0,d.Pi)(function(e){var t,{closeModal:r,containerService:n,onClickLocalFile:a,onSelected:s,page:d,activity:f,activity_id:C,onGoCreate:w}=e,I=(0,c.G)(v.M),S=(0,c.G)(P.e),b=I.getInstance(p.F.ALL),A=null!==(t=null==b?void 0:b.listData)&&void 0!==t?t:[],L=null==b?void 0:b.ready,D=0===A.length&&L,[O,M]=(0,R.useState)(void 0),F=(0,R.useRef)(null);return(0,R.useEffect)(()=>{var e;n.invokeFunction((e=(0,i._)(function*(e){var t=e.get(_.W);!t.available&&(yield new Promise(e=>(0,u.V)(t.onDidWorkspaceChange)(()=>e())));var{workspace_id:r,space_id:i}=t.workspaceList[0];null==b||b.reInit({workspaceId:r,spaceId:i},p.F.ALL)}),function(t){return e.apply(this,arguments)}))},[]),(0,R.useEffect)(()=>{var e=e=>{var{scrollTop:t,clientHeight:r,scrollHeight:i}=e.target;i-t<=r+100&&(null==b||b.getStoryData(p.F.ALL))},t=F.current;if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[F,b]),(0,o.jsxs)("div",{className:l.storySelectorModal,children:[(0,o.jsxs)("div",{className:l.storySelectorModalHeader,children:[(0,o.jsx)("div",{className:l.title,children:(0,o.jsx)("span",{children:h.ZP.t("duanpian_select_from_assets",{},"Select from Assets")})}),(0,o.jsx)(g.Rnl,{className:l.closeBtn,onClick:r})]}),(0,o.jsxs)("div",{className:l.contentContainer,children:[(0,o.jsxs)("div",{ref:F,className:l.list,children:[D&&(0,o.jsxs)("div",{className:"".concat(l.storyItemContainer," ").concat(l.empty),onClick:()=>{S.navigate(E.Sj.StoryEditor,{state:{enterFrom:d}}),r(),w()},children:[(0,o.jsx)("div",{className:l.emptyItem,children:(0,o.jsx)(g.nGr,{size:32})}),(0,o.jsx)("span",{children:h.ZP.t("dre_story_project_new",{},"\u65B0\u5EFA\u6545\u4E8B\u7248")})]}),A.map(e=>(0,o.jsx)(T,{story:e,isSelected:O===e.storyId,onSelected:()=>{M(e.storyId),(0,k.i)(n,{action:"select",tab:"story",page:d,activity:f,activity_id:C})}},e.storyId))]}),(0,o.jsxs)("div",{className:l.local,children:[(0,o.jsx)("div",{children:h.ZP.t("duanpian_you_can_also",{},"You Can Also")}),(0,o.jsx)(m.J,{className:y()(l.btn,l.upload),text:h.ZP.t("duanpian_upload_from_local",{},"Upload from Local"),type:"tertiary",PrevIcon:g.jek,onClick:()=>{a().then(e=>{r()}),(0,k.i)(n,{action:"click_upload",tab:"story",page:d,activity:f,activity_id:C})}})]}),(0,o.jsx)("div",{className:l.publishContainer,children:(0,o.jsxs)("div",{className:l.publishButtonContainer,children:[(0,o.jsx)(m.J,{className:y()(l.btn),text:h.ZP.t("duanpian_cancel",{},"Cancel"),type:"tertiary",onClick:r}),(0,o.jsx)(m.J,{className:y()(l.publishButton,l.btn),text:h.ZP.t("duanpian_confirm",{},"Confirm"),disabled:!O,onClick:()=>{r(),s(A.find(e=>e.storyId===O)),(0,k.i)(n,{action:"confirm",tab:"story",page:d,activity:f,activity_id:C})}})]})})]})]})});function L(e){var t,{containerService:r,onSelected:i,onClickLocalFile:u,page:d,activity:p,activity_id:_}=e;(0,k.i)(r,{action:"show",tab:"story",page:d,activity:p,activity_id:_}),t=s.Z.confirm({wrapClassName:l.storySelectorModalWrapper,title:null,footer:null,simple:!1,escToExit:!1,icon:null,closable:!1,maskClosable:!1,autoFocus:!1,content:(0,o.jsx)(c.$,{instantiationService:r,children:(0,o.jsx)(A,(0,a._)((0,n._)({},e),{closeModal:()=>{null==t||t.close(),t=void 0},containerService:r,onSelected:i,onClickLocalFile:u}))})})}},840853:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.AbsolutePositionSlot]:[{id:n.$W.AbsolutePositionSlotHelpCenter,visibleGroups:Object.keys(a.EZ).filter(e=>![n.Sj.FallBack,n.Sj.ThirdPartyCallback,n.Sj.FallBack,n.Sj.WorkDetailPage].includes(e)),defaultPosition:{right:16,bottom:16}}]}},33024:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.PageRoute]:[{id:n.Sj.SearchResult,path:a.EZ[n.Sj.SearchResult],skeleton:()=>null}]}},406951:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.PageRoute]:[{id:n.Sj.CookieManage,path:a.EZ[n.Sj.CookieManage],layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!1},skeleton:()=>null}]}},46821:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.PageRoute]:[{id:n.Sj.DataSubjectRequestBlock,path:a.EZ[n.Sj.DataSubjectRequestBlock],isNeedCache:!1,layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0},skeleton:()=>null}]}},1326:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.PageRoute]:[{id:n.Sj.DataSubjectRequestDownload,path:a.EZ[n.Sj.DataSubjectRequestDownload],isNeedCache:!1,layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0},skeleton:()=>null}]}},541164:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.PageRoute]:[{id:n.Sj.DataSubjectRequest,path:a.EZ[n.Sj.DataSubjectRequest],isNeedCache:!1,layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0},skeleton:()=>null}]}},251700:function(e,t,r){r.d(t,{p:function(){return h}});var i=r(772322),n=r(590839),a=r(735212),o=r(259273),s=r(642273),c=r(889715),u=r(150615),d=r(708274),l=r(848303),p=r(185617),_=r(669174),v=r(953516),h={[n.a.PageRoute]:[{id:o.Sj.Explore,path:s.EZ[o.Sj.Explore],isNeedCache:!p.lY,skeleton:()=>null}],[n.a.SideMenu]:[{id:o.Sj.Explore,group:d.Bl.Main,title:()=>u.ZP.t("frame_change_explore",{},"Explore"),tooltips:()=>u.ZP.t("frame_change_explore",{},"Explore"),icon:e=>{var{selected:t,isHover:r}=e;return t||r?(0,i.jsx)(c.g9U,{className:_.Z.pageIconFill}):(0,i.jsx)(c.tCm,{fill:l.Z.pageIconColor})},position:"top",order:o.us.Explore}],[n.a.TitleBar]:[{id:o.Sj.Explore,position:"right",order:o.ru.ShortVideoPublish,type:"Custom"},{id:o.$W.TitleBarSearch,position:"center",orderLevel:a.r.low,type:"Custom",content:()=>{var e;if("undefined"!=typeof window&&!(null===(e=window._libra_abtest)||void 0===e?void 0:e.dreamina_web_search))return null;(0,i.jsx)("div",{className:_.Z.searchContainer,id:"ssr-search-container",children:(0,i.jsx)(v.Mj,{value:"",isMinContainerToInteractVisible:!1,setIsMinContainerToInteractVisible:()=>{}})})}}]}},878293:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.PageRoute]:[{id:n.Sj.History,path:a.EZ[n.Sj.History],skeleton:()=>null,layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0}}]}},663190:function(e,t,r){r.d(t,{p:function(){return p}});var i=r(772322);r(109163);var n=r(372675);r(218571);var a=r(590839),o=r(259273),s=r(642273),c=r(889715),u=r(708274),d=r(150615),l=r(848303),p={[a.a.PageRoute]:[{id:o.Sj.InviteFission,path:s.EZ[o.Sj.InviteFission],skeleton:()=>null}],[a.a.SideMenu]:[{id:o.Sj.InviteFission,title:()=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.Z,{content:d.ZP.t("dre_home_entry_invite",{},"\u9080\u8BF7\u6709\u793C"),checkOverflow:!0,children:(0,i.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:8},children:d.ZP.t("dre_home_entry_invite",{},"\u9080\u8BF7\u6709\u793C")})}),(0,i.jsx)(c.mKm,{style:{width:42,height:20}})]}),shouldHidden:()=>!0,tooltips:()=>d.ZP.t("dre_home_entry_invite",{},"\u9080\u8BF7\u6709\u793C"),icon:e=>{var{selected:t,isHover:r}=e;return t||r?(0,i.jsx)(c.t5j,{}):(0,i.jsx)(c.bXm,{fill:l.Z.pageIconColor})},group:u.Bl.Others,order:o.us.Invitation,position:"top"}]}},532352:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(590839),n=r(259273),a=r(642273),o={[i.a.PageRoute]:[{id:n.Sj.NoUsePermission,path:a.EZ[n.Sj.NoUsePermission],layoutConfiguration:{hideSideMenu:!0,hideTitleBar:!0},skeleton:()=>null}]}},532038:function(e,t,r){r.d(t,{C:function(){return i}});var i={name:"dreamina-ai-agent-message-edit-history",key:"id",index:[{name:"createTime",unique:!1},{name:"updateTime",unique:!1}]}},900875:function(e,t,r){r.d(t,{Z:function(){return i}});var i={id:"beta-cache",version:1,tables:[r(718995).b]}},901650:function(e,t,r){r.d(t,{v:function(){return i}});var i={name:"dreamina-text-art",key:"id",index:[{name:"createTime",unique:!1},{name:"updateTime",unique:!1}]}},163596:function(e,t,r){r.d(t,{$:function(){return n},l:function(){return i}});var i={name:"workflow-dataset",key:"id",index:[{name:"createTime",unique:!1},{name:"updateTime",unique:!1}]},n={id:"aigc-workflow",version:3,tables:[i]}},187024:function(e,t,r){r.d(t,{F:function(){return s},k:function(){return a}});var i,n=r(379311);var a=((i={}).Show="show",i.CopyLink="copylink",i.Close="close",i);class o{getEventParams(){var{action:e,title:t}=this._params;return{action:e,title:t}}constructor(e){this._params=e,this.eventName="pop_action"}}function s(e,t){(0,n.Kl)(e,o,[t])}},689717:function(e,t,r){r.d(t,{N:function(){return a}});var i=r(379311);class n{getEventParams(){var{status:e,duration:t,err_msg:r,audio_link:i,error_code:n,extra:a}=this._params;return{status:e,duration:t,err_msg:r,audio_link:i,error_code:n,extra:a}}constructor(e){this._params=e,this.eventName="audio_resource_load"}}function a(e,t){(0,i.S$)(e,n,[t])}},81185:function(e,t,r){r.d(t,{RL:function(){return u},pF:function(){return o},s9:function(){return s}});var i,n,a=r(379311);var o=((i={}).Show="show",i.Close="close",i.Use="use",i.Invite="invite",i.Vip="vip",i.CopyLink="copy_link",i.CheckActivity="check_activity",i);var s=((n={}).FirstLogin="first_login",n.ActivityExpireNovip="activity_expire_novip",n.ActivityExpireVip="activity_expire_vip",n);class c{getEventParams(){var{action:e,activityName:t,popupType:r}=this._params;return{action:e,activity_name:t,popup_type:r}}constructor(e){this._params=e,this.eventName="model_activity_popup"}}function u(e,t){(0,a.Kl)(e,c,[t])}},95719:function(e,t,r){r.d(t,{j:function(){return u}});var i=r(379311),n=r(273142),a=r(448224),o=r(237990);class s{getEventParams(){return{url:location.href,url_path:location.pathname,title:document.title,duration:this._duration,from:this._from}}constructor(e,t){this._duration=e,this._from=t,this.eventName="page_stay_time"}}class c{updateTime(){this._lastTime=Date.now()}report(e){(0,i.Kl)(this._containerService,s,[Date.now()-this._lastTime,e]),this._lastTime=Date.now()}constructor(e){this._containerService=e,this._lastTime=Date.now()}}function u(e){var t=new c(e),r=(0,n.r)(()=>{t.report("from-timer")},6e4),i=(0,o.n)(window,"beforeunload",()=>{t.report("from-beforeunload")}),s=(0,o.n)(window,"blur",()=>{t.report("from-onblur"),r.dispose()}),u=(0,o.n)(window,"focus",()=>{t.updateTime(),r.dispose(),r=(0,n.r)(()=>{t.report("from-timer")},6e4)});return(0,a.UQ)(()=>{i.dispose(),s.dispose(),u.dispose(),r.dispose()})}},113557:function(e,t,r){r.d(t,{J:function(){return s},l:function(){return l}});var i,n=r(85728),a=r(379311),o=r(467970);var s=((i={}).timeout="timeout",i.routeChange="route-change",i.userInteraction="userInteraction",i.hidden="hidden",i.userClose="user-close",i),c=!1;class u{getEventParams(){return(0,n._)({},this._params)}constructor(e){this._params=e,this.eventName="abnormal_ccfmp"}}class d extends u{getEventParams(){var e=super.getEventParams();return e.status=e.reason||"unknown",e}constructor(...e){super(...e),this.eventName="cctti"}}function l(e,t){if(!c)c=!0,(0,a.S$)(e,u,[t],{immediately:"user-close"===t.reason}),(0,a.S$)(e,d,[t],{immediately:"user-close"===t.reason}),(0,a.$z)(e,d,[t]),(0,o.zq)(e),(0,o.cN)(e)}},58539:function(e,t,r){r.d(t,{f:function(){return u}});var i=r(85728),n=r(70529),a=r(591586),o=r(608358),s=null,c=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","redirectEnd","redirectStart","requestStart","requestEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"];function u(e){try{if(s)return;var t=(0,o.ko)(e,n.m),r=function(e){if(!performance)return null;var t=performance.getEntriesByType("navigation");if(t[0])return{eventName:e,params:(0,i._)({dataSource:"performance.getEntriesByType"},function(e){var t={};for(var r of c){var i=e[r];"number"==typeof i&&void 0!==i?t[r]=i:t[r]=void 0}return t}(t[0]))};if(performance.timing){var r=function(){var e={},t=performance.timeOrigin;if(!(t>17040672e5))return null;for(var r of c){var i=performance.timing[r];"number"==typeof i&&i>17040672e5?e[r]=i-t:e[r]=void 0}return e}();return r?{eventName:e,params:(0,i._)({dataSource:"performance.timing"},r)}:null}return null}("mweb_timing");if(!r)return;s=r,t.reportDevEvent(r.eventName,r.params),"number"==typeof r.params.domainLookupStart&&r.params.domainLookupStart>=0&&t.reportDevPerf("domainLookupStart",r.params.domainLookupStart)}catch(e){a.t.warn("[mweb_timing] report error",e)}}},488148:function(e,t,r){r.d(t,{l:function(){return o}});var i=r(85728),n=r(379311);class a{getEventParams(){return(0,i._)({},this._params)}constructor(e){this._params=e,this.eventName="prefetch_coverage"}}function o(e,t){(0,n.S$)(e,a,[t])}},467970:function(e,t,r){r.d(t,{Uo:function(){return c},cN:function(){return l},zq:function(){return d}});var i=r(85728),n=r(608358),a=r(591586),o=r(70529),s=["https://lf3-lv-buz.vlabstatic.com","https://lf3-beecdn.bytetos.com"];function c(e){try{var t=(0,n.ko)(e,o.m),r=performance.getEntriesByType("resource").reduce((e,t)=>{var r=function(e){var t=e.match(/^(?:https?:\/\/[^\/]+)/);if(t)return t[0]}(t.name);return r&&s.includes(r)&&(e[r]=e[r]?[...e[r],t]:[t]),e},{});Object.entries(r).map(e=>{var[t,r]=e,i=Math.max(...r.map(e=>e.connectEnd-e.connectStart)),n=Math.min(...r.map(e=>e.requestStart));return{domain:t,maxConnectDuration:i,requestStartTime:n}}).forEach(e=>{t.reportDevEvent("domain_connect_summary",(0,i._)({},e))})}catch(e){a.t.warn("[domain_connect_summary] report error",e)}}function u(e){var{name:t,startTime:r,endTime:n}=e;return{name:t,entryType:"resource",startTime:r,duration:n-r,initiatorType:"script",nextHopProtocol:"",workerStart:0,redirectStart:0,redirectEnd:0,fetchStart:r,domainLookupStart:r,domainLookupEnd:r,connectStart:r,connectEnd:r,secureConnectionStart:r,requestStart:r,responseStart:r,responseStatus:void 0,responseEnd:n,transferSize:0,encodedBodySize:0,decodedBodySize:0,serverTiming:[],toJSON(){return(0,i._)({},this)}}}function d(e){if(!!e){var t=performance.getEntriesByName("AGW_HOME_FEED_INJECT_START")[0],r=performance.getEntriesByName("AGW_HOME_FEED_INJECT_END")[0];if(t&&r){var i=u({name:"AGW_HOME_FEED_INJECT",startTime:t.startTime,endTime:r.startTime});e.invokeFunction(e=>{e.get(o.m).reportDevResource(i)})}}}function l(e){if(!!e){var t=performance.getEntriesByName("HOME_FEED_DECRYPT");if(t&&t[0]){var r=u({name:"HOME_FEED_DECRYPT",startTime:t[0].startTime,endTime:t[0].startTime+t[0].duration});e.invokeFunction(e=>{e.get(o.m).reportDevResource(r)})}}}},42891:function(e,t,r){r.d(t,{J:function(){return i}});class i{calculateLyricProgress(e){if(!(null===(t=this._lyricsInfo.lyrics)||void 0===t?void 0:t.length))return null;var t,r=this._binarySearch(this._lyricsInfo.lyrics,e),i=this._binarySearch(this._lyricsInfo.lyrics[r].words,e),n=Math.min(Math.max((e-this._lyricsInfo.lyrics[r].words[i].begin)/(this._lyricsInfo.lyrics[r].words[i].end-this._lyricsInfo.lyrics[r].words[i].begin),0),1);return{lineIndex:r,wordIndex:i,wordProgress:n}}_binarySearch(e,t){for(var r=0,i=e.length;r<i-1;){var n=Math.floor((r+i)/2),a=e[n];if(t>=a.begin&&t<=a.end)return n;t<a.begin?i=n:r=n}return r}constructor(e){for(var t of(this._lyricsInfo={lyrics:e.lyrics.sort((e,t)=>e.begin-t.begin)},this._lyricsInfo.lyrics))t.words=t.words.sort((e,t)=>e.begin-t.begin)}}},800613:function(e,t,r){r.d(t,{s:function(){return i}});var i=(0,r(971245).yh)("carousel-service")},8026:function(e,t,r){r.d(t,{B:function(){return R}});var i=r(876826),n=r(85728),a=r(929753),o=r(789786),s=r(826717),c=r(588735),u=r(819277),d=r(978420),l=r(77922),p=r(434712),_=r(85952),v=r(474956),h=r(260963),g=r(875488),m=r(417699),f=r(630221),y=r(520593),C=r(214090),w=r(140972),I=r(970419),S=r(568409),b=r(76931),T=r(247170);class R{get activeCarousel(){return this.carouselList?this.carouselList[this.currentIndex]:null}get storyFeedList(){return this.carouselList}get _fetchShowcaseVideoByCategoryWithCache(){var e=this;return this._requestCacheService.wrapperFetchFuncWithCache({fetchFunc:function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return e._inspirationFeedDataService.fetchRecommendShowcaseVideoByCategory(...r)},calcRequestCacheKey:function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=(0,f.K)((0,a._)((0,n._)({},r),{categoryId:11780}));return"dreamina-fetchShowcaseVideoByCategory_".concat(e._envService.region,"_").concat(e._envService.appEnv,"_").concat(o)},shouldDisableCache:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return!0},cacheExpirationDuration:432e5})}getCarouselItemCategoryName(e){var t,r;if(!(null==e?void 0:null===(t=e.categoryIdList)||void 0===t?void 0:t.length)||!(null===(r=this.categories)||void 0===r?void 0:r.length))return[];return this.categories.reduce((t,r)=>{var i;return(null===(i=e.categoryIdList)||void 0===i?void 0:i.includes(r.id))&&t.push(r.name),t},[])}retry(){this._setIsLoading(!0),this._fetchCarousel()}getCategoryByCarouselData(e){return this.categories.find(t=>e.categoryIdList.includes(t.id))}fetchCarouselListNext(){if(!this.isLoading&&!!this.hasMore)this._fetchCarouselListByCategory(this.categories)}_bootstrap(){var e=this;return(0,i._)(function*(){e._setIsLoading(!0),yield e._fetchCarousel(),e._setInitialized(!0),e._setIsLoading(!1)})()}_fetchCarousel(){var e=this;return(0,i._)(function*(){yield e._fetchCarouselListByCategory([])})()}_fetchCarouselListByCategory(e){var t=this;return(0,i._)(function*(){t._setIsLoading(!0);var e=yield(0,g.FI)(),r={limit:t.pageSize,offset:t._offset,imageInfo:e};r=(0,a._)((0,n._)({},r),{categoryId:11780,filter:{workTypeList:[s.X.ShortVideo]},feedRefer:0!==t._offset||t.carouselList.length?s.p.FeedLoadmore:s.p.FeedEnterauto});var i=[(yield t._fetchShowcaseVideoByCategoryWithCache(r))],o=[],c=i.reduce((e,r)=>{if(r.ok){var i,n=null!==(i=r.value.value.list)&&void 0!==i?i:[];e.push(...n),o.push(r.value.hasMore),t._setOffset(r.value.offset),t._appendToLikeDataMap(n)}return e},[]);if(c.forEach(e=>e.impressionId&&(0,b.WK)(e.publishedItemId,e.impressionId)),!c.length){t._setLoadFailure(!0),t._setIsLoading(!1),(0,w.U)(t._containerService,{key:"fetchCarouselList"});return}t._setHasMore(o.some(Boolean)),t._setCarouselList(c),t._setIsLoading(!1),t._setInitialized(!0)})()}_setCategories(e){this.categories=e}_setCarouselList(e){var t=new Set(this.carouselList.map(e=>e.key)),r=e.filter(e=>!t.has(e.key));this.carouselList=[...this.carouselList,...r.map(this._aiVideoModelToResource)]}_setLoadFailure(e){this.loadFailure=e}_setInitialized(e){this.isInitialized=e}_setIsLoading(e){this.isLoading=e}_setHasMore(e){this.hasMore=e}_setOffset(e){this._offset=e}_appendToLikeDataMap(e){var t=e.reduce((e,t)=>(0,a._)((0,n._)({},e),{[t.key]:t.statistic}),{});this._videoLikeService.setLikeDataMap(t)}constructor(e,t,r,n,a,o,s,d){var l,p,_=this;this._inspirationFeedDataService=e,this._resourceService=t,this._envService=r,this._videoLikeService=n,this._requestCacheService=a,this._containerService=o,this._serverInjectedDataService=s,this._productionService=d,this.pageSize=40,this.carouselList=[],this.categories=[],this.currentIndex=0,this.loadFailure=!1,this.isInitialized=!1,this.isLoading=!1,this.hasMore=!0,this._offset=0,this._options={disableCache:!1},this.setCurrentIndex=e=>{if(e>this.carouselList.length-1){this.currentIndex=0;return}if(e<0){this.currentIndex=this.carouselList.length-1;return}this.currentIndex=e},this.getResourceInstance=e=>this._resourceService.get(e,v._g.DreaminaShowCaseVideo),this.markFavorite=(l=(0,i._)(function*(e,t){if(!!(null===(r=_.carouselList)||void 0===r?void 0:r.length)){var r,i=_.carouselList,n=_.carouselList.findIndex(t=>t.key===e);if(n>-1){var a=i[n];(0,h.z)(()=>{a.statistic.hasFavorited=t,a.statistic.favoriteNum+=t?1:-1}),yield _._inspirationFeedDataService.markFavorite({itemId:a.publishedItemId,op:t?c.Ix.Like:c.Ix.UnLike})}else(0,S._)(e)&&(yield _._inspirationFeedDataService.markFavorite({itemId:(0,S.S)(e),op:t?c.Ix.Like:c.Ix.UnLike}))}}),function(e,t){return l.apply(this,arguments)}),this.markDownloadable=(p=(0,i._)(function*(e,t){if(!!(0,S._)(e))yield _._productionService.repository.updateProductionItem((0,T.fC)(),{itemId:(0,S.S)(e),downloadable:t})}),function(e,t){return p.apply(this,arguments)}),this._aiVideoModelToResource=e=>{var t=(0,u.l)(v._g.DreaminaShowCaseVideo,e);return this._resourceService.add(e.key,t.resource),t.resource},(0,h.rC)(this),this._bootstrap()}}(0,o.gn)([h.LO,(0,o.w6)("design:type",Array)],R.prototype,"carouselList",void 0),(0,o.gn)([h.LO,(0,o.w6)("design:type",Array)],R.prototype,"categories",void 0),(0,o.gn)([h.LO],R.prototype,"currentIndex",void 0),(0,o.gn)([h.LO],R.prototype,"loadFailure",void 0),(0,o.gn)([h.LO],R.prototype,"isInitialized",void 0),(0,o.gn)([h.LO],R.prototype,"isLoading",void 0),(0,o.gn)([h.LO],R.prototype,"hasMore",void 0),(0,o.gn)([h.Fl,(0,o.w6)("design:type",void 0),(0,o.w6)("design:paramtypes",[])],R.prototype,"activeCarousel",null),(0,o.gn)([h.aD],R.prototype,"setCurrentIndex",void 0),(0,o.gn)([h.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Array]),(0,o.w6)("design:returntype",void 0)],R.prototype,"_setCategories",null),(0,o.gn)([h.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Array]),(0,o.w6)("design:returntype",void 0)],R.prototype,"_setCarouselList",null),(0,o.gn)([h.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Boolean]),(0,o.w6)("design:returntype",void 0)],R.prototype,"_setLoadFailure",null),(0,o.gn)([h.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Boolean]),(0,o.w6)("design:returntype",void 0)],R.prototype,"_setInitialized",null),(0,o.gn)([h.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Boolean]),(0,o.w6)("design:returntype",void 0)],R.prototype,"_setIsLoading",null),(0,o.gn)([h.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Boolean]),(0,o.w6)("design:returntype",void 0)],R.prototype,"_setHasMore",null),R=(0,o.gn)([(0,o.fM)(0,d.t),(0,o.fM)(1,l.c),(0,o.fM)(2,m.e),(0,o.fM)(3,y.G),(0,o.fM)(4,C.p),(0,o.fM)(5,p.t),(0,o.fM)(6,I.G),(0,o.fM)(7,_.p),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===d.t?Object:d.t,void 0===l.c?Object:l.c,void 0===m.e?Object:m.e,void 0===y.G?Object:y.G,void 0===C.p?Object:C.p,void 0===p.t?Object:p.t,void 0===I.G?Object:I.G,void 0===_.p?Object:_.p])],R)},359579:function(e,t,r){r.d(t,{i:function(){return o}});var i=r(843698),n=r(874800),a=r(266828);class o extends n.JT{get onValuesChange(){return this._onValuesChange.event}get values(){return this._model.contents}get onInit(){return this._onInit.event}getValue(e){return this._model.getValue(e)}setValue(e,t){this._model.setValue(e,t),this._onValuesChange.fire(this.values)}init(){this._onInit.fire()}constructor(e={}){super(),this._serviceBrand=void 0,this._onValuesChange=this._register(new i.Q),this._onInit=this._register(new i.Q),this._model=new a.V(e)}}},690133:function(e,t,r){r.d(t,{N:()=>_});var i=r("85728"),n=r("789786"),a=r("56935"),o=r("969015"),s=r("434712"),c=r("677761"),u=r("474956"),d={[u._g.Sticker]:"cn-sales-sticker",[u._g.Font]:"fonts",[u._g.TextTemplate]:"cn-sales-text-template",[u._g.Shape]:"svg",[u._g.ImageFrame]:"sales-frame",[u._g.ImageFilter]:"sales-filter",[u._g.ImageEffect]:"sales-image-effect",[u._g.Photo]:"yk-image",[u._g.AiBackground]:"ai_background",[u._g.EffectModel]:"effect_model",[u._g.PhotoDreamina]:"dreamina",[u._g.DreaminaLipSyncAudio]:"dreamina_tone"},l={[u._g.Sticker]:"sales-sticker",[u._g.Font]:"fonts",[u._g.TextTemplate]:"sales-text-template",[u._g.Shape]:"svg",[u._g.ImageFrame]:"sales-frame",[u._g.ImageFilter]:"sales-filter",[u._g.ImageEffect]:"sales-image-effect",[u._g.Photo]:"yk-image",[u._g.AiBackground]:"ai_background",[u._g.EffectModel]:"effect_model",[u._g.TextGlow]:"sales-text-glow",[u._g.ImageFigureFaceEffect]:"sales-beauty-face",[u._g.ImageFigureMakeupEffect]:"sales-beauty-makeup",[u._g.ImageFigureBodyEffect]:"sales-beauty-body",[u._g.ImageFigureReshapeEffect]:"sales-beauty-reshape",[u._g.PhotoDreamina]:"dreamina",[u._g.DreaminaLipSyncAudio]:"dreamina_tone"},p=r("923401");class _ extends o.aU{set useInCN(e){for(var t of(this._useInCN=e,Object.keys(this.resourcePanel)))delete this.resourcePanel[t];Object.assign(this.resourcePanel,e?d:l)}get useInCN(){return this._useInCN}get editorCategory(){return(0,a.ss)("not implemented")}get disableRequestCache(){return!1}get sideMenuShowBrandTypes(){return(0,a.ss)("not implemented")}get isSupportMultiWorkSpace(){return(0,a.ss)("not implemented")}get disableSidebarResourcePreload(){return(0,a.ss)("not implemented")}get disableUserBrand(){return(0,a.ss)("not implemented")}constructor(e,t,r){super(),this._options=e,this._teaAdapterService=t,this._containerService=r,this._useInCN=e.useInCN,this.abTestManager=this._containerService.createInstance(p.tQ,this._teaAdapterService,this._onDidChangeConfiguration),this.resourcePanel=e.useInCN?(0,i._)({},d):(0,i._)({},l)}}_=(0,n.gn)([(0,n.fM)(1,c.w),(0,n.fM)(2,s.t),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof MWebConfigurationServiceProps?Object:MWebConfigurationServiceProps,void 0===c.w?Object:c.w,void 0===s.t?Object:s.t])],_)},117139:function(e,t,r){r.d(t,{r:()=>S});var i=r("789786"),n=r("719800"),a=r("876826"),o=r("85728"),s=r("929753"),c=r("917730"),u=r("185294"),d=r("406843"),l=r("836413"),p=r("820266"),_=r("423719"),v=r("793723"),h=r("490165"),g=r("441955"),m=r("530989"),f=r("442452"),y=r("100470"),C=r("265587");function w(e){return e?e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase()):""}class I{_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:f.Y.DEFAULT,path:e})}_getWebId(){return this._accountService.hasLogin?this._accountService.userProfile.webId:this._accountService.uniqueId}setActivityShown(e){var t=e.map(e=>e.actKey),r=this._getWebId();for(var i of t)localStorage.setItem("".concat(i,"_").concat(r),"true")}hasNewActivity(){var e=this;return(0,a._)(function*(){var t=yield e.getWeeklyChallengeList(),r=e._getWebId();if(t.ok&&t.value){var{actInfoList:i}=t.value;for(var[n,a]of i.map(e=>e.actKey).entries())if(!localStorage.getItem("".concat(a,"_").concat(r))&&i[n].actStatus===c.Dh.InProgress)return!0}return!1})()}getWeeklyChallengeList(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,a._)(function*(){try{var r=(0,p.b)((yield t._networkClient.post(t._getApi(d.v.getWeeklyChallengeList.url),{},{params:{needCache:!0,needRefresh:e}})),w);return(0,l.oW)(r)}catch(e){var{ret:i,errmsg:n}=e||{},a=i?Number(i):y.b.ErrCommon;return(0,l.wf)(a,null!=n?n:"unknown error")}})()}getWeeklyChallengeByKey(e){var t=this;return(0,a._)(function*(){try{var r,i=yield t.getWeeklyChallengeList();if(!i.ok)return(0,l.oW)(void 0);var n=null===(r=i.value.actInfoList)||void 0===r?void 0:r.find(t=>t.actKey===e);return(0,l.oW)(n)}catch(e){var{ret:a,errmsg:o}=e||{},s=a?Number(a):y.b.ErrCommon;return(0,l.wf)(s,null!=o?o:"unknown error")}})()}getWeeklyChallengeDetail(e){var t=this;return(0,a._)(function*(){try{var r=yield t._networkClient.post(t._getApi(d.v.getWeeklyChallengeDetail.url),(0,p.X)(e));if(r.act_award_list)for(var i=0;i<r.act_award_list.length;i++)r.act_award_list[i].item.video&&(r.act_award_list[i].item=(0,C.Q)(r.act_award_list[i].item));var n=(0,p.b)(r,w),a=(0,g.Wy)(n);return(0,l.oW)(a)}catch(e){var{ret:o,errmsg:s}=e||{},c=o?Number(o):y.b.ErrCommon;return(0,l.wf)(c,null!=s?s:"unknown error")}})()}getWeeklyChallengeWorkList(e){var t=this;return(0,a._)(function*(){try{e.packItemOpt=(0,s._)((0,o._)({},e.packItemOpt),{needDataIntegrity:!0});var r=yield t._networkClient.post(t._getApi(d.v.getWeeklyChallengeWorkList.url),(0,p.X)(e)),i=r.__cacheSyncToken,n=r.__logId;if(i){var a=yield m.Li.decryptIV(i,n);yield(0,_.sh)(m.Li.decrypt.bind(m.Li),r.item_list,a)}var c=yield m.sn.getSignOptions();(0,v.$U)(m.sn.sign.bind(m.sn),r.item_list,c),(0,g.ST)(r);var u=(0,p.b)(r,w),h=(0,g.OB)(u);return(0,l.oW)(h)}catch(e){var{ret:f,errmsg:C}=e||{},I=f?Number(f):y.b.ErrCommon;return(0,l.wf)(I,null!=C?C:"unknown error")}})()}constructor(e,t){this._httpApiSettingService=e,this._accountService=t,this._networkClient=(0,u.G)()}}I=(0,i.gn)([(0,i.fM)(0,f.x),(0,i.fM)(1,h.D),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===f.x?Object:f.x,void 0===h.D?Object:h.D])],I);class S{setActivityShown(e){return this._activityRepository.setActivityShown(e)}hasNewActivity(){return this._activityRepository.hasNewActivity()}getWeeklyChallengeList(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._activityRepository.getWeeklyChallengeList(e)}getWeeklyChallengeByKey(e){return this._activityRepository.getWeeklyChallengeByKey(e)}getWeeklyChallengeDetail(e){return this._activityRepository.getWeeklyChallengeDetail(e)}getWeeklyChallengeWorkList(e){return this._activityRepository.getWeeklyChallengeWorkList(e)}constructor(e){this._instantiationService=e,this._activityRepository=this._instantiationService.createInstance(I)}}S=(0,i.gn)([(0,i.fM)(0,n.T),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===n.T?Object:n.T])],S)},441955:function(e,t,r){r.d(t,{OB:function(){return d},ST:function(){return c},Wy:function(){return u}});var i=r(85728),n=r(929753),a=r(265587),o=r(433965),s=r(247465);function c(e){if(e.item_list)for(var t=0;t<e.item_list.length;t++)e.item_list[t].video&&(e.item_list[t]=(0,a.Q)(e.item_list[t],e.item_list[t].video.origin_video))}function u(e){var t,r=(null!==(t=e.actAwardList)&&void 0!==t?t:[]).map(e=>(0,o.Dc)(e.item)?(0,n._)((0,i._)({},e),{item:(0,s.q)(e.item)}):e);return(0,n._)((0,i._)({},e),{actAwardList:r})}function d(e){var t,r=(null!==(t=e.itemList)&&void 0!==t?t:[]).map(e=>(0,o.Dc)(e)?(0,s.q)(e):e);return(0,n._)((0,i._)({},e),{itemList:r})}},368194:function(e,t,r){r.d(t,{_:function(){return c}});var i=r(789786),n=r(944125),a=r(759368),o=r(727644),s=r(434712);class c{getHistoryList(e){return this._getContentGenerationHistoryRepo.getHistoryList(e)}getLocatedHistoryList(e){return this._getLocatedHistoryHistoryRepo.getLocatedHistoryList(e)}getAssetList(e){return this._getAssetListRepo.getAssetList(e)}getLocatedCollectionHistoryList(e){return this._getLocatedHistoryHistoryRepo.getLocatedCollectionHistoryList(e)}getCollectionHistoryList(e){return this._getContentGenerationHistoryRepo.getCollectionHistoryList(e)}getCollectionHistoryListDetail(e){return this._getContentGenerationHistoryRepo.getCollectionHistoryListDetail(e)}getGenerateContentHistory(e,t,r){return this._getContentGenerationHistoryRepo.getGenerateContentHistory(e,t,r)}constructor(e){this._containerService=e,this._getContentGenerationHistoryRepo=this._containerService.createInstance(n.Y),this._getLocatedHistoryHistoryRepo=this._containerService.createInstance(a.P),this._getAssetListRepo=this._containerService.createInstance(o.U)}}c=(0,i.gn)([(0,i.fM)(0,s.t),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===s.t?Object:s.t])],c)},849520:function(e,t,r){r.d(t,{m:function(){return n}});var i=r(168179);function n(e){if(!!e){var t=new i.DAReqImageInfo;return t.height=e.height,t.width=e.width,t.format=e.format,t}}},708625:function(e,t,r){r.d(t,{f:()=>x});var i=r("876826"),n=r("85728"),a=r("929753"),o=r("789786"),s=r("216342"),c=r("836413"),u=r("875733"),d=r("280166"),l=r("535082"),p=r("417281"),_=r("716467"),v=r("965058"),h=r("168179"),g=r("650078"),m=r("595743"),f=r("464369"),y=r("501385"),C=r("476928"),w=r("849520"),I=r("761436"),S=r("216475"),b=r("375516");class T{convert(){var{abilityList:e}=this._params;return e.map(e=>{var t=new h.DAImageBlendAbilityItem;switch(!0){case(0,p.G7)(e):return t.name=_.Di[e.name],t.imageUriList=e.imageUriList,t.imageList=e.imageUriList.map(e=>(0,g.w)({imageUri:e})),t.faceRecognizeList=e.faceRecognizeList.map(e=>e.map(m.X)),t;case(0,p.Ti)(e):return t.name=_.Di[e.name],t.imageUriList=e.imageUriList,t.imageList=e.imageUriList.map(e=>(0,g.w)({imageUri:e})),t.extra=e.extra,t.strength=e.strength,t;case(0,p.U0)(e):return t.name=_.Di[e.name],t.imageUriList=e.imageUriList,t.imageList=e.imageUriList.map(e=>(0,g.w)({imageUri:e})),t.extra=e.extra,t.controlNetList=e.controlNetList.map(f._),t;case(0,p.OC)(e):return t.name=_.Di[e.name],t.imageUriList=e.imageUriList,t.imageList=e.imageUriList.map(e=>(0,g.w)({imageUri:e})),t.strength=e.strength,t;case(0,p.qB)(e):return t.name=_.Di[e.name],t.imageUriList=e.imageUriList,t.imageList=e.imageUriList.map(e=>(0,g.w)({imageUri:e})),t.ipKeepList=e.ipKeepList.map(y.V),t;case(0,p.D3)(e):return t.name=_.Di[e.name],t.imageUriList=e.imageUriList,t.imageWeightList=e.imageWeightList,t.styleReference=(0,C._)(e.styleReference),t;case(0,p.hD)(e):return t.name=_.Di[e.name],t.imageUriList=e.imageUriList,t.imageList=e.imageUriList.map(e=>(0,g.w)({imageUri:e})),t.strength=e.strength,t;case(0,p.iB)(e):return t.name=_.Di[e.name],t.commonAsset=(0,b.a)(e.commonAsset),t}}).filter(Boolean)}constructor(e){this._params=e}}class R{convert(){var e,t=new h.DAImageGenerateAbilities,r=new h.DAGenCoreParam,i=new h.DAImageBlendAbility,n=new h.DAPostEditParam;return r.prompt=this._params.prompt,r.model=this._params.model,r.imageRatio=this._params.imageRatio,r.largeImageInfo=(0,w.m)(this._params.largeImageInfo),r.sampleStrength=this._params.sampleStrength,i.coreParam=r,i.imageSize=this._params.imageSize,i.historyOption=(0,I.J)(this._params.historyOption),i.promptPlaceholderInfoList=null===(e=this._params.promptPlaceholderInfoList)||void 0===e?void 0:e.map(S.D),i.abilityList=new T(this._params).convert(),i.posteditParam=n,t.blend=i,t}constructor(e){this._params=e}}class k extends v.${getComponent(e){var t,r=new h.DAImageBaseComponent;return r.generateType=h.DAImageGenerateType.blend,r.aigcMode=_.sc[null!==(t=e.mode)&&void 0!==t?t:h.DAAIGCMode.workbench],r.abilities=new R(e).convert(),r}}var E=r("541177");class P{convert(){var e=new h.DAImageGenerateAbilities,t=new h.DAGenCoreParam,r=new h.DAImageSuperResolutionAbility,i=new h.DAPostEditParam;return t.prompt=this._params.prompt,i.generateType=h.DAAIGCGenerateType.superResolution,i.itemId=this._params.itemId,i.originHistoryId=this._params.originHistoryId,i.historyOption=(0,I.J)(this._params.historyOption),i.canvasDraftImage=(0,E.f)(this._params.canvasDraftImage),r.coreParam=t,r.posteditParam=i,e.superResolution=r,e}constructor(e){this._params=e}}class A extends v.${getComponent(e){var t,r=new h.DAImageBaseComponent;return r.generateType=h.DAImageGenerateType.superResolution,r.aigcMode=_.sc[null!==(t=e.mode)&&void 0!==t?t:h.DAAIGCMode.workbench],r.abilities=new P(e).convert(),r}}var L=r("113219"),D=r("143026"),O=r("753699");class M{convert(){var e=new h.DAImageGenerateAbilities,t=new h.DAGenCoreParam,r=new h.DAImagePaintingAbility,i=new h.DAPostEditParam;if(t.prompt=this._params.prompt,t.strength=this._params.strength,this._params.largeImageInfo){var n=new h.DAReqImageInfo;n.width=this._params.largeImageInfo.width,n.height=this._params.largeImageInfo.height,t.largeImageInfo=n}if(i.generateType=_.nA[this._params.generateType],i.itemId=this._params.itemId,i.originHistoryId=this._params.originHistoryId,i.historyOption=(0,I.J)(this._params.historyOption),i.canvasDraftImage=(0,E.f)(this._params.canvasDraftImage),r.coreParam=t,r.posteditParam=i,r.maskUri=this._params.maskUri,r.originUri=this._params.originUri,r.upScale=(0,D.n)(this._params.upScale),this._params.canvasData){var a=new O.DACanvasData;a.draftId=this._params.canvasData.draftId,a.workspaceId=this._params.canvasData.workspaceId,r.canvasData=a}return e.painting=r,e}constructor(e){this._params=e}}class F extends v.${getComponent(e){var t,r=new h.DAImageBaseComponent;return r.generateType=h.DAImageGenerateType.painting,r.aigcMode=_.sc[null!==(t=e.mode)&&void 0!==t?t:h.DAAIGCMode.workbench],r.abilities=new M(e).convert(),r}}var N=r("423995");class x{generateContent(e,t,r,o){var s=this;return(0,i._)(function*(){var i=new l.J(t).convert(),u=yield s._repository.generate(e,i,r),[d,p]=u.response.pair(),_=(0,a._)((0,n._)({},u),{response:d||(0,c.oW)(p.aigcData)});return s._getFormatNetworkResponseResult(_,(e,t)=>(0,N.J)(e,t,o))})()}generateBlendContent(e,t,r,o){var s=this;return(0,i._)(function*(){var i=new k(t).convert(),u=yield s._repository.generate(e,i,r),[d,l]=u.response.pair(),p=(0,a._)((0,n._)({},u),{response:d||(0,c.oW)(l.aigcData)});return s._getFormatNetworkResponseResult(p,(e,t)=>(0,N.J)(e,t,o))})()}generateSuperResolutionContent(e,t,r,o){var s=this;return(0,i._)(function*(){var i=new A(t).convert(),u=yield s._repository.generate(e,i,r),[d,l]=u.response.pair(),p=(0,a._)((0,n._)({},u),{response:d||(0,c.oW)(l.aigcData)});return s._getFormatNetworkResponseResult(p,(e,t)=>(0,N.J)(e,t,o))})()}generateSuperDefinitionContent(e,t,r,o){var s=this;return(0,i._)(function*(){var i=new L.H(t).convert(),u=yield s._repository.generate(e,i,r),[d,l]=u.response.pair(),p=(0,a._)((0,n._)({},u),{response:d||(0,c.oW)(l.aigcData)});return s._getFormatNetworkResponseResult(p,(e,t)=>(0,N.J)(e,t,o))})()}generatePaintingContent(e,t,r,o){var s=this;return(0,i._)(function*(){var i=new F(t).convert(),u=yield s._repository.generate(e,i,r),[d,l]=u.response.pair(),p=(0,a._)((0,n._)({},u),{response:d||(0,c.oW)(l.aigcData)});return s._getFormatNetworkResponseResult(p,(e,t)=>(0,N.J)(e,t,o))})()}getHistoryById(e,t,r,o){var s=this;return(0,i._)(function*(){var i=yield s._repository.getHistoryByIds(e,{historyIds:[t],imageInfo:null==o?void 0:o.imageInfo,originImageInfo:null==o?void 0:o.originImageInfo}),[u,d]=i.response.pair(),l=(0,a._)((0,n._)({},i),{response:u||(0,c.oW)(d[t])});return s._getFormatNetworkResponseResult(l,(e,t)=>(0,N.J)(e,t,r))})()}getHistoryBySubmitId(e,t,r,o){var s=this;return(0,i._)(function*(){var i=yield s._repository.getHistoryByIds(e,{submitIds:[t],imageInfo:null==o?void 0:o.imageInfo,originImageInfo:null==o?void 0:o.originImageInfo}),[u,d]=i.response.pair(),l=(0,a._)((0,n._)({},i),{response:u||(0,c.oW)(d[t])});return s._getFormatNetworkResponseResult(l,(e,t)=>(0,N.J)(e,t,r))})()}_getFormatNetworkResponseResult(e,t){var{response:r,costTime:i,logId:n}=e;if(r.ok){var{value:a}=r,o=t.call(this,a,i);return{response:(0,c.oW)(o),costTime:i,logId:n}}return{response:r,costTime:i,logId:n}}constructor(e){this._environmentService=e,this._repository=(0,s.bu)("ImageGenerateRepository",new u.i(this._environmentService))}}x=(0,o.gn)([(0,o.fM)(0,d.Y),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===d.Y?Object:d.Y])],x)},87384:function(e,t,r){let i,n;r.d(t,{mp:function(){return _}});var a,o=r(998498),s=r.n(o),c="device_id",u="e5529c21fa80d917734f1ac27ae06e0e",d=()=>"".concat(Date.now().valueOf()).concat(Math.floor(1e5*Math.random()));var l=(a=sessionStorage.getItem(c)?sessionStorage.getItem(c):d(),sessionStorage.setItem(c,null!=a?a:""),a);var p={appId:513695,fpId:73,appKey:u,deviceId:l,accessKey:(i=u,n=l,s()("".concat(73).concat(i).concat(n).concat("f8a69f1719916z")).toLowerCase()),serviceId:0x200012d,debug:!1,enableTransformTextPayload:!0,url:"ws://frontier.jianying.com"},_=e=>p},559115:function(e,t,r){r.d(t,{e:function(){return _}});var i=r(789786),n=r(843698),a=r(562092),o=r(874800),s=r(836413),c=r(331480),u=r(697641),d=r(740242),l=r(434712),p=r(820266);class _ extends o.JT{get state(){return this._state}connect(e){var{config:t}=e;return this.close(),this._frontierConfig=t,this._state=c.D8.CONNECTING,this._websocketInstance=new u.FWS({aID:String(t.appId),accessKey:t.accessKey,fpID:String(t.fpId),url:t.url,deviceID:t.deviceId,debug:t.debug,enableTransformTextPayload:t.enableTransformTextPayload}),this._websocketInstance.addEventListener("close",this._handleClose.bind(this)),this._websocketInstance.addEventListener("message",this._handleMessage.bind(this)),this._websocketInstance.addEventListener("error",this._handleError.bind(this)),this._websocketInstance.addEventListener("open",this._handleOpen.bind(this)),(0,s.ly)()}close(){var e;null===(e=this._websocketInstance)||void 0===e||e.close()}sendMessage(e){var t,r,i=JSON.stringify(e);null===(r=this._websocketInstance)||void 0===r||r.send(i,{method:c.Te.GeneralMessage,service:null===(t=this._frontierConfig)||void 0===t?void 0:t.serviceId})}registerEventHandler(e,t){var r=this._handlerMap.get(e);return this._handlerMap.set(e,[...null!=r?r:[],t]),{dispose:()=>{this.unregisterEventHandler(e,t)}}}unregisterEventHandler(e,t){var r=this._handlerMap.get(e);if(!!r){var i=r.filter(e=>e!==t);this._handlerMap.set(e,i)}}_handleMessage(e){var{message:t}=e;if(!t||!t.method||!t.textPayload)return;var{method:r,textPayload:i}=t,n=this._handlerMap.get(r);if(!!n){var o=(0,p.b)((0,a.D)(i));n.forEach(e=>e(o))}}_handleClose(e){this._state=c.D8.DISCONNECTED,this._onClose.fire(e)}_handleError(e){(0,d.k$)(this._containerService,{msg:JSON.stringify(e)}),this._onError.fire(e)}_handleOpen(e){this._state=c.D8.OPEN,this._onOpen.fire(e)}constructor(e){super(),this._containerService=e,this._state=c.D8.DISCONNECTED,this._handlerMap=new Map,this._onClose=this._store.add(new n.Q),this.onClose=this._onClose.event,this._onError=this._store.add(new n.Q),this.onError=this._onError.event,this._onOpen=this._store.add(new n.Q),this.onOpen=this._onOpen.event}}_=(0,i.gn)([(0,i.fM)(0,l.t),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===l.t?Object:l.t])],_)},619121:function(e,t,r){r.d(t,{q:()=>l,K:()=>d});var i=r("251699"),n=r("125436"),a=r("876826"),o=r("45347"),s=r("955259");class c extends o.l{_handleHoverCardItem(e,t){var{data:r}=e,{ctx:i}=t,n=new s.y(i,r);t.postPrefetchTask(n)}_handleShowWorkDetail(e,t){var{data:{prevDetailItem:r,nextDetailItem:i}}=e,{ctx:n}=t;[r,i].filter(e=>void 0!==e).map(e=>new s.y(n,e)).forEach(e=>t.postPrefetchTask(e))}_handle(e,t){var r=this;return(0,a._)(function*(){var i;switch(e.name){case"hover-card-item":r._handleHoverCardItem(e,t);break;case"show-work-detail":r._handleShowWorkDetail(e,t)}null===(i=r.nextHandler)||void 0===i||i.handle(e)})()}}var u=r("605579"),d=[c,i.Y,u.h,n.I],l=[n.I]},52773:function(e,t,r){r.d(t,{Y:function(){return n}});var i=r(874800);class n extends i.JT{constructor(e,t){super(),this._ctx=e,this._item=t}}},806437:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(876826),n=r(843698),a=r(52773);class o extends a.Y{run(){var e=this;return(0,i._)(function*(){var{fetcher:t}=e._item;yield t(),e._onDoneEmitter.fire()})()}get onDone(){return this._onDoneEmitter.event}get key(){var{categoryId:e,offset:t}=this._item;return"".concat(e,"-").concat(t)}dispose(){this._abortCallback&&this._abortCallback(),super.dispose()}constructor(...e){super(...e),this._abortCallback=null,this._onDoneEmitter=new n.Q,this.priority="low"}}},476038:function(e,t,r){r.d(t,{a:function(){return d}});var i=r(876826),n=r(2910),a=r(843698),o=r(630937),s=r(798279),c=r(52773),u=r(248928);class d extends c.Y{_createPreloadLink(e,t){var{key:r,coverHeight:i,coverWidth:a,coverUrlMap:s}=t,c=(0,u.$N)({width:e,height:i/a*e,resolutionUrlMap:s,autoPickNext:!0});if(!!c){var d=(0,o.x)("link");return d.crossOrigin="anonymous",d.fetchPriority="low",d.rel="prefetch",d.as="image",d.href=(0,n.C)(c,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),d}}run(){var e=this;return(0,i._)(function*(){var{shortVideoColumnCount:t=3,shortVideoContainerWidth:r,feedContainerWidth:i=0}=e._ctx,n=(null!=r?r:i)/t;if(!!n){var a=e._prefetchInfo.map(t=>e._createPreloadLink(n,t)),o=document.createDocumentFragment();a.forEach(t=>{t&&(e._ctx.prefetchedResourceNames.push(t.href),o.appendChild(t))}),e._abortCallback=()=>{a.forEach(e=>{e&&e.remove()}),e._onDoneEmitter.fire()},document.body.appendChild(o);var s=Promise.all(a.map(t=>new Promise((r,i)=>{if(!t){r();return}t.onload=()=>{t.remove(),r()},t.onerror=()=>{t.remove(),i(Error("Image load failed"))},e.onDone(()=>{t.remove(),r()})})));yield s}})()}get onDone(){return this._onDoneEmitter.event}get key(){return 1===this._prefetchInfo.length?this._prefetchInfo[0].key:this._prefetchInfo.map(e=>e.key).join(",")}dispose(){this._abortCallback&&this._abortCallback(),super.dispose()}constructor(e,t,r="high"){super(e,t),this.priority=r,this._abortCallback=null,this._onDoneEmitter=new a.Q,this._prefetchInfo=(0,s.N)(t)}}},135195:function(e,t,r){r.d(t,{r:function(){return A}});var i=r(876826),n=r(85728),a=r(929753),o=r(789786);r(246923);var s=r(25614),c=r(82615),u=r(746290),d=r(588735),l=r(819277),p=r(978420),_=r(77922),v=r(434712),h=r(474956),g=r(243494),m=r(150615),f=r(260963),y=r(831452),C=r(875488),w=r(417699),I=r(630221),S=r(520593),b=r(214090),T=r(140972),R=r(970419),k=r(422600),E=r(568409),P={isInitialized:!1,loading:!0,loadingFailure:!1,hasMore:!1,list:[]};class A{get activeAiVideoFeed(){if(this.customFeedList.length)return{list:this.customFeedList,loading:!1,loadingFailure:!1,isInitialized:!0,hasMore:!1};if(!this.activeCategoryId)return null;var e,t=null===(e=this._feedResourceByCategoryMap)||void 0===e?void 0:e[this.activeCategoryId];return t?t:null}get _fetchFeedResourceByCategoryIdWithCache(){return this._requestCacheService.wrapperFetchFuncWithCache({fetchFunc:this._inspirationFeedDataService.fetchFeedResourceByCategory,calcRequestCacheKey:e=>{var t=(0,I.K)(e);return"dreamina-fetchFeedResourceByCategory_v2_".concat(this._envService.region,"_").concat(this._envService.appEnv,"_").concat(t)},shouldDisableCache:e=>!0,onOriginRequestDone:e=>{if(e.ok){var t=e.value.value.list.reduce((e,t)=>(0,a._)((0,n._)({},e),{[t.key]:t.statistic}),{});this._videoLikeService.setLikeDataMap(t)}},cacheExpirationDuration:432e5})}get _fetchFeedCategoriesWithCache(){return this._requestCacheService.wrapperFetchFuncWithCache({fetchFunc:this._inspirationFeedDataService.fetchFeedCategories,calcRequestCacheKey:()=>"dreamina-fetchFeedCategories_".concat(this._envService.region,"_").concat(this._envService.appEnv),shouldDisableCache:()=>this._options.disableCache})}bootstrap(){var e=this;return(0,i._)(function*(){if(!e._isInitialized)yield Promise.all([e.fetchFeedCategories()]),e._isInitialized=!0})()}setCustomFeedList(e){this.customFeedList=e}get exploreVideoList(){return this.customFeedList}fetchFeedCategories(){var e=this;return(0,i._)(function*(){try{var t=[],r=(0,k.b)({panel:u.I.AiVideo},e._serverInjectedDataService);if(r)t=r.categoryList;else{var i=yield e._fetchFeedCategoriesWithCache();if(!i.ok){(0,T.U)(e._containerService,{key:"fetchFeedCategories",code:String(i.code),msg:i.msg});return}t=i.value.list}e._setFeedCategories(t),t.length&&(e._setActiveCategoryId(t[0].id),yield e.fetchFeedResourceByCategoryId(e.activeCategoryId,!1))}catch(e){s.Z.warning(m.oc.t("network_unavailable__please_try_again_later",{},"Network error. Try again later."))}})()}fetchFeedResourceByCategoryId(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,i._)(function*(){yield r._baseFetchResourceList({categoryId:e,fetchFunc:r._fetchFeedResourceByCategoryIdWithCache,isFetchFavorite:!1,isLoadMore:t})})()}fetchFavoriteFeedList(e){var t=this;return(0,i._)(function*(){yield t._baseFetchResourceList({categoryId:t.favoriteCategoryId,fetchFunc:t._inspirationFeedDataService.fetchFavoriteAiVideoResource,isFetchFavorite:!0,isLoadMore:e})})()}switchActiveCategory(e){this._setActiveCategoryId(e);var t=this._feedResourceByCategoryMap[e];if(!t||!t.isInitialized){if(e===this.favoriteCategoryId)return this.fetchFavoriteFeedList(!1);Promise.all([this.fetchFeedResourceByCategoryId(e,!1)])}}switchToFeed(){var e=this.feedCategories[0];this.switchActiveCategory(e.id)}switchToFavoriteFeed(){this.switchActiveCategory(this.favoriteCategoryId)}_setFeedCategories(e){this.feedCategories=e}_setFeedResourceByCategoryMap(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._feedResourceByCategoryMap[e];t=i?(0,n._)({},i,r):(0,n._)({},P,r),this._feedResourceByCategoryMap[e]=t}_baseFetchResourceList(e){var t=this;return(0,i._)(function*(){var{fetchFunc:r,categoryId:i,isLoadMore:n,isFetchFavorite:a}=e,o=t._queryTokenLockMap[i];if(!o){var s=yield(0,C.FI)(),u=(0,g.ib)(a?{imageInfo:s,limit:40}:{categoryId:i,imageInfo:s,limit:40},[]);o={lock:new c.L,queryToken:u},t._queryTokenLockMap[i]=o}var d=t._feedResourceByCategoryMap[i];if((null==d?!void 0:!d.loading)&&!!o.lock.tryLock())try{if(t._feedResourceByCategoryMap[i]?t._setFeedResourceByCategoryMap(i,{loading:!0}):t._setFeedResourceByCategoryMap(i),!n&&(o.queryToken.offset=0),n&&!o.queryToken.hasMore)return;var l=yield r(o.queryToken);if(!l.ok){t._setFeedResourceByCategoryMap(i,{loadingFailure:!0,loading:!1}),(0,T.U)(t._containerService,{key:"feedResourcesByCategory-".concat(i),code:String(l.code),msg:l.msg});return}var{hasMore:p,config:_,value:v,offset:h}=l.value,m=(0,g.ib)(_,v.list,{hasMore:p,offset:h});o.queryToken=m,t._queryTokenLockMap[i]=o;var f=t._feedResourceByCategoryMap[i],w=n?f.list.concat(v.list.map(t._aiVideoModelToResource)):l.value.value.list.map(t._aiVideoModelToResource);t._setFeedResourceByCategoryMap(i,{isInitialized:!0,loading:!1,loadingFailure:!1,hasMore:p,list:(0,y.Z)(w,"key")})}catch(e){t._setFeedResourceByCategoryMap(i,{loading:!1,loadingFailure:!0})}finally{o.lock.unLock()}})()}constructor(e,t,r,n,a,o,s){var c,u=this;this._inspirationFeedDataService=e,this._resourceService=t,this._envService=r,this._videoLikeService=n,this._requestCacheService=a,this._containerService=o,this._serverInjectedDataService=s,this.activeCategoryId=null,this.feedCategories=[],this.customFeedList=[],this.favoriteCategoryId=0x989681,this._feedResourceByCategoryMap={},this._queryTokenLockMap={},this._isInitialized=!1,this._options={disableCache:!1},this.markFavorite=(c=(0,i._)(function*(e,t){yield u._inspirationFeedDataService.markFavorite({itemId:(0,E.S)(e),op:t?d.Ix.Like:d.Ix.UnLike})}),function(e,t){return c.apply(this,arguments)}),this.getResourceInstance=e=>this._resourceService.get(e,h._g.DreaminaAiVideo),this.setActiveFeedItemId=e=>{this.activeFeedItemId=e},this._setActiveCategoryId=e=>{this.activeCategoryId=e},this._aiVideoModelToResource=e=>{var t=(0,l.l)(h._g.DreaminaAiVideo,e);return this._resourceService.add(e.key,t.resource),t.resource},(0,f.rC)(this)}}(0,o.gn)([f.LO,(0,o.w6)("design:type",Object)],A.prototype,"activeCategoryId",void 0),(0,o.gn)([f.LO,(0,o.w6)("design:type",Array)],A.prototype,"customFeedList",void 0),(0,o.gn)([f.LO.deep,(0,o.w6)("design:type","undefined"==typeof FeedResourceByCategoryMap?Object:FeedResourceByCategoryMap)],A.prototype,"_feedResourceByCategoryMap",void 0),(0,o.gn)([f.Fl,(0,o.w6)("design:type",void 0),(0,o.w6)("design:paramtypes",[])],A.prototype,"activeAiVideoFeed",null),(0,o.gn)([f.LO,(0,o.w6)("design:type",Object)],A.prototype,"activeFeedItemId",void 0),(0,o.gn)([f.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Array]),(0,o.w6)("design:returntype",void 0)],A.prototype,"setCustomFeedList",null),(0,o.gn)([f.aD],A.prototype,"setActiveFeedItemId",void 0),(0,o.gn)([f.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Array]),(0,o.w6)("design:returntype",void 0)],A.prototype,"_setFeedCategories",null),(0,o.gn)([f.aD],A.prototype,"_setActiveCategoryId",void 0),(0,o.gn)([f.aD,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Number,"undefined"==typeof Partial?Object:Partial]),(0,o.w6)("design:returntype",void 0)],A.prototype,"_setFeedResourceByCategoryMap",null),A=(0,o.gn)([(0,o.fM)(0,p.t),(0,o.fM)(1,_.c),(0,o.fM)(2,w.e),(0,o.fM)(3,S.G),(0,o.fM)(4,b.p),(0,o.fM)(5,v.t),(0,o.fM)(6,R.G),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===p.t?Object:p.t,void 0===_.c?Object:_.c,void 0===w.e?Object:w.e,void 0===S.G?Object:S.G,void 0===b.p?Object:b.p,void 0===v.t?Object:v.t,void 0===R.G?Object:R.G])],A)},428509:function(e,t,r){r.d(t,{b:()=>el});var i=r("85728"),n=r("929753"),a=r("295834"),o=r("789786"),s=r("739092"),c=r("843698"),u=r("874800"),d=r("56935"),l=r("558032"),p=r("48252"),_=r("178589"),v=r("434712"),h=r("608358"),g=r("591586"),m=r("70529"),f=r("945781"),y=!0,C=null,w=()=>C,I=(e,t)=>{var{routeId:r}=t;try{var a,o=performance.now(),s=!!new URLSearchParams(location.search).get("isDebug"),c=(0,h.ko)(e,m.m);s&&performance.measure("FIRST_PAGE_RENDERED-".concat(r));var u={eventName:"first_page_rendered",params:{}};if(!u)return;u.params=(0,n._)((0,i._)({},null===(a=(0,f.u)())||void 0===a?void 0:a.params,u.params),{routeId:r,value:o,isFirstTime:y?"true":"false"}),y=!1,C=u,c.reportBusinessEvent(u.eventName,u.params),c.reportDevEvent(u.eventName,u.params),g.t.info("[first_page_rendered] FirstPageRendered: ",u.params)}catch(e){g.t.warn("[first_page_rendered] report error",e)}},S=r("851612"),b=()=>window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],T=()=>b().activationStart||0,R=r("362344"),k=r("905449"),E=r("267246"),P=-1,A=!1,L=()=>{},D=e=>{A=e,L()},O=()=>{var e="hidden"===document.visibilityState&&!document.prerendering;return e&&D(!0),e?0:1/0},M=e=>{"hidden"===document.visibilityState&&P>-1&&(P="visibilitychange"===e.type?e.timeStamp:0,D(!0),N())},F=()=>{addEventListener("visibilitychange",M,!0),addEventListener("prerenderingchange",M,!0)},N=()=>{removeEventListener("visibilitychange",M,!0),removeEventListener("prerenderingchange",M,!0)},x=e=>(e&&(L=e),P<0&&(P=O(),F(),(0,E.T)(()=>{setTimeout(()=>{P=O(),F()},0)})),{get firstHiddenTime(){return P},get hasHidden(){return A}}),U=r("379311"),j=r("144307"),V=r("608572"),B=r("518167"),H=r("21436"),G=r("467970"),W=!0;class q{getEventParams(){var e,t,r,a,{entry:o,businessParams:s={}}=this._params,{businessInfo:c,performanceEntry:u}=o,d=(0,V.Z)(s,e=>(0,B.Z)(e)?e?"true":"false":e),l=(0,i._)((0,n._)((0,i._)({},c,d),{routeId:null!==(a=c.createPid)&&void 0!==a?a:"N/A",value:c.resolveTime,PAGE_LOAD_END:c.resolveTime,CCFMP_END:null==c?void 0:c.resolveTime,CCTTI_END:null==c?void 0:c.resolveTime,isFirstTime:W?"true":"false"}),(0,j.sG)());return((0,H.Z)(l,(0,n._)((0,i._)({},null===(e=(0,f.u)())||void 0===e?void 0:e.params),{PAGE_RENDERED_END:null===(r=w())||void 0===r?void 0:null===(t=r.params)||void 0===t?void 0:t.value})),W=!1,u)?(0,n._)((0,i._)({},l),{value:u.startTime,CCFMP_END:u.startTime,CCTTI_END:u.startTime,duration:u.duration,entryType:u.entryType,name:u.name,startTime:u.startTime,renderTime:u.renderTime,loadTime:u.loadTime,naturalWidth:u.naturalWidth,naturalHeight:u.naturalHeight,url:u.url}):l}constructor(e){this._params=e,this.eventName="ccfmp"}}class Y extends q{getEventParams(){var e=super.getEventParams();return e.status="success",e}constructor(...e){super(...e),this.eventName="cctti"}}var Z=r("876826"),K=r("557343"),z=r("642273"),Q=r("163142"),J=null,X=!0;function $(){return($=(0,Z._)(function*(e,t){var{entry:r}=t;try{var n,a,o,s,c,u,d=new URLSearchParams(location.search),l=(0,h.ko)(e,m.m),p=(0,h.ko)(e,K.L);if(J)return;var _=yield p.waitLcpSummary();if(!_.ok)return;var{lcp:v,lcpElement:y,lcpUrl:C,pid:I}=_.value;if(!v)return;var S=(0,f.u)(),b=!!(null==C?void 0:C.includes("".concat(z.NU).concat(z.wN.workDetail,"/"))),T=(0,i._)({pid:I,elementLcp:y,elementTypeLcp:function(e,t){if(t)return"detail";if(!e)return"unknown";if(e.includes("static-area")||e.includes("generation-entry"))return"generation";else if(e.includes("components-image-v2"))return"feeds-card";else if(e.includes("carousel"))return"feeds-carousel";else return"unknown"}(y,b),isDetailPage:b?"1":"0",isFirstTime:X?"1":"0",timingCCFMP:null===(n=r.businessInfo)||void 0===n?void 0:n.resolveTime,timingCCTTI:null===(a=r.businessInfo)||void 0===a?void 0:a.resolveTime,timingPageRendered:null!==(u=null===(s=w())||void 0===s?void 0:null===(o=s.params)||void 0===o?void 0:o.value)&&void 0!==u?u:0,didDataLoadBeforeRender:"false"},(0,j.sG)());if(S?(c=(0,j.Po)("lcp_summary",[...Q.N_],{clear:!d.get("isDebug"),isDebug:!!d.get("isDebug"),largestContentfulPaintTime:v,extraParams:T}),c=(0,j._s)(c,S)):c=(0,j.Po)("lcp_summary",[...Q.vd,...Q.N_],{clear:!1,isDebug:!!d.get("isDebug"),largestContentfulPaintTime:v,extraParams:T}),!c)return;J=c,c.params.GET_FEED_JSONP_end&&c.params.timingPageRendered&&c.params.timingPageRendered>c.params.GET_FEED_JSONP_end&&(c.params.didDataLoadBeforeRender="true"),X=!1,l.reportBusinessEvent(c.eventName,c.params),l.reportDevEvent(c.eventName,(0,j.aK)(c,[...Q.vd,...Q.N_])),g.t.info("[lcp_summary]",c.params)}catch(e){g.t.warn("[lcp_summary] report error",e)}})).apply(this,arguments)}var ee=r("113557"),et=r("990539"),er=r("266521"),ei=r("846008"),en=r("426572"),ea=r("217854"),eo=r("870922"),es=r("259273"),ec=r("651531"),eu=l.lw.PAGE_RENDERED,ed={isModal:!1,isEmpty:!1,shouldWaitHeroElement:!1,type:"N/A"};class el extends u.JT{get hasPageLoaded(){return this._hasPageLoaded}get isMeasuringInitialPage(){return this._isInitialPage}get hasHidden(){return this._visibilityWatcher.hasHidden}bootstrap(){performance.mark("BEGIN_MEASURE_PAGE_LOAD"),performance.now(),this._beginMeasurePageLoad(this._options.currentRoute)}dispose(){super.dispose()}registerRouteMeasurementConfig(e,t){return this._measurementConfigMap=(0,i._)({},this._measurementConfigMap,e),t.forEach(e=>this._ccfmpCandidateSet.add(e)),this._measurementConfigMap}reportCustomPageLoadEvent(e,t,r){this._logger.info("custom page load reported for ".concat(e));var a,o=(0,n._)((0,i._)({},ed,t),{resolveType:l.y9.byCustomReport});e===(null===(a=this._currentRouteConfig)||void 0===a?void 0:a.id)&&this._resolvePageLoadEvent(e,l.y9.byCustomReport,o),r&&this._resolveSpaLoadEvent(e,(0,n._)((0,i._)({},o),{loadType:"init"}))}reportCustomSpaLoadEvent(e,t){this._resolveSpaLoadEvent(e,(0,i._)({},ed,t))}manualReportAbnormalCCFMP(e,t){var r={params:(0,i._)({},ed,t||{}),resolveType:e===ee.J.timeout?l.y9.byTimeout:l.y9.byCustomReport,resolveTime:performance.now()};return this._reportAbnormalCCFMP(e,r)}_reportFirstPageRendered(e){this.isMeasuringInitialPage&&I(this._containerService,{routeId:e})}_emitCCFMP(e,t){if((null===(n=e.businessInfo)||void 0===n?void 0:n.createPid)!==(null===(o=this._currentRouteConfig)||void 0===o?void 0:o.id)){this._reportAbnormalCCFMP(ee.J.routeChange,t),this._logger.warn("A navigation may have happened during CCFMP collection, original route id: ".concat(null===(u=this._currentRouteConfig)||void 0===u?void 0:u.id,", current route id: ").concat(null===(d=e.businessInfo)||void 0===d?void 0:d.createPid),e);return}if(this._didUserInteract){this._reportAbnormalCCFMP(ee.J.userInteraction,t),this._logger.warn("User has interacted with current page during CCFMP collection, original route id: ".concat(null===(l=this._currentRouteConfig)||void 0===l?void 0:l.id,", current route id: ").concat(null===(p=e.businessInfo)||void 0===p?void 0:p.createPid),e);return}console.log("[PAGE_LOAD] CCFMP Emitted",e),performance.measure("CCFMP-".concat(null===(s=this._currentRouteConfig)||void 0===s?void 0:s.id)),this._logger.info("CCFMP reported for ".concat(null===(c=e.businessInfo)||void 0===c?void 0:c.createPid),e);var r,i,n,o,s,c,u,d,l,p,_=t.params,{performanceEntry:v}=_,h=(0,a._)(_,["performanceEntry"]);r=this._containerService,i={entry:e,businessParams:h},(0,U.S$)(r,q,[i]),(0,U.S$)(r,Y,[i]),(0,U.$z)(r,Y,[i]),(0,G.zq)(r),(0,G.cN)(r),!function(e,t){$.apply(this,arguments)}(this._containerService,{entry:e}),setTimeout(()=>{(0,G.Uo)(this._containerService)},4e3)}_isCurrentRouteCCFMPCandidate(){var e,t;return this._ccfmpCandidateSet.has(null!==(t=null===(e=this._currentRouteConfig)||void 0===e?void 0:e.id)&&void 0!==t?t:"")}_reportEmptyCCFMP(e){var t,{resolveTime:r}=e;if(!this._isCurrentRouteCCFMPCandidate())return;var i=null===(t=this._platformUiConfigurationService.currentKeepAliveData)||void 0===t?void 0:t.routeId;if(!!i)this._emitCCFMP((0,ei.R)(this._platformUiConfigurationService,{resolveSource:"custom",createPid:i,resolveTime:r}),e),this._lastCCFMPReportRouteId=i}_reportCCFMP(e,t){if(!this._isCurrentRouteCCFMPCandidate())return;var r,i=t[t.length-1];if(!i)return;var n=null===(r=this._platformUiConfigurationService.currentKeepAliveData)||void 0===r?void 0:r.routeId;if(!!n&&n!==this._lastCCFMPReportRouteId&&!!(0,en.lT)(i))this._emitCCFMP((0,ei.R)(this._platformUiConfigurationService,{createPid:n,resolveSource:"element",resolveTime:e.resolveTime},i),e),this._lastCCFMPReportRouteId=n}_reportAbnormalCCFMP(e,t){var r,i,n,a,o,s,c,u;if(this._lastCCFMPReportRouteId)return;if(!this._didReportAbnormalCCFMP)this._didReportAbnormalCCFMP=!0,(0,ee.l)(this._containerService,{reason:e,resolveType:null!==(a=null==t?void 0:t.resolveType)&&void 0!==a?a:"N/A",resolveTime:null!==(o=null==t?void 0:t.resolveTime)&&void 0!==o?o:-1,listenerName:null!==(s=null==t?void 0:null===(r=t.params)||void 0===r?void 0:r.listenerName)&&void 0!==s?s:void 0,routeId:null!==(c=null===(i=this._currentRouteConfig)||void 0===i?void 0:i.id)&&void 0!==c?c:"N/A",createPid:null!==(u=null===(n=this._currentRouteConfig)||void 0===n?void 0:n.id)&&void 0!==u?u:"N/A"})}_beginListenCCFMP(){this._onPageLoad.event(e=>{if(e.resolveType===l.y9.byTimeout){this._reportAbnormalCCFMP(ee.J.timeout,e);return}if(this._visibilityWatcher.hasHidden){this._reportAbnormalCCFMP(ee.J.hidden,e);return}if(this._didUserInteract){this._reportAbnormalCCFMP(ee.J.userInteraction,e);return}if(!e.params.shouldWaitHeroElement){e.params.performanceEntry&&(0,en.lT)(e.params.performanceEntry)?this._reportCCFMP(e,[e.params.performanceEntry]):this._reportEmptyCCFMP(e);return}(0,S.A)(()=>{var t,r=t=>{var r=t[t.length-1];if(!r)return;var i=Math.max(r.startTime-T(),0);if(!(0,en.Uk)(r)||!(i>=this._visibilityWatcher.firstHiddenTime))this._reportCCFMP(e,t)},i=null===(t=this._platformUiConfigurationService.currentKeepAliveData)||void 0===t?void 0:t.routeId,n=(0,en.Bb)(r),a=ea.N.onEntryAdded(r),o=(0,eo.Z)(()=>{(!this._lastCCFMPReportRouteId||this._lastCCFMPReportRouteId!==i)&&(r(n.takeRecords().filter(en.Uk)),n.disconnect(),a.dispose())});["keydown","click"].forEach(t=>{addEventListener(t,()=>{this._reportAbnormalCCFMP(ee.J.userInteraction,e),o()},{once:!0,capture:!0})}),(0,R.u)(()=>{this._reportAbnormalCCFMP(ee.J.hidden,e),o()},!0),this._register((0,k.l)(this._platformUiConfigurationService,()=>{this._reportAbnormalCCFMP(ee.J.routeChange,e),o()}))})})}_beginListenSpaRouteChange(){this._register(this._platformUiConfigurationService.onKeepAliveChange(e=>{var t;e.status===p.G.Activated&&(null===(t=e.locationState)||void 0===t?void 0:t.fromSideMenu)&&(this._spaLoadContextMap[e.routeId]={routeChangeTime:performance.now(),routeId:e.routeId},performance.mark("PAGE_ROUTE_CHANGE_".concat(e.routeId)))}))}_waitForRenderedEvent(){return new Promise(e=>{(0,s.D)(this._platformUiConfigurationService.reporter.onPageRendered,e=>(this._logger.info("page rendered fired for ".concat(null==e?void 0:e.id,", has content ").concat(!!e.content)),!!e.content))(t=>{var r,i;this._logger.info("Page rendered for ".concat(null==t?void 0:t.id),t),performance.mark("PAGE_RENDERED_END-".concat(null==t?void 0:t.id)),performance.measure("PAGE_RENDERED-".concat(null==t?void 0:t.id)),t.id!==(null===(r=this._currentRouteConfig)||void 0===r?void 0:r.id)&&this._logger.warn("Page rendered is different from pending page current id: ".concat(t.id,", original id: ").concat(null===(i=this._currentRouteConfig)||void 0===i?void 0:i.id)),e(t)})})}_beginListenUserInteraction(){var e=()=>{this._didUserInteract=!0};["keydown","click"].forEach(t=>{addEventListener(t,e,{once:!0,capture:!0})})}_beginListenUserClose(){window.addEventListener("beforeunload",()=>{this._isCurrentRouteCCFMPCandidate()&&this._reportAbnormalCCFMP(ee.J.userClose)})}_beginMeasurePageLoad(e){this._beginListenUserInteraction(),this._beginListenCCFMP(),this._beginListenUserClose(),this._beginListenSpaRouteChange(),this._didReportPageLoadForCurrentRoute=!1;var t,r=null!==(t=this._platformUiConfigurationService.getRouteConfigByPath(e))&&void 0!==t?t:this._platformUiConfigurationService.getRouteConfigByPath(z.EZ[z.BA]);if(r){var n=r.id;this._currentRouteConfig=r;var a=this._measurementConfigMap[n];!a&&(this._logger.warn("Page measurement strategy for ".concat(n," should be defined in advance")),a=eu);var o=this._waitForRenderedEvent();switch(o.then(e=>{this._reportFirstPageRendered(n),this._onPageEnter.fire({pathName:e.path,routeId:e.id,isInitialPage:this.isMeasuringInitialPage})}),a){case l.lw.PAGE_RENDERED:o.then(()=>{this._resolvePageLoadEvent(n,l.y9.byPageRender,(0,i._)({},ed))});case l.lw.CUSTOM:}this._loadTimeoutId=setTimeout(()=>{this._resolvePageLoadEvent(n,l.y9.byTimeout,(0,i._)({},ed))},1e4)}else this._logger.warn("Page is invalid",r)}_resolvePageLoadEvent(e,t,r){if(this._didReportPageLoadForCurrentRoute){this._logger.warn("page load for current route has been resolved",this._currentRouteConfig);return}(0,d.Y2)(this._currentRouteConfig,"page load should only happen after entering a page"),this._loadTimeoutId&&(clearTimeout(this._loadTimeoutId),this._loadTimeoutId=void 0);var i,n,a,o,s=performance.now();this._onPageLoad.fire({pathName:this._currentRouteConfig.path,routeId:this._currentRouteConfig.id,isInitialPage:this.isMeasuringInitialPage,params:r,resolveType:t,resolveTime:s}),this._hasPageLoaded=!0,(0,et.r)(this._containerService,{resolveType:t,resolveTime:s,routeId:null!==(a=null===(i=this._currentRouteConfig)||void 0===i?void 0:i.id)&&void 0!==a?a:"N/A",createPid:null!==(o=null===(n=this._currentRouteConfig)||void 0===n?void 0:n.id)&&void 0!==o?o:"N/A"}),this._isInitialPage=!1,this._didReportPageLoadForCurrentRoute=!0,setTimeout(()=>{this._onPageIdle.fire({pathName:this._currentRouteConfig.path,routeId:this._currentRouteConfig.id,isInitialPage:this.isMeasuringInitialPage})},this._currentRouteConfig.id===es.Sj.Home?500:300);try{performance.measure("PAGE_LOAD_".concat(e),{end:s}),performance.measure("PAGE_INIT_TIME_".concat(e),{start:"PAGE_RENDERED_END-".concat(e),end:s})}catch(e){console.log("[PAGE_LOAD] measure error",e)}}_resolveSpaLoadEvent(e,t){var r=this._spaLoadContextMap[e];if(!!r&&!!r.routeChangeTime){var i=performance.now();(0,er.U)(this._containerService,{pid:e,routeChangeTime:r.routeChangeTime,resolveTime:i,loadType:t.loadType,customParams:{type:t.type,coreNetworkCostTime:t.coreNetworkCostTime}}),this._logger.info("Custom spa load reported for ".concat(e,", load time: ").concat(i-r.routeChangeTime));try{performance.measure("SPA_LOAD_TIME_".concat(e),{start:"PAGE_ROUTE_CHANGE_".concat(e),end:i})}catch(e){console.log("[SPA_LOAD] measure error",e)}}}constructor(e,t,r,i){super(),this._options=e,this._platformUiConfigurationService=t,this._loggerService=r,this._containerService=i,this.__producerBrand="cc-fmp",this._measurementConfigMap={},this._isInitialPage=!0,this._didReportPageLoadForCurrentRoute=!1,this._ccfmpCandidateSet=new Set,this._spaLoadContextMap={},this._onPageEnter=new c.Q,this.onPageEnter=this._onPageEnter.event,this._onPageLoad=new c.Q,this.onPageLoad=this._onPageLoad.event,this._hasPageLoaded=!1,this._onPageIdle=new c.Q,this.onPageIdle=this._onPageIdle.event,this._onPageHidden=new c.Q,this.onPageHidden=this._onPageHidden.event,this._visibilityWatcher=x(()=>{this._onPageHidden.fire()}),this._didUserInteract=!1,this._didReportAbnormalCCFMP=!1,this._logger=this._loggerService.createLogger("page-load-event")}}el=(0,o.gn)([(0,o.fM)(1,_.e),(0,o.fM)(2,ec.VZ),(0,o.fM)(3,v.t),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Object,void 0===_.e?Object:_.e,void 0===ec.VZ?Object:ec.VZ,void 0===v.t?Object:v.t])],el)},111242:function(e,t,r){r.d(t,{Y:()=>v});var i=r("85728"),n=r("789786"),a=r("497973"),o=r("874800"),s=r("56935"),c=r("434712"),u=r("993308"),d=r("161041"),l={[u.s]:u._,[d.s]:d.Z};function p(e,t){return t.displayName===e}var _=r("863896");class v extends o.JT{get mousePosition(){return{x:this._mousePosition.x,y:this._mousePosition.y}}timeKeeping(e){this._mousePosition.x=e.x,this._mousePosition.y=e.y,document.addEventListener("mousemove",this._mouseListener),this._mouseListenerTimer&&clearTimeout(this._mouseListenerTimer),this._mouseListenerTimer=setTimeout(()=>{document.removeEventListener("mousemove",this._mouseListener)},3*_.G)}dispose(){this._mouseListenerTimer&&(clearTimeout(this._mouseListenerTimer),this._mouseListenerTimer=null),document.removeEventListener("mousemove",this._mouseListener),super.dispose()}findReusableConnect(e){return this._tasks.find(t=>p(e.displayName,t)&&t.isMatchByParams(e.params)&&(!t.expiredAt||Date.now()<=t.expiredAt))}findReusableConnectByRequestParams(e){return this._tasks.find(t=>p(e.displayName,t)&&t.isMatchByRequestParams(e.requestParams)&&(!t.expiredAt||Date.now()<=t.expiredAt))}prefetch(e){var t=this.findReusableConnect(e);if(t)return t;var r=this._taskCreator[e.displayName];(0,s.Y2)(r,"unexpect creator type ".concat(e.displayName));var i=this._containerService.createInstance(new a.M(r,[e.params]));return i.onSuccess(e=>{var{expiredAt:t}=e;return this._registerRecycle(t)}),i.onFailed(()=>this._deleteCacheByReference(i)),this._tasks.push(i),i}burnLater(e){e.pRequest.finally(()=>this._deleteCacheByReference(e))}_deleteCacheByReference(e){for(var t,r=0;r<this._tasks.length;)t=this,function(i){var n=t._tasks[i];e===n?(t._tasks.splice(i,1),setTimeout(()=>{var e;return null==n?void 0:null===(e=n.dispose)||void 0===e?void 0:e.call(n)},1e3)):++i,r=i}(r)}deleteCache(e){for(var t,r=0;r<this._tasks.length;)t=this,function(i){var n=t._tasks[i];p(e.displayName,n)&&n.isMatchByParams(e.params)?(t._tasks.splice(i,1),setTimeout(()=>{var e;return null==n?void 0:null===(e=n.dispose)||void 0===e?void 0:e.call(n)},1e3)):++i,r=i}(r)}deleteCacheByRequestParams(e){for(var t,r=0;r<this._tasks.length;)t=this,function(i){var n=t._tasks[i];p(e.displayName,n)&&n.isMatchByRequestParams(e.requestParams)?(t._tasks.splice(i,1),setTimeout(()=>{var e;return null==n?void 0:null===(e=n.dispose)||void 0===e?void 0:e.call(n)},1e3)):++i,r=i}(r)}_registerRecycle(e){var t=Date.now(),r=!1,i=!1;this._nextRecycleTime<t?r=!0:e>this._nextRecycleTime&&(r=!0,i=!0),i&&this._nextRecycle&&(clearTimeout(this._nextRecycle),this._nextRecycle=null),r&&(this._nextRecycle=setTimeout(()=>{for(var e,t=Date.now(),r=0;r<this._tasks.length;)e=this,function(i){var n=e._tasks[i];void 0!==n.expiredAt&&n.expiredAt<t?(e._tasks.splice(i,1),setTimeout(()=>{var e;return null==n?void 0:null===(e=n.dispose)||void 0===e?void 0:e.call(n)},1e3)):++i,r=i}(r)},e-t),this._nextRecycleTime=e)}constructor(e){super(),this._containerService=e,this._taskCreator=(0,i._)({},l),this._tasks=[],this._mousePosition={x:-1,y:-1},this._nextRecycle=null,this._nextRecycleTime=-1,this._mouseListenerTimer=null,this._mouseListener=e=>{this._mousePosition.x=e.clientX,this._mousePosition.y=e.clientY}}}v=(0,n.gn)([(0,n.fM)(0,c.t),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===c.t?Object:c.t])],v)},922241:function(e,t,r){r.d(t,{U:function(){return c}});var i=r(843698),n=r(874800),a=r(243302),o=r(128468),s=r(260963);class c extends n.JT{get onRecordAdd(){return this._onRecordAdd.event}get onRecordRemove(){return this._onRecordRemove.event}_getVideoUniqueId(e){for(var t of this._videoMap)if(t[1]&&t[1].id===e){var r;return null!==(r=t[1].submitId)&&void 0!==r?r:t[1].taskData.submitId}return e}_getAudioUniqueId(e){for(var t of this._audioModelMap)if(t[1]&&(t[1].historyRecordId===e||t[1].id===e))return t[1].submitId;return e}getUnifiedRecordById(e){var t,r=this._imageMap.get(e);if(r)return r;var i=null!==(n=this._videoMap.get(e))&&void 0!==n?n:this._videoMap.get(this._getVideoUniqueId(e));if(i){var n,s,c,u=i.taskData.generateType;return{firstGenerateType:i.taskData.firstGenerateType,id:i.taskData.submitId,generateType:null!=u?u:a.pi.Text2Video,createdTime:i.taskData.createdTime,sortCreateTime:i.taskData.createdTime,itemList:[],originItemList:[],mode:o.JU.Workbench,assetOption:{hasFavorited:i.taskData.hasFavorited},historyRecordId:null!==(c=null===(s=i.taskData.taskDetail)||void 0===s?void 0:s.historyId)&&void 0!==c?c:i.id,task:i.taskData.taskDetail,historyGroupKeyMd5:i.taskData.historyGroupKeyMd5,finishTime:0}}var d=this.getAudioModelById(e);if(d){;return{id:d.id,generateType:d.generateType,createdTime:d.createdTime,sortCreateTime:d.sortCreateTime,itemList:[],originItemList:[],assetOption:{hasFavorited:d.hasFavorited},mode:o.JU.Workbench,historyRecordId:null!==(t=null==d?void 0:d.historyRecordId)&&void 0!==t?t:"",historyGroupKeyMd5:d.historyGroupKeyMd5,submitId:d.submitId,draftContent:"",metricsExtra:"",finishTime:0}}}deleteUnifiedRecordById(e){var t=this._imageMap.get(e);if(t)return this._imageMap.delete(e),this._onRecordRemove.fire(t),!0;var r=this._getVideoUniqueId(e),i=this.getUnifiedRecordById(r);if(i)return this._videoMap.delete(r),this._onRecordRemove.fire(i),!0;var n=this._getAudioUniqueId(e),a=this.getUnifiedRecordById(n);return!!a&&(this._audioLifecycleMap.delete(n),this._audioModelMap.delete(n),this._onRecordRemove.fire(a),!0)}getVideoTaskById(e){var t=this._getVideoUniqueId(e);return this._videoMap.get(t)}setVideoTaskById(e,t){!this._videoMap.has(e)&&(this._videoMap.set(e,(0,s.LO)(t)),this._onRecordAdd.fire(e))}setImageRecordById(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(!this._imageMap.has(e)||r)&&(this._imageMap.set(e,(0,s.LO)(t)),this._onRecordAdd.fire(e))}getImageRecordById(e){return this._imageMap.get(e)}getAudioModelById(e){return this._audioModelMap.get(this._getAudioUniqueId(e))}getAudioTaskById(e){return this._audioLifecycleMap.get(this._getAudioUniqueId(e))}setAudioTaskById(e,t){!this._audioLifecycleMap.has(e)&&(this._audioLifecycleMap.set(e,t),this._audioModelMap.set(e,(0,s.LO)(t.getModel())),this._onRecordAdd.fire(e),t.onModelChange(e=>{var t=this._audioModelMap.get(e.id);t&&(0,s.z)(()=>{Object.entries(e).forEach(e=>{var[r,i]=e;t[r]=i})})}))}constructor(...e){super(...e),this._videoMap=new Map,this._imageMap=new Map,this._onRecordAdd=new i.Q,this._onRecordRemove=new i.Q,this._audioLifecycleMap=new Map,this._audioModelMap=new Map}}},548310:function(e,t,r){r.d(t,{J:function(){return c}});var i=r(789786),n=r(260963),a=r(538638),o=r(434712),s=r(988374);class c{preloadWithCheck(e,t){var r,i;if(!t.workspaceId||!t.spaceId)return Promise.all([Promise.resolve(),Promise.resolve()]);if(t.reInit)return this.reInit(t);return(null===(r=this._allInstance)||void 0===r?void 0:r.ready)&&(null===(i=this._favorInstance)||void 0===i?void 0:i.ready)?Promise.all([Promise.resolve(),Promise.resolve()]):this.init(t)}init(e){var t,r;return Promise.all([null===(t=this._allInstance)||void 0===t?void 0:t.init(e,a.F.ALL),null===(r=this._favorInstance)||void 0===r?void 0:r.init(e,a.F.Favor)])}reInit(e){var t,r;return Promise.all([null===(t=this._allInstance)||void 0===t?void 0:t.reInit(e,a.F.ALL),null===(r=this._favorInstance)||void 0===r?void 0:r.reInit(e,a.F.Favor)])}getInstance(e){var t={[a.F.ALL]:this._allInstance,[a.F.Favor]:this._favorInstance};return this.selectedInstance=t[e],this.selectedInstance}changeActiveInstance(e){this.activeType=e;var t={[a.F.ALL]:this._allInstance,[a.F.Favor]:this._favorInstance};return this.activeInstance=t[e],this.activeInstance}deleteStoryByIds(e){var t,r;null===(t=this._allInstance)||void 0===t||t.deleteItemById(e),null===(r=this._favorInstance)||void 0===r||r.deleteItemById(e)}updateStoryNameById(e,t){var r,i;null===(r=this._allInstance)||void 0===r||r.updateItemNameById(e,t),null===(i=this._favorInstance)||void 0===i||i.updateItemNameById(e,t)}updateStoryFavorByIds(e,t){var r,i,n,a;null===(r=this._allInstance)||void 0===r||r.updateFavorStatusByIds(e,t),t?null===(n=this._favorInstance)||void 0===n||n.addItems(null===(i=this._allInstance)||void 0===i?void 0:i.listData.filter(t=>e.includes(t.storyId))):null===(a=this._favorInstance)||void 0===a||a.deleteItemById(e)}constructor(e){this._containerService=e,this._serviceBrand=void 0,this.activeType=a.F.ALL,this._allInstance=this._containerService.createInstance(s.r),this._favorInstance=this._containerService.createInstance(s.r),this.activeInstance=this._allInstance,(0,n.rC)(this,{activeType:n.LO,activeInstance:n.LO,changeActiveInstance:n.aD})}}c=(0,i.gn)([(0,i.fM)(0,o.t),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===o.t?Object:o.t])],c)},940116:function(e,t,r){r.d(t,{j:function(){return h}});var i=r(876826),n=r(85728),a=r(929753),o=r(789786),s=r(843698),c=r(282473),u=r(342070),d=r(490165),l=r(260963),p=r(417699),_=r(552786),v=r(704976);class h{init(e){var t=this;return(0,i._)(function*(){if(e){t._updateIsReady();return}if(!t._accountService.hasLogin)return;var r="".concat(t._cacheKey,"_").concat(t._accountService.userProfile.uid),i=localStorage.getItem(r);if(i)try{var n=JSON.parse(i);t._observableData.config=n,t._onConfigUpdate.fire(t._observableData.config)}catch(e){}if(!!(yield t._dreaminaInvitedDataService.fetchUserBlockConfig()).ok)localStorage.setItem(r,JSON.stringify(t._observableData.config)),t._updateIsReady()})()}get isReady(){return this._isReady}_updateIsReady(){if(!this._isReady)this._isReady=!0,this._onIsReady.fire()}_updateVideoConfig(e){var t=e.invitedStatus===c.f.invited||!e.regionBlock;if(t!==this._observableData.config.video.enable)(0,l.z)(()=>{this._observableData.config=(0,a._)((0,n._)({},this._observableData.config),{video:{enable:t,detail:{i2v:!0,t2v:!0}}})}),this._onConfigUpdate.fire(this._observableData.config)}_updateStoryConfig(e){if(!!this._observableData.config.video.enable)(0,l.z)(()=>{this._observableData.config=(0,a._)((0,n._)({},this._observableData.config),{video:(0,n._)({},this._observableData.config.video,this._observableData.config.video.enable?{detail:(0,n._)({},this._observableData.config.video.detail)}:{})})}),this._onConfigUpdate.fire(this._observableData.config)}getConfig(){if(!this._dreaminaEnvironmentService.isOversea)return this._observableData.config;var{values:e}=this._dreaminaBetaConfigurationService,t=e[_.em.GENERATE_VIDEO],r=[_.Ve.BETA_AVAILABLE,_.Ve.RELEASED].includes(null==t?void 0:t.status),i={enable:!1};return r&&(i={enable:!0,detail:{i2v:!0,t2v:!0}}),(0,a._)((0,n._)({},this._observableData.config),{video:i})}constructor(e,t,r,i){this._dreaminaInvitedDataService=e,this._accountService=t,this._dreaminaEnvironmentService=r,this._dreaminaBetaConfigurationService=i,this._cacheKey="dreamina_app_block_cache_v2",this._isReady=!1,this._observableData=(0,l.ky)({config:{video:{enable:!0,detail:{i2v:!0,t2v:!0}},image:{enable:!0,detail:void 0}}}),this._onConfigUpdate=new s.Q,this.onConfigUpdate=this._onConfigUpdate.event,this._onIsReady=new s.Q,this.onIsReady=this._onIsReady.event,this._accountService.onDidLogin(()=>{this.init()})}}h=(0,o.gn)([(0,o.fM)(0,u.q),(0,o.fM)(1,d.D),(0,o.fM)(2,p.e),(0,o.fM)(3,v.l),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===u.q?Object:u.q,void 0===d.D?Object:d.D,void 0===p.e?Object:p.e,void 0===v.l?Object:v.l])],h)},276632:function(e,t,r){r.d(t,{N:function(){return i}});var i=(0,r(971245).yh)("dreamina-video-downloadable-service")},351497:function(e,t,r){r.d(t,{Z:function(){return a}});var i=r(789786),n=r(260963);class a{setAudioModel(e){this._observerData.audioModel=e}setItemList(e){this._observerData.itemList=e}get observableData(){return this._observerData}constructor(){this._observerData={audioModel:null,itemList:[]},(0,n.rC)(this)}}(0,i.gn)([n.LO.shallow,(0,i.w6)("design:type","undefined"==typeof IAudioDetailManagerObservableData?Object:IAudioDetailManagerObservableData)],a.prototype,"_observerData",void 0),(0,i.gn)([n.aD.bound,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof IDreaminaAudioModel?Object:IDreaminaAudioModel]),(0,i.w6)("design:returntype",void 0)],a.prototype,"setAudioModel",null),(0,i.gn)([n.aD.bound,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[Array]),(0,i.w6)("design:returntype",void 0)],a.prototype,"setItemList",null)},932011:function(e,t,r){r.d(t,{i:function(){return s}});var i=r(876826),n=r(789786),a=r(301249),o=r(719800);class s extends a.c{_getModule(){return(0,i._)(function*(){return(yield Promise.all([r.e("1553"),r.e("2175"),r.e("4889"),r.e("2707"),r.e("640"),r.e("6918"),r.e("7570"),r.e("478"),r.e("3961"),r.e("9391")]).then(r.bind(r,193864))).CharacterGenerateModalService})()}constructor(e){super(e)}}s=(0,n.gn)([(0,n.fM)(0,o.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.T?Object:o.T])],s)},336234:function(e,t,r){r.d(t,{v:function(){return s}});var i=r(876826),n=r(789786),a=r(301249),o=r(719800);class s extends a.c{_getModule(){return(0,i._)(function*(){return(yield Promise.all([r.e("2707"),r.e("6918"),r.e("5096"),r.e("1193"),r.e("1081"),r.e("253"),r.e("277"),r.e("686"),r.e("8537"),r.e("4049"),r.e("5711"),r.e("1591"),r.e("9118"),r.e("6591"),r.e("8165"),r.e("1416"),r.e("2315"),r.e("3308"),r.e("9117"),r.e("3164"),r.e("6533"),r.e("8872"),r.e("9120"),r.e("2749"),r.e("742"),r.e("8962"),r.e("3189"),r.e("7024"),r.e("6082"),r.e("6274"),r.e("5757"),r.e("6936"),r.e("3384"),r.e("5099"),r.e("4542"),r.e("59"),r.e("2314"),r.e("701"),r.e("5055"),r.e("4605"),r.e("7506"),r.e("3507"),r.e("7848"),r.e("1384"),r.e("613"),r.e("4933"),r.e("8835"),r.e("465"),r.e("5147")]).then(r.bind(r,558369))).DraftModelService})()}_getStaticArguments(){return[]}constructor(e){super(e)}}s=(0,n.gn)([(0,n.fM)(0,o.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.T?Object:o.T])],s)},47047:function(e,t,r){r.d(t,{y:function(){return k}});var i,n,a=r(876826),o=r(772322),s=r(150615),c=r(682823),u=r(178589),d=r(259273),l=r(642273),p=r(44938),_=r(490165),v=r(608358),h=r(244867),g=r(95581),m=r(889715),f=r(369617),y=r(343271),C=r(112325),w=r(17248),I=r(357217),S=r(341245),b=r(272444),T=r(562092);var R=(i=(0,a._)(function*(e){var t,r=(0,v.ko)(e,S.U).getCampaignManager(I.St.CreatorFission,I.Nd.FissionS30Model),i=JSON.stringify(Object.fromEntries(new URLSearchParams(location.search))),n=yield null==r?void 0:r.getInviteCodeRelatedInformation(i);if(!!(null==n?void 0:n.ok)){var{userInfo:a,extra:o,inviteCode:c}=n.value,u=(0,T.D)(null!==(t=null==o?void 0:o.imageUrls)&&void 0!==t?t:"[]"),d=null==o?void 0:o.modelNameStarlingKey,l=null==o?void 0:o.modelName;return{bannerUrls:Array.isArray(u)?u:[],campaignName:I.Nd.FissionS30Model,inviteCode:c,userInfo:a,modelName:s.ZP.t(null!=d?d:"",{},l)}}}),function(e){return i.apply(this,arguments)});var k=(n=(0,a._)(function*(e,t){var r,i,n,T=yield R(e);if(!T){null==t||t();return}var{campaignName:k,inviteCode:E,userInfo:P,bannerUrls:A,modelName:L}=T,D=(0,v.ko)(e,u.e),O=(0,v.ko)(e,_.D),{hasLogin:M}=O;var F=(r=(0,a._)(function*(){var t=(0,v.ko)(e,S.U).getCampaignManager(I.St.CreatorFission,I.Nd.FissionS30Model),r=yield null==t?void 0:t.resumeInviteCode(E);return(null==r?void 0:r.ok)?(0,C.R)(r.value):{ok:!1,content:""}}),function(){return r.apply(this,arguments)});var N=(i=(0,a._)(function*(){var t=yield(0,w.O)(I.hJ.ModelCampaignWebTag,e);D.navigate(d.Sj.VideoGenerate,{state:{[l.SD.UgCampaignSelectModelReqKey]:null==t?void 0:t.modelReqKey}})}),function(){return i.apply(this,arguments)}),x=r=>{var i,n;g.h.confirm({icon:(0,o.jsx)(m.u2T,{}),title:null!==(i=r.title)&&void 0!==i?i:s.ZP.t("dre_invite_expired_popup_title",{},"\u9080\u8BF7\u94FE\u63A5\u5DF2\u5931\u6548"),content:null!==(n=r.content)&&void 0!==n?n:s.ZP.t("dre_invite_expired_popup_desc",{},"\u5F88\u62B1\u6B49\u6B64\u9080\u8BF7\u7801\u7684\u4F53\u9A8C\u540D\u989D\u5DF2\u6EE1\uFF0C\u6682\u672A\u4E3A\u4F60\u83B7\u5F97\u65B0\u6A21\u578B\u4F53\u9A8C\u8D44\u683C\uFF0C\u53EF\u4EE5\u5148\u8BD5\u8BD5\u5176\u4ED6\u6A21\u578B\u54E6"),okText:s.ZP.t("dre_invite_expired_popup_btn_ok",{},"\u6211\u77E5\u9053\u4E86"),onOk:()=>{(0,y.HF)(e,{action:y.f4.Confirm,popupType:y.RA.InvalidPopup,activityName:k})},footer:(e,t)=>t,afterClose:()=>{null==t||t();var e=location.href.split("?")[0];history.replaceState&&history.replaceState(null,"",e)},onCancel:()=>{(0,y.HF)(e,{action:y.f4.Close,popupType:y.RA.InvalidPopup,activityName:k})}})};var U=(n=(0,a._)(function*(){b.ZP.set(p.u.ugInviteBackDialog,"true");var t=yield F();if(t.ok)var r=f.s.success({content:(0,o.jsxs)("div",{children:[s.ZP.t("dre_beta_join_success_snackbar",{model:L},"\u89E3\u9501 {model} \u6210\u529F\uFF0C\u5FEB\u53BB\u4F53\u9A8C\u5427"),(0,o.jsx)("span",{className:c.Z.linkText,onClick:()=>{r(),N()},children:s.ZP.t("dre_beta_join_success_snackbar_btn_view",{},"\u67E5\u770B")})]})});else x(t),(0,y.HF)(e,{action:y.f4.Show,popupType:y.RA.InvalidPopup,activityName:k})}),function(){return n.apply(this,arguments)}),j=()=>{M?((0,y.HF)(e,{action:y.f4.Use,popupType:y.RA.UsePopup,activityName:k}),N()):((0,y.HF)(e,{action:y.f4.Login,popupType:y.RA.LoginPopup,activityName:k}),D.navigate(d.Sj.Login),O.onDidLogin(()=>{setTimeout(()=>{U()},1e3)}))};if(M){var V=yield F();if(V.ok)(0,y.HF)(e,{action:y.f4.Show,popupType:y.RA.UsePopup,activityName:k});else{x(V),(0,y.HF)(e,{action:y.f4.Show,popupType:y.RA.InvalidPopup,activityName:k});return}}(0,h.L)({innerModalProps:{headerImgUrls:A,modalTitle:(0,o.jsxs)("div",{className:c.Z.modalTitle,children:[(0,o.jsx)("img",{src:P.avatarUrl,crossOrigin:"anonymous",className:c.Z.avatar}),(0,o.jsx)("span",{className:c.Z.nickName,children:s.ZP.t("dre_invite_received_popup_title",{name:P.nickName,model:L},"{name} \u9080\u4F60\u8D85\u524D\u4F53\u9A8C\u5373\u68A6 {model} \u65B0\u6A21\u578B")})]}),modalDesc:M?s.ZP.t("dre_invite_already_signed_in_popup_title",{model:L},"\u4F60\u5DF2\u83B7\u5F97\u8D85\u524D\u4F53\u9A8C {model}\u8D44\u683C\uFF0C\u5FEB\u53BB\u8BD5\u8BD5\u5427"):s.ZP.t("dre_invite_received_popup_desc",{model:L},"\u6B22\u8FCE\u6765\u5230\u5373\u68A6\uFF0C\u7ACB\u523B\u6CE8\u518C\u767B\u5F55\u5373\u68A6\uFF0C\u8D85\u524D\u4F53\u9A8C {model} \u65B0\u6A21\u578B\u5427\uFF01"),okButtonProps:{text:M?s.ZP.t("dre_new_model_online_popup_btn_try",{},"\u7ACB\u5373\u4F53\u9A8C"):s.ZP.t("dre_invite_received_popup_btn_claim",{},"\u767B\u5F55\u9886\u53D6\u6A21\u578B"),onClick:()=>j()}},otherModalProps:{maskClosable:!1,duration:200,autoFocus:!0,afterClose:M?t:void 0,onCancel:()=>{(0,y.HF)(e,{action:y.f4.Close,popupType:M?y.RA.UsePopup:y.RA.LoginPopup,activityName:k})}}}),(0,y.HF)(e,{action:y.f4.Show,popupType:M?y.RA.UsePopup:y.RA.LoginPopup,activityName:k})}),function(e,t){return n.apply(this,arguments)})},962980:function(e,t,r){r.d(t,{T:function(){return h}});var i=r(876826),n=r(150615),a=r(244867),o=r(17248),s=r(865382),c=r(357217),u=r(81185),d=r(178589),l=r(608358),p=r(642273),_=r(259273),v=e=>{var t=(0,o.Y)(c.hJ.ModelCampaignCodeStart,e);if(t){var{imageUrls:r,inviteRewardLimit:i,modelNameStarlingKey:a,modelName:s}=t;return{bannerUrls:r,inviteLimit:null!=i?i:6,modelName:n.ZP.t(null!=a?a:"",{},s)}}},h=(e,t)=>{var r,o=v(e);if(!o){null==t||t();return}var h=(r=(0,i._)(function*(){var t=yield(0,s.e)({containerService:e,campaignKey:c.St.CreatorFission,subCampaignKey:c.Nd.FissionS30Model});if((0,u.RL)(e,{popupType:u.s9.ActivityExpireVip,action:u.pF.Vip,activityName:c.Nd.FissionS30Model}),t){var r=(0,l.ko)(e,d.e);r.currentRoutePath===p.EZ[_.Sj.InviteFission]&&r.navigate(_.Sj.InviteFission,{state:{refresh:!0}})}}),function(){return r.apply(this,arguments)}),{inviteLimit:g,bannerUrls:m,modelName:f}=o;(0,a.L)({innerModalProps:{headerImgUrls:m,modalTitle:n.ZP.t("dre_event_ends_soon_claim_offer_title",{model:f},"\u5F53\u524D\u6D3B\u52A8\u5DF2\u4E0B\u7EBF\uFF0C\u60A8\u8FD8\u6709\u4F1A\u5458\u6743\u76CA\u672A\u9886\u53D6"),modalDesc:n.ZP.t("dre_event_ends_soon_claim_offer_desc",{number2:g},"\u60A8\u5DF2\u9080\u8BF7\u6EE1 {number2} \u4E2A\u9080\u8BF7\u540D\u989D\uFF0C\u83B7\u5F97\u4E00\u4E2A\u6708\u5373\u68A6\u4F1A\u5458\uFF0C\u4F1A\u5458\u6743\u76CA\u9886\u53D6\u6709\u6548\u671F\u4E3A 7 \u5929\uFF0C\u8FC7\u671F\u672A\u9886\u53D6\u89C6\u4F5C\u81EA\u52A8\u653E\u5F03\u6743\u76CA\u3002"),okButtonProps:{text:n.ZP.t("dre_event_ends_soon_claim_offer_btn",{},"\u7ACB\u5373\u9886\u53D6"),onClick:()=>{h()}}},otherModalProps:{maskClosable:!1,duration:200,autoFocus:!0,afterClose:t,onCancel:()=>{(0,u.RL)(e,{popupType:u.s9.ActivityExpireVip,action:u.pF.Close,activityName:c.Nd.FissionS30Model})}}}),(0,u.RL)(e,{popupType:u.s9.ActivityExpireVip,action:u.pF.Show,activityName:c.Nd.FissionS30Model})}},151183:function(e,t,r){r.d(t,{v:function(){return h}});var i=r(876826),n=r(150615),a=r(244867),o=r(17248),s=r(865382),c=r(357217),u=r(81185),d=r(642273),l=r(259273),p=r(608358),_=r(178589),v=e=>{var t=(0,o.Y)(c.hJ.ModelCampaignCodeStart,e);if(t){var{imageUrls:r,inviteRewardLimit:i,modelNameStarlingKey:a,modelName:s}=t;return{bannerUrls:r,inviteLimit:null!=i?i:6,modelName:n.ZP.t(null!=a?a:"",{},s)}}},h=(e,t)=>{var r,o=v(e);if(!o){null==t||t();return}var h=(r=(0,i._)(function*(){var t=yield(0,s.e)({containerService:e,campaignKey:c.St.CreatorFission,subCampaignKey:c.Nd.FissionS30Model});if((0,u.RL)(e,{popupType:u.s9.ActivityExpireVip,action:u.pF.Vip,activityName:c.Nd.FissionS30Model}),t){var r=(0,p.ko)(e,_.e);r.currentRoutePath===d.EZ[l.Sj.InviteFission]&&r.navigate(l.Sj.InviteFission,{state:{refresh:!0}})}}),function(){return r.apply(this,arguments)}),{bannerUrls:g,inviteLimit:m,modelName:f}=o;(0,a.L)({innerModalProps:{headerImgUrls:g,modalTitle:n.ZP.t("dre_event_ends_popup_title",{model:f},"\u9080\u8BF7\u597D\u53CB\u4F53\u9A8C\u65B0\u6A21\u578B\u5F97\u5956\u52B1\u6D3B\u52A8\u5373\u5C06\u7ED3\u675F"),modalDesc:n.ZP.t("dre_event_rewards_popup_desc",{number2:m},"\u4F60\u5DF2\u9080\u8BF7\u6EE1 {number2} \u4E2A\u9080\u8BF7\u540D\u989D\uFF0C\u83B7\u5F97\u4E00\u4E2A\u6708\u5373\u68A6\u4F1A\u5458\uFF0C\u4F1A\u5458\u6743\u76CA\u9886\u53D6\u6709\u6548\u671F\u4E3A7\u5929\uFF0C\u8FC7\u671F\u672A\u9886\u53D6\u89C6\u4F5C\u81EA\u52A8\u653E\u5F03\u6743\u76CA\u3002"),okButtonProps:{text:n.ZP.t("dre_event_rewards_popup_btn_claim",{},"\u7ACB\u5373\u9886\u53D6"),onClick:()=>{h()}}},otherModalProps:{maskClosable:!1,duration:200,autoFocus:!0,afterClose:t,onCancel:()=>{(0,u.RL)(e,{popupType:u.s9.ActivityExpireVip,action:u.pF.Close,activityName:c.Nd.FissionS30Model})}}}),(0,u.RL)(e,{popupType:u.s9.ActivityExpireVip,action:u.pF.Show,activityName:c.Nd.FissionS30Model})}},914841:function(e,t,r){r.d(t,{G:()=>f});var i,n,a=r("789786"),o=r("874800"),s=r("434712"),c=r("843698");class u{get onIsReadyChange(){return this._onIsReadyChange.event}get isReady(){return this._isReady}setUgResourceMaterial(e){return this._resourceValueArray=e,this._setIsReady(),!0}getResourceMaterialValue(e){return this._resourceValueArray.find(t=>t.resourceKey===e)}_setIsReady(){this._isReady=!0,this._onIsReadyChange.fire(this._isReady)}constructor(){this._isReady=!1,this._onIsReadyChange=new c.Q,this._resourceValueArray=[]}}var d=r("876826"),l=r("260963");var p=((i={})[i.App=1]="App",i[i.Web=2]="Web",i[i.PC=3]="PC",i);var _=((n={})[n.App=1]="App",n[n.Web=2]="Web",n[n.PC=3]="PC",n),v=r("712942"),h=r("899792");class g{get campaignDetail(){return this._observableData.campaignDetail}fetchAndUpdateCampaignDetail(){var e=this;return(0,d._)(function*(){var t=yield e._dreaminaFissionDataService.fetchCampaignDetail({campaignKey:e._campaignKey,subCampaignKey:e._subCampaignKey,requestFrom:p.Web});return t.ok&&t.value&&(0,l.z)(()=>{e._observableData.campaignDetail=t.value}),t})()}resumeInviteCode(e){var t=this;return(0,d._)(function*(){return yield t._dreaminaFissionDataService.resumeInviteCode({campaignKey:t._campaignKey,subCampaignKey:t._subCampaignKey,inviter:{appId:Number((0,v.Iv)()),inviteCode:e},inviteSource:_.Web})})()}claimCampaignReward(){var e=this;return(0,d._)(function*(){return yield e._dreaminaFissionDataService.claimCampaignReward({campaignKey:e._campaignKey,subCampaignKey:e._subCampaignKey,requestFrom:p.Web})})()}getInviteCodeRelatedInformation(e){var t=this;return(0,d._)(function*(){return yield t._dreaminaFissionDataService.fetchFissionDetail({campaignKey:t._campaignKey,subCampaignKey:t._subCampaignKey,queryParams:e,aid:(0,v.Iv)()})})()}constructor(e,t,r){this._campaignKey=e,this._subCampaignKey=t,this._dreaminaFissionDataService=r,this._observableData=(0,l.LO)({campaignDetail:void 0})}}g=(0,a.gn)([(0,a.fM)(2,h.sR),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof UGCampaignKey?Object:UGCampaignKey,"undefined"==typeof UGSubCampaignKey?Object:UGSubCampaignKey,void 0===h.sR?Object:h.sR])],g);var m=r("490165");class f extends o.JT{get isEnabled(){return!1}get ugResourceManager(){return this._ugResourceManager}getCampaignManager(e,t){var r="".concat(e,"-").concat(t),i=this._campaignManagerMap.get(r);return i?i:(i=this._containerService.createInstance(g,e,t),this._campaignManagerMap.set(r,i),i)}constructor(e,t){super(),this._containerService=e,this._accountService=t,this._campaignManagerMap=new Map,this._ugResourceManager=this._containerService.createInstance(u)}}f=(0,a.gn)([(0,a.fM)(0,s.t),(0,a.fM)(1,m.D),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===s.t?Object:s.t,void 0===m.D?Object:m.D])],f)},865382:function(e,t,r){r.d(t,{e:function(){return l}});var i,n=r(876826),a=r(608358),o=r(217448),s=r(369617),c=r(150615),u=r(914026),d=r(341245);var l=(i=(0,n._)(function*(e){var{campaignKey:t,subCampaignKey:r,containerService:i}=e,n=(0,a.ko)(i,o.q),l=(0,a.ko)(i,d.U).getCampaignManager(t,r),{isVip:p}=n,_=yield l.claimCampaignReward();return _.ok?((0,u.R)(i,!0),p?s.s.success(c.ZP.t("dre_invite_toast_1month_member_extended",{},"You are already a member, and the membership benefits have been extended for 1 month")):s.s.success(c.ZP.t("dre_invite_toast_1month_member_activated",{},"You've claimed 1 month of free Standard"))):s.s.warning(c.ZP.t("dre_invite_toast_failed_to_claim",{},"Couldn't claim reward. Try again later.")),_.ok}),function(e){return i.apply(this,arguments)})},373704:function(e,t,r){r.d(t,{b:function(){return n}});var i=r(562956);class n{createAudioPlayer(e){return new i.D(e)}}},724169:function(e,t,r){r.d(t,{g:()=>c});var i=r("874800"),n=r("843698"),a=r("56935"),o=r("570126");class s extends i.JT{get onMount(){return this._onMount.event}get onUnmount(){return this._onUnmount.event}mount(){if(!this._isMounted)this._isMounted=!0,document.body.appendChild(this.container),this.root.render(this._component),this._onMount.fire()}show(){this.container.style.display="block"}hide(){this.container.style.display="none"}unmount(){if(!this._isUnmounted)(0,a.Y2)(this._isMounted,"should mount before unmount"),this._isUnmounted=!0,this.root.unmount(),document.body.contains(this.container)&&document.body.removeChild(this.container),this._onUnmount.fire(),this.dispose()}constructor(e,t){super(),this._onMount=this._register(new n.Q),this._onUnmount=this._register(new n.Q),this._isMounted=!1,this._isUnmounted=!1,this.id=e.id,this._component=e.component,this.root=(0,o.createRoot)(t),this.container=t}}class c extends i.JT{createContextView(e,t){var{id:r,component:i}=e,n=this._idToContextView.get(r);return n&&n.unmount(),(n=new s(e,t)).mount(),this._idToContextView.set(r,n),n.onUnmount(()=>{n&&this._idToContextView.delete(n.id)}),n}unmountContextView(e){return this._unmountContextView(e)}_unmountContextView(e){var t=this._idToContextView.get(e);t&&t.unmount()}getContextViewById(e){return this._idToContextView.get(e)}constructor(...e){super(...e),this._idToContextView=new Map}}},671154:function(e,t,r){r.d(t,{T:function(){return a}});var i=r(503417),n=r(997825);class a extends i.o{startedAt(){}id(e){this.data.package_key=e}packageType(){this.data.package_type=n.f$}name(e){}workspaceId(e){this.data.workspace_id=e}cloudAlbumAssert(e){var t,r=null!==(t=null==e?void 0:e.map(e=>({source_path:e.sourcePath,md5:e.md5,size:e.size,meta:JSON.stringify(e.meta)})))&&void 0!==t?t:[];this.data.package_assets=r,this._assets=r}ticket(e){this.data.base_package_id=null!=e?e:"0"}draftData(e){this.data.template_data=e}referencedAssert(e){this._referencedAssert=e}textArtResources(e){this.data.materials.text_art_resources=null!=e?e:[]}effectsPreloadInfos(e){!this.data.materials&&(this.data.materials={});var{effects:t,vimoEffects:r}=this._parseEffectsPreloadInfos(e);this.data.materials.effects=t,this.data.materials.vimo_effects=r}imagePreloadInfos(e){!this.data.materials&&(this.data.materials={}),this.data.materials.template_file_infos=e}dimension(e){}commitId(e){}isBatch(){}isAiImage(){}transferedFrom(){}brandResources(e){!(null==e?void 0:e.length)&&(this.data.materials.brand_resources=[]),this.data.materials.brand_resources=e.map(e=>({resource_id:e.resourceId}))}cover(e){}coverList(e){this.data.page_covers=this.pageCover.assetCovers}pageCount(e){}draftCreateTime(e){}templateId(e){}combineResult(){this.data.referenced_assets=this._assets.filter(e=>{var t;return null===(t=this._referencedAssert)||void 0===t?void 0:t.includes(e.md5)}),this.data.template_meta=JSON.stringify(this.cloudDraftMeta)}noOccupy(e){this.data.no_occupy=e}skipRecycleForInvisible(e){this.data.skip_recycle_for_invisible=e}invisible(e){this.data.invisible=e}localSpaceResources(e){}}},188965:function(e,t,r){r.d(t,{x:function(){return o}});var i=r(85728),n=r(929753),a=r(997825);function o(e){var t,o,s,{id:c,templateId:u,name:d,dimensions:l,pageCount:p,isNewCreate:_,size:v,uid:h,pageCoverList:g,createTime:m,isUseInCn:f,commitId:y,isBatch:C,isAiImage:w,transferedFrom:I}=e,S=Date.now();return{draft:{id:c,templateId:u,name:d,type:a.f$,duration:0,updateTime:S,size:v,segmentCount:0,version:"1.0.0",platformSupport:a.dV,isMainTrackEmpty:!1,isScriptTemplate:!1,renderIndexTrackMode:!1,canvasInfo:{width:null===(t=l[0])||void 0===t?void 0:t.width,height:null===(o=l[0])||void 0===o?void 0:o.height,sizeUnit:null===(s=l[0])||void 0===s?void 0:s.unit,pageInfoList:l.map((e,t)=>(0,n._)((0,i._)({},e,null==g?void 0:g[t]),{sizeUnit:e.unit})),pageCount:p},coverUrl:"cover.jpg",cover:"cover.jpg",graphicInfo:{isUseInCn:f,isBatch:C,isAiImage:w},transferedFrom:null!=I?I:""},uploadSource:{owner:null!=h?h:"0",platform:a.dV,systemVersion:r.g.navigator.userAgent,appVersion:"1.0.0",createTime:_?S:m,commitId:y},createSource:{owner:null!=h?h:"0",platform:a.dV,systemVersion:r.g.navigator.userAgent,appVersion:"1.0.0",createTime:_?S:m}}}},958223:function(e,t,r){r.d(t,{H:function(){return o},o:function(){return a}});var i,n=r(971245);var a=((i={}).XHR="xhr",i.JSONP="jsonp",i),o=(0,n.yh)("draft-get-data")},12186:function(e,t,r){r.d(t,{AS:function(){return a},eP:function(){return n},uk:function(){return o}});var i=r(940140),n="999.999.999",a="16.1.0",o={GetDraftUrl:{hostNameType:i.b_.Default,url:"/lv/v1/editor/plane_draft/get_draft_detail"},GetDraftReSource:{hostNameType:i.b_.Default,url:"/lv/v1/editor/pack_resource"}}},960054:function(e,t,r){r.d(t,{a:function(){return d}});var i=r(789786),n=r(12186),a=r(442452),o=r(643590),s=r(416105),c=r(875649),u=r(689739);class d{getDraftData(e,t){return this._networkClient.post(this._httpApiSettingService.getRequestURL({domainType:a.Y.DEFAULT,path:n.uk.GetDraftUrl.url}),e,t)}getDraftResource(e,t){return this._networkClient.post(this._httpApiSettingService.getRequestURL({domainType:a.Y.DEFAULT,path:n.uk.GetDraftReSource.url}),e,t)}constructor(e){var t;this._httpApiSettingService=e,this._networkClient=(t=new o.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,s.mH)(t),(0,c.e_)(t),t)}}(0,i.gn)([(0,u.K)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof GetDraftDataRequest?Object:GetDraftDataRequest,"undefined"==typeof NetworkRequestConfig?Object:NetworkRequestConfig]),(0,i.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],d.prototype,"getDraftData",null),(0,i.gn)([(0,u.K)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof GetDraftResourceRequest?Object:GetDraftResourceRequest,"undefined"==typeof NetworkRequestConfig?Object:NetworkRequestConfig]),(0,i.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],d.prototype,"getDraftResource",null),d=(0,i.gn)([(0,i.fM)(0,a.x),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===a.x?Object:a.x])],d)},319421:function(e,t,r){r.d(t,{f:()=>v});var i=r("85728"),n=r("929753"),a=r("843698"),o=r("874800"),s=r("509320"),c=r("772322"),u=r("168112"),d=r("570126"),l=r("173683"),p=class e{_remove(){var e;null===(e=this.root)||void 0===e||e.unmount()}close(){this._remove()}show(e){!this.modal&&(this.modal=document.createElement("div"),document.body.appendChild(this.modal));var t,r,{target:a}=e;null===(t=(r=e.guideProps).show)||void 0===t||t.call(r);var{mask:o,blurToNext:s}=e.guideProps,p=(0,l.pX)(a,o||s);if(!!p)this.root=(0,d.createRoot)(this.modal),this.root.render((0,c.jsx)(u.S,{guideProps:(0,n._)((0,i._)({},e.guideProps),{cancel:t=>{var r,i;this._remove(),null===(r=(i=e.guideProps).cancel)||void 0===r||r.call(i,t)},confirm:()=>{var t,r;this._remove(),null===(t=(r=e.guideProps).confirm)||void 0===t||t.call(r)}}),wrapStyle:p,target:a}))}constructor(){this.modal=null,this.root=null}};class _ extends o.JT{setGuideQueue(e){this.guideQueue=e}}class v extends _{get index(){return this._index}set index(e){this._index=e}clear(){this._guide.close(),this._onClear.fire()}invoke(){return this.status="invoking",new Promise(e=>{var t=this.guideQueue.steps[this.index];if(t){var{target:r,confirm:a,cancel:o}=t;if(!(0,l.nq)(r)){this.status="end",e({done:!1,status:"error"});return}this.index++,this._guide.show({target:r,guideProps:(0,n._)((0,i._)({},this.guideQueue,t),{stepIndex:this.index,confirm:()=>this._confirm(e,a),cancel:t=>this._cancel(e,t,o),mask:this.guideQueue.mask,maskClosable:this.guideQueue.maskClosable,className:this.guideQueue.className,contentClassName:this.guideQueue.contentClassName})});return}this.status="end",e({done:!0,status:"end"})})}stopShowAgain(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this._stopShowAgainStatus=e,"end"===this.status&&this._storage.set(this.guideQueue.key,e)}_confirm(e,t){null==t||t(),this._onClose.fire(s.c.CancelBtn),this._setShowState(),e({done:!1,status:"success"})}_cancel(e,t,r){null==r||r(t),this._onClose.fire(t.from);var{key:i,cancelWithSkip:n}=this.guideQueue;this._setShowState(),n&&this._storage.set(i,!0),e({done:!0,status:"success"})}_setShowState(){var{steps:e,repeat:t,key:r}=this.guideQueue;this.index>=e.length&&(!t&&this._storage.set(r,!0),void 0!==this._stopShowAgainStatus&&this._storage.set(r,this._stopShowAgainStatus))}constructor(e,t){super(),this.guideQueue={},this._index=0,this._onClear=new a.Q,this.onClear=this._onClear.event,this._onClose=new a.Q,this.onClose=this._onClose.event,this._storage=t.keyValue,this.setGuideQueue(e),this.status="pending",this._guide=new p}}},271101:function(e,t,r){r.d(t,{D:function(){return v}});var i=r(660178),n=r(876826),a=r(2910),o=r(150615),s=r(184568),c=r(269307),u=r(843698),d=r(874800),l=r(56935),p=r(598879),_=r(777632);i.w.setConfig({projectId:532,subProjectName:"cc_dreamina",customRoute:"",reportOnly:!1,storageKey:"ARGUS_STORAGE_OPEN_REDIRECT",frontWhiteUrl:'["._______________",".vlabstatic.com"]',frontBlackUrl:"[]",bid:"cc_dreamina",region:"cn",cacheTimeFront:12,checkTimeLimit:1.5,limitLevel:5});class v extends d.JT{get currentLocale(){return(0,l.ZB)(this._locale),this._locale.getCurrentLocale()}get supportLanguages(){return(0,l.ZB)(this._locale),this._locale.getSupportLocales().map(e=>({locale:e.locale,text:e.text}))}changeLocale(e){this._locale.setCurrentLocale(e),this._onLocaleChange.fire(e);var t=(0,p.vB)();location.href=i.w.protectUrl({targetUrl:(0,a.C)("".concat(location.pathname,"?").concat(t),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"}),filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1teHNZM2s1-zJSd$pHeFph$*w2WTIxTmRtTXlWbmxr-ld4c$dsaE5kb*x1%25aa00wNXNZMms1ZW1OdFR-WmhWR$%wWW1rNWNFM$$hSFZN$0%1c1kyNWFjRmt5$lhWa1NFNW9ZMjFrT$dOM1B%MD0",isBlank:!1})}allowToRender(){var e=this;return(0,n._)(function*(){yield e._initAwaitLock.awaitForInit()})()}_overwriteI18nT(){var{t:e}=o.ZP,{searchParams:t}=new URL(window.location.href);t.get("__debug_i18n__");var r=new Map;o.ZP.t=(t,i,n)=>{if(i&&Object.values(i).some(e=>"function"==typeof e))return e.call(o.ZP,t,i,n);var{language:a}=o.ZP,s=JSON.stringify({k:t,o:i,f:n});!r.has(a)&&r.set(a,new Map);var c=r.get(a),u=c.get(s);if(u){var{value:d}=u;return d}var l=e.call(o.ZP,t,i,n);return c.set(s,{value:l}),l}}_bootstrap(e){var{locale:t,namespace:r,apiKey:i,injectI18nResource:n,maxRetryLoadCounts:a=5,lazyUpdate:u=!1,localeChangeHook:d}=e;this._locale=t;var l=t.getSupportLocales().map(e=>e.locale),p=t.getCurrentLocale();d&&(this._localeChangeHook=d);var _=()=>{!this._initAwaitLock.hasBeenDone&&this._initAwaitLock.initDone()},v=e=>{if(!e){var t=1;o.ZP.use((0,s.registerBackendPlugin)({loadOptions:{apiKey:null!=i?i:"38d171503ca311ee866b4ff6c924e0e2",namespace:null!=r?r:"WebClient",TEAChannelDomain:"",zoneHost:"https://starling.zijieapi.com",timeout:8e3,lazyUpdate:u},simpleLoad:!0,on:{done:()=>{_()},fallback:e=>{t>=a?_():(o.ZP.i18nInstance.instance.reloadResources(),t++)}},fallbackTexts:{}}))}o.ZP.use(c.p6).init({lng:p,supportedLngs:l,fallbackLng:["en"],thirdParamFallback:!0,saveMissing:!0,resources:e,missingKeyHandler:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r]}},e?_:void 0)};this._overwriteI18nT();var{localesMap:h,__injectedI18nUrl:g}=window;n&&n.lng===p&&(!g||(null==g?void 0:g.includes(null==h?void 0:h[p])))?n.resources.then(e=>{e?v(e):v()}).catch(()=>{v()}):v()}constructor(e){super(),this._initAwaitLock=new _.G,this._onLocaleChange=this._store.add(new u.Q),this.onLocaleChange=this._onLocaleChange.event,this._bootstrap(e)}}},269176:function(e,t,r){r.d(t,{a:function(){return a}});var i={locale:"zh-Hans",text:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09"};class n{getCurrentLocale(){return i.locale}getSupportLocales(){return[i]}setCurrentLocale(e){}formatLocalePath(e,t){return e}}var a=()=>new n},53588:function(e,t,r){r.d(t,{Tf:function(){return i},Yd:function(){return a},fs:function(){return n}});var i=["Meta","FrameInfo","LongTaskInfo","Named","Analysis"],n=["longTasks","frameTimes"],a={id:"performance-monitor",prefix:"performance-monitor"}},745228:function(e,t,r){r.d(t,{$O:function(){return d},bc:function(){return u},er:function(){return s},fk:function(){return c}});var i=r(85728),n=r(929753),a=r(373722),o=r(53588);function s(e){return!!(null==e?void 0:e.FrameInfo)}function c(e){return!!(null==e?void 0:e.LongTaskInfo)}function u(e){var t=e.frameTimes.sort((e,t)=>e-t),r=Math.floor(t.length*(1/4)),a=Math.floor(.5*t.length),o=Math.floor(t.length*(3/4)),s=Math.floor(.9*t.length);return(0,n._)((0,i._)({},e),{PCT25_FT:t[r],PCT50_FT:t[a],PCT75_FT:t[o],PCT90_FT:t[s],Analysis:!0})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,a.Z)(e,[...o.Tf,...t?[]:o.fs])}},867556:function(e,t,r){r.d(t,{hH:function(){return o},lY:function(){return n},uY:function(){return i},w4:function(){return a}});var i=10,n=1e3,a=100,o=["mcs","mon","get_unread_count"]},798449:function(e,t,r){r.d(t,{c:function(){return n},w:function(){return i}});function i(e,t){var r,i,n,a;console.log("[RuntimePrefetchService]>>>>>","\n total: ".concat(t.totalTasksCount),"\n completed: ".concat(t.completedTasksCount),"\n ".concat((r=t.completedTasksCount,n=Math.max(Math.round((i=r/t.totalTasksCount*100)/100*50),0),a="[".concat("=".repeat(n)).concat(" ".repeat(Math.max(50-n,0)),"]"),"".concat(a," ").concat(i.toFixed(2),"%"))))}function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log("[RuntimePrefetchService]>>>>>",...t)}},200493:function(e,t,r){r.d(t,{i:function(){return n}});var i=r(867556);function n(e){return!i.hH.some(t=>e.includes(t))&&!0}},274245:function(e,t,r){r.d(t,{$6:function(){return o},AU:function(){return n},PN:function(){return s}});var i=r(874800);class n extends i.JT{dispose(){this.__disposeCallback(),super.dispose()}constructor(e){super(),this.__disposeCallback=e}}class a extends i.JT{dispose(){this._simpleTask.dispose(),super.dispose()}get key(){return this._simpleTask.key}get run(){return()=>this._simpleTask.run()}constructor(e){var t;super(),this._simpleTask=e,this.status="padding",this.enqueueTime=Date.now(),this.priority=null!==(t=this._simpleTask.priority)&&void 0!==t?t:"low"}}function o(e){return new a(e)}function s(e,t){if(e.priority!==t.priority){var r,i,n;return r=e,i=t,(n={critical:3,high:2,low:1})[r.priority]-n[i.priority]}return e.enqueueTime-t.enqueueTime}},902668:function(e,t,r){r.d(t,{X:function(){return o}});var i=r(876826),n=r(82615),a=r(874800);class o extends a.JT{_flushToken(){var e=this;return(0,i._)(function*(){if(!!(Date.now()-e._lastFlushTokenTime>e._tokenMaxAge)){if(!e._flushMutex.tryLock()){yield e._flushMutex.lockShared(),e._flushMutex.unLockShared();return}try{var t=yield e._getToken();if(!t.ok){e._token=void 0;return}e._token=t.value,e._lastFlushTokenTime=Date.now()}finally{e._flushMutex.unLock()}}})()}constructor(...e){super(...e),this._flushMutex=new n.L,this._lastFlushTokenTime=0,this._tokenMaxAge=12e5}}},478164:function(e,t,r){r.d(t,{A:function(){return n}});var i,n=((i={}).Video="video",i.Image="image",i.Object="object",i)},910733:function(e,t,r){r.d(t,{d:function(){return p}});var i=r(876826),n=r(85728),a=r(929753),o=r(82615),s=r(836413),c=r(56935),u=r(928885),d=r(435889),l=r(494660);class p{setUserId(e){var t;this._config.userId=e,null===(t=this._sdk)||void 0===t||t.setOption({userId:e})}uploadFile(e,t,r){var n=this;return(0,i._)(function*(){if((0,c.Y2)(e.serviceId,"use imagex must set `serviceId` in uploader."),yield n._ensureSdk(e),!n._sdk)return(0,s.wf)(-1,"sdk undefined.");var i=(0,d.N)(n._sdk,{file:t,stsToken:n._convertToken(e),cancellationToken:r});return(0,s.oW)(i)})()}uploadImage(e,t,r){var n=this;return(0,i._)(function*(){if((0,c.Y2)(e.serviceId,"use imagex must set `serviceId` in uploader."),yield n._ensureSdk(e),!n._sdk)return(0,s.wf)(-1,"sdk undefined.");var i=(0,l.x)(n._sdk,{file:t,stsToken:n._convertToken(e),cancellationToken:r});return(0,s.oW)(i)})()}_ensureSdk(e){var t=this;return(0,i._)(function*(){if(!t._sdk){if(!t._mutex.tryLock()){yield t._mutex.lockShared(),t._mutex.unLockShared();return}try{var i;i=(yield r.e("7163").then(r.t.bind(r,594631,23))).default,t._sdk=new i((0,a._)((0,n._)({userId:t._config.userId,appId:t._config.appId,region:e.region,logDomain:void 0,stsToken:t._convertToken(e),imageConfig:{serviceId:e.serviceId,processAction:t._config.actions},objectConfig:{serviceId:e.serviceId,processAction:t._config.actions}},(0,u.X)(e.region)),{getSliceFunc:t._config.getSliceFunc}))}finally{t._mutex.unLock()}}})()}_convertToken(e){return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,SessionToken:e.sessionToken,ExpiredTime:e.expiredTime,CurrentTime:e.currentTime}}constructor(e){this._config=e,this._mutex=new o.L}}},861748:function(e,t,r){r.d(t,{_:function(){return s},w:function(){return a}});var i=r(876826),n=r(836413);function a(e,t){return o.apply(this,arguments)}function o(){return(o=(0,i._)(function*(e,t){var r=e.createInstance(t),i=yield r.getImageXToken();return i.ok?(0,n.oW)(i.value.serviceId):i})).apply(this,arguments)}function s(e,t){t instanceof AbortSignal?t.aborted?e.cancel():t.addEventListener("abort",()=>{e.cancel()}):t.onCancellationRequested(()=>{e.cancel()})}},671769:function(e,t,r){r.d(t,{y:function(){return a}});var i=r(843698),n=r(567934);class a{cancel(){this._cancelled=!0}get onComplete(){return!this._neverEmitter&&(this._neverEmitter=new i.Q),this._neverEmitter.event}get onProgress(){return!this._neverEmitter&&(this._neverEmitter=new i.Q),this._neverEmitter.event}get onError(){return this._cancelled?(!this._neverEmitter&&(this._neverEmitter=new i.Q),this._neverEmitter.event):(0,n.V)(this._err)}constructor(e){this._err=e,this._cancelled=!1}}},558085:function(e,t,r){r.d(t,{k:function(){return u},w:function(){return c}});var i=r(789786),n=r(843698),a=r(806663),o=r(234552),s=r(490165);class c{get userId(){return this._accountService.hasLogin?this._accountService.userProfile.uid:"unknown"}constructor(e){this._accountService=e,this._onUserIdChange=new n.Q,this.onUserIdChange=this._onUserIdChange.event,!this._accountService.hasLogin&&(0,a.V)(this._accountService.onDidLogin)(()=>{this._onUserIdChange.fire(this._accountService.userProfile.uid)})}}c=(0,i.gn)([(0,i.fM)(0,s.D),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===s.D?Object:s.D])],c);class u{get userId(){return this._userId}get onUserIdChange(){return o.I}constructor(e){this._userId=e}}},365379:function(e,t,r){r.d(t,{N:function(){return d}});var i=r(843698),n=r(874800),a=r(836413),o=r(638106),s=r(478164),c=r(697294);class u extends n.JT{cancel(){this._sdk.cancel(this._key),this._onError.fire((0,a.wf)(o.pY.Cancelled,"upload task cancelled."))}constructor(e,t){super(),this._sdk=e,this._key=t,this._onCompleted=new i.Q,this._onError=new i.Q,this._onProgress=new i.Q,this.onComplete=this._onCompleted.event,this.onError=this._onError.event,this.onProgress=this._onProgress.event,this._sdk.on("complete",e=>{if(e.key===this._key){var t,r,{uploadResult:i}=e;this._onCompleted.fire({uri:null!==(r=i.Uri)&&void 0!==r?r:"",md5:null===(t=i.ObjectMeta)||void 0===t?void 0:t.Md5})}}),this._sdk.on("error",e=>{var t;if(e.key===this._key)this._onError.fire((0,a.wf)(null!==(t=e.extra.errorCode)&&void 0!==t?t:-1,e.extra.message))}),this._sdk.on("progress",e=>{if(e.key===this._key)this._onProgress.fire(e.percent)})}}function d(e,t){var r=e.addFile({file:t.file,stsToken:t.stsToken,type:s.A.Object});e.start(r);var i=new u(e,r);return t.cancellationToken&&(0,c.x)(i,t.cancellationToken),i}},938157:function(e,t,r){r.d(t,{i:function(){return n}});var i=r(836413);function n(e){return new Promise(t=>{e.onComplete(e=>{t((0,i.oW)(e))}),e.onError(e=>{t(e)})})}},820751:function(e,t,r){r.d(t,{d:function(){return u}});var i=r(876826),n=r(2910),a=r(836413),o=r(831593),s=r(221266);class c extends o.fl{_makeFrameBuilder(e){return new s.X(this._video,this._canvas,this._ctx,e)}}function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,i._)(function*(e,t){var r=document.createElement("video");r.crossOrigin="anonymous",r.src=(0,n.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_dreamina",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1,escapeRule:"escape-report"});var i=yield(0,o.$E)(r);return i.ok?(0,a.oW)(new c(r,t)):i})).apply(this,arguments)}},650819:function(e,t,r){r.d(t,{g:function(){return f}});var i=r(876826),n=r(85728),a=r(789786),o=r(936226),s=r(813800),c=r(636601),u=r(643590),d=r(875649),l=r(416105),p=r(243494),_=r(927457),v=r(836413),h=r(346526),g=r(810413),m=r(726019);class f{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new u.y().build(u.D),(0,d.i3)(e),(0,l.mH)(e),(0,h.V)(e),e)}return this._networkClientInstance}getRecommendAudios(e){var t=this;return(0,i._)(function*(){var r=e instanceof p.yt?e.config:e;try{var i,a,o=yield t._networkClient.post("".concat(t._api,"?lite_aid=").concat(g.AF),(0,n._)({id:r.id,collection_type:0},t._getTokenParams(e))),s=Number(null!==(i=o.ret)&&void 0!==i?i:0),c=null!==(a=o.errmsg)&&void 0!==a?a:"";if(0!==s)return(0,v.wf)(null!=s?s:-1,null!=c?c:"");var u=t._convertResponseToQueryToken(e,o);return(0,v.oW)(u)}catch(e){return(0,_.m)(e,-1,"getMusicAlbums api error")}})()}_getTokenParams(e){var t,r;return(0,p.ky)(e)?{offset:e.offset,count:null!==(t=e.config.limit)&&void 0!==t?t:50}:{offset:0,count:null!==(r=e.limit)&&void 0!==r?r:50}}_convertResponseToQueryToken(e,t){var r,i,n=e instanceof p.yt?e.config:e,a=null!==(i=null===(r=t.data.songs)||void 0===r?void 0:r.map(e=>(0,s.y3)(e)))&&void 0!==i?i:[],o=e instanceof p.yt?e.offset:0,c=t.data.has_more,u=o+a.length;return(0,p.ib)(n,{list:a},{hasMore:c,offset:u})}get _api(){return"".concat(c._L.getVar("web_domain")).concat(m.J.GET_RECOMMEND_MUSIC)}constructor(e){this._capcutAccountService=e}}f=(0,a.gn)([(0,a.fM)(0,o.Gw),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===o.Gw?Object:o.Gw])],f)},363411:function(e,t,r){r.d(t,{I:function(){return a}});var i=r(324069),n=r(813800);class a extends i.i{parseResponseDataToResources(e){return(0,n.Fi)(e,void 0,!0)}}},497844:function(e,t,r){r.d(t,{Y:function(){return f}});var i=r(876826),n=r(85728),a=r(789786),o=r(836413),s=r(346526),c=r(636601),u=r(643590),d=r(875649),l=r(416105),p=r(243494),_=r(927457),v=r(726019),h=r(936226),g=r(813800),m=r(810413);class f{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new u.y().build(u.D),(0,d.i3)(e),(0,l.mH)(e),(0,s.V)(e),e)}return this._networkClientInstance}getAlbumSongs(e){var t=this;return(0,i._)(function*(){var r=e instanceof p.yt?e.config:e;try{var i,a,s=yield t._networkClient.post("".concat(t._api,"?lite_aid=").concat(m.AF),(0,n._)({id:r.id},t._getTokenParams(e))),c=Number(null!==(i=s.ret)&&void 0!==i?i:0),u=null!==(a=s.errmsg)&&void 0!==a?a:"";if(0!==c)return(0,o.wf)(null!=c?c:-1,null!=u?u:"");var d=t._convertResponseToQueryToken(e,s);return(0,o.oW)(d)}catch(e){return(0,_.m)(e,-1,"getMusicAlbums api error")}})()}_getTokenParams(e){var t,r;return(0,p.ky)(e)?{offset:e.offset,count:null!==(t=e.config.limit)&&void 0!==t?t:50}:{offset:0,count:null!==(r=e.limit)&&void 0!==r?r:50}}_convertResponseToQueryToken(e,t){var r,i,n=e instanceof p.yt?e.config:e,a=null!==(i=null===(r=t.data.songs)||void 0===r?void 0:r.map(e=>(0,g.y3)(e)))&&void 0!==i?i:[],o=e instanceof p.yt?e.offset:0,s=t.data.has_more,c=o+a.length;return(0,p.ib)(n,{list:a},{hasMore:s,offset:c})}get _api(){return"".concat(c._L.getVar("web_domain")).concat(v.J.GET_COLLECTION_SONGS)}constructor(e){this._capcutAccountService=e}}f=(0,a.gn)([(0,a.fM)(0,h.Gw),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===h.Gw?Object:h.Gw])],f)},374152:function(e,t,r){r.d(t,{S:function(){return n}});var i,n=((i={})[i.music=0]="music",i[i.audioEffect=1]="audioEffect",i)},477358:function(e,t,r){r.d(t,{N:function(){return C}});var i=r(876826),n=r(85728),a=r(789786),o=r(836413),s=r(346526),c=r(636601),u=r(643590),d=r(875649),l=r(416105),p=r(243494),_=r(119850),v=r(927457),h=r(884038),g=r(936226),m=r(813800),f=r(374152),y=r(897727);class C{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new u.y().build(u.D),(0,d.i3)(e),(0,l.mH)(e),(0,s.V)(e),e)}return this._networkClientInstance}searchSongs(e){var t=this;return(0,i._)(function*(){var r=e instanceof p.yt?e.config:e;try{var i,a,s=yield t._networkClient.post(t._api,(0,n._)({app_id:_.kJ,region:t._capcutAccountService.userProfile.region,search_song_type:t._searchSongType,keyword:r.query},t._getTokenParams(e)),{withCredentials:!0}),c=Number(null!==(i=s.ret)&&void 0!==i?i:0),u=null!==(a=s.errmsg)&&void 0!==a?a:"";if(0!==c)return(0,o.wf)(null!=c?c:-1,null!=u?u:"");var d=t._convertResponseToQueryToken(e,s);return(0,o.oW)(d)}catch(e){return(0,v.m)(e,-1,"getMusicAlbums api error")}})()}_getTokenParams(e){var t,r;return(0,p.ky)(e)?{offset:e.offset,count:null!==(t=e.config.limit)&&void 0!==t?t:50,search_id:e.searchId}:{offset:0,count:null!==(r=e.limit)&&void 0!==r?r:50}}_convertResponseToQueryToken(e,t){var r,i,n=e instanceof p.yt?e.config:e,a=this._searchSongType===f.S.music?y.g.Song:y.g.AudioEffect,o=null!==(i=null===(r=t.data.songs)||void 0===r?void 0:r.map(e=>(0,m.y3)(e,a)))&&void 0!==i?i:[],s=t.data.has_more,c=t.data.new_cursor;return(0,p.ib)(n,{list:o,relatedWords:t.data.related_words},{hasMore:s,offset:c,searchId:t.data.search_id,requestId:t.log_id})}get _api(){return"".concat(c._L.getVar("web_domain")).concat(h.J.SEARCH_SONGS)}constructor(e,t){this._searchSongType=e,this._capcutAccountService=t}}C=(0,a.gn)([(0,a.fM)(1,g.Gw),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===f.S?Object:f.S,void 0===g.Gw?Object:g.Gw])],C)},699137:function(e,t,r){r.d(t,{b:function(){return i}});var i={GET_PANEL:"/mweb/v1/get_panel_info",GET_RESOURCE_BY_CATEGORY:"/mweb/v1/feed",GET_WORK_DETAIL:"/mweb/v1/get_item_info"}},968035:function(e,t,r){r.d(t,{V:function(){return m}});var i=r(876826),n=r(85728),a=r(789786),o=r(836413),s=r(150615),c=r(346526),u=r(643590),d=r(416105),l=r(875649),p=r(927457),_=r(699137),v=r(442452),h=r(917598),g=r(280166);class m{getCategories(){var e=this;return(0,i._)(function*(){var t=(0,n._)({panel:e.getPanelType()},e.buildCustomRequest());try{var r,i,a=yield e._networkClient.post(e._getResourcesApi,t),s=Number(null!==(r=a.ret)&&void 0!==r?r:0),c=null!==(i=a.errmsg)&&void 0!==i?i:"";if(0!==s)return(0,o.wf)(null!=s?s:-1,null!=c?c:"");return(0,o.oW)({list:a.data.category_list})}catch(e){return(0,p.m)(e,-1,"[] getResources api error")}})()}get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e={ch:this._environmentService.isDev?"local_test":"online"},t=new u.y().build({headers:(0,n._)({"Content-Type":"application/json","Device-Type":"web","app-sdk-version":h.wQ,lan:s.ZP.language},e),withCredentials:!0}),(0,d.mH)(t),(0,l.i3)(t),(0,c.V)(t),t)}return this._networkClientInstance}get _getResourcesApi(){return this._httpApiSettingService.getRequestURL({domainType:v.Y.DEFAULT,path:_.b.GET_PANEL})}buildCustomRequest(){return{}}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}m=(0,a.gn)([(0,a.fM)(0,v.x),(0,a.fM)(1,g.Y),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===v.x?Object:v.x,void 0===g.Y?Object:g.Y])],m)},807744:function(e,t,r){r.d(t,{DP:function(){return a},HI:function(){return n},bl:function(){return i}});var i={GET_CATEGORY_BY_PANEL:"/artist/v1/panel/get_panel_info",GET_RECOMMENDS:"/artist/v1/effect/ccweb/feed",GET_CATEGORY_RESOURCE:"/artist/v1/effect/get_resources_by_category_id",GET_SEARCH_WORDS:"/artist/v1/effect/get_search_words",GET_SUGGEST_WORDS:"/artist/v1/effect/get_suggest_words",SEARCH:"/artist/v1/effect/search",SEARCH_FROM_TUCHONG:"/artist/v1/library/tuchong/search",BATCH_GET_RESOURCES_BY_ID:"/artist/v1/effect/mget_artist_item",BATCH_GET_TUCHONG_RESOURCES_BY_ID:"/artist/v1/effect/mget_item",GET_ADOBE_PHOTO_BY_ID:"/artist/v1/effect/mget_item",GET_THIRD_PARTY_RESOURCES_BY_ID:"/artist/v1/effect/mget_item",ORDER:"/artist/v1/library/tuchong/order",GET_COLLECTIONS:"/artist/v1/effect/user_favorite_list",BATCH_FAVORITE:"/artist/v1/effect/batch_favorite",BATCH_UNFAVORITE:"/artist/v1/effect/batch_unfavorite",GET_SIMILARITIES:"/artist/v1/effect/get_recommend_items",COPYRIGHT_TIPS:"/artist/v1/effect/copyright_tips",GET_HOMEPAGE_EFFECT_LIST:"/artist/v1/homepage/get_effect_list",POST_EFFECT:"/artist/v1/post/effect",GET_RECENT_RESOURCE_BY_PANEL:"/lv/v1/editor/effect/recent_list",ADD_RECENT_RESOURCE:"/lv/v1/editor/use_report"},n="11.0.0",a="web"},405151:function(e,t,r){r.d(t,{B:function(){return k}});var i=r(876826),n=r(85728),a=r(929753),o=r(789786),s=r(490165),c=r(636601),u=r(643590),d=r(875649),l=r(243494),p=r(927457),_=r(836413),v=r(346526),h=r(807744),g=r(12939),m=r(150615),f=r(835993),y=r(275646),C=r(343638),w=r(649337),I=r(969015),S=r(627176),b=r(557343),T=r(892611),R=r(503006);class k{shouldUseRace(){return!1}get _networkClient(){if(!this._networkClientInstance){var e=function(e){var{addBusinessPlugins:t}=e,r=new u.y().build(u.D);return t(r,[S.U.Preload]),(0,d.i3)(r),(0,v.V)(r),r}(this._clientPluginService);this._networkClientInstance=this.shouldUseRace()?(0,T.d)(e,this._storageService,this._accountService.uniqueId,this._configurationService.disableRequestCache):(0,T.D)(e,this._storageService,this._accountService.uniqueId,this._configurationService.disableRequestCache)}return this._networkClientInstance}setFixedRegion(e){this._fixedRegion=e}getResources(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,i._)(function*(){var i=Date.now(),a=e instanceof l.yt?e.config:e;try{var o,s,c,u,d,v,f=yield r._convertParamsToRequest(e,t),y=r._configurationService.getAppConfigurationValue("heycanDataService.fixedRegion")||r._fixedRegion,C=(0,g._)(null!==(o=null!=y?y:r._accountService.userProfile.region)&&void 0!==o?o:"",m.ZP.language,a.sdkVersion,a.appID,!!y,a.bizId),w=yield r._networkClient.postWithCache(r.getResourcesApi,f,{params:(0,n._)({},C.params,r.buildCustomRequestParams()),withCredentials:C.withCredentials}),I=Number(null!==(s=w.ret)&&void 0!==s?s:0),S=null!==(c=w.errmsg)&&void 0!==c?c:"";try{null===(v=r._slardarAdapterService)||void 0===v||v.sendEvent("vimo_material_fetch_result",{path:h.bl.GET_CATEGORY_RESOURCE,ret:String(I),msg:S,category_id:String(a.category),category_key:a.category_key||"",panel:r.resourcePanelType,logid:w.logid,detailCount:null===(d=w.data)||void 0===d?void 0:null===(u=d.effect_item_list)||void 0===u?void 0:u.length,duration:Date.now()-i})}catch(e){console.error("_slardarAdapterService error",e)}if(0!==I)return(0,_.wf)(null!=I?I:-1,null!=S?S:"");var b=e instanceof l.yt?e.config:e,T=r._convertResponseToQueryToken(b,w);return(0,_.oW)(T)}catch(e){var R,k,E=(0,p.m)(e,-1,"".concat(r.resourcePanelType," getResources api error: ").concat(null==e?void 0:e.message));console.error("BaseGetResourcesByCategoryRepository getResources error",e);try{null===(k=r._slardarAdapterService)||void 0===k||k.sendEvent("vimo_material_fetch_result",{path:h.bl.GET_CATEGORY_RESOURCE,category_id:String(a.category),category_key:a.category_key||"",ret:String(E.code),logid:null===(R=E.cause)||void 0===R?void 0:R.logid,msg:E.msg,panel:r.resourcePanelType,duration:Date.now()-i})}catch(e){console.error("_slardarAdapterService error",e)}return E}})()}get skipSingleDataParseError(){return!1}get defaultQueryToken(){return{offset:0,count:50}}buildCustomRequest(e){return{}}buildCustomRequestParams(){return{}}_convertParamsToRequest(e,t){var r=this;return(0,i._)(function*(){var i,a,o=e instanceof l.yt?e.config:e,s=r.buildCustomRequest(o),c=t?{}:yield r.buildCustomFilterParams(o),u=(0,l.ky)(e)?{count:null!==(i=e.config.limit)&&void 0!==i?i:50,offset:null!==(a=e.offset)&&void 0!==a?a:0}:(0,n._)({},r.defaultQueryToken,e.limit?{count:e.limit}:void 0);return(0,n._)({panel:r.resourcePanelType},c,s,u)})()}_convertResponseListToResourceList(e){return e.map(e=>{var t=(0,a._)((0,n._)({},e),{panel:this.resourcePanelType});if(!this.skipSingleDataParseError)return this.parseHeycanResponseDataToResources(t);try{return this.parseHeycanResponseDataToResources(t)}catch(e){return console.error("".concat(this.resourceType," parse error:"),e),null}}).filter(Boolean)}_convertResponseToQueryToken(e,t){var r=this._convertResponseListToResourceList(t.data.effect_item_list),i=t.data.next_offset,n=t.data.has_more;return(0,l.ib)(e,{list:r},{hasMore:n,offset:i})}get getResourcesApi(){return"".concat(c._L.getVar("web_domain")).concat(h.bl.GET_CATEGORY_RESOURCE)}_getWhiteUserPermission(){var e=this;return(0,i._)(function*(){if(!e._accountService.hasLogin)return!1;var[t,r]=(yield e._userPermissionDataService.getUserPermission({})).pair();return!t&&!!r.publishWebTemplatePermission||!1})()}buildCustomFilterVipParams(){var e=this;return(0,i._)(function*(){var t=yield e._getWhiteUserPermission();return!e._configurationService.getAppConfigurationValue("vip.disableFilter")&&(yield(0,y.g)(t,e.resourceType))?{filter_paid_type:[C.mT.Subscribe]}:{}})()}buildCustomFilterOtherParams(e){return{}}buildCustomFilterParams(e){var t=this;return(0,i._)(function*(){var r=yield t.buildCustomFilterVipParams(),i=t.buildCustomFilterOtherParams(e),a=(0,n._)({},r,i);return Object.keys(a).length>0?{filter_optional:(0,n._)({},a)}:{}})()}constructor(e,t,r,i,n,a,o){this._accountService=e,this._userPermissionDataService=t,this._effectAbTestService=r,this._configurationService=i,this._slardarAdapterService=n,this._clientPluginService=a,this._storageService=o}}k=(0,o.gn)([(0,o.fM)(0,s.D),(0,o.fM)(1,w.c),(0,o.fM)(2,f.c),(0,o.fM)(3,I.Ui),(0,o.fM)(4,b.L),(0,o.fM)(5,S.a),(0,o.fM)(6,R.U),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===s.D?Object:s.D,void 0===w.c?Object:w.c,void 0===f.c?Object:f.c,void 0===I.Ui?Object:I.Ui,void 0===b.L?Object:b.L,void 0===S.a?Object:S.a,void 0===R.U?Object:R.U])],k)},598506:function(e,t,r){r.d(t,{T:function(){return h}});var i=r(876826),n=r(85728),a=r(789786),o=r(836413),s=r(346526),c=r(636601),u=r(643590),d=r(12939),l=r(150615),p=r(936226),_=r(807744),v=r(52409);class h{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new u.y().build(u.D),(0,s.V)(e),e)}return this._networkClientInstance}order(e){var t=this;return(0,i._)(function*(){try{var r,i,n=t._convertRequest(e),a=yield t._networkClient.post(t._api,n,(0,d._)(t._accountService.userProfile.region,l.ZP.language)),s=Number(null!==(r=a.data.ret)&&void 0!==r?r:0),c=null!==(i=a.data.errmsg)&&void 0!==i?i:"";if(0!==s)return(0,o.wf)(v.D.OrderFailedFE,"order failed ".concat(e.id),{code:s,message:c,logid:a.data.log_id});return t._convertResponse(a.data,e)}catch(t){return(0,o.wf)(v.D.OrderFailedFE,"order failed ".concat(e.id),{code:-1,message:"string"==typeof t?t:"order api error",logid:""})}})()}buildCustomRequest(e){return{}}_convertRequest(e){return(0,n._)({items:[{id:e.id,effect_type:this.effectType,source:this.effectSource}],scene:this.scene},this.buildCustomRequest(e))}_convertResponse(e,t){var r;return(null===(r=e.data.origin_resource)||void 0===r?void 0:r[t.id])?(0,o.oW)({url:e.data.origin_resource[t.id]}):(0,o.wf)(v.D.OrderFailedFE,"order failed ".concat(t.id),{code:Number(e.ret),message:e.errmsg,logid:e.log_id})}get _api(){return"".concat(c._L.getVar("web_domain")).concat(_.bl.ORDER)}constructor(e){this._accountService=e}}h=(0,a.gn)([(0,a.fM)(0,p.Gw),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===p.Gw?Object:p.Gw])],h)},389633:function(e,t,r){r.d(t,{g:function(){return o}});var i=r(636601),n=r(807744),a=r(553247);class o extends a.d{get _searchApi(){return"".concat(i._L.getVar("web_domain")).concat(n.bl.SEARCH_FROM_TUCHONG)}}},666565:function(e,t,r){r.d(t,{n:function(){return g}});var i=r(876826),n=r(85728),a=r(789786),o=r(936226),s=r(636601),c=r(643590),u=r(875649),d=r(927457),l=r(836413),p=r(346526),_=r(807744),v=r(12939),h=r(150615);class g{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new c.y().build(c.D),(0,u.i3)(e),(0,p.V)(e),e)}return this._networkClientInstance}batchGetResources(e){var t=this;return(0,i._)(function*(){try{var r,i,n=yield t._networkClient.post(t._batchGetResourcesApi,t._convertParamsToRequest(e),(0,v._)(t._accountService.userProfile.region,h.ZP.language,void 0,e.appId?Number(e.appId):void 0,void 0,e.bizId)),a=Number(null!==(r=n.ret)&&void 0!==r?r:0),o=null!==(i=n.errmsg)&&void 0!==i?i:"";if(0!==a)return(0,l.wf)(null!=a?a:-1,null!=o?o:"");var s=t._convertResponseToResourcesData(e,n);return(0,l.oW)(s)}catch(e){return(0,d.m)(e,-1,"[".concat(t.resourceType,"] batchGetResources api error"))}})()}buildCustomRequest(e){return{}}_convertParamsToRequest(e){var t={id_list:e.resourceIds},r=this.buildCustomRequest(e);return(0,n._)({},t,r)}_convertResponseToResourcesData(e,t){return{list:t.data.effect_item_list.map(e=>this.parseHeycanResponseDataToResources(e))}}get _batchGetResourcesApi(){return"".concat(s._L.getVar("web_domain")).concat(_.bl.BATCH_GET_RESOURCES_BY_ID)}constructor(e){this._accountService=e}}g=(0,a.gn)([(0,a.fM)(0,o.Gw),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===o.Gw?Object:o.Gw])],g)},12939:function(e,t,r){r.d(t,{_:function(){return o}});var i=r(119850),n=r(807744),a=r(589214);function o(e,t,r,o,s,c){var u,{searchParams:d}=new URL(window.location.href),l=d.get("__local_test__")?"local_test":"online",p=null!==(u=d.get("aid"))&&void 0!==u?u:i.kJ;return{params:{aid:null!=o?o:p,version_name:null!=r?r:a.f4,version_code:n.HI,sdk_version:null!=r?r:a.f4,effect_sdk_version:null!=r?r:a.f4,device_platform:n.DP,region:e,language:t,device_type:"web",channel:l,use_region:s?1:void 0,biz_id:c},withCredentials:!0}}},514689:function(e,t,r){r.d(t,{bl:function(){return i}});var i={GET_CATEGORY_BY_PANEL:"/lv/v1/effect/get_panel_info",GET_RESOURCES_BY_CATEGORY:"/lv/v1/effect/get_category_effects",GET_RESOURCE_BY_ID:"/lv/v1/effect/batch_by_resource",GET_RECENT_RESOURCE_BY_PANEL:"/lv/v1/editor/effect/recent_list",ADD_RECENT_RESOURCE:"/lv/v1/editor/use_report",SEARCH:"/lv/v1/effect/search",GET_TAG_TREE:"/lv/v1/effect/get_tag_tree"}},343695:function(e,t,r){r.d(t,{L:function(){return R}});var i=r(876826),n=r(85728),a=r(929753),o=r(789786),s=r(936226),c=r(636601),u=r(643590),d=r(875649),l=r(243494),p=r(927457),_=r(836413),v=r(346526),h=r(514689),g=r(150615),m=r(969015),f=r(294202),y=r(503006),C=r(892611),w=r(319909),I=r(280166),S=r(589214),b=r(627176),T=r(947605);class R{shouldUseRace(){return!1}get _networkClient(){if(!this._networkClientInstance){var e=function(e){var{addBusinessPlugins:t}=e,r=new u.y().build(u.D);return t(r,[b.U.Preload]),(0,d.i3)(r),(0,v.V)(r),r}(this._clientPluginService);this._networkClientInstance=this.shouldUseRace()?(0,C.d)(e,this._storageService,this._accountService.uniqueId,this._configurationService.disableRequestCache):(0,C.D)(e,this._storageService,this._accountService.uniqueId,this._configurationService.disableRequestCache)}return this._networkClientInstance}getCategories(e){var t=this;return(0,i._)(function*(){var r=e instanceof l.yt?e.config:e;try{var i=t.convertGetResourceCategoriesParamsToRequest(e),n=yield t._doGetCategories(i);if(!n.ok)return n;var a=t._convertGetResourceCategoriesResponseToQueryToken(r,n.value),o=yield t.filterResources(a);return(0,_.oW)(o)}catch(e){return(0,p.m)(e,-1,"getCategories by panel api error")}})()}filterResources(e){return Promise.resolve(e)}_doGetCategories(e){var t=this;return(0,i._)(function*(){var r,i,n=yield t._networkClient.postWithCache(t._api,e,{withCredentials:!0}),a=null===(r=n.BaseResp)||void 0===r?void 0:r.StatusCode,o=null===(i=n.BaseResp)||void 0===i?void 0:i.StatusMessage;return 0!==a?(0,_.wf)(null!=a?a:-1,null!=o?o:"do getCategories error"):(0,_.oW)(n)})()}convertGetResourceCategoriesParamsToRequest(e){var t,r,i=e instanceof l.yt?e.config:e,o=this._configurationService.abTestManager.getBooleanAbTestValue(w.o.NewTransitionEffectEnabled),s=this._environmentService.isAutoTest||o?f.Nb.New:f.Nb.Old,c={panel:i.panel||this._configurationService.resourcePanel[this.resourceType],appVersion:this._environmentService.appVersion,sdkVersion:null!==(t=i.sdkVersion)&&void 0!==t?t:S.f4,lang:g.ZP.language,hasCategoryEffects:!1,only_commercial:i.onlyCommercial,cc_web_version:s};void 0!==i.polyConfig&&(c.detail_count_cut=!0,c.category_count=i.polyConfig.categoryCount,c.detail_count=i.polyConfig.detailCount);var u=this.buildCustomRequest(i),{limit:d,offset:p}=(0,l.ky)(e)?(0,a._)((0,n._)({},e.config.limit?{limit:e.config.limit}:void 0),{offset:null!==(r=e.offset)&&void 0!==r?r:0}):(0,n._)({},this.defaultQueryToken,e.limit?{limit:e.limit}:void 0);return(0,a._)((0,n._)({},c,u,d?{limit:d}:void 0),{sortingPosition:p})}get defaultQueryToken(){return{offset:0}}buildCustomRequest(e){return{}}parseDetailToResources(e){return{}}parseResultToCategories(e){return e.CategoryList.map(T.F)}get _api(){return"".concat(c._L.getVar("web_domain")).concat(h.bl.GET_CATEGORY_BY_PANEL)}_convertGetResourceCategoriesResponseToQueryToken(e,t){var r=this.parseResultToCategories(t.data),i=r.reduce((e,r)=>{var i,n,a,o,s=null==t?void 0:null===(n=t.detail_info)||void 0===n?void 0:null===(i=n[r.key])||void 0===i?void 0:i.CategoryEffects;return s&&(e[r.id]={list:null!==(o=null===(a=s.Effects)||void 0===a?void 0:a.map(e=>this.parseDetailToResources(e)))&&void 0!==o?o:[],hasMore:s.HasMore,offset:s.Cursor}),e},{}),{HasMore:n,SortingPosition:a}=t.data.CategoryEffects;return(0,l.ib)(e,{list:r,details:i},{hasMore:n,offset:a})}constructor(e,t,r,i,n){this._accountService=e,this._configurationService=t,this._storageService=r,this._environmentService=i,this._clientPluginService=n}}R=(0,o.gn)([(0,o.fM)(0,s.Gw),(0,o.fM)(1,m.Ui),(0,o.fM)(2,y.U),(0,o.fM)(3,I.Y),(0,o.fM)(4,b.a),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===s.Gw?Object:s.Gw,void 0===m.Ui?Object:m.Ui,void 0===y.U?Object:y.U,void 0===I.Y?Object:I.Y,void 0===b.a?Object:b.a])],R)},649337:function(e,t,r){r.d(t,{c:function(){return i}});var i=(0,r(971245).yh)("user-permission-data-service")},275646:function(e,t,r){r.d(t,{g:function(){return d}});var i,n=r(876826),a=r(23426),o=r(474956),s=[o._g.SubtitleTemplate,o._g.TextTemplate,o._g.TextPreset,o._g.Sticker,o._g.Effects,o._g.Filter,o._g.Transition,o._g.Tone,o._g.TextMotion,o._g.Video,o._g.VoiceChange,o._g.VideoMotion,o._g.AutoBeautyBody,o._g.AutoBeautyFace,o._g.AutoBeautyMakeup,o._g.AutoBeautyShape,o._g.TextGlow],c=[o._g.TextGlow],u=!0;var d=(i=(0,n._)(function*(e,t){if(e||t&&c.includes(t))return!1;u&&performance.mark("REGION_CHECK_START");var r=yield a._c.isAllow({scene:a.SA.common});return u&&performance.measure("REGION_CHECK","REGION_CHECK_START"),u=!1,!(r&&(!t||s.includes(t)))&&!0}),function(e,t){return i.apply(this,arguments)})},916072:function(e,t,r){r.d(t,{n:function(){return g}});var i=r(876826),n=r(789786),a=r(836413),o=r(346526),s=r(643590),c=r(875649),u=r(416105),d=r(119850),l=r(927457),p=r(602040),_=r(936226),v=r(295141),h=r(442452);class g{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.y().build(s.D),(0,c.i3)(e),(0,u.mH)(e),(0,o.V)(e),e)}return this._networkClientInstance}get _api(){return this._httpApiSettingService.getRequestURL({domainType:h.Y.DEFAULT,path:p.b.GET_EVERCLOUD_TOKEN})}getEvercloudToken(){var e=this;return(0,i._)(function*(){try{var t,r=yield e._networkClient.post(e._api,{app_id:d.kJ,region:e._capcutAccountService.region},{withCredentials:!0});if("0"!==r.ret)return(0,a.wf)(Number(r.ret),null!==(t=r.errmsg)&&void 0!==t?t:"");return(0,a.oW)((0,v.M)(r))}catch(e){return(0,l.m)(e,-1,"getEvercloudToken api error")}})()}constructor(e,t){this._capcutAccountService=e,this._httpApiSettingService=t}}g=(0,n.gn)([(0,n.fM)(0,_.Gw),(0,n.fM)(1,h.x),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===_.Gw?Object:_.Gw,void 0===h.x?Object:h.x])],g)},174950:function(e,t,r){r.d(t,{K:function(){return i}});var i={getUploadToken:"/artist/v2/tools/get_upload_token"}},149350:function(e,t,r){r.d(t,{G:function(){return s}});var i=r(473829),n=r(643590),a=r(875649),o=r(346526);function s(){var e=new n.y().build(n.D);return(0,a.i3)(e),(0,o.V)(e),(0,i.V)(e,{appVersion:""}),e}},102745:function(e,t,r){r.d(t,{z:function(){return c}});var i=r(876826),n=r(789786),a=r(836413),o=r(63187),s=r(442452);class c{getImageXToken(e){var t=this;return(0,i._)(function*(){try{var r=yield t._repository.getImageXToken(e);return(0,a.oW)(r)}catch(e){return(0,a.wf)(-1,"data-service getImageXToken api failed")}})()}constructor(e){this._httpApiSettingService=e,this._repository=new o.c(this._httpApiSettingService)}}c=(0,n.gn)([(0,n.fM)(0,s.x),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.x?Object:s.x])],c)},149478:function(e,t,r){r.d(t,{v:function(){return o}});var i=r(85728),n=r(929753),a=r(229025),o=e=>{var t,r,o,s=(0,a.Qd)(e.createdTime);return(0,n._)((0,i._)({},e),{id:null!==(o=null!==(r=e.submitId)&&void 0!==r?r:null===(t=e.task)||void 0===t?void 0:t.submitId)&&void 0!==o?o:"",createdTime:s,sortCreateTime:s,taskRets:e.taskRets?e.taskRets.map(e=>(0,n._)((0,i._)({},e),{imageInfo:e.imageInfo?(0,n._)((0,i._)({},e.imageInfo),{aigcImage:e.imageInfo.aigcImage?(0,n._)((0,i._)({},e.imageInfo.aigcImage),{aigcImageParams:e.imageInfo.aigcImage.aigcImageParams?(0,n._)((0,i._)({},e.imageInfo.aigcImage.aigcImageParams),{text2videoParams:void 0,blendParams:void 0}):void 0}):void 0}):void 0})):void 0})}},818292:function(e,t,r){r.d(t,{B:function(){return n}});var i,n=((i={})[i.All=1]="All",i[i.Generate=2]="Generate",i[i.SuperResolution=3]="SuperResolution",i[i.Text2Video=4]="Text2Video",i[i.Avatar2Video=5]="Avatar2Video",i[i.VideoBGM=6]="VideoBGM",i[i.GenerateAudio=7]="GenerateAudio",i[i.VideoAudioEffect=8]="VideoAudioEffect",i)},562778:function(e,t,r){r.d(t,{S:function(){return v}});var i=r(876826),n=r(789786),a=r(836413),o=r(346526),s=r(643590),c=r(416105),u=r(875649),d=r(927457),l=r(804883),p=r(442452),_=r(280166);class v{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,c.mH)(e),(0,u.i3)(e),(0,o.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:p.Y.DEFAULT,path:e})}submitArtwork(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(l.b.SUBMIT_ARTWORK),e);if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.ly)()}catch(e){return(0,d.m)(e,-1,"submit artwork error")}})()}previewVideo(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(l.b.PREVIEW_VIDEO),e);if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.oW)(r.data)}catch(e){return(0,d.m)(e,-1,"preview video error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}v=(0,n.gn)([(0,n.fM)(0,p.x),(0,n.fM)(1,_.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p.x?Object:p.x,void 0===_.Y?Object:_.Y])],v)},256408:function(e,t,r){r.d(t,{D:function(){return i}});var i=(0,r(971245).yh)("competition-service")},192513:function(e,t,r){r.d(t,{n:function(){return n}});var i=r(56935),n=e=>{var t;return(0,i.ZB)(e.canvas),{id:null===(t=e.canvas)||void 0===t?void 0:t.id}}},417391:function(e,t,r){r.d(t,{JF:function(){return i}});var i=(0,r(971245).yh)("dreamina-credit-data-service")},238386:function(e,t,r){r.d(t,{n:function(){return f}});var i=r(876826),n=r(789786),a=r(836413),o=r(346526),s=r(643590),c=r(416105),u=r(875649),d=r(820266),l=r(442452),p=r(280166),_=r(240514),v=r(76252),h=r(282148),g=r(611346),m=r(150615);class f{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new s.y().build({headers:{"Content-Type":"application/json",appid:String(e),lan:m.ZP.language},withCredentials:!0}),(0,_.C)(t),(0,c.mH)(t),(0,u.i3)(t),(0,o.V)(t),t)}return this._networkClientInstance}_getApi(e){var t="".concat((0,v.H)()?h.l.oversea:h.l.cn);return this._httpApiSettingService.getRequestURL({domainType:l.Y.DEFAULT,path:"".concat(t).concat(e)})}fetchCampaignDetail(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(h.b.CAMPAIGN_DETAIL),(0,d.X)(e));return(0,a.oW)((0,d.b)(r.data))}catch(e){return(0,g.q)(e)}})()}claimCampaignReward(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(h.b.CLAIM_REWARD),(0,d.X)(e));return(0,a.oW)((0,d.b)(r.data))}catch(e){return(0,g.q)(e)}})()}fetchFissionDetail(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.get(t._getApi(h.b.FISSION_DETAIL),{params:(0,d.X)(e)});return(0,a.oW)((0,d.b)(r.data))}catch(e){return(0,g.q)(e)}})()}resumeInviteCode(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(h.b.RESUME_INVITE_CODE),(0,d.X)(e));return(0,a.oW)((0,d.b)(r.data))}catch(e){return(0,g.q)(e)}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}f=(0,n.gn)([(0,n.fM)(0,l.x),(0,n.fM)(1,p.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===l.x?Object:l.x,void 0===p.Y?Object:p.Y])],f)},564992:function(e,t,r){r.d(t,{b:function(){return i}});var i={MARK_FAVORITE:"/mweb/v1/mark_favorite",GET_FAVORITE_LIST:"/mweb/v1/get_favorite_list",GET_VIDEO_DETAIL:"/mweb/v1/get_item_info",TTS_GENERATE:"/mweb/v1/tts_generate",GET_SHORT_VIDEO_RESOURCE_BY_CATEGORY:"/mweb/v1/feed_short_video",GET_RECOMMEND_SHORT_VIDEO_RESOURCE_BY_CATEGORY:"/mweb/v1/get_explore"}},91172:function(e,t,r){r.d(t,{Z:function(){return y},d:function(){return C}});var i=r(876826),n=r(789786),a=r(442452),o=r(643590),s=r(416105),c=r(875649),u=r(423719),d=r(793723),l=r(927457),p=r(836413),_=r(346526),v=r(564992),h=r(265587),g=r(599918),m=r(879976),f=r(530989),y=e=>!!e.aigc_image_params;class C{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new o.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,m.V)(e),(0,s.mH)(e),(0,c.i3)(e),(0,_.V)(e),e)}return this._networkClientInstance}fetchVideoDetail(e){var t=this;return(0,i._)(function*(){try{var r,i={published_item_id:e.publishedItemId,pack_item_opt:{need_data_integrity:!0,input_image_multi_size_conf:[20,360,720].map(e=>({width:e,height:e,format:"webp"}))}},n=yield t._networkClient.post("".concat(t._httpApiSettingService.getRequestURL({domainType:a.Y.DEFAULT,path:v.b.GET_VIDEO_DETAIL})),i);if("0"!==n.ret)return(0,p.wf)(Number(n.ret),n.errmsg);var{data:o}=n,s=n.cache_sync_token,c=null!==(r=n.logid)&&void 0!==r?r:n.log_id;if(s&&c&&n.data){var _=yield f.Li.decryptIV(s,c);yield(0,u.dI)(f.Li.decrypt.bind(f.Li),n.data,_)}var m=yield f.sn.getSignOptions();if((0,d.kh)(f.sn.sign.bind(f.sn),n.data,m),y(o))return(0,p.oW)((0,h.Q)(o));return(0,p.oW)((0,g.g)(o))}catch(e){return(0,l.m)(e,-1,"fetch video detail error")}})()}constructor(e){this._httpApiSettingService=e}}C=(0,n.gn)([(0,n.fM)(0,a.x),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===a.x?Object:a.x])],C)},32184:function(e,t,r){r.d(t,{K:function(){return g}});var i=r(876826),n=r(789786),a=r(836413),o=r(346526),s=r(643590),c=r(416105),u=r(875649),d=r(927457),l=r(280166),p=r(442452),_=r(282473),v=r(596220),h=r(879976);class g{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,h.V)(e),(0,c.mH)(e),(0,u.i3)(e),(0,o.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:p.Y.DEFAULT,path:e})}fetchUserBlockConfig(){var e=this;return(0,i._)(function*(){try{var t=e._environmentService.appId,r=yield e._networkClient.get(e._getApi(v.bl.GET_INVITED_STATUS),{params:{aid:t,scene:0}});if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.oW)(e._formatServerResp(r.data))}catch(e){return(0,d.m)(e,-1,"fetch user invited status error")}})()}_formatServerResp(e){return{[_.j.DreaminaImage]:this._createModuleConfig(_.j.DreaminaImage,e.invited_status_map[_.j.DreaminaImage])}}_createModuleConfig(e,t){var r;return{invitedStatus:(null==t?void 0:t.invited_status)===1?_.f.invited:_.f.notInvited,regionBlock:null===(r=null==t?void 0:t.region_block)||void 0===r||r}}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}g=(0,n.gn)([(0,n.fM)(0,p.x),(0,n.fM)(1,l.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p.x?Object:p.x,void 0===l.Y?Object:l.Y])],g)},494050:function(e,t,r){r.d(t,{b:function(){return i}});var i={GET_STORY_LIST:"/mweb/v1/get_user_story_list",CREATE_STORY:"/mweb/v1/create_story",UPDATE_STORY:"/mweb/v1/update_story",DELETE_STORY:"/mweb/v1/delete_story",GET_STORY_BY_ID:"/mweb/v1/mget_story"}},372814:function(e,t,r){r.d(t,{t:()=>y});var i=r("876826"),n=r("85728"),a=r("929753"),o=r("295834"),s=r("789786"),c=r("836413"),u=r("346526"),d=r("643590"),l=r("904337"),p=r("416105"),_=r("875649"),v=r("820266"),h=r("927457"),g=r("442452"),m={GENERATE_TEXT_ART:"/mweb/v1/submit_ai_creative_font",QUERY_TEXT_ART_ITEMS:"/mweb/v1/query_ai_creative_font",QUERY_TEXT_ART_GENERATION_TASK:"/mweb/v1/query_ai_font_task"},f=()=>{var e=new d.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0});return(0,l.$)(e),(0,p.mH)(e),(0,_.i3)(e),(0,u.V)(e),e};class y{get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=f()),this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:g.Y.DEFAULT,path:e})}_getTextArtGenerationData(e){if("itemId"in e){var{text:t,originalText:r,itemId:i}=e;return{originalText:r,itemId:i,creativeText:{text:t}}}var{text:s,fontId:c}=e,u=(0,o._)(e,["text","fontId"]);return(0,a._)((0,n._)({},u),{creativeText:(0,n._)({text:s,mainFont:{resourceId:c,source:2}},{backupFont:{resourceId:"7384027720969097740",source:2}})})}generateTextArt(e,t){var r=this;return(0,i._)(function*(){var{signal:i}=e,n=(0,o._)(e,["signal"]);try{var a=yield r._networkClient.post(r._getApi(m.GENERATE_TEXT_ART),(0,v.X)(r._getTextArtGenerationData(n)),{signal:i,params:t});return(0,c.oW)((0,v.b)(a.data))}catch(e){return(0,h.P)(e)}})()}queryTextArtItems(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(m.QUERY_TEXT_ART_ITEMS),(0,v.X)(e));return(0,c.oW)((0,v.b)(r.data))}catch(e){return(0,h.P)(e)}})()}queryTextArtGenerationTask(e){var t=this;return(0,i._)(function*(){var{signal:r}=e,i=(0,o._)(e,["signal"]);try{var n=yield t._networkClient.post(t._getApi(m.QUERY_TEXT_ART_GENERATION_TASK),(0,v.X)(i),{signal:r});return(0,c.oW)((0,v.b)(n.data))}catch(e){return(0,h.P)(e)}})()}constructor(e){this._httpApiSettingService=e}}y=(0,s.gn)([(0,s.fM)(0,g.x),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===g.x?Object:g.x])],y)},522231:function(e,t,r){r.d(t,{J:()=>g});var i=r("876826"),n=r("789786"),a=r("836413"),o=r("346526"),s=r("643590"),c=r("107908"),u=r("416105"),d=r("875649"),l=r("820266"),p=r("927457"),_={FETCH_VIP_INFO:"/commerce/v1/subscription/user_info"},v=r("442452"),h=r("280166");class g{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new s.y().build({headers:{"Content-Type":"application/json",appid:String(e)},withCredentials:!0}),(0,c.x)(t,e),(0,u.mH)(t),(0,d.i3)(t),(0,o.V)(t),t)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:v.Y.COMMERCE,path:e})}fetchVIPInfo(e){var t=this;return(0,i._)(function*(){try{var r,i,n=yield t._networkClient.post(t._getApi(_.FETCH_VIP_INFO),(0,l.X)(e));if("0"!==n.ret)return(0,a.wf)(Number(n.ret),n.errmsg);if(n.data.current_auto_renew_plan=null===(i=n.data.auto_renew_plans)||void 0===i?void 0:null===(r=i.filter(e=>e.can_cancel))||void 0===r?void 0:r[0],n.data.current_auto_renew_plan){var o=n.data.current_auto_renew_plan;o.cycle_unit="MONTH"===o.cycle_unit&&12===o.cycle?"YEAR":o.cycle_unit}return(0,a.oW)((0,l.b)(n.data))}catch(e){return(0,p.m)(e,-1,"fetch vip info error")}})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}g=(0,n.gn)([(0,n.fM)(0,v.x),(0,n.fM)(1,h.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===v.x?Object:v.x,void 0===h.Y?Object:h.Y])],g)},401213:function(e,t,r){r.d(t,{v:function(){return i}});var i={genToken:{url:"/mweb/v1/gen_help_desk_token"}}},333581:function(e,t,r){r.d(t,{E:function(){return a},h:function(){return o}});var i=r(971245),n=r(485945),a=(0,i.yh)("mWeb-invite-service");class o{get inviteRepository(){return this._inviteRepository}constructor(){this._inviteRepository=new n.K}}},410875:function(e,t,r){r.d(t,{G:()=>u});var i=r("643590"),n=r("416105"),a=r("804274"),o=r("240514"),s=r("76252"),c=r("774449");function u(){var e=new i.y().build({baseURL:"".concat((0,s.H)()?c.q.oversea:c.q.cn),headers:{"Content-Type":"application/json"},withCredentials:!0});return(0,n.mH)(e),(0,o.C)(e),(0,a.xP)(e),!function(e){e.interceptors.response.use(e=>{if(200===e.status){var t,r=e.data;if(0===Number(null==r?void 0:r.errNo)||(null==r?void 0:null===(t=r.BaseResp)||void 0===t?void 0:t.StatusCode)===0)return Promise.resolve(null==r?void 0:r.data)}return Promise.reject(e.data)})}(e),e}},624780:function(e,t,r){r.d(t,{E:()=>C});var i=r("876826"),n=r("85728"),a=r("929753"),o=r("836413"),s=r("655901"),c=r("340733"),u=r("927457"),d=r("728521"),l=r("712942"),p=r("242089"),_=r("643590"),v=r("416105"),h=r("804274"),g=r("453604"),m=r("875649"),f=r("879976"),y=r("530989");class C{publish(e,t){var r=this;return(0,i._)(function*(){return yield r._request(e,"".concat((0,l.H4)()).concat(d.v.publish.url),t)})()}removeProduction(e,t){var r=this;return(0,i._)(function*(){var i="".concat((0,l.H4)()).concat(d.v.removeFromHomepage.url);return yield r._request(e,i,t)})()}getProduction(e,t){var r=this;return(0,i._)(function*(){var i="".concat((0,l.H4)()).concat(d.v.getItemInfo.url),o="".concat(i,"_").concat(t.publishedItemId);t.packItemOpt=(0,a._)((0,n._)({},t.packItemOpt),{needDataIntegrity:!0});var u=yield(0,p.O)(o,()=>r._request(e,i,t,{params:{needCache:!0}}));if(!u.ok)return u;var _=u.value,v=_.__cacheSyncToken,h=_.__logId;if(v){var g=yield y.Li.decryptIV(v,h);yield(0,s.B0)(y.Li.decrypt.bind(y.Li),_,g)}var m=yield y.sn.getSignOptions();return(0,c.H8)(y.sn.sign.bind(y.sn),_,m),u})()}updateProductionItem(e,t){var r="".concat((0,l.H4)()).concat(d.v.updateItem.url);return this._request(e,r,t)}markFavoriteProduction(e,t){var r=this;return(0,i._)(function*(){var i="".concat((0,l.H4)()).concat(d.v.makeFavorite.url);return yield r._request(e,i,t)})()}transferEverPhotoAssets(e,t){return this._request(e,"".concat((0,l.H4)()).concat(d.v.transferEverPhotoAssets.url),t)}_request(e,t,r,a){var s=this;return(0,i._)(function*(){try{var i=yield s._networkClient.post(t,r,(0,n._)({ctx:e},a));return(0,o.oW)(i)}catch(e){return(0,u.P)(e)}})()}constructor(){var e;this._networkClient=(e=new _.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,f.V)(e),(0,v.mH)(e),(0,h.xP)(e),(0,g.d)(e,{maxAge:36e4}),(0,m.e_)(e),e)}}},754284:function(e,t,r){r.d(t,{i:()=>h});var i=r("876826"),n=r("789786"),a=r("836413"),o=r("346526"),s=r("643590"),c=r("107908"),u=r("416105"),d=r("875649"),l=r("927457"),p=r("442452"),_=r("280166"),v={GET_SETTINGS:"/mweb/v1/get_settings",UPDATE_SETTINGS:"/mweb/v1/update_settings"};class h{getSettings(){var e=this;return(0,i._)(function*(){try{var t=yield e._networkClient.post(e._getApi(v.GET_SETTINGS));if("0"!==t.ret)return(0,a.wf)(Number(t.ret),t.errmsg);return(0,a.oW)({workSharingAllowed:t.data.user_custom_settings.work_sharing_allowed,occupationalQuestionnaire:t.data.user_custom_settings.occupational_questionnaire})}catch(e){return(0,l.P)(e)}})()}updateSettings(e){var t=this;return(0,i._)(function*(){try{var r=yield t._networkClient.post(t._getApi(v.UPDATE_SETTINGS),t._formatUpdateSettingsParams(e));if("0"!==r.ret)return(0,a.wf)(Number(r.ret),r.errmsg);return(0,a.ly)()}catch(e){return(0,l.P)(e)}})()}_formatUpdateSettingsParams(e){var{workSharingAllowed:t,occupationalQuestionnaire:r}=e;return{custom_settings:{work_sharing_allowed:t,occupational_questionnaire:r}}}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:p.Y.DEFAULT,path:e})}get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e=String(this._environmentService.appId),t=new s.y().build({headers:{"Content-Type":"application/json",appid:String(e)},withCredentials:!0}),(0,c.x)(t,e),(0,u.mH)(t),(0,d.i3)(t),(0,o.V)(t),t)}return this._networkClientInstance}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}h=(0,n.gn)([(0,n.fM)(0,p.x),(0,n.fM)(1,_.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p.x?Object:p.x,void 0===_.Y?Object:_.Y])],h)},942696:function(e,t,r){r.d(t,{b:function(){return i}});var i={GET_SHORT_LINK:"/mweb/v1/get_short_url",GET_SHORT_LINK_FOR_WORK:"/luckycat/cn/jianying/campaign/v1/get_share_resource"}},825997:function(e,t,r){r.d(t,{b:function(){return I}});var i=r(876826),n=r(85728),a=r(929753),o=r(295834),s=r(789786),c=r(836413),u=r(346526),d=r(643590),l=r(904337),p=r(416105),_=r(875649),v=r(820266),h=r(804274),g=r(927457),m=r(442452),f=r(660149),y=r(535823),C=r(879976),w=r(869919);class I{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new d.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,C.V)(e),(0,l.$)(e),(0,p.mH)(e),(0,_.i3)(e),(0,u.V)(e),e)}return this._networkClientInstance}_getApi(e){return this._httpApiSettingService.getRequestURL({domainType:m.Y.DEFAULT,path:e})}submitVideoAudioEffectTask(e,t){var r=this;return(0,i._)(function*(){try{var i=(0,n._)({scene:w.zk.AudioEffect},e),a=yield r._networkClient.post(r._getApi(f.b.VIDEO_BGM_TASK_SUBMIT),r._formatSubmitParams(i),{params:(0,n._)({},t)});if("0"!==a.ret)return(0,c.wf)(Number(a.ret),a.errmsg);return(0,c.oW)((0,y.ZF)((0,v.b)(a.data,h.zW)))}catch(e){return(0,g.P)(e)}})()}updateVideoDefaultAudioEffect(e){var t=this;return(0,i._)(function*(){try{var r=(0,n._)({scene:w.zk.AudioEffect},e),i=yield t._networkClient.post(t._getApi(f.b.UPDATE_VIDEO_DEFAULT_BGM),(0,v.X)(r));if("0"!==i.ret)return(0,c.wf)(Number(i.ret),i.errmsg);return(0,c.ly)()}catch(e){return(0,g.P)(e)}})()}_formatSubmitParams(e){var{v2vOpt:t}=e,r=(0,o._)(e,["v2vOpt"]);return(0,a._)((0,n._)({},(0,v.X)(r)),{v2v_opt:t?(0,v.X)(t):void 0})}constructor(e){this._httpApiSettingService=e}}I=(0,s.gn)([(0,s.fM)(0,m.x),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===m.x?Object:m.x])],I)},64300:function(e,t,r){r.d(t,{y:function(){return v}});var i=r(85728),n=r(929753),a=r(702095),o=r(474956),s=r(159375),c=r(33586),u=r(49364),d=r(529227),l=r(974501),p=r(592030);function _(e,t){var r,i={},n="video"===t?"player_":"audio_";return Object.entries(null!==(r=e.play_info)&&void 0!==r?r:{}).forEach(e=>{var[t,r]=e;if(t.startsWith(n)&&r){if(!(r.primary_url||r.secondary_url))return;i[t.replace(n,"")]={url:r.primary_url,backupUrl:r.secondary_url,key:r.url_key}}}),Object.keys(i).length?i:void 0}function v(e){if(e.asset_type===o.pS.Folder){;return t=e,{assetType:o.pS.Folder,assetId:t.asset_id,filename:t.filename,permissions:t.permissions,owner:t.owner,childFileNum:t.child_file_num}}var t,r,v,h,g,m,f,y,C,w,I,S,b,T,R,k,E,P,A,L,D,O,M,F,N,x,U={key:e.md5,assetType:o.pS.Material,sourceType:a.ov.EverCloud,assetId:e.asset_id,parentId:e.parent_id,filename:e.filename,fileType:a.YB.File,owner:e.owner,md5:e.md5,mime:e.mime,size:e.size,sourcePath:e.source_path,createdAt:e.create_time?new Date(e.create_time).valueOf():void 0,updatedAt:e.updated_at,url:e.origin_download_link,subType:e.sub_type,meta:e.meta},j=(0,u.m)(e.meta);if((0,c.Ml)(U)||(0,c.jL)(j))return(0,c.jL)(j)&&(U.decryptKey=null==j?void 0:j.key),U;switch(e.file_type||(0,d.Gt)(U.mime)){case a.YB.Image:;return r=e,v=U,y=(f={},Object.entries(null!==(m=null===(g=(h=r).preview_info)||void 0===g?void 0:g[0].preview_url)&&void 0!==m?m:{}).forEach(e=>{var[t,r]=e;f[t.replace("bucket_key_","")]={width:0,height:0,url:r,key:h.preview_info[0].preview_key}}),f),C=(()=>{if(null===(t=r.preview_info)||void 0===t?void 0:null===(e=t[0].preview_url)||void 0===e?void 0:e.bucket_key_360p)return{url:null===(a=r.preview_info)||void 0===a?void 0:null===(n=a[0].preview_url)||void 0===n?void 0:n.bucket_key_360p,key:null===(o=r.preview_info)||void 0===o?void 0:o[0].preview_key};var e,t,i,n,a,o,s=null===(i=Object.values(y))||void 0===i?void 0:i[0];return s?{url:s.url,key:s.key}:(0,l.i)(r.width,r.height)})(),(0,n._)((0,i._)({},v),{fileType:a.YB.Image,cover:C,width:r.width,height:r.height,isImgTranscoding:!1,imgTranscodeInfo:y});case a.YB.Video:;return w=e,I=U,O=(null===(b=w.preview_info)||void 0===b?void 0:null===(S=b[0].preview_url)||void 0===S?void 0:S.bucket_key_360p)?{url:null===(R=w.preview_info)||void 0===R?void 0:null===(T=R[0].preview_url)||void 0===T?void 0:T.bucket_key_360p,key:null===(k=w.preview_info)||void 0===k?void 0:k[0].preview_key}:(0,l.i)(w.width,w.height),M=(null===(P=w.sprite_frame)||void 0===P?void 0:null===(E=P.detail_infos)||void 0===E?void 0:E.length)?(0,s.J)(null==w?void 0:w.sprite_frame):(0,p.y)({url:null!==(L=O.url)&&void 0!==L?L:"",key:w.preview_key,width:w.width,height:w.height}),(0,n._)((0,i._)({},I),{fileType:a.YB.Video,cover:O,width:w.width,height:w.height,duration:(null!==(D=w.duration)&&void 0!==D?D:0)/1e3,isVideoTranscoding:1===w.transcode_status,isVideoCompletion:null===(A=w.filter_list)||void 0===A?void 0:A.includes(d.VW.FILM_ASSET),videoTranscodeInfo:_(w,"video"),thumb:M});case a.YB.Audio:;return F=e,N=U,(0,n._)((0,i._)({},N),{fileType:a.YB.Audio,duration:(null!==(x=F.duration)&&void 0!==x?x:0)/1e3,isAudioTranscoding:1===F.transcode_status,audioTranscodeInfo:_(F,"audio")});default:return U}}},105089:function(e,t,r){r.d(t,{h:function(){return c}});var i=r(789786),n=r(936226),a=r(721434),o=r(897727),s=r(666565);class c extends s.n{get resourceType(){return o.g.Video}parseHeycanResponseDataToResources(e){return(0,a.Mk)(e)}constructor(e){super(e),this._capcutAccountService=e}}c=(0,i.gn)([(0,i.fM)(0,n.Gw),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===n.Gw?Object:n.Gw])],c)},872478:function(e,t,r){r.d(t,{_:function(){return o}});var i=r(813605),n=r(396275),a=r(721434);class o extends i.h{get brandResourceType(){return n.Q.Video}parseResponseDataToResources(e){return(0,a.Mk)(e,!0)}}},299506:function(e,t,r){r.d(t,{w:function(){return s}});var i=r(831210),n=r(755020),a=r(721434),o=r(474956);class s extends i.L{get resourcePanelType(){return n.q.MaterialLib}get resourceType(){return o._g.Video}parseHeycanResponseDataToResources(e){return(0,a.Mk)(e)}buildCustomRequest(e){return{app_id:e.appID}}buildCustomFilterParams(){return new Promise(e=>{e({})})}}},592197:function(e,t,r){r.d(t,{U:function(){return s}});var i=r(721434),n=r(405151),a=r(474956),o=r(755020);class s extends n.B{get resourceType(){return a._g.Video}get resourcePanelType(){return o.q.Video}parseHeycanResponseDataToResources(e){return(0,i.Mk)(e)}buildCustomRequest(e){var t;return{category_id:Number(e.category),pack_optional:{need_thumb:!0,only_commercial:null!==(t=e.onlyCommercial)&&void 0!==t&&t,thumb_opt:'{"is_support_webp":1}'}}}}},280417:function(e,t,r){r.d(t,{P:function(){return u}});var i=r(85728),n=r(789786),a=r(936226),o=r(721434),s=r(897727),c=r(128581);class u extends c.i{get resourceType(){return s.g.Video}parseHeycanResponseDataToResources(e){return(0,o.Mk)(e)}buildCustomRequest(e){var t;return(0,i._)({},{pack_optional:{need_thumb:!0,only_commercial:null!==(t=e.onlyCommercial)&&void 0!==t&&t,need_contract:!0,thumb_opt:'{"is_support_webp":1}'}})}constructor(e){super(e),this._capcutAccountService=e}}u=(0,n.gn)([(0,n.fM)(0,a.Gw),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===a.Gw?Object:a.Gw])],u)},548137:function(e,t,r){r.d(t,{t:function(){return s}});var i=r(85728),n=r(897727),a=r(389633),o=r(721434);class s extends a.g{buildCustomRequest(e){return{search_option:(0,i._)({cc_web_use_new_search:!0},this._buildFilterParams(e)),pack_optional:{need_thumb:!0,thumb_opt:'{"is_support_webp":1}'}}}get resourceType(){return n.g.Video}parseHeycanResponseDataToResources(e){return(0,o.Mk)(e)}_buildFilterParams(e){var t,r,i,n={};return(null===(t=e.filters)||void 0===t?void 0:t.colors)&&(n.custom_colors=e.filters.colors.map(e=>({R:e[0],G:e[1],B:e[2]}))),(null===(r=e.filters)||void 0===r?void 0:r.aspectRatios)&&(n.custom_aspect_ratios=e.filters.aspectRatios),(null===(i=e.filters)||void 0===i?void 0:i.onlyCommercial)&&(n.filter_uncommercial=e.filters.onlyCommercial),n}}},991083:function(e,t,r){r.d(t,{Q:function(){return h}});var i=r(876826),n=r(867713),a=r(700645),o=r(806663),s=r(739092),c=r(843698),u=r(874800),d=r(378081),l=r(738409),p=r(56935),_=r(519927),v=()=>new Promise(e=>{setTimeout(e,100)});class h extends u.JT{registerPageLifecycleSignalProvider(e){this._pageLifecycleSignalProvider,this._pageLifecycleSignalProvider=e,this._store.add(this._pageLifecycleSignalProvider.onPageLoad(e=>{this._onPageLoadEmitter.fire(e),this._previousSignalDataMap[_.l.PAGE_LOAD]=e})),this._store.add(this._pageLifecycleSignalProvider.onPageIdle(e=>{this._onPageIdleEmitter.fire(e),this._previousSignalDataMap[_.l.PAGE_IDLE]=e}))}_waitForSignal(e,t,r){var{shouldReusePreviousSignal:i,once:n,predicate:a}=r,c=null;switch(e){case _.l.PAGE_LOAD:c=this._onPageLoad;break;case _.l.PAGE_IDLE:c=this._onPageIdle;break;default:(0,p.ss)("[Preload] undefined signal ".concat(e))}var u=this._previousSignalDataMap[e];return i&&u&&(!a||a(u))&&(console.log("[Preload] signal has been dispatched before",u),t(u),n)?{dispose:()=>{}}:n?a?(0,s.D)(c,a)(e=>{console.log("[Preload] begin run preload task once",e),t(e)}):(0,o.V)(c)(e=>{console.log("[Preload] begin run preload task once",e),t(e)}):c(e=>{console.log("[Preload] begin run preload task",e),t(e)})}addPreloadTask(e){var t=new d.A,{signal:r,runTask:o,predicate:s,once:c=!0,shouldReusePreviousSignal:u=!0,priorityLevel:l=n.q.IdlePriority}=e,p=this._waitForSignal(r,e=>{var r=this;(0,a.n)((0,i._)(function*(){return l===n.q.ImmediatePriority||l===n.q.UserBlockingPriority?o(e,t.token):(l===n.q.IdlePriority&&(yield v()),r._asyncQueue.addTask(t=>Promise.resolve(o(e,t)),t.token))}),{priorityLevel:l})},{once:c,shouldReusePreviousSignal:u,predicate:s});return{dispose:()=>{p.dispose(),t.cancel("Preload Task Disposed")}}}constructor(...e){super(...e),this._pageLifecycleSignalProvider=null,this._onPageLoadEmitter=new c.Q,this._onPageLoad=this._onPageLoadEmitter.event,this._onPageIdleEmitter=new c.Q,this._onPageIdle=this._onPageIdleEmitter.event,this._asyncQueue=new l.z({concurrent:3}),this._previousSignalDataMap={}}}},477134:function(e,t,r){r.r(t),r.d(t,{getTraceRetrievalTasks:()=>d.b,initLogger:()=>c,finishRetrievalTask:()=>d.l,init:()=>u});var i=r("477099"),n=r("557679"),a=r("956417"),o=r("480277");let s=new Map;function c(e){let t=function(){try{return i.Z.getConfig()}catch(e){return console.error("[local logger] get tea config fail:",e),{}}}(),r=t.header?.app_id;if(!r)throw Error("invalid tea app id");let{region:c,store_name:u}=e,d=u||"__local_logger",l=s.get(d);if(l)return l;let p=new n.Yd(d,f),_=new o.m({region:c});s.set(d,p),console.log(`[local logger] init: { app_id: ${r}, region: '${c}' }`),p.on("success",e=>_.reportDetail(e)),p.on("error",function(e){let{type:t,level:a,loggerId:o,loggerIndex:s,message:c,createAt:u,...d}=e,l=v();_.reportErrorDetail({appId:r,type:t,level:a,userId:l,loggerId:o,loggerIndex:s,message:c,custom:d,createAt:u}),e.type===n.eE&&i.Z.event(n.eE,e)}),p.on("report",m),i.Z.on("submit-scuess",g),i.Z.sdkReady?h():i.Z.on("ready",h);function v(){let e=i.Z.getConfig();return e?.user?.user_unique_id}async function h(){let e=v();if(!e)return;let t=await _.getGainTaskList(e);t&&t.length&&t.forEach(e=>{p.gain({id:e._id,start:e.startTime?new Date(e.startTime):void 0,end:e.endTime?new Date(e.endTime):void 0})})}function g(e){let t=(0,a.a)(e);if(!t.length)return;let i=v();t.forEach(e=>{e.loggerIds.forEach(t=>{p.emit("success",{type:e.type,appId:r,userId:i,loggerId:t,events:e.events,startTime:e.startTime,endTime:e.endTime})}),"gain"===e.type&&(e.id?_.updateGainTask({id:e.id,userId:i}):_.updateGainTask({userId:i,startTime:p.getExpireTime(),endTime:Date.now()}))})}async function m(e){let{ids:t,events:r}=(0,a.H)(e);if(!r.length)return g({eventData:[]});i.Z.event(r),p.transaction("readwrite",e=>Promise.all(t.map(async t=>e.delete(t))))}async function f(e){let t=await _.saveLog(r,e);return t?t.data.key:null}return p}function u(e){return!i.Z.inited&&!function(e){let{app_id:t,region:r,config:n,...a}=e,o=parseInt(t,10),s=["cn","boe"].includes(r)?"cn":r;i.Z.init({disable_auto_pv:!0,max_report:30,reportTime:2e3,app_id:o,channel:s,channel_domain:"cn"===s?"https://mcs.zijieapi.com":void 0,enable_ttwebid:!1,enable_ab_test:!1,...a}),i.Z.config(n),i.Z.start()}(e),c(e)}var d=r("809846")},557679:function(e,t,r){let i,n;r.d(t,{Yd:()=>P,eE:()=>k,oQ:()=>R});let a=(e,t)=>t.some(t=>e instanceof t),o=new WeakMap,s=new WeakMap,c=new WeakMap,u={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return l(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){u=e(u)}function l(e){if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",n),e.removeEventListener("error",a)},n=()=>{t(l(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",n),e.addEventListener("error",a)});return c.set(t,e),t}(e);if(s.has(e))return s.get(e);let t=function(e){if("function"==typeof e){var t;return t=e,(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(p(this),e),l(this.request)}:function(...e){return l(t.apply(p(this),e))}}return(e instanceof IDBTransaction&&!function(e){if(o.has(e))return;let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",a),e.removeEventListener("abort",a)},n=()=>{t(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",n),e.addEventListener("error",a),e.addEventListener("abort",a)});o.set(e,t)}(e),a(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,u):e}(e);return t!==e&&(s.set(e,t),c.set(t,e)),t}let p=e=>c.get(e),_=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],h=new Map;function g(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(h.get(t))return h.get(t);let r=t.replace(/FromIndex$/,""),i=t!==r,n=v.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(n||_.includes(r)))return;let a=async function(e,...t){let a=this.transaction(e,n?"readwrite":"readonly"),o=a.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),n&&a.done]))[0]};return h.set(t,a),a}u=(e=>({...e,get:(t,r,i)=>g(t,r)||e.get(t,r,i),has:(t,r)=>!!g(t,r)||e.has(t,r)}))(u);let m=["continue","continuePrimaryKey","advance"],f={},y=new WeakMap,C=new WeakMap,w={get(e,t){if(!m.includes(t))return e[t];let r=f[t];return!r&&(r=f[t]=function(...e){y.set(this,C.get(this)[t](...e))}),r}};async function*I(...e){let t=this;if(!(t instanceof IDBCursor)&&(t=await t.openCursor(...e)),!t)return;let r=new Proxy(t,w);for(C.set(r,t),c.set(r,p(t));t;)yield r,t=await (y.get(r)||t.continue()),y.delete(r)}function S(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}u=(e=>({...e,get:(t,r,i)=>S(t,r)?I:e.get(t,r,i),has:(t,r)=>S(t,r)||e.has(t,r)}))(u);var b=r("994964"),T=r("439609");let R="local_logger_report",k="local_logger_error",E=(0,b.Z)();class P extends T.v{constructor(e,t){super(),this._handleSaveLog=t,this._loggerId=E,this._expireDays=7,this.index=0,this._storeName=e,this._handleErr=this._handleErr.bind(this)}connect(){return!this._connection&&(this._connection=this._connect().catch(this._handleErr)),this._connection}info(...e){return this._write(this._format("info",e))}warn(...e){return this._write(this._format("warn",e))}async error(...e){let t=this._format("error",e),r=await this._write(t)&&await this.findAll();this.emit("report",{type:"error",data:r||t}),t.forEach(e=>this.emit("error",e))}saveLog(e){return this._handleSaveLog(e)}async gain(e){let{id:t,start:r,end:i}=e,n=await this.query({start:r,end:i});return this.emit("report",{type:"gain",id:t,data:n||[]}),n}async find(e){let t=await this.connect();if(!!t)return t.transaction(this._storeName,"readonly").store.index("type").getAll(e).catch(this._handleErr)}async findAll(){let e=await this.connect();if(!!e)return e.transaction(this._storeName,"readonly").store.index("loggerId").getAll(this._loggerId).catch(this._handleErr)}async query(e={}){let{start:t,end:r,count:i}=e,n=t?r?IDBKeyRange.bound(t.getTime(),r.getTime(),!1,!0):IDBKeyRange.lowerBound(t.getTime(),!1):r?IDBKeyRange.upperBound(r.getTime(),!0):void 0,a=await this.connect();if(!!a)return a.transaction(this._storeName,"readonly").store.index("createAt").getAll(n,i).catch(this._handleErr)}async clear(e=Date.now()+1){let t=await this.connect();if(!!t)return this._clear(t,e)}async transaction(e,t){let r=await this.connect();if(!r)return;let i=r.transaction(this._storeName,e);try{await t(i.store)}catch(e){this._handleErr(e)}return i.done}getExpireTime(e=this._expireDays){let t=new Date;return t.setDate(t.getDate()-e+1),t.setHours(0,0,0,0),t.getTime()}async _connect(){let e=await function(e,t,{blocked:r,upgrade:i,blocking:n,terminated:a}={}){let o=indexedDB.open(e,1),s=l(o);return i&&o.addEventListener("upgradeneeded",e=>{i(l(o.result),e.oldVersion,e.newVersion,l(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener("close",()=>a()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("local-logger",1,{upgrade:this._upgrade.bind(this)});return await this._clear(e,this.getExpireTime()).catch(this._handleErr),e}_upgrade(e){let t=e.createObjectStore(this._storeName,{keyPath:"id",autoIncrement:!0});t.createIndex("type","type"),t.createIndex("loggerId","loggerId"),t.createIndex("createAt","createAt")}_format(e,t){let r=Date.now();return t.map(t=>({type:R,level:e,createAt:r,...t,loggerId:this._loggerId,loggerIndex:this.index++}))}async _write(e){if(!e.length)return;let t=await this.connect();if(!t)return;let r=t.transaction(this._storeName,"readwrite");return Promise.all([...e.map(e=>r.store.add(e)),r.done]).catch(this._handleErr)}async _clear(e,t){let r=e.transaction(this._storeName,"readwrite"),i=r.store.index("createAt"),n=await i.openCursor(IDBKeyRange.upperBound(t,!0));for(;n;)await n.delete(),n=await n.continue();await r.done}_handleErr(e){let t=e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:`unknown error: ${JSON.stringify(e)}`;this.emit("error",{type:k,level:"error",message:t,createAt:Date.now(),loggerId:this._loggerId,loggerIndex:this.index++})}}},526297:function(e,t,r){r.d(t,{Z:function(){return o}});let i="%[a-f0-9]{2}",n=RegExp("("+i+")|([^%]+?)","gi"),a=RegExp("("+i+")+","gi");function o(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function(e){let t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=a.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{let e=function(e){try{return decodeURIComponent(e)}catch{let t=e.match(n)||[];for(let r=1;r<t.length;r++)t=(e=(function e(t,r){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;r=r||1;let i=t.slice(0,r),n=t.slice(r);return Array.prototype.concat.call([],e(i),e(n))})(t,r).join("")).match(n)||[];return e}}(r[0]);e!==r[0]&&(t[r[0]]=e)}r=a.exec(e)}for(let r of(t["%C2"]="\uFFFD",Object.keys(t)))e=e.replace(RegExp(r,"g"),t[r]);return e}(e)}}},679964:function(e,t,r){r.d(t,{T:function(){return i}});function i(e,t){let r={};if(Array.isArray(t))for(let i of t){let t=Object.getOwnPropertyDescriptor(e,i);t?.enumerable&&Object.defineProperty(r,i,t)}else for(let i of Reflect.ownKeys(e)){let n=Object.getOwnPropertyDescriptor(e,i);if(n.enumerable){let a=e[i];t(i,a,e)&&Object.defineProperty(r,i,n)}}return r}}}]);