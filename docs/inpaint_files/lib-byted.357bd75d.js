/*! For license information please see lib-byted.357bd75d.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["6918"],{697641:function(e,t,n){var r=n(499845);!function(e,n){n(t)}(0,function(e){"use strict";let t,i;function o(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?n(e.value):i(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})}let s="";function a(e=""){let t="02",n=`${Date.now()}`,r=s||(s=h(e));return t+n+r+Math.random().toString(16).slice(-6)}function c(){return 1e4*Date.now()+Math.floor(1e4*Math.random())}function u(e){return(Array(8).join("0")+parseInt(e,10).toString(2)).slice(-8)}function l(e){return("000"+parseInt(e,2).toString(16)).slice(-4)}function f(e){let t=e.split(/\./).map(e=>u(e)),n=[];return n[0]=l(t[0]+t[1]),n[1]=l(t[2]+t[3]),["0000","0000","0000","0000","0000","ffff",n[0],n[1]].join("")}function h(e){let t=/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/.test(e),n=/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(e);return t?f(e):n?d(e):"00000000000000000000000000000000"}function d(e){let t="",n=[],r=0,i=0,o=!0,s="0000";if(e.indexOf("::")>-1){let a=e.split("::");for(let e=0;e<a.length;e++){let t=a[e];if(t.indexOf(":")>0){let e=t.split(":");o&&(r=e.length),i+=e.length;for(let t=0;t<e.length;t++)if(4!==e[t].length){let r=s.substring(0,4-e[t].length).concat(e[t]);n.push(r)}else n.push(e[t]);o=!1}else{if(4!==t.length){let e=s.substring(0,4-t.length).concat(t);n.push(e)}else n.push(t);o&&(r+=1),i+=1,o=!1}}let c="";for(let e=0;e<8-i;e++)c=c.concat(s);for(let e=0;e<n.length;e++)t=e===r?(t=t.concat(c)).concat(n[e]):t.concat(n[e]);return t}{let n=e.split(":");for(let e=0;e<n.length;e++){let r=n[e];if(4!==n[e].length){let i=s.substring(0,4-n[e].length).concat(r);t=t.concat(i)}else t=t.concat(r)}return t}}function p(e,t){let n=e.key;void 0!==n&&(G(t,10),L(t,n));let r=e.value;void 0!==r&&(G(t,18),L(t,r))}function g(e){let t={};e:for(;!I(e);){let n=z(e);switch(n>>>3){case 0:break e;case 1:t.key=P(e,z(e));break;case 2:t.value=P(e,z(e));break;default:w(e,7&n)}}if(void 0===t.key)throw Error("Missing required field: key");if(void 0===t.value)throw Error("Missing required field: value");return t}function v(e){let t=O();return y(e,t),R(t)}function y(e,t){let n=e.SeqID;void 0!==n&&(G(t,8),F(t,n));let r=e.LogID;void 0!==r&&(G(t,16),F(t,r));let i=e.service;void 0!==i&&(G(t,24),F(t,S(i)));let o=e.method;void 0!==o&&(G(t,32),F(t,S(o)));let s=e.headers;if(void 0!==s)for(let e of s){G(t,42);let n=O();p(e,n),G(t,n.limit),N(t,n),k(n)}let a=e.payloadEncoding;void 0!==a&&(G(t,50),L(t,a));let c=e.payloadType;void 0!==c&&(G(t,58),L(t,c));let u=e.payload;void 0!==u&&(G(t,66),G(t,u.length),D(t,u));let l=e.LogIDNew;void 0!==l&&(G(t,74),L(t,l))}function m(e){return b(A(e))}function b(e){let t={};e:for(;!I(e);){let n=z(e);switch(n>>>3){case 0:break e;case 1:t.SeqID=U(e,!0);break;case 2:t.LogID=U(e,!0);break;case 3:t.service=z(e);break;case 4:t.method=z(e);break;case 5:{let n=_(e);(t.headers||(t.headers=[])).push(g(e)),e.limit=n;break}case 6:t.payloadEncoding=P(e,z(e));break;case 7:t.payloadType=P(e,z(e));break;case 8:t.payload=x(e,z(e));break;case 9:t.LogIDNew=P(e,z(e));break;default:w(e,7&n)}}if(void 0===t.SeqID)throw Error("Missing required field: SeqID");if(void 0===t.LogID)throw Error("Missing required field: LogID");if(void 0===t.service)throw Error("Missing required field: service");if(void 0===t.method)throw Error("Missing required field: method");return t}function _(e){let t=z(e),n=e.limit;return e.limit=e.offset+t,n}function w(e,t){switch(t){case 0:for(;128&M(e););break;case 2:C(e,z(e));break;case 5:C(e,4);break;case 1:C(e,8);break;default:throw Error("Unimplemented type: "+t)}}function S(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let E=[];function O(){let e=E.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function k(e){E.push(e)}function A(e){return{bytes:e,offset:0,limit:e.length}}function R(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}function C(e,t){if(e.offset+t>e.limit)throw Error("Skip past limit");e.offset+=t}function I(e){return e.offset>=e.limit}function T(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function j(e,t){let n=e.offset;if(n+t>e.limit)throw Error("Read past limit");return e.offset+=t,n}function x(e,t){let n=j(e,t);return e.bytes.subarray(n,n+t)}function D(e,t){let n=T(e,t.length);e.bytes.set(t,n)}function P(e,t){let n=j(e,t),r=String.fromCharCode,i=e.bytes,o="\uFFFD",s="";for(let e=0;e<t;e++){let a,c,u,l;let f=i[e+n];(128&f)==0?s+=r(f):(224&f)==192?e+1>=t?s+=o:(192&(a=i[e+n+1]))!=128?s+=o:(l=(31&f)<<6|63&a)<128?s+=o:(s+=r(l),e++):(240&f)==224?e+2>=t?s+=o:(a=i[e+n+1],((a|(c=i[e+n+2])<<8)&49344)!=32896?s+=o:(l=(15&f)<<12|(63&a)<<6|63&c)<2048||l>=55296&&l<=57343?s+=o:(s+=r(l),e+=2)):(248&f)==240?e+3>=t?s+=o:(a=i[e+n+1],c=i[e+n+2],((a|c<<8|(u=i[e+n+3])<<16)&0xc0c0c0)!=8421504?s+=o:(l=(7&f)<<18|(63&a)<<12|(63&c)<<6|63&u)<65536||l>1114111?s+=o:(l-=65536,s+=r((l>>10)+55296,(1023&l)+56320),e+=3)):s+=o}return s}function L(e,t){let n=t.length,r=0;for(let e=0;e<n;e++){let i=t.charCodeAt(e);i>=55296&&i<=56319&&e+1<n&&(i=(i<<10)+t.charCodeAt(++e)-0x35fdc00),r+=i<128?1:i<2048?2:i<65536?3:4}G(e,r);let i=T(e,r),o=e.bytes;for(let e=0;e<n;e++){let r=t.charCodeAt(e);r>=55296&&r<=56319&&e+1<n&&(r=(r<<10)+t.charCodeAt(++e)-0x35fdc00),r<128?o[i++]=r:(r<2048?o[i++]=r>>6&31|192:(r<65536?o[i++]=r>>12&15|224:(o[i++]=r>>18&7|240,o[i++]=r>>12&63|128),o[i++]=r>>6&63|128),o[i++]=63&r|128)}}function N(e,t){let n=T(e,t.limit),r=e.bytes,i=t.bytes;for(let e=0,o=t.limit;e<o;e++)r[e+n]=i[e]}function M(e){return e.bytes[j(e,1)]}function B(e,t){let n=T(e,1);e.bytes[n]=t}function z(e){let t,n=0,r=0;do t=M(e),n<32&&(r|=(127&t)<<n),n+=7;while(128&t);return r}function G(e,t){for(t>>>=0;t>=128;)B(e,127&t|128),t>>>=7;B(e,t)}function U(e,t){let n,r=0,i=0,o=0;return r=127&(n=M(e)),128&n&&(r|=(127&(n=M(e)))<<7,128&n&&(r|=(127&(n=M(e)))<<14,128&n&&(r|=(127&(n=M(e)))<<21,128&n&&(i=127&(n=M(e)),128&n&&(i|=(127&(n=M(e)))<<7,128&n&&(i|=(127&(n=M(e)))<<14,128&n&&(i|=(127&(n=M(e)))<<21,128&n&&(o=127&(n=M(e)),128&n&&(o|=(127&(n=M(e)))<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function F(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10,s=T(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}function W(e){return m(e)}function J(e){return v(e)}let K=65536,q="\0\0\0\0\0\0\0\0",V=0x100000000,H=0xffffffffffffffff,Z=0x8000000000000000,$=String.prototype.charCodeAt;class X{constructor(e,t,n){this.isLong=!0,this.low=0|e,this.high=0|t,this.unsigned=!!n}static isLong(e){return e&&!0===e.isLong}static fromBits(e,t,n){return new X(e,t,n)}static fromBytes(e,t,n){return n?X.fromBytesLE(e,t):X.fromBytesBE(e,t)}static fromBytesLE(e,t){return new X(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}static fromBytesBE(e,t){return new X(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}static fromHash(e){return e===q?Y:new X(($.call(e,0)|$.call(e,1)<<8|$.call(e,2)<<16|$.call(e,3)<<24)>>>0,($.call(e,4)|$.call(e,5)<<8|$.call(e,6)<<16|$.call(e,7)<<24)>>>0,!0)}toHash(){return String.fromCharCode(255&this.low,this.low>>>8&255,this.low>>>16&255,this.low>>>24,255&this.high,this.high>>>8&255,this.high>>>16&255,this.high>>>24)}static fromNumber(e,t=!0){if(isNaN(e))return t?Q:Y;if(t){if(e>=H)return et}else{if(e<=-Z)return en;if(e+1>=Z)return ee}return X.fromBits(e%V|0,e/V|0,t)}toNumber(){return this.unsigned?(this.high>>>0)*V+(this.low>>>0):this.high*V+(this.low>>>0)}isZero(){return 0===this.high&&0===this.low}add(e){!X.isLong(e)&&(e=X.fromNumber(e));let t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,a=e.low>>>16,c=65535&e.low,u=0,l=0,f,h;return f=0+((h=0+(i+c))>>>16),h&=65535,f+=r+a,l+=f>>>16,f&=65535,l+=n+s,u+=l>>>16,l&=65535,u+=t+o,u&=65535,X.fromBits(f<<16|h,u<<16|l,this.unsigned)}equals(e){return!X.isLong(e)&&(e=X.fromNumber(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low}addOne(){return -1===this.low&&-1===this.high?X.fromBits(0,0,this.unsigned):-1===this.low?X.fromBits(0,this.high+1,this.unsigned):X.fromBits(this.low+1,this.high,this.unsigned)}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]}}let Y=new X(0,0,!1),Q=new X(0,0,!0),ee=X.fromBits(-1,0x7fffffff,!1),et=X.fromBits(-1,-1,!0),en=X.fromBits(0,-0x80000000,!1);e.ErrorCode=void 0,!function(e){e[e.NATIVE_ERROR=5001]="NATIVE_ERROR",e[e.CONNECTING_ERROR=5002]="CONNECTING_ERROR",e[e.MAX_RETRIES_ERROR=5003]="MAX_RETRIES_ERROR",e[e.MESSAGE_ERROR=5004]="MESSAGE_ERROR",e[e.OPEN_ERROR=5005]="OPEN_ERROR"}(e.ErrorCode||(e.ErrorCode={}));class er{constructor(e){this.type=e,this.target=null}}class ei extends er{constructor(e,t){super(e),this.message=t&&t.message||null}}class eo extends er{constructor(t,n){super(t),this.error=n&&n.error||null,this.colno=n&&n.colno||0,this.filename=n&&n.filename||"",this.lineno=n&&n.lineno||0,this.message=n&&n.message||"",this.code=n&&n.code||e.ErrorCode.NATIVE_ERROR}}class es extends er{constructor(e,t){super(e),this.code=t&&t.code||0,this.reason=t&&t.reason||"",this.wasClean=t&&t.wasClean||!1,this.willReconnect=t&&t.willReconnect||!1}}class ea extends er{constructor(e,t){super(e),this.data=t&&t.data||null}}class ec extends ea{constructor(e,t){super(e),this.data=t&&t.data||null,this.message=t&&t.message||null}}class eu extends er{constructor(e,t){super(e),this.data=t&&t.data||null}}function el(e,{message:t,code:n}){return new eo(e,{message:t,code:n})}function ef(e,{code:t,reason:n,wasClean:r,willReconnect:i}){return new es(e,{code:t,reason:n,wasClean:r,willReconnect:i})}function eh(e,{data:t,message:n}){return new ec(e,{data:t,message:n})}function ed(e,{data:t}){return new eu(e,{data:t})}function ep(e,{message:t}){return new ei(e,{message:t})}class eg{constructor(e,t){this.endpoints=e,this.maxRetries=t,this.currentIndex=0,this.currentEndpointTriesCount=0}resetEndpointConfig(){this.currentIndex=0,this.currentEndpointTriesCount=0}resetTries(){this.currentEndpointTriesCount=0}getCurrentEndpoint(){return this.endpoints[this.currentIndex]}getCurrentEndpointTriesCount(){return this.currentEndpointTriesCount}checkReachMaxTries(){return!!(this.currentIndex>=this.endpoints.length)||this.currentIndex===this.endpoints.length-1&&this.currentEndpointTriesCount===this.maxRetries||!1}checkCurrentEndpointReachedMaxRetries(){return this.currentIndex==this.endpoints.length||this.currentEndpointTriesCount>this.maxRetries}replaceBackupEndpointAndUpdateCount(){return this.currentEndpointTriesCount=1,this.currentIndex++,this.endpoints[this.currentIndex]}getCurrentEndpointAndUpdateCount(){return this.currentEndpointTriesCount++,this.getCurrentEndpoint()}}let ev=("undefined"!=typeof globalThis&&"Window"===globalThis.constructor.name||"undefined"!=typeof window&&"Window"===window.constructor.name)&&"undefined"!=typeof document,ey="undefined"!=typeof globalThis&&("Object"===globalThis.constructor.name||"DedicatedWorkerGlobalScope"===globalThis.constructor.name)&&"undefined"!=typeof tt,em=("undefined"!=typeof globalThis&&"Object"===globalThis.constructor.name||"undefined"==typeof globalThis||"undefined"!=typeof globalThis&&!!globalThis.WeixinJSBridge)&&"undefined"!=typeof wx,eb="undefined"!=typeof globalThis&&("DedicatedWorkerGlobalScope"===globalThis.constructor.name||"SharedWorkerGlobalScope"===globalThis.constructor.name||"ServiceWorkerGlobalScope"===globalThis.constructor.name)&&"undefined"!=typeof self,e_="undefined"!=typeof globalThis&&"Object"===globalThis.constructor.name&&void 0!==n.g&&"Object"===n.g.constructor.name&&void 0!==r&&r.version;class ew{constructor(){this._listeners={}}emit(e,...t){let n=this._listeners[e];if(n)n.slice().forEach(e=>e.fn.apply(e.ctx,t));else if("error"===e&&!this.onerror){let e=t.length&&t[0];if(e instanceof Error)throw e;throw Error("Unhandled error."+(e?" ("+e.message+")":"")).context=e,e}return this}off(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=null;else{let n=this._listeners[e];if(n)for(let e=0;e<n.length;)n[e].fn===t?n.splice(e,1):++e}return this}on(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this}}class eS extends ew{constructor(e,t,n){super(),this._socket=null,em&&wx.connectSocket&&(this._socket=wx.connectSocket({url:e,protocols:t,header:n,fail:this._createSocketFailHandler.bind(this),success:this._createSocketSuccessHandler.bind(this)})),ey&&tt.connectSocket&&(this._socket=tt.connectSocket({url:e,protocols:t,header:n,fail:this._createSocketFailHandler.bind(this),success:this._createSocketSuccessHandler.bind(this)}))}_createSocketSuccessHandler(){Promise.resolve().then(()=>{this._addWsListeners()})}_createSocketFailHandler(e){Promise.resolve().then(()=>{let t=el("error",{message:e.errMsg||e.errNo?`message: ${e.errMsg}`||`code: ${e.errNo}`||"":JSON.stringify(e)});this.emit("error",t);let n=ef("close",{reason:e.errMsg||e.errNo?`message: ${e.errMsg}`||`code: ${e.errNo}`||"":JSON.stringify(e)});this.emit("close",n)})}_addWsListeners(){this._socket.onOpen(e=>{this.emit("open",ed("open",Object.assign(Object.assign({},e),{data:e.errMsg||""})))}),this._socket.onClose(e=>{this.emit("close",ef("close",Object.assign({},e)))}),this._socket.onMessage(e=>{this.emit("message",eh("message",Object.assign({},e)))}),this._socket.onError(e=>{this.emit("error",el("error",Object.assign(Object.assign({},e),{message:e.errMsg||""})))})}send(e){if(e instanceof Uint8Array){let t=e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset);this._socket&&this._socket.send({data:t,fail:e=>{this.emit("error",el("error",{message:e.errMsg||e.errNo?`message: ${e.errMsg}`||`code: ${e.errNo}`||"":JSON.stringify(e)}))}})}else this._socket&&this._socket.send({data:e,fail:e=>{this.emit("error",el("error",{message:e.errMsg||e.errNo?`message: ${e.errMsg}`||`code: ${e.errNo}`||"":JSON.stringify(e)}))}})}close(e,t){this._socket&&this._socket.close({code:e,reason:t})}addEventListener(e,t){this.on(e,t)}removeEventListener(e,t){this.off(e,t)}get readyState(){return this._socket.readyState}get binaryType(){return this._socket.binaryType}set binaryType(e){}get url(){return this._socket.url}get protocol(){return this._socket.protocol}get extensions(){return this._socket.extensions}get bufferedAmount(){return 0}}function eE(e,t){return t?new t(e.url,e.protocol):em||ey?new eS(e.url,e.protocol,e.headers):(ev||eb)&&"undefined"!=typeof WebSocket&&WebSocket?new WebSocket(e.url,e.protocols):void 0}function eO(e){return!!e||!!em&&!!wx.connectSocket||!!ey&&!!tt.connectSocket||!!((ev||eb)&&"undefined"!=typeof WebSocket&&WebSocket)||!1}function ek(e,t,n){return!!(null==e?void 0:e.find(e=>e.key===t&&e.value===n))}function eA(e,t){var n;return null===(n=null==e?void 0:e.find(e=>e.key===t))||void 0===n?void 0:n.value}function eR(e){return o(this,void 0,void 0,function*(){let{enableAutoAck:t}=this._options,n=ek(e.message.headers,"need_ack","1"),r=ek(e.message.headers,"is_ack","1"),i=ek(e.message.headers,"x_frontier_qos_ack","1");if(t&&n){let{SeqID:t,LogID:n,service:r,LogIDNew:i,method:o}=e.message;this._sendAck({SeqID:t,LogID:n,LogIDNew:i,service:r,method:o,headers:[{key:"is_ack",value:"1"},{key:"ack_id",value:i||""},{key:"ack_code",value:"0"}]})}r&&!i&&this._dispatchAckMessageEvent(e)})}function eC(e){let t=0,n=0;for(let r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:(64512&n)==55296&&(64512&e.charCodeAt(r+1))==56320?(++r,t+=4):t+=3;return t}function eI(e,t,n){if(n-t<1)return"";let r="";for(let i=t;i<n;){let t=e[i++];if(t<=127)r+=String.fromCharCode(t);else if(t>=192&&t<224)r+=String.fromCharCode((31&t)<<6|63&e[i++]);else if(t>=224&&t<240)r+=String.fromCharCode((15&t)<<12|(63&e[i++])<<6|63&e[i++]);else if(t>=240){let n=((7&t)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;r+=String.fromCharCode(55296+(n>>10)),r+=String.fromCharCode(56320+(1023&n))}}return r}function eT(e,t,n){let r,i;let o=n;for(let o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:((64512&r)==55296&&(64512&(i=e.charCodeAt(o+1)))==56320?(r=65536+((1023&r)<<10)+(1023&i),++o,t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-o}function ej(e){return o(this,void 0,void 0,function*(){if("string"==typeof e){let t=new Uint8Array(eC(e));return eT(e,t,0),t}if(e instanceof ArrayBuffer)return new Uint8Array(e);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)})}function ex(e){return o(this,void 0,void 0,function*(){let t=W((yield ej(e.data)));try{if(t.payload instanceof Uint8Array){let e=this._options.payloadEncoding instanceof Object?{force:!!this._options.payloadEncoding.force,encoding:this._options.payloadEncoding.encoding?this._options.payloadEncoding.encoding.replace(/\s/g,"").toLowerCase():""}:{force:!1,encoding:this._options.payloadEncoding?this._options.payloadEncoding.replace(/\s/g,"").toLowerCase():""},n=t.payloadEncoding?t.payloadEncoding.replace(/\s/g,"").toLowerCase():"",r=this._options.payloadType instanceof Object?{force:!!this._options.payloadType.force,type:this._options.payloadType.type?this._options.payloadType.type.replace(/\s/g,"").toLowerCase():""}:{force:!1,type:this._options.payloadType?this._options.payloadType.replace(/\s/g,"").toLowerCase():""},i=t.payloadType?t.payloadType.replace(/\s/g,"").toLowerCase():"",o=r.force?r.type:i||r.type,s=e.force?e.encoding:n||e.encoding,a=["text/plain;charset=utf-8","application/json","application/json;charset=utf-8","string"],c=["none_none","binary"];this._options.enableTransformTextPayload&&a.includes(o)&&(!s||c.includes(s))?t.textPayload=eI(t.payload,0,t.payload.byteLength):t.textPayload=""}else t.textPayload=""}catch(e){t.textPayload="",console.log(e)}e.message=t})}function eD(e,t,n){let r=-1;function i(t){return++r<n.length?n[r].bind(e)(t).then(()=>i(t)):Promise.resolve()}return i(t)}let eP=(e,t)=>t.some(t=>e instanceof t);function eL(){return t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eN(){return i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let eM=new WeakMap,eB=new WeakMap,ez=new WeakMap,eG=new WeakMap,eU=new WeakMap;function eF(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(eH(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&eM.set(t,e)}).catch(()=>{}),eU.set(t,e),t}function eW(e){if(eB.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});eB.set(e,t)}let eJ={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return eB.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ez.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return eH(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function eK(e){eJ=e(eJ)}function eq(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?eN().includes(e)?function(...t){return e.apply(eZ(this),t),eH(eM.get(this))}:function(...t){return eH(e.apply(eZ(this),t))}:function(t,...n){let r=e.call(eZ(this),t,...n);return ez.set(r,t.sort?t.sort():[t]),eH(r)}}function eV(e){return"function"==typeof e?eq(e):(e instanceof IDBTransaction&&eW(e),eP(e,eL()))?new Proxy(e,eJ):e}function eH(e){if(e instanceof IDBRequest)return eF(e);if(eG.has(e))return eG.get(e);let t=eV(e);return t!==e&&(eG.set(e,t),eU.set(t,e)),t}let eZ=e=>eU.get(e);function e$(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=eH(s);return r&&s.addEventListener("upgradeneeded",e=>{r(eH(s.result),e.oldVersion,e.newVersion,eH(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}let eX=["get","getKey","getAll","getAllKeys","count"],eY=["put","add","delete","clear"],eQ=new Map;function e0(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(eQ.get(t))return eQ.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=eY.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eX.includes(n)))return;let o=async function(e,...t){let o=this.transaction(e,i?"readwrite":"readonly"),s=o.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&o.done]))[0]};return eQ.set(t,o),o}eK(e=>({...e,get:(t,n,r)=>e0(t,n)||e.get(t,n,r),has:(t,n)=>!!e0(t,n)||e.has(t,n)}));class e1 extends ew{constructor(){super(),this._qosDB=void 0,this._intervalTimeoutId=null,this._interval=36e5,this._init()}openDB(){return o(this,void 0,void 0,function*(){yield this._init()})}_init(){return o(this,void 0,void 0,function*(){return new Promise(e=>{this._qosDB?e(this):(e$("frontier",1,{upgrade(e,t,n,r){e.createObjectStore("qos",{keyPath:"message_id"})}}).then(e=>{this._qosDB=e,this._intervalFlush(),this.emit("ready")}),this.on("ready",()=>{e(this),this.off()}))})})}_intervalFlush(){return o(this,void 0,void 0,function*(){clearInterval(this._intervalTimeoutId),this._intervalTimeoutId=setInterval(()=>{this.flushExpired()},this._interval)})}get(e){var t;return o(this,void 0,void 0,function*(){return yield null===(t=this._qosDB)||void 0===t?void 0:t.get("qos",e)})}set(e,t){var n;return o(this,void 0,void 0,function*(){return yield null===(n=this._qosDB)||void 0===n?void 0:n.put("qos",{message_id:e,timestamp:t})})}del(e){var t;return o(this,void 0,void 0,function*(){return yield null===(t=this._qosDB)||void 0===t?void 0:t.delete("qos",e)})}clear(){var e;return o(this,void 0,void 0,function*(){return yield null===(e=this._qosDB)||void 0===e?void 0:e.clear("qos")})}keys(){var e;return o(this,void 0,void 0,function*(){return yield null===(e=this._qosDB)||void 0===e?void 0:e.getAllKeys("qos")})}getAll(){var e;return o(this,void 0,void 0,function*(){return yield null===(e=this._qosDB)||void 0===e?void 0:e.getAll("qos")})}flushExpired(){var e;return o(this,void 0,void 0,function*(){((yield null===(e=this._qosDB)||void 0===e?void 0:e.getAll("qos"))||[]).filter(({timestamp:e})=>e<Date.now()).forEach(e=>{var t;null===(t=this._qosDB)||void 0===t||t.delete("qos",e.message_id)})})}closeDB(){var e;return o(this,void 0,void 0,function*(){clearInterval(this._intervalTimeoutId),null===(e=this._qosDB)||void 0===e||e.close(),this._qosDB=void 0})}get isReady(){return this._qosDB}}class e2{constructor(){this._qosDB=localStorage,this._intervalTimeoutId=null,this._interval=36e5,this._intervalFlush()}openDB(){return o(this,void 0,void 0,function*(){if(!this._intervalTimeoutId)return this._intervalFlush(),this})}_intervalFlush(){return o(this,void 0,void 0,function*(){clearInterval(this._intervalTimeoutId),this._intervalTimeoutId=setInterval(()=>{this.flushExpired()},this._interval)})}_add_prefix(e){return`${this._prefix}${e}`}get _prefix(){return"frontier_qos_msg_id_"}get(e){return o(this,void 0,void 0,function*(){return JSON.parse(this._qosDB.getItem(this._add_prefix(e))||"{}")})}set(e,t){return o(this,void 0,void 0,function*(){return this._qosDB.setItem(this._add_prefix(e),JSON.stringify({message_id:e,timestamp:t}))})}del(e){return o(this,void 0,void 0,function*(){return this._qosDB.removeItem(this._add_prefix(e))})}clear(){return o(this,void 0,void 0,function*(){return this._qosDB.clear()})}keys(){return o(this,void 0,void 0,function*(){let e=[];for(let t=0;t<this._qosDB.length;t++)e.push(this._qosDB.key(t));return e.filter(e=>null==e?void 0:e.startsWith(this._prefix))})}getAll(){return o(this,void 0,void 0,function*(){let e=[],t=yield this.keys();for(let n in t){let t=this._qosDB.getItem(n);e.push(JSON.parse(t||"{}"))}return e})}flushExpired(){return o(this,void 0,void 0,function*(){((yield this.getAll())||[]).filter(({timestamp:e})=>e<Date.now()).forEach(e=>{this.del(e.message_id)})})}closeDB(){clearInterval(this._intervalTimeoutId)}get isReady(){return this._qosDB}}class e3{constructor(){this._qosDB=ey?tt:em?wx:null,this._intervalTimeoutId=null,this._interval=36e5,this._intervalFlush()}openDB(){return o(this,void 0,void 0,function*(){if(!this._intervalTimeoutId)return this._intervalFlush(),this})}_intervalFlush(){return o(this,void 0,void 0,function*(){clearInterval(this._intervalTimeoutId),this._intervalTimeoutId=setInterval(()=>{this.flushExpired()},this._interval)})}_add_prefix(e){return`${this._prefix}${e}`}get _prefix(){return"frontier_qos_msg_id_"}get(e){return o(this,void 0,void 0,function*(){return JSON.parse(this._qosDB.getStorageSync(this._add_prefix(e))||"{}")})}set(e,t){return o(this,void 0,void 0,function*(){return this._qosDB.setStorageSync(this._add_prefix(e),JSON.stringify({message_id:e,timestamp:t}))})}del(e){return o(this,void 0,void 0,function*(){return this._qosDB.removeStorageSync(this._add_prefix(e))})}clear(){return o(this,void 0,void 0,function*(){return this._qosDB.clearStorageSync()})}keys(){return o(this,void 0,void 0,function*(){let{keys:e}=this._qosDB.getStorageInfoSync();return e.filter(e=>null==e?void 0:e.startsWith(this._prefix))})}getAll(){return o(this,void 0,void 0,function*(){let e=[];for(let t of yield this.keys()){let n=yield this.get(t);e.push(n)}return e})}flushExpired(){return o(this,void 0,void 0,function*(){((yield this.getAll())||[]).filter(({timestamp:e})=>e<Date.now()).forEach(e=>{this.del(e.message_id)})})}closeDB(){clearInterval(this._intervalTimeoutId)}get isReady(){return this._qosDB}}function e4(){return ey||ey?new e3:ev||eb?new e1:ev||eb?new e2:null}function e5(e){var t,n,r,i;return o(this,void 0,void 0,function*(){let o=ek(e.message.headers,"code","-1"),s=ek(e.message.headers,"is_ack","1"),a=eA(e.message.headers,"x_frontier_msgid"),c=Number(eA(e.message.headers,"x_frontier_ttl"))||0,u=ek(e.message.headers,"x_frontier_qos","2");if(!ek(e.message.headers,"x_frontier_qos_ack","1")||!u){if(u&&!this._qosDB&&(this._qosDB=e4(),this._qosDB&&(yield this._qosDB.openDB())),u&&!this._qosDB.isReady&&(yield this._qosDB.openDB()),e.message.service>0&&s&&!o){a&&u?!(yield null===(t=this._qosDB)||void 0===t?void 0:t.get(a))&&(this._dispatchMessageEvent(e),yield null===(n=this._qosDB)||void 0===n?void 0:n.set(a,Date.now()+c)):this._dispatchMessageEvent(e);return}if(e.message.service>0){a&&u?!(yield null===(r=this._qosDB)||void 0===r?void 0:r.get(a))&&(this._dispatchMessageEvent(e),yield null===(i=this._qosDB)||void 0===i?void 0:i.set(a,Date.now()+c)):this._dispatchMessageEvent(e);return}}})}function e8(e){try{if("string"!=typeof e&&(e instanceof ArrayBuffer||e.buffer&&e.buffer instanceof ArrayBuffer))return"";if("string"==typeof e)return JSON.parse(e),"application/json";else return""}catch(t){if("string"==typeof e)return"text/plain;charset=utf-8";return""}}function e6(e){return o(this,void 0,void 0,function*(){this._uptimeTimeoutId=setTimeout((()=>e9.bind(this)(e)).bind(this),this._options.uptimeInterval)})}function e9(e){var t,n;return o(this,void 0,void 0,function*(){if(!this._ws||this._ws.readyState!==this.OPEN)return;let{pingInterval:r}=this._options;null===(t=this._endpointManager)||void 0===t||t.resetEndpointConfig();for(let e=0;e<this._messageQueue.length;e++){let t=this._messageQueue[e];if(this._ws.readyState===this.OPEN&&null!==t)this._ws&&this._ws.send(t),this._messageQueue[e]=null;else break}this._messageQueue=this._messageQueue.filter(e=>!!e),this._pingPongTimeoutId=setTimeout(()=>this._ping(),r),this._dispatchOpenEvent(e),this._isBrowser&&this._ws&&(this._ws.binaryType=this._binaryType);let i=null===(n=this._endpointManager)||void 0===n?void 0:n.getCurrentEndpoint();this._debug(`open ${i} success`)})}function e7(){return o(this,void 0,void 0,function*(){this._isInit=!1,clearTimeout(this._connectionTimeoutId)})}function te(e){var t,n;return o(this,void 0,void 0,function*(){let r=ek(e.message.headers,"x_frontier_qos","2"),i=ek(e.message.headers,"x_frontier_is_ack","1"),o=null===(t=eA(e.message.headers,"x_frontier_ack_msgid"))||void 0===t?void 0:t.split(",");if(r&&!this._qosDB&&(this._qosDB=e4(),this._qosDB&&(yield this._qosDB.openDB())),r&&!this._qosDB.isReady&&(yield this._qosDB.openDB()),r&&i&&o&&o.length)for(let e of o)yield null===(n=this._qosDB)||void 0===n?void 0:n.del(e)})}let tn=(e,t)=>{switch(e){case"boe":case"ppe":return{[`x-use-${e}`]:1,"x-tt-env":t};default:return{}}};class tr{constructor(e){this.maxLossCount=e,this.count=0}addCount(){this.count++}checkReachMaxCount(){return this.count>=this.maxLossCount}resetCounter(e=0){this.maxLossCount=e,this.count=0}}function ti(e){return o(this,void 0,void 0,function*(){return new Promise(t=>{if(!ev)return t("unknown reason");try{let n=document.createElement("script");window.frontierJSONP=e=>{document.body.removeChild(n),window.frontierJSONP=void 0,t(e&&e.msg||"unknown reason")},n.type="text/javascript",n.src=e.replace(/^ws/,"http")+"&jscallback=frontierJSONP";try{document.body.appendChild(n)}catch(e){document.body.removeChild(n)}}catch(e){window.frontierJSONP=void 0,t("unknown reason")}})})}class to extends ew{constructor(t){super(),this._miniNavigatorOnline=!0,this._isBrowser=ev,this._isNode=e_,this._isMiniTT=ey,this._isMiniWX=em,this._isWorker=eb,this._messageQueue=[],this._endpointManager=null,this._readyClosed=!1,this._binaryType="arraybuffer",this._connectLock=!1,this._connectionTimeoutId=null,this._uptimeTimeoutId=null,this._reconnectTimeoutId=null,this._pingPongTimeoutId=null,this._seqId=0,this._isInit=!1,this._url="",this._qosDB=null,this._pingLossCounter=null,this._protocols="pbbp2",this.CLOSED=3,this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this._onOpen=t=>{eD(this,t,[e7,e6]).then(()=>{var e;let t=null===(e=this._endpointManager)||void 0===e?void 0:e.getCurrentEndpoint();this._debug(`open ${t}`)}).catch(t=>{let n=el("error",{message:t.message,code:e.ErrorCode.OPEN_ERROR});this._dispatchErrorEvent(n)})},this._onMessage=t=>o(this,void 0,void 0,function*(){let{pingInterval:n,pingFrequency:r}=this._options;if(("hi"===t.data&&"always"===r||"auto"===r)&&(this._clearPingTimer(),this.emit("ping_once_success","success"),this._pingPongTimeoutId=setTimeout(()=>this._ping(),n)),"hi"!==t.data)eD(this,t,[ex,eR,te,e5]).then(()=>{this._debug("received",t.message)}).catch(t=>{let n=el("error",{message:t.message,code:e.ErrorCode.MESSAGE_ERROR});this._dispatchErrorEvent(n)})}),this._onError=t=>{var n,r;let i=null===(n=this._endpointManager)||void 0===n?void 0:n.checkReachMaxTries(),o=null===(r=this._endpointManager)||void 0===r?void 0:r.getCurrentEndpoint();if(i&&!t.message){let t=`connect ${o} fail, max retries reached`;this._dispatchErrorEvent(el("error",{message:t,code:e.ErrorCode.MAX_RETRIES_ERROR}));return}this._ws&&this._ws.readyState===this.OPEN&&this._disconnect(),this._dispatchErrorEvent(el("error",{message:t.message,code:e.ErrorCode.NATIVE_ERROR}))},this._onClose=t=>o(this,void 0,void 0,function*(){var n,r,i,o,s,a,c,u,l,f,h,d;this._clearTimer(),this._clearPingTimer(),this._removeWsListeners(),this._ws=null,this._connectLock=!1;let p=null===(n=this._endpointManager)||void 0===n?void 0:n.checkReachMaxTries();if(!p&&this._navigatorOnline()&&!this._readyClosed){let e=null===(r=this._endpointManager)||void 0===r?void 0:r.getCurrentEndpoint(),n=this._options.reconnectInterceptor(t.code,t.reason);this._dispatchCloseEvent(ef("close",{code:1006,reason:t.reason||`connecting failed, unknown reason, hostname: ${e}`,willReconnect:n})),n&&this._connect();return}if(1e3!==t.code&&this._readyClosed){this._dispatchCloseEvent(ef("close",{code:1e3,reason:"bye"})),null===(i=this._endpointManager)||void 0===i||i.resetEndpointConfig(),null===(o=this._pingLossCounter)||void 0===o||o.resetCounter();return}if(1e3!==t.code&&p){let n=null===(s=this._endpointManager)||void 0===s?void 0:s.getCurrentEndpoint(),r=t.reason;!r&&(r=yield ti(this._url)),r=`connecting failed, ${r}, hostname: ${n}, max retries reached`,this._dispatchCloseEvent(ef("close",{code:t.code,reason:r}));let i=`connect ${n} fail, max retries reached`;this._dispatchErrorEvent(el("error",{message:i,code:e.ErrorCode.MAX_RETRIES_ERROR})),null===(a=this._endpointManager)||void 0===a||a.resetEndpointConfig(),null===(c=this._pingLossCounter)||void 0===c||c.resetCounter();return}if(1e3!==t.code&&!t.reason){let e=null===(u=this._endpointManager)||void 0===u?void 0:u.getCurrentEndpoint();this._dispatchCloseEvent(ef("close",{code:t.code,reason:`connecting failed, unknown reason, hostname: ${e}`})),null===(l=this._endpointManager)||void 0===l||l.resetEndpointConfig(),null===(f=this._pingLossCounter)||void 0===f||f.resetCounter();return}this._dispatchCloseEvent(t),null===(h=this._endpointManager)||void 0===h||h.resetEndpointConfig(),null===(d=this._pingLossCounter)||void 0===d||d.resetCounter()}),this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.onStartReconnect=null,this.onReceiveAck=null,this.onStopImmediatelyReconnect=null,this._options={url:"",automaticOpen:!0,initReconnectInterval:1e3,maxReconnectInterval:1e4,reconnectIntervalGrowFactor:2,timeoutInterval:5e3,uptimeInterval:1e3,maxRetries:5,debug:!1,maxMessageQueueLength:1/0,service:0,logIDGenerator:c,headers:void 0,payloadEncoding:"",payloadType:"",fpID:"",deviceID:"",accessKey:"",ttwID:"",bddID:"",aID:"",disableAutoReconnect:!1,customParams:{},pingInterval:15e3,pingTimeoutInterval:4e3,pingFrequency:"auto",pingLossCount:2,enableTransformTextPayload:!1,logIDNewConfig:{enableAutoGenerateLogIDNew:!1,userIp:""},miniProgramParams:{customHttpHeader:{}},enableAutoAck:!1,reconnectInterceptor:()=>!0,enableQoS:!1,env:{xTTEnv:"",xUseEnv:""},listenNetworkChanged:!0};let{url:n,ws:r}=t,i=Array.isArray(n)?n:"string"==typeof n?[n]:[];if(!i||0===i.length)throw Error("please provide valid url");if(!eO(r))throw Error("please provide ws params, WebSocket constructor is undefined");Object.assign(this._options,t),this._endpointManager=new eg(i,this._options.maxRetries),this._pingLossCounter=new tr(this._options.pingLossCount),this._options.automaticOpen&&(this._isInit=!0,this._connect()),this._options.listenNetworkChanged&&(this._isMiniTT||this._isMiniWX?this._onPageNetWorkChange():this._isBrowser&&this._initGlobalEventListener())}_handleOnLine(){if(!this._options.disableAutoReconnect&&!this._readyClosed)this._handleReconnect()}_handleOffLine(){this._destroyWebSocket();let e=ep("reconnect",{message:"stop immediately reconnect"});this.onStopImmediatelyReconnect&&this.onStopImmediatelyReconnect(e)}_initGlobalEventListener(){this._isBrowser&&window.addEventListener("online",this._handleOnLine.bind(this)),this._isBrowser&&window.addEventListener("offline",this._handleOffLine.bind(this)),this._isBrowser&&window.addEventListener("pagehide",this._handlePageHide.bind(this)),this._isBrowser&&window.addEventListener("pageshow",this._handlePageShow.bind(this))}_dropGlobalEventListener(){this._isBrowser&&window.removeEventListener("online",this._handleOnLine),this._isBrowser&&window.removeEventListener("offline",this._handleOffLine),this._isBrowser&&window.removeEventListener("pagehide",this._handlePageHide),this._isBrowser&&window.removeEventListener("pageshow",this._handlePageShow)}_handlePageHide(e){!e.persisted&&(this._isBrowser&&window.removeEventListener("pagehide",this._handlePageHide),this._isBrowser&&window.removeEventListener("pageshow",this._handlePageShow),this.close()),this._isBrowser&&window.removeEventListener("online",this._handleOnLine),this._isBrowser&&window.removeEventListener("offline",this._handleOffLine)}_handlePageShow(e){e.persisted&&(this._navigatorOnline()&&(!this._ws||this._ws.readyState!==this.OPEN||this._ws.readyState!==this.CONNECTING)&&this._handleOnLine(),this._isBrowser&&window.addEventListener("online",this._handleOnLine.bind(this)),this._isBrowser&&window.addEventListener("offline",this._handleOffLine.bind(this)))}_generateUrl(e){return o(this,void 0,void 0,function*(){let t,n,r;let{fpID:i,deviceID:o,bddID:s,ttwID:a,accessKey:c,aID:u,customParams:l={},enableAutoAck:f,enableQoS:h,env:d}=this._options;this._isBrowser||this._isMiniWX||this._isMiniTT?(t=location&&"https:"==location.protocol?"wss://":"ws://",n=e.replace(/((^ws)|(^http))((?:[s]*:\/\/))/,""),r=/^wss(.*:\/\/)/.test(e)?e:`${t}${n}`):(t="wss://",n=e.replace(/(^http)((?:[s]*:\/\/))/,""),r=/(^ws)((?:[s]*:\/\/))/.test(n)?n:`${t}${n}`);let p=s?"bd_did":a?"ttwid":"device_id",g=s||a||o;if(!g||!p)throw Error("please provide bddID, deviceID or ttwID");let v="function"==typeof l?yield l():l,y=Object.assign(Object.assign({device_platform:"web",version_code:"fws_1.0.0",access_key:c,fpid:i,aid:u,[p]:g,xsack:f?1:0,xaack:f?1:0,xsqos:h?1:0},d?tn(d.xUseEnv,d.xTTEnv):{}),v),m=Object.keys(y).reduce((e,t)=>`${e}${e?"&":"?"}${t}=${y[t]}`,"");return`${r}/ws/v2${m}`})}_connect(){var t,n,r,i,s,a,c;return o(this,void 0,void 0,function*(){if(!this._connectLock&&!this._readyClosed){this._connectLock=!0;try{let o=null===(t=this._endpointManager)||void 0===t?void 0:t.checkCurrentEndpointReachedMaxRetries(),{timeoutInterval:u}=this._options;if(o){let t=null===(n=this._endpointManager)||void 0===n?void 0:n.getCurrentEndpoint(),o=null===(r=this._endpointManager)||void 0===r?void 0:r.replaceBackupEndpointAndUpdateCount(),s=null===(i=this._endpointManager)||void 0===i?void 0:i.getCurrentEndpointTriesCount();if(o){let n=`connect ${t} timeout, max retries reached, will use backup endpoint ${o} to retry`,r=el("error",{message:n,code:e.ErrorCode.MAX_RETRIES_ERROR});this._debug(n),this._dispatchErrorEvent(r),this._url=yield this._generateUrl(o),this._debug(`connect ${o} ${s} times`),this._removeWsListeners()}else{let n=`connect ${t} timeout, max retries reached`;this._debug(n),this._dispatchErrorEvent(el("error",{message:n,code:e.ErrorCode.MAX_RETRIES_ERROR}));return}}else{let e=null===(s=this._endpointManager)||void 0===s?void 0:s.getCurrentEndpointAndUpdateCount(),t=null===(a=this._endpointManager)||void 0===a?void 0:a.getCurrentEndpointTriesCount();this._url=yield this._generateUrl(e||""),this._debug(`connect ${e} ${t} times`),this._removeWsListeners()}if(this._isInit)this._isInit=!1;else{let e=ep("reconnect",{message:"start"});this.onStartReconnect&&this.onStartReconnect(e)}let l=(null===(c=this._endpointManager)||void 0===c?void 0:c.getCurrentEndpointTriesCount())||0;l>1&&(yield this._wait(l-1)),this._debug(`connecting url: ${this._url} protocols: ${this._protocols}`),this._ws=eE({url:this._url,protocols:[this._protocols],headers:this._options.miniProgramParams.customHttpHeader},this._options.ws),(this._isBrowser||this._isWorker)&&this._ws&&(this._ws.binaryType=this._binaryType),this._addWsListeners(),this._connectionTimeoutId=setTimeout(()=>this._onTimeout(),u)}catch(e){throw this._connectLock=!1,e}}})}_clearTimer(){clearTimeout(this._connectionTimeoutId),clearTimeout(this._uptimeTimeoutId),this._connectionTimeoutId=null,this._uptimeTimeoutId=null}_clearPingTimer(){clearTimeout(this._pingPongTimeoutId),clearTimeout(this._reconnectTimeoutId),this._pingPongTimeoutId=null,this._reconnectTimeoutId=null}_debug(...e){this._options.debug&&console.log.apply(console,["FRONTIER>",...e])}_getIntervalValue(e){let{initReconnectInterval:t,maxReconnectInterval:n,reconnectIntervalGrowFactor:r}=this._options,i=t*Math.pow(r,e-1);return i>n?n:i}_ping(){if(this._ws&&this._ws.readyState===this.CONNECTING){this._pingPongTimeoutId=setTimeout(()=>this._ping(),this._options.pingInterval);return}if(!this._ws||this._ws.readyState!==this.OPEN){this._handleReconnect();return}this._ws&&this._ws.send("hi"),this._reconnectTimeoutId=setTimeout(()=>{var e,t;null===(e=this._pingLossCounter)||void 0===e||e.addCount(),this.emit("ping_once_timeout","timeout"),(null===(t=this._pingLossCounter)||void 0===t?void 0:t.checkReachMaxCount())?this._handleReconnect():this._ping()},this._options.pingTimeoutInterval)}_navigatorOnline(){return this._isMiniTT||this._isMiniWX?this._miniNavigatorOnline:!this._isBrowser&&!this._isWorker||!this._options.listenNetworkChanged||navigator.onLine}_handleReconnect(){var e,t;if(!!this._navigatorOnline()&&!this._readyClosed)null===(e=this._endpointManager)||void 0===e||e.resetEndpointConfig(),null===(t=this._pingLossCounter)||void 0===t||t.resetCounter(),this._ws?this._disconnect(1001,"going away, try reconnecting server",!0):this._connect()}_onPageNetWorkChange(){this._isMiniTT?tt.onNetworkStatusChange(({isConnected:e})=>{this._miniNavigatorOnline=e,e?this._handleOnLine():this._handleOffLine()}):this._isMiniWX&&wx.onNetworkStatusChange(({isConnected:e})=>{this._miniNavigatorOnline=e,e?this._handleOnLine():this._handleOffLine()})}_wait(e){return new Promise(t=>{setTimeout(t,this._getIntervalValue(e))})}_disconnect(e=1e3,t="",n=!1){if(!!this._ws)this._destroyWebSocket(e,t,n)}_onTimeout(){var e;let t=null===(e=this._endpointManager)||void 0===e?void 0:e.getCurrentEndpoint();this._debug(`connect ${t} timeout`),this._disconnect(1001,"timeout, try reconnecting",!0)}_sendAck(e){let t=J(e);this._ws&&this._ws.readyState===this.OPEN&&(this._ws&&this._ws.send(t),this._debug("send_ack",e))}_removeWsListeners(){if(!!this._ws)this._ws.removeEventListener("open",this._onOpen),this._ws.removeEventListener("close",this._onClose),this._ws.removeEventListener("message",this._onMessage),this._ws.removeEventListener("error",this._onError)}_addWsListeners(){if(!!this._ws)this._ws.addEventListener("open",this._onOpen),this._ws.addEventListener("close",this._onClose),this._ws.addEventListener("message",this._onMessage),this._ws.addEventListener("error",this._onError)}_wsInstanceClose(e=1e3,t=""){try{this._ws&&this._ws.close(e,t)}catch(e){}}_destroyWebSocket(e=1e3,t="",n=!1){var r,i,o,s;if(this._clearPingTimer(),this._clearTimer(),this._removeWsListeners(),this._wsInstanceClose(1e3,t),this._connectLock=!1,n&&this._navigatorOnline()&&!this._readyClosed){if(null===(r=this._endpointManager)||void 0===r?void 0:r.checkReachMaxTries()){let e=null===(i=this._endpointManager)||void 0===i?void 0:i.getCurrentEndpoint();this._dispatchCloseEvent(ef("close",{code:1006,reason:`connect ${e} timeout, max retries reached`,wasClean:!0}))}else{let n=this._options.reconnectInterceptor(e,t);this._dispatchCloseEvent(ef("close",{code:e,reason:t,wasClean:!0,willReconnect:n})),n&&this._connect()}return}this._navigatorOnline()||this._readyClosed?this._dispatchCloseEvent(ef("close",{code:e,reason:"bye"})):this._dispatchCloseEvent(ef("close",{code:1006,reason:"going away, network offline"})),this._ws=null,null===(o=this._endpointManager)||void 0===o||o.resetEndpointConfig(),null===(s=this._pingLossCounter)||void 0===s||s.resetCounter()}_dispatchOpenEvent(e){this.emit("open",e),this.onopen&&this.onopen(e)}_dispatchMessageEvent(e){this.emit("message",e),this.onmessage&&this.onmessage(e)}_dispatchAckMessageEvent(e){this.emit("ack",e),this.onReceiveAck&&this.onReceiveAck(e)}_dispatchErrorEvent(e){this.emit("error",e),this.onerror&&this.onerror(e)}_dispatchCloseEvent(e){this.emit("close",e),this.onclose&&this.onclose(e)}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)}get retryCount(){var e;return(null===(e=this._endpointManager)||void 0===e?void 0:e.getCurrentEndpointTriesCount())||0}get bufferedAmount(){return this._messageQueue.reduce((e,t)=>e+=t&&t.byteLength||0,0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.automaticOpen?this.CONNECTING:this.CLOSED}get url(){return this._ws?this._ws.url:this._url}close(e=1e3,t){var n;if(this._readyClosed=!0,this._clearTimer(),this._clearPingTimer(),null===(n=this._qosDB)||void 0===n||n.closeDB(),this._dropGlobalEventListener(),!this._ws){this._debug("close, ws instance not initialized");return}if(this._ws.readyState===this.CLOSED||this._ws.readyState===this.CLOSING){this._debug("close, ws already closed");return}this._destroyWebSocket(e,t)}send(e,t){return o(this,void 0,void 0,function*(){if(null==e)throw Error("please provide a valid data, data must be a string or an arraybuffer");"number"==typeof e&&(e=JSON.stringify(e)),"string"!=typeof e&&!(e instanceof ArrayBuffer)&&!(e.buffer&&e.buffer instanceof ArrayBuffer)&&(e=JSON.stringify(e));let n=yield ej(e),r=e8(e),{method:i=0,service:o=this._options.service,logID:s=this._options.logIDGenerator(),headers:c=this._options.headers,payloadEncoding:u=this._options.payloadEncoding,payloadType:l=this._options.payloadType,logIDNew:f=this._options.logIDNewConfig.enableAutoGenerateLogIDNew?a(this._options.logIDNewConfig.userIp):""}=t||{};if(!o)throw Error("please provide a valid service");let h={SeqID:X.fromNumber(this._seqId++),LogID:X.fromNumber(s),service:o,method:i,headers:c,payloadEncoding:u instanceof Object?u.encoding?u.encoding:"":u,payloadType:l instanceof Object?l.type?l.type:r:l||r,payload:n,LogIDNew:f},d=J(h);return this._ws&&this._ws.readyState===this.OPEN?(this._ws&&this._ws.send(d),this._debug("sent",h)):this._messageQueue.length<this._options.maxMessageQueueLength?(this._messageQueue.push(d),this._debug("enqueue",h)):(this._messageQueue.shift(),this._messageQueue.push(d)),{seqID:this._seqId,logID:s,logIDNew:f}})}reconnect(e){var t,n;return o(this,void 0,void 0,function*(){let{url:r}=e||{},i=Array.isArray(r)?r:"string"==typeof r?[r]:[];e&&Object.assign(this._options,e),i&&i.length?this._endpointManager=new eg(i,this._options.maxRetries):null===(t=this._endpointManager)||void 0===t||t.resetEndpointConfig(),null===(n=this._pingLossCounter)||void 0===n||n.resetCounter(this._options.pingLossCount),this._readyClosed=!1,this._ws&&this._ws.readyState!==this.CLOSED?this._disconnect(1e3,"manual reconnecting",!0):(this._isInit=!0,this._connect())})}connect(){var e,t;return o(this,void 0,void 0,function*(){!this._connectLock&&(null===(e=this._endpointManager)||void 0===e||e.resetEndpointConfig(),null===(t=this._pingLossCounter)||void 0===t||t.resetCounter(),this._readyClosed=!1,this._isInit=!0,this._connect())})}addEventListener(e,t){this.on(e,t)}dispatchEvent(e){let{type:t}=e;this.emit(t,e)}removeEventListener(e,t){this.off(e,t)}pingOnce(){return new Promise((e,t)=>{this._clearPingTimer(),this._pingPongTimeoutId=setTimeout(()=>this._ping(),this._options.pingInterval);let n=()=>{e("success"),this.off("ping_once_success",n),this.off("ping_once_timeout",r)},r=()=>{t("timeout"),this.off("ping_once_success",n),this.off("ping_once_timeout",r)};this.on("ping_once_success",n),this.on("ping_once_timeout",r),this._ping()})}}e.CustomCloseEvent=es,e.CustomErrorEvent=eo,e.Event=er,e.FWS=to,e.FrontierMessageEvent=ec,e.MessageEvent=ea,e.OpenEvent=eu,e.ReconnectEvent=ei,e.createCloseEvent=ef,e.createErrorEvent=el,e.createMessageEvent=eh,e.createOpenEvent=ed,e.createReconnectEvent=ep,e.decodedFrame=W,e.encodeFrame=J,Object.defineProperty(e,"__esModule",{value:!0})})},531782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActionsExtension=h,t.useActions=d;var r=n(218571),i=n(376728);function o(e,t){return l(e)||u(e,t)||a(e,t)||s()}function s(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function l(e){if(Array.isArray(e))return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=(0,r.useRef)(void 0);return!n.current&&(n.current=Object.keys(e).reduce(function(n,r){var i=e[r];return Object.assign(n,f({},r,function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(function(e){return i.apply(void 0,[e].concat(n))})})),n},{})),n.current}function d(e,t){var n=o((0,i.useImmerState)(t),2),s=n[0],a=n[1],c=h(e,a),u=(0,r.useCallback)(function(){a(t)},[]);return[s,c,a,u]}},917639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=n(483928);Object.keys(i).forEach(function(e){if(!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)))(!(e in t)||t[e]!==i[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(520052);Object.keys(o).forEach(function(e){if(!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)))(!(e in t)||t[e]!==o[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(531782);Object.keys(s).forEach(function(e){if(!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)))(!(e in t)||t[e]!==s[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var a=s.useActions;t.default=a},483928:function(){},520052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActionsExtensionNative=f,t.useActionsNative=h;var r=n(218571);function i(e,t){return u(e)||c(e,t)||s(e,t)||o()}function o(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function u(e){if(Array.isArray(e))return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=(0,r.useRef)(void 0);return!n.current&&(n.current=Object.keys(e).reduce(function(n,r){var i=e[r];return Object.assign(n,l({},r,function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(function(e){return i.apply(void 0,[e].concat(n))})})),n},{})),n.current}function h(e,t){var n=i((0,r.useState)(t),2),o=n[0],s=n[1],a=f(e,s),c=(0,r.useCallback)(function(){s(t)},[]);return[o,a,s,c]}},85993:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=function(e,t){(0,i.useEffect)(function(){var t=e();return function(){t.then(function(e){"function"==typeof e&&e()})}},t)};t.default=o},604641:function(e,t,n){"use strict";r={value:!0},t.default=s;var r,i=n(218571),o="click";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=arguments.length>3?arguments[3]:void 0,s=(0,i.useRef)(),a=(0,i.useCallback)(function(n){var r=("function"==typeof e?e():e)||s.current;if(!(!r||r.contains(n.target)||n.composedPath&&n.composedPath().includes(r)))t(n)},[s.current,t,e]);return(0,i.useEffect)(function(){return document.addEventListener(n,a,r),function(){document.removeEventListener(n,a,r)}},[n,r,a]),s}},661031:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=s(n(776007));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return f(e)||l(e)||u(e)||c()}function c(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function l(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=r.immediately,c=void 0!==s&&s,u=r.trailing,l=void 0===u||u,f=r.leading,h=void 0!==f&&f,d=n,p=t,g=(0,i.useRef)(),v=(0,i.useRef)(!1),y=(0,i.useRef)(!1),m=(0,i.useRef)(e);m.current=e;var b=(0,i.useRef)([]),_=function(e){return window.setTimeout(function(){e&&m.current.apply(m,a(b.current)),y.current=!1},p)},w=(0,i.useCallback)(function(){g.current&&clearTimeout(g.current)},[]),S=(0,i.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(b.current=t,c&&!v.current){m.current.apply(m,a(b.current)),v.current=!0;return}w(),h&&!1==y.current&&(m.current.apply(m,a(b.current)),y.current=!0),g.current=_(l)},[p,w]);return(0,o.default)(function(){return S(),w},[].concat(a(d),[S])),(0,i.useEffect)(function(){return w},[]),{run:S,cancel:w}};t.default=d},73021:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=s(n(96304)),o=n(218571);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.default,n=(0,o.useRef)(e),r=t(n.current,e);return(0,o.useEffect)(function(){!r&&(n.current=e)}),r?n.current:e};t.default=a},198532:function(e,t,n){"use strict";r={value:!0},t.default=s;var r,i=n(218571);function o(e,t,n,r){var o=(0,i.useRef)(n);(0,i.useEffect)(function(){o.current=n},[n]),(0,i.useLayoutEffect)(function(){var n="function"==typeof e?e():e;if(n){var i=function(e){return o.current(e)};return n.addEventListener(t,i,{capture:null==r?void 0:r.capture,once:null==r?void 0:r.once,passive:null==r?void 0:r.passive}),function(){n.removeEventListener(t,i,{capture:null==r?void 0:r.capture})}}},[e,t,r])}function s(e,t,n){var r=(0,i.useRef)();return o((null==n?void 0:n.target)||function(){return r.current||window},e,t,n),r}},278978:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571);function o(e,t){return l(e)||u(e,t)||a(e,t)||s()}function s(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function l(e){if(Array.isArray(e))return e}var f=function e(){return o((0,i.useReducer)(function(){return Object.create(null)},{}),2)[1]};t.default=f},835628:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571);function o(e){return c(e)||a(e)||f(e)||s()}function s(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return h(e)}function u(e,t){return p(e)||d(e,t)||f(e,t)||l()}function l(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function p(e){if(Array.isArray(e))return e}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.onEnter,s=t.onLeave,a=(0,i.useRef)(),c=u((0,i.useState)(!1),2),l=c[0],f=c[1],h=(0,i.useCallback)(function(){r&&r(),f(!0)},["function"==typeof r]),d=(0,i.useCallback)(function(){s&&s(),f(!1)},["function"==typeof s]);return(0,i.useLayoutEffect)(function(){var t=a.current;if(e&&(t="function"==typeof e?e():e),t)return t.addEventListener("mouseenter",h),t.addEventListener("mouseleave",d),function(){var e,n;null===(e=t)||void 0===e||e.removeEventListener("mouseenter",h),null===(n=t)||void 0===n||n.removeEventListener("mouseleave",d)}},[a.current,"function"==typeof e?void 0:e].concat(o(n))),[a,l]};t.default=g},376728:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useImmerState=d,t.useImmerReducer=p,t.default=void 0;var r=n(218571),i=n(330652);function o(e,t){return l(e)||u(e,t)||a(e,t)||s()}function s(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function l(e){if(Array.isArray(e))return e}var f=function(e){return"function"==typeof e},h=function(e,t){return!!t};function d(e){var t=o((0,r.useState)(e),2),n=t[0],s=t[1],a=(0,r.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(f(e))return h(e,t)?(0,i.produce)(n,e).then(function(e){return s(e)}):s(function(t){return(0,i.produce)(t,e)});return s(e)},[]);return[n,a]}function p(e,t,n){return(0,r.useReducer)(function(t,n){return(0,i.produce)(t,function(t){return e(t,n)})},t,n)}var g=d;t.default=g},804929:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571);function o(e){return c(e)||a(e)||f(e)||s()}function s(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return h(e)}function u(e,t){return p(e)||d(e,t)||f(e,t)||l()}function l(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function p(e){if(Array.isArray(e))return e}n(906505);var g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,s=(0,i.useRef)(),a=u((0,i.useState)(!1),2),c=a[0],l=a[1],f=u((0,i.useState)(0),2),h=f[0],d=f[1],p=(0,i.useCallback)(function(e){l(e[0].isIntersecting),d(e[0].intersectionRatio),e[0].isIntersecting&&void 0!==r&&"function"==typeof r&&r()},[r]);return(0,i.useEffect)(function(){var n=s.current;e&&(n="function"==typeof e?e():e);var r=new IntersectionObserver(p,t);return n&&r.observe(n),function(){return r.disconnect()}},[s.current,e].concat(o(n),[r])),[s,c,h]};t.default=g},47525:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=function(e){(0,i.useEffect)(function(){e()},[])};t.default=o},603634:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=s(n(751057));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return l(e)||u(e)||d(e)||c()}function c(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return p(e)}function f(e,t){return v(e)||g(e,t)||d(e,t)||h()}function h(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function v(e){if(Array.isArray(e))return e}var y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,i.useRef)(),s=f((0,i.useState)({x:-1,y:-1}),2),c=s[0],u=s[1],l=(0,i.useCallback)(function(e){var t=r.current;if(!!t&&!!e){if(t===window){u({x:Math.round(e.clientX),y:Math.round(e.clientY)});return}var n=t.getBoundingClientRect(),i=n.left,o=n.top,s=e.clientX,a=e.clientY;(function(e){var t=s>=i&&s<=e.offsetWidth+i,n=a>=o&&a<=e.offsetHeight+o;return t&&n})(r.current)?u({x:s-i,y:a-o}):u({x:-1,y:-1})}},[r.current,"function"==typeof e?void 0:e].concat(a(n))),h=(0,o.default)(l,(null==t?void 0:t.throttle)||50,[l]).run;return(0,i.useLayoutEffect)(function(){return e?r.current="function"==typeof e?e():e:!r.current&&(r.current=window),r.current&&window.addEventListener("mousemove",h,!1),function(){window.removeEventListener("mousemove",h,!1)}},[l]),[r,c]};t.default=y},559054:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=o(n(917639));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return u(e)||c(e,t)||f(e,t)||a()}function a(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function u(e){if(Array.isArray(e))return e}function l(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=f(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,s=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{!s&&null!=i.return&&i.return()}finally{if(a)throw o}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return{set:function(e,t,n){return p(p({},e),{},g({},t,n))},delete:function(e,t){var n=p({},e);return delete n[t],n},deleteAll:function(e,t){var n=p({},e),r,i=l(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete n[o]}}catch(e){i.e(e)}finally{i.f()}return n},map:function(e,t){for(var n=p({},e),r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n[o[0]]=t(o)}return n},filter:function(e,t){for(var n={},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];t(o)&&(n[o[0]]=o[1])}return n},union:function(e,t){for(var n=p({},e),r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n[o[0]]=o[1]}return n},intersect:function(e,t){for(var n={},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];void 0!==e[o[0]]&&(n[o[0]]=o[1])}return n},difference:function(e,t){for(var n={},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];void 0===e[o[0]]&&(n[o[0]]=o[1])}return n},clear:function(){return{}}}}var y=function e(e){var t=s((0,i.default)(v(),e||{}),4),n=t[0],r=t[1];return p({state:n,setState:t[2],reset:t[3],merge:r.union},r)};t.default=y},293793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=function e(e){var t=(0,r.useRef)();return t.current=(0,r.useMemo)(function(){return e},[e]),(0,r.useCallback)(function(){var e=t.current;return e&&e.apply(void 0,arguments)},[t])};t.default=i},428416:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=function(e){var t=(0,i.useRef)();return(0,i.useEffect)(function(){t.current=e}),t.current};t.default=o},652447:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t){n(this,e),this.value=!1,this.value=!!t}return i(e,[{key:"setTrue",value:function(){this.value=!0}},{key:"setFalse",value:function(){this.value=!1}},{key:"isFalse",value:function(){return!1===this.value}},{key:"isTrue",value:function(){return!0===this.value}}]),e}();t.default=o},771942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(164287)),i=s(n(650248));n(547684);var o=s(n(652447));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return f(e)||l(e)||u(e)||c()}function c(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function l(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var b=function(){function e(t,n,s,a){v(this,e),this.options=void 0,this.requestFn=void 0,this.debounceFn=void 0,this.throttleFn=void 0,this.pollingTimer=void 0,this.count=0,this.unmountedFlag=new o.default,this.that=this,this.onChangeState=void 0,this.state={loading:!1,run:this.run.bind(this.that),data:void 0,error:void 0,isPolling:!1,unmountedFlag:this.unmountedFlag,cancel:this.cancel.bind(this.that),refresh:this.refresh.bind(this.that),refreshOptions:this.refreshOptions.bind(this.that),changeData:this.changeData.bind(this.that),unmount:this.unmount.bind(this.that),params:[]};var c=n.debounceThrottleOptions,u=n.initData,l=n.debounceInterval,f=n.throttleInterval;if(this.requestFn=t,this.options=n,this.onChangeState=s,this.state.data=u,a&&(this.state=p(p({},this.state),a)),this.pollingTimer=void 0,void 0!==l)this.debounceFn=l?(0,r.default)(this._run.bind(this.that),l):void 0;else if(void 0!==f)this.throttleFn=f?(0,i.default)(this._run.bind(this.that),f):void 0;else if(void 0!==c){var h=c.type,d=c.interval,g=c.leading,y=void 0===g?"debounce"!==h:g,m=c.trailing,b=void 0===m||m;"debounce"===h?this.debounceFn=(0,r.default)(this._run.bind(this.that),d,{leading:y,trailing:b}):"throttle"===h&&(this.throttleFn=(0,i.default)(this._run.bind(this.that),d,{leading:y,trailing:b}))}}return m(e,[{key:"setState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=p(p({},this.state),e),this.onChangeState&&this.onChangeState(this.state)}},{key:"cancelPolling",value:function(){void 0!==this.pollingTimer&&(window.clearTimeout(this.pollingTimer),this.pollingTimer=void 0)}},{key:"dontPolling",value:function(){this.setState({isPolling:!1})}},{key:"_run",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];this.cancelPolling(),this.count+=1;var i=this.count;return this.setState({loading:!0,params:n,isPolling:!!this.options.pollingInterval}),this.requestFn.apply(this,n).then(function(t){if(!e.unmountedFlag.isTrue()&&i===e.count){var r=e.options.formatResult?e.options.formatResult(t):t;return e.setState({loading:!1,error:void 0,data:r}),e.options.onSuccess&&e.options.onSuccess(r,n,e.dontPolling.bind(e.that)),r}}).catch(function(t){if(!e.unmountedFlag.isTrue()&&i===e.count){if(e.setState({data:void 0,error:t,loading:!1}),e.options.onError&&e.options.onError(t,n,e.dontPolling.bind(e.that)),e.options.throwOnError)throw t;return t}}).finally(function(){if(!e.unmountedFlag.isTrue()&&i===e.count)e.options.pollingInterval&&e.state.isPolling&&(e.pollingTimer=window.setTimeout(function(){e._run.apply(e,n)},e.options.pollingInterval))})}},{key:"run",value:function(){var e=this.debounceFn,t=this.throttleFn;return(this.unmountedFlag.setFalse(),e)?(e.apply(void 0,arguments),Promise.resolve(null)):t?(t.apply(void 0,arguments),Promise.resolve(null)):this._run.apply(this,arguments)}},{key:"cancel",value:function(){var e=this.debounceFn,t=this.throttleFn,n=this.pollingTimer;e&&e.cancel(),t&&t.cancel(),void 0!==n&&this.cancelPolling(),this.count+=1,this.setState({loading:!1,isPolling:!1})}},{key:"unmount",value:function(){this.unmountedFlag.setTrue(),this.cancel()}},{key:"refresh",value:function(){return this.unmountedFlag.setFalse(),this.run.apply(this,a(this.state.params))}},{key:"refreshOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=p(p({},this.options),e),this.run.apply(this,a(this.state.params))}},{key:"changeData",value:function(e){"function"==typeof e?this.setState({data:e(this.state.data)||{}}):this.setState({data:e})}}]),e}();t.default=b},475432:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(){var t=this;n(this,e),this.value=void 0,this.type="memory",this.changeType=function(e){t.type=e},this.getValue=function(e){switch(t.type){case"memory":default:return t.value.get(e);case"localStorage":return JSON.parse(localStorage.getItem(e)||"{}")}},this.setValue=function(e,n){switch(t.type){case"memory":default:t.value.set(e,n);break;case"localStorage":localStorage.setItem(e,JSON.stringify(n))}},this.removeItem=function(e){switch(t.type){case"memory":default:t.value.delete(e);break;case"localStorage":localStorage.removeItem(e)}},this.value=new Map};t.default=r},134566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeCacheType=t.setCache=t.getCache=void 0;var r=new(function e(e){return e&&e.__esModule?e:{default:e}}(n(475432))).default,i=function(e,t,n){var i=r.getValue(e);null!=i&&i.timer&&clearTimeout(i.timer);var o=void 0;t>-1&&(o=setTimeout(function(){r.removeItem(e)},t));var s={data:n,timer:o,startTime:new Date().getTime()};r.setValue(e,s)};t.setCache=i;var o=function(e){var t=r.getValue(e);return{data:null==t?void 0:t.data,startTime:null==t?void 0:t.startTime}};t.getCache=o;var s=function(e){r.changeType(e)};t.changeCacheType=s},212932:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i={value:!0},i={enumerable:!0,get:function(){return l.Mode}},t.default=i=void 0;var i,o=d(n(218571)),s=f(n(446579)),a=f(n(110206)),c=f(n(325994)),u=f(n(661637)),l=n(816209);function f(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=o.default.createContext({});function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g(g({},(0,o.useContext)(y)),t),r=n.mode;return r===l.Mode.loadMore?(0,a.default)(e,n):r===l.Mode.pagination?(0,c.default)(e,n):r===l.Mode.search?(0,u.default)(e,n):(0,s.default)(e,n)}y.displayName="UseRequestConfigContext",i=y.Provider;var b=m;t.default=b},816209:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,t.Mode=n,!function(e){e.loadMore="loadMore",e.pagination="pagination",e.search="search"}(n||(t.Mode=n={}))},446579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=u(n(776007)),o=u(n(293793)),s=n(134566),a=u(n(771942)),c=u(n(652447));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return d(e)||h(e)||v(e)||f()}function f(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(e){if(Array.isArray(e))return y(e)}function p(e,t){return b(e)||m(e,t)||v(e,t)||g()}function g(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E="_BYTED_HOOKS_DEFAULT_KEY_",O=function(e){var t,n,u,f,h,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=d.staleTime,v=void 0===g?3e5:g,y=d.auto,m=void 0!==y&&y,b=d.defaultParams,_=void 0===b?[]:b,O=d.refreshDeps,k=void 0===O?[]:O,A=d.initData,R=d.ready,C=void 0===R||R,I=d.cacheKey,T=d.cacheStoreType,j=void 0===T?"memory":T,x=d.cacheTime,D=void 0===x?3e5:x,P=d.loadingCheck,L=void 0!==P&&P,N=d.errorCheck,M=void 0!==N&&N,B=d.formatResult,z=d.requestKey,G=d.onError,U=d.onSuccess,F=(0,o.default)(e),W=(0,o.default)(U),J=(0,o.default)(G),K=B?(0,o.default)(B):void 0,q=(0,o.default)(z),V=(0,r.useCallback)(function(e,t){ee(function(n){return w(w({},n),{},S({},e,t))})},[]),H=(0,r.useRef)(I);H.current=I;var Z=(0,r.useRef)(C);Z.current=C;var $=(0,r.useRef)(E),X=function(){if(H.current){var e=(0,s.getCache)(H.current)||{},t=e.data,n=e.startTime,r=void 0===n?0:n,i=-1===v||new Date().getTime()-r<=v;if(t&&i){$.current=t.currentRequestKey;var o={};return Object.keys(t.requests).forEach(function(e){var n=t.requests[e],r=new a.default(F,w(w({},d),{},{onSuccess:W,onError:J,formatResult:K}),V.bind(null,e),{loading:n.loading,params:n.params,data:n.data,error:n.error});o[e]=r.state}),o}}return{}},Y=p((0,r.useState)(function(){return"memory"!==j&&(0,s.changeCacheType)(j),X()}),2),Q=Y[0],ee=Y[1],et=(0,r.useRef)(Q);et.current=Q;var en=(0,r.useRef)(),er=(0,r.useCallback)(function(){for(var e,t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!C){en.current=r;return}if(z){var o=q.apply(void 0,r);$.current=o,t=et.current[o]}else t=et.current[$.current];if(!t){var s=new a.default(F,w(w({},d),{},{onSuccess:W,onError:J,formatResult:K}),V.bind(null,$.current)).state;return ee(function(e){return w(w({},e),{},S({},$.current,s))}),s.run.apply(s,r)}return(e=t).run.apply(e,r)},[z,C]);(0,i.default)(function(){H.current&&(0,s.setCache)(H.current,D,{requests:Q,currentRequestKey:$.current})},[Q]);var ei=(0,r.useCallback)(function(){Object.values(et.current).forEach(function(e){e.unmount()}),$.current=E,ee({}),et.current={}},[ee]),eo=(0,r.useRef)(!1);(0,i.default)(function(){C&&(!eo.current&&en.current&&er.apply(void 0,l(en.current)),eo.current=!0)},[C]),(0,r.useEffect)(function(){return"memory"!==j&&(0,s.changeCacheType)(j),C&&m&&(Object.keys(X()).length>0?Object.values(Q).forEach(function(e){e.refresh()}):er.apply(void 0,l(_))),function(){Object.values(et.current).forEach(function(e){e.unmount()})}},[C]),(0,i.default)(function(){if(Z.current&&m){var e=X();0===Object.keys(e).length?Object.values(Q).forEach(function(e){e.refresh()}):ee(e)}},l(k));var es=[d.debounceInterval,d.throttleInterval,null===(t=d.debounceThrottleOptions)||void 0===t?void 0:t.type,null===(n=d.debounceThrottleOptions)||void 0===n?void 0:n.interval,null===(u=d.debounceThrottleOptions)||void 0===u?void 0:u.leading,null===(f=d.debounceThrottleOptions)||void 0===f?void 0:f.trailing,d.pollingInterval];if((0,i.default)(function(){Object.values(Q).forEach(function(e){!e.unmountedFlag.isTrue()&&(void 0!==d.debounceInterval?e.refreshOptions({debounceInterval:d.debounceInterval,pollingInterval:d.pollingInterval}):void 0!==d.throttleInterval?e.refreshOptions({throttleInterval:d.throttleInterval,pollingInterval:d.pollingInterval}):e.refreshOptions({debounceThrottleOptions:d.debounceThrottleOptions,pollingInterval:d.pollingInterval}))})},[].concat(es)),h=Q[$.current]?w(w({},Q[$.current]),{},{run:er,reset:ei,requests:Q}):{loading:m&&C,isPolling:!1,data:A,error:void 0,unmountedFlag:new c.default,params:[],cancel:function(){},unmount:function(){},reset:function(){},refresh:function(){},refreshOptions:function(){},changeData:function(){},run:er,requests:Q},"undefined"!=typeof Proxy){var ea=!L,ec=!M;return new Proxy(h,{get:function(e,t,n){return"data"===t?(!ea&&console.warn("You need to check loading before using data"),!ec&&console.warn("You need to check error before using data")):"loading"===t||"error"===t,e[t]}})}return h};t.default=O},110206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=s(n(776007)),o=s(n(446579));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return l(e)||u(e)||v(e)||c()}function c(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return y(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return b(e)||m(e,t)||v(e,t)||g()}function g(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function _(e,t){if(null==e)return{};var n,r,i=w(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){if(n=o[r],!(t.indexOf(n)>=0))Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function w(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}var S=function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ready,s=void 0===n||n,c=t.resetDeps,u=void 0===c?[]:c,l=t.refreshDeps,f=void 0===l?[]:l,d=t.itemKey,g=t.initPageSize,v=void 0===g?10:g,y=t.ref,m=t.threshold,b=void 0===m?100:m,w=_(t,["ready","resetDeps","refreshDeps","itemKey","initPageSize","ref","threshold"]),S=t.hasMoreHanlder,E=t.isNoMore,O=t.hasMoreHandler,k=t.noMoreHandler;k=k||O||S||E;var A=t.incrementSize||v,R=p((0,r.useState)(!1),2),C=R[0],I=R[1],T=p((0,r.useState)(1),2),j=T[0],x=T[1],D=(0,r.useRef)(0),P=(0,r.useRef)(new Date().getTime()),L={data:{list:[]},current:1,pageSize:v,offset:0,startTime:P.current},N="boolean"!=typeof w.auto||w.auto,M=p((0,r.useState)(),2),B=M[0],z=M[1],G=(0,o.default)(e,h(h({},w),{},{ready:s,auto:N,defaultParams:[L],requestKey:function(e){var t,n;return((null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(n=t.list)||void 0===n?void 0:n.length)||0)+P.current},onSuccess:function(){var e;null!=B&&null!==(e=B.list)&&void 0!==e&&e.length&&y&&y.current&&(y.current.scrollTop=0),z(void 0),I(!1),x(function(e){return e+1}),t.onSuccess&&t.onSuccess.apply(t,arguments)},onError:function(){I(!1),t.onError&&t.onError.apply(t,arguments)}})),U=G.data,F=G.run,W=G.error,J=G.reset,K=G.loading,q=G.requests,V=(0,r.useMemo)(function(){var e=[],t=U||{};return Object.keys(q).sort(function(e,t){return Number(e)-Number(t)}).forEach(function(n){var r,i,o=q[n];null!==(r=o.data)&&void 0!==r&&r.list&&(e=e.concat(null===(i=o.data)||void 0===i?void 0:i.list)),!o.loading&&(t=o.data)}),h(h({},t),{},{list:e})},[q,U]),H=!!(!K&&!C&&(k?k(U,W,V):!U||!U.list.length||U.total&&V.list.length>=U.total)),Z=(0,r.useCallback)(function(){var e=function(e,t){var n="function"==typeof d?d(e,t):e[d];return void 0===n?t:n},t=V.list;return{data:V,current:j,pageSize:1===j?v:A,offset:t.length,id:d&&t.length>0?e(t[t.length-1],t.length-1):void 0,startTime:P.current}},[j,v,A,V]),$=(0,r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===e&&z(V),J(),x(1),P.current=new Date().getTime(),F(L)},[F,J,V]),X=(0,r.useRef)($);X.current=$,(0,i.default)(function(){s&&N&&X.current()},[].concat(a(u),a(f)));var Y=(0,r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(z(void 0),!H&&!K&&!C)I(!0),F(h(h({},Z()),e))},[H,K,C,F,V,Z]);(0,r.useEffect)(function(){if(!y||!y.current)return function(){};var e=function(){if(!!y&&!!y.current)D.current<y.current.scrollTop&&y.current.scrollHeight-y.current.scrollTop<=y.current.clientHeight+b&&Y(),D.current=y.current.scrollTop};return y.current.addEventListener("scroll",e),function(){y&&y.current&&y.current.removeEventListener("scroll",e)}},[y&&y.current,Y]);var Q=(0,r.useMemo)(function(){var e;return null!=B&&null!==(e=B.list)&&void 0!==e&&e.length?B:V},[B,B,V]);return h(h({},G),{},{reset:X.current,current:j,data:Q,reload:$,loading:K&&!!(null==B?void 0:B.list.length)||K&&0===V.list.length,loadMore:Y,loadingMore:C,noMore:H,hasMore:H})};t.default=S},325994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=s(n(776007)),o=s(n(446579));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return u(e)||v(e)||g(e)||c()}function c(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if(Array.isArray(e))return e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return y(e)||v(e)||g(e)||p()}function p(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}}function v(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function y(e){if(Array.isArray(e))return m(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){if(null==e)return{};var n,r,i=_(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){if(n=o[r],!(t.indexOf(n)>=0))Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function _(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}var w=function e(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.defaultPageSize,c=void 0===s?10:s,u=n.initCurrent,l=void 0===u?1:u,h=n.resetFirst,p=void 0!==h&&h,g=n.resetDeps,v=void 0===g?[]:g,y=n.refreshDeps,m=void 0===y?[]:y,_=(n.requestKey,b(n,["defaultPageSize","initCurrent","resetFirst","resetDeps","refreshDeps","requestKey"])),w=n.pageSize,S=n.current,E="boolean"!=typeof _.auto||_.auto,O=[f({current:l,pageSize:c},(null===(t=_.defaultParams)||void 0===t?void 0:t[0])||{})].concat(d((_.defaultParams||[]).slice(1))),k=(0,o.default)(e,f(f({},_),{},{defaultParams:O,auto:E})),A=k.data,R=k.params,C=k.run,I=k.loading,T=R&&R[0]?R[0]:O[0]||{},j=T.current,x=void 0===j?l:j,D=T.pageSize,P=void 0===D?c:D,L=T.sorter,N=void 0===L?{}:L,M=T.filters,B=void 0===M?{}:M;w&&(P=w),S&&(x=S);var z=(0,r.useCallback)(function(e){var t=a(R),n=t[0],r=t.slice(1);return C.apply(void 0,[f(f({},n),e)].concat(d(r)))},[C,R]),G=(null==A?void 0:A.total)||0,U=(0,r.useMemo)(function(){return Math.ceil(G/P)},[P,G]),F=(0,r.useCallback)(function(e,t){var n=e<=0?1:e,r=Math.ceil(G/(t<=0?1:t));return n>r&&(n=r),z({current:e,pageSize:t})},[G,z]);(0,r.useRef)(F).current=F;var W=(0,r.useCallback)(function(e){F(e,P)},[F,P]),J=(0,r.useCallback)(function(e){F(x,e)},[F,x]),K=(0,r.useRef)(W);K.current=W,(0,i.default)(function(){E&&K.current(S||(p?1:l))},[].concat(d(v),d(m),[w,S]));var q=(0,r.useCallback)(function(e,t,n){return z({current:void 0===e.current?l:e.current,pageSize:e.pageSize||c,filters:t,sorter:n})},[z]),V=(0,r.useCallback)(function(){C(O[0],O[1])},[]);return f(f({},k),{},{reset:V,loading:I,data:A,params:R,pagination:{current:x,pageSize:P,total:G,totalPage:U,onChange:F,changeCurrent:W,changePageSize:J},tableProps:{dataSource:(null==A?void 0:A.list)||[],loading:I,onChange:q,pagination:{current:x,pageSize:P,total:G}},sorter:N,filters:B})};t.default=w},661637:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=s(n(446579)),o=s(n(776007));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return l(e)||u(e)||v(e)||c()}function c(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return y(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return b(e)||m(e,t)||v(e,t)||g()}function g(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function _(e,t){if(null==e)return{};var n,r,i=w(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){if(n=o[r],!(t.indexOf(n)>=0))Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function w(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}var S=function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.defaultValue,s=t.refreshDeps,c=void 0===s?[]:s,u=t.debounceThrottleOptions,l=void 0===u?{type:"debounce",interval:300}:u,f=_(t,["defaultValue","refreshDeps","debounceThrottleOptions"]),d="boolean"!=typeof f.auto||f.auto,g=p((0,r.useState)(n),2),v=g[0],y=g[1],m=(0,i.default)(e,h(h({defaultParams:[n]},f),{},{debounceThrottleOptions:l,auto:!1})),b=m.run,w=_(m,["run"]);(0,o.default)(function(){d&&b(v)},a(c)),(0,r.useEffect)(function(){b(v)},[v]);var S=(0,r.useCallback)(function(){return b(v)},[b,v]);return h(h({},w),{},{value:v,onChange:y,run:S})};t.default=S},932119:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=a(n(375107)),s=a(n(751057));function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return f(e)||l(e)||p(e)||u()}function u(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return g(e)}function h(e,t){return y(e)||v(e,t)||p(e,t)||d()}function d(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function y(e){if(Array.isArray(e))return e}var m=50,b=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=m;"string"==typeof r?t=r:(r.dimension&&(t=r.dimension),r.throttle&&(u=r.throttle),r.throttleOption&&(n=r.throttleOption));var l=(0,i.useRef)(),f=h((0,i.useState)(function(){var t="function"==typeof e?e():e;return{width:(t||{}).clientWidth||0,height:(t||{}).clientHeight||0}}),2),d=f[0],p=f[1],g=(0,i.useCallback)(function(e){if(null!=e&&e.length){var n=e[0].contentRect,r=n.width,i=n.height;p(function(e){if(e)return"width"===t?e.width!==r?{width:r,height:i}:e:"height"===t?e.height!==i?{width:r,height:i}:e:e.width!==r||e.height!==i?{width:r,height:i}:e;return{width:r,height:i}})}},[t]),v=(0,s.default)(g,u,[g],n).run;return(0,i.useLayoutEffect)(function(){var t=l.current;e&&(t="function"==typeof e?e():e);var n=new o.default(v);return t&&n.observe(t),function(){return n.disconnect()}},[l.current,"function"==typeof e?void 0:e,g].concat(c(a))),[l,d]};t.default=b},184620:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571);function o(e,t){return l(e)||u(e,t)||a(e,t)||s()}function s(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function l(e){if(Array.isArray(e))return e}var f=function(e){return"function"==typeof e};function h(e,t){return f(t)?t(e):t}var d=function e(e){var t=h(void 0,e),n=o((0,i.useState)(t),2),r=n[0],s=n[1],a=(0,i.useRef)(t);return[r,(0,i.useCallback)(function(e){var t=h(a.current,e);a.current=t,s(t)},[]),(0,i.useCallback)(function(){return a.current},[])]};t.default=d},751057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=o(n(776007));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return l(e)||u(e)||c(e)||a()}function a(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.immediately,c=void 0!==a&&a,u=o.trailing,l=void 0===u||u,f=o.leading,h=void 0!==f&&f,d=n,p=t,g=(0,r.useRef)(),v=(0,r.useRef)(!1),y=(0,r.useRef)(e);y.current=e;var m=(0,r.useRef)([]),b=function(e){return window.setTimeout(function(){e&&y.current.apply(y,s(m.current)),g.current=void 0,v.current=!1},p)},_=(0,r.useCallback)(function(){g.current&&clearTimeout(g.current),g.current=void 0},[]),w=(0,r.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(m.current=t,!g.current){if(c&&!v.current){y.current.apply(y,s(m.current)),v.current=!0;return}h&&y.current.apply(y,s(m.current)),g.current=b(l)}},[p,_]);return(0,i.default)(function(){w()},[].concat(s(d),[w])),(0,r.useEffect)(function(){return _},[]),{run:w,cancel:_}};t.default=h},776007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=function(e,t){var n=(0,r.useRef)(!1);(0,r.useEffect)(function(){return n.current?e():(n.current=!0,function(){})},t)};t.default=i},195265:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=s(n(1297));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return f(e)||l(e)||u(e)||c()}function c(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function l(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=r.immediately,c=void 0!==s&&s,u=r.trailing,l=void 0===u||u,f=r.leading,h=void 0!==f&&f,d=n,p=t,g=(0,i.useRef)(),v=(0,i.useRef)(!1),y=(0,i.useRef)(!1),m=(0,i.useRef)(e);m.current=e;var b=(0,i.useRef)([]),_=function(e){return window.setTimeout(function(){e&&m.current.apply(m,a(b.current)),y.current=!1},p)},w=(0,i.useCallback)(function(){g.current&&clearTimeout(g.current)},[]),S=(0,i.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(b.current=t,c&&!v.current){m.current.apply(m,a(b.current)),v.current=!0;return}w(),h&&!1==y.current&&(m.current.apply(m,a(b.current)),y.current=!0),g.current=_(l)},[p,w]);return(0,o.default)(function(){return S(),w},[].concat(a(d),[S])),(0,i.useEffect)(function(){return w},[]),{run:S,cancel:w}};t.default=d},324160:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571);function o(e){return c(e)||a(e)||f(e)||s()}function s(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return h(e)}function u(e,t){return p(e)||d(e,t)||f(e,t)||l()}function l(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function p(e){if(Array.isArray(e))return e}n(906505);var g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,s=(0,i.useRef)(),a=u((0,i.useState)(!1),2),c=a[0],l=a[1],f=u((0,i.useState)(0),2),h=f[0],d=f[1],p=(0,i.useCallback)(function(e){l(e[0].isIntersecting),d(e[0].intersectionRatio),e[0].isIntersecting&&void 0!==r&&"function"==typeof r&&r()},[r]);return(0,i.useEffect)(function(){var n=s.current;e&&(n="function"==typeof e?e():e);var r=new IntersectionObserver(p,t);return n&&r.observe(n),function(){return r.disconnect()}},[s.current,e].concat(o(n),[r])),[s,c,h]};t.default=g},544633:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=function e(e){var t=(0,i.useRef)();return t.current=(0,i.useMemo)(function(){return e},[e]),(0,i.useCallback)(function(){var e=t.current;return e&&e.apply(void 0,arguments)},[t])};t.default=o},395551:function(e,t,n){"use strict";r={value:!0},t.default=void 0;var r,i=n(218571),o=a(n(375107)),s=a(n(953032));function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return f(e)||l(e)||p(e)||u()}function u(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return g(e)}function h(e,t){return y(e)||v(e,t)||p(e,t)||d()}function d(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&null!=a.return&&a.return()}finally{if(i)throw o}}return n}}function y(e){if(Array.isArray(e))return e}var m=50,b=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=m;"string"==typeof r?t=r:(r.dimension&&(t=r.dimension),r.throttle&&(u=r.throttle),r.throttleOption&&(n=r.throttleOption));var l=(0,i.useRef)(),f=h((0,i.useState)(function(){var t="function"==typeof e?e():e;return{width:(t||{}).clientWidth||0,height:(t||{}).clientHeight||0}}),2),d=f[0],p=f[1],g=(0,i.useCallback)(function(e){if(null!=e&&e.length){var n=e[0].contentRect,r=n.width,i=n.height;p(function(e){if(e)return"width"===t?e.width!==r?{width:r,height:i}:e:"height"===t?e.height!==i?{width:r,height:i}:e:e.width!==r||e.height!==i?{width:r,height:i}:e;return{width:r,height:i}})}},[t]),v=(0,s.default)(g,u,[g],n).run;return(0,i.useLayoutEffect)(function(){var t=l.current;e&&(t="function"==typeof e?e():e);var n=new o.default(v);return t&&n.observe(t),function(){return n.disconnect()}},[l.current,"function"==typeof e?void 0:e,g].concat(c(a))),[l,d]};t.default=b},953032:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=o(n(1297));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return l(e)||u(e)||c(e)||a()}function a(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.immediately,c=void 0!==a&&a,u=o.trailing,l=void 0===u||u,f=o.leading,h=void 0!==f&&f,d=n,p=t,g=(0,r.useRef)(),v=(0,r.useRef)(!1),y=(0,r.useRef)(e);y.current=e;var m=(0,r.useRef)([]),b=function(e){return window.setTimeout(function(){e&&y.current.apply(y,s(m.current)),g.current=void 0,v.current=!1},p)},_=(0,r.useCallback)(function(){g.current&&clearTimeout(g.current),g.current=void 0},[]),w=(0,r.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(m.current=t,!g.current){if(c&&!v.current){y.current.apply(y,s(m.current)),v.current=!0;return}h&&y.current.apply(y,s(m.current)),g.current=b(l)}},[p,_]);return(0,i.default)(function(){w()},[].concat(s(d),[w])),(0,r.useEffect)(function(){return _},[]),{run:w,cancel:_}};t.default=h},1297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(218571),i=function(e,t){var n=(0,r.useRef)(!1);(0,r.useEffect)(function(){return n.current?e():(n.current=!0,function(){})},t)};t.default=i},619808:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSNConsole=void 0;class n{static log(e){console.log(e)}}t.TSNConsole=n},604033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSNSerializableDataClass=t.TSNDataClass=void 0;let r=n(911965);class i{constructor(e){if("object"==typeof e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];this[t]=n}}}copy(e){let t=new this.constructor;if(Object.assign(t,this),"object"==typeof e){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let r=e[n];t[n]=r}}return t}equals(e){if(e instanceof this.constructor){for(let t in this)if(Object.prototype.hasOwnProperty.call(this,t)&&this[t]!==e[t])return!1;return!0}return!1}toString(){let e=`${this.constructor.name}(`;for(let t in this)if(Object.prototype.hasOwnProperty.call(this,t)){let n=this[t];e+=`${t}=${n},`}return e+=")"}}t.TSNDataClass=i;class o extends r.TSNSerializable{static decodeFromJSONString(e,t){return new e({JSONString:t})}static encodeToJSONString(e){return e.toJSONString()}afterInit(){if(super.afterInit(),"object"==typeof this._)for(let e in this._){if("JSONString"!==e&&"JSONObject"!==e&&"elementIniter"!==e){if(Object.prototype.hasOwnProperty.call(this._,e)){let t=this._[e];this[e]=t}}}}copy(e){let t=new this.constructor;if(Object.assign(t,this),"object"==typeof e){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let r=e[n];t[n]=r}}return t}equals(e){if(e instanceof this.constructor){for(let t in this)if(Object.prototype.hasOwnProperty.call(this,t)&&this[t]!==e[t])return!1;return!0}return!1}toString(){let e=`${this.constructor.name}(`;for(let t in this)if(Object.prototype.hasOwnProperty.call(this,t)){let n=this[t];e+=`${t}=${n},`}return e+=")"}}t.TSNSerializableDataClass=o},383569:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSNDispatchQueue=void 0;class n{static main(){return new n}static global(){return new n}run(e){setTimeout(()=>{e()},0)}}t.TSNDispatchQueue=n},131454:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSNNumberConverter=void 0;class n{static toInt(e){return"number"==typeof e?Math.floor(e):"string"==typeof e?parseInt(e):0}static toDouble(e){return"number"==typeof e?e:"string"==typeof e?parseFloat(e):0}static toInt64(e){return"number"==typeof e?`${e}`:"string"==typeof e?e:"0"}}t.TSNNumberConverter=n},911965:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSNJSON=t.TSNSerializable=t.TSNJSONObject=void 0;class n{constructor(e={}){this.rawMap=e}get(e){return this.rawMap[e]}getInt(e){let t=this.get(e);if("number"==typeof t)return t}getInt64(e){let t=this.get(e);return"number"==typeof t?`${t}`:"string"==typeof t?t:void 0}getDouble(e){let t=this.get(e);if("number"==typeof t)return t}getString(e){let t=this.get(e);if("string"==typeof t)return t}getBool(e){let t=this.get(e);if("boolean"==typeof t)return t}getObject(e){let t=this.get(e);return t instanceof Object&&null!==t?new n(t):t instanceof n?t:void 0}}t.TSNJSONObject=n;class r{constructor(e){this._=e,this.jsonMapKeys={},this.jsonClazzInitializer={},this.jsonMapTypes={},this.jsonInited=!1,this.rawData=new n({}),this._=e,!this.jsonLastPropertyKey&&this.doInit()}toJSON(){var e;let t={};for(let n in!this.jsonMapKeys&&(this.jsonMapKeys={}),this.jsonMapKeys){let i=this.jsonMapKeys[n],o=null===(e=this.jsonMapTypes)||void 0===e?void 0:e[n],s=this[n];if(void 0!==s)if(s instanceof Object&&null!==s&&s instanceof r)t[i]=s.toJSON();else if(s instanceof Array)t[i]=s.map(e=>e instanceof Array?e.map(e=>e instanceof r?e.toJSON():e):e instanceof r?e.toJSON():e);else if("Int64"===o){if(isNaN(parseInt(s)))continue;t[i]=`Int64(${s})`}else if("Map"===o&&s instanceof Object&&null!==s)for(let e in t[i]={},s){let n=s[e];n instanceof r?t[i][e]=n.toJSON():t[i][e]=n}else t[i]=s}let n={};for(let e in this.jsonMapKeys)n[this.jsonMapKeys[e]]=e;for(let e in this.rawData.rawMap)void 0===n[e]&&(t[e]=this.rawData.rawMap[e]);return t}toJSONString(){try{return JSON.stringify(this.toJSON()).replace(/"Int64\((.*?)\)"/g,"$1")}catch(e){console.error("TSNSerializable.toJSONString",e);return}}doInit(){if(this.jsonInited)return;this.jsonInited=!0;let e=this._;if(e&&e.JSONString)try{try{let t=e.JSONString.replace(/: ?(\b\d{11,}\b),/g,': "$1",').replace(/: ?(\b\d{11,}\b)/g,': "$1"');this.rawData=new n(JSON.parse(t))}catch(t){this.rawData=new n(JSON.parse(e.JSONString))}this.mapping(),this.afterParse()}catch(t){console.error("TSNSerializable.doInit",t,e.JSONString)}else e&&e.JSONObject?(this.rawData=e.JSONObject,this.mapping(),this.afterParse()):this.afterInit()}afterInit(){}afterParse(){}mapping(){var e,t;if(this.jsonMapKeys)for(let r in this.jsonMapKeys){let i=this.jsonMapKeys[r],o=this.rawData.rawMap[i],s=null===(e=this.jsonMapTypes)||void 0===e?void 0:e[r],a=null===(t=this.jsonClazzInitializer)||void 0===t?void 0:t[r];if(a){if(o instanceof Array)this[r]=o.map(e=>{if(e instanceof Array)return e.map(e=>{if(!(e instanceof Object))return e;{let t=new n(e);return new(a(t))({JSONObject:t})}});if(!(e instanceof Object))return e;{let t=new n(e);return new(a(t))({JSONObject:t})}});else if("Map"===s&&o instanceof Object&&null!==o)for(let e in this[r]={},o){let t=o[e];if(t instanceof Object&&null!==t){let i=new n(t);this[r][e]=new(a(i))({JSONObject:i})}else this[r][e]=t}else{let e=this.rawData.getObject(i);if(e){let t=a(e);this[r]=new t({JSONObject:e})}}}else"Int64"===s?this[r]=(()=>{if("string"==typeof o)return o;if("number"==typeof o)return`${o}`;if("bigint"==typeof o)return`${o}`;else return})():this[r]=o}}}function i(e,t,n){return function(r,i){r.jsonLastPropertyKey=i;let o=function(){return this["$"+i]},s=function(r){this.jsonMapKeys[i]=e,this.jsonClazzInitializer[i]=t,this.jsonMapTypes[i]=n,this["$"+i]=r,i===this.jsonLastPropertyKey&&this.doInit()};Object.defineProperty(r,i,{get:o,set:s,enumerable:!0,configurable:!0})}}t.TSNSerializable=r,t.TSNJSON=i},23951:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSNTimer=void 0;class n{static periodic(e,t){return new n(e,t,!0)}constructor(e,t,n=!1){this.isRepeat=n,n?this.handle=setInterval(t,1e3*e):this.handle=setTimeout(t,1e3*e)}cancel(){this.handle&&!this.isRepeat?(clearTimeout(this.handle),this.handle=null):this.handle&&this.isRepeat&&(clearInterval(this.handle),this.handle=null)}}t.TSNTimer=n},676567:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};function o(){}function s(e){}function a(e){}function c(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.importGoLibrary=t.importKotlinLibrary=t.importSwiftLibrary=t.IS_JS=t.IS_GO=t.IS_KT=t.IS_SWIFT=t.TSNOpenClass=void 0,i(n(911965),t),i(n(23951),t),i(n(619808),t),i(n(131454),t),i(n(383569),t),i(n(604033),t),t.TSNOpenClass=o,t.IS_SWIFT=!1,t.IS_KT=!1,t.IS_GO=!1,t.IS_JS=!0,t.importSwiftLibrary=s,t.importKotlinLibrary=a,t.importGoLibrary=c},546636:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e){if(Array.isArray(e))return r(e)}function o(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){n(e);return}a.done?t(c):Promise.resolve(c).then(r,i)}n("318251");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}},349728:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Jx:function(){return decode},nh:function(){return _global},sb:function(){return customHash}});var process=__webpack_require__(499845),__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))__hasOwnProp.call(t,n)&&__defNormalProp(e,n,t[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))__propIsEnum.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n),__async=(e,t,n)=>new Promise((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())}),DefaultPluginOptions=null,defaultSwcLoaderOptions=null,StringToBool=null;function log(...e){console.log("[Argus Security Plugin] ",...e)}function parseJson(jsonStr){try{return[JSON.parse(jsonStr,(key,v)=>{try{if(eval(v) instanceof RegExp)return eval(v)}catch(e){}if(StringToBool.includes(key)){if("boolean"==typeof v||"intra"===v)return v;if("true"===v||"false"===v||"all"===v)return"true"===v||"false"!==v&&"all";throw Error(`${key} \u{7684}\u{503C}\u{975E} Boolean`)}return v})]}catch(e){return[null,e]}}function stringifyJson(e,t){return JSON.stringify(e,(e,t)=>t instanceof RegExp?t.toString():t,t?2:void 0)}function computeTime({timeData:e,type:t}){let n=process.hrtime();return()=>{let r=process.hrtime(n);e[t]+=1e3*r[0]+r[1]/1e6}}var _checkXSS=function(e){return e&&e.Math==Math&&e},_global=_checkXSS("object"==typeof globalThis&&globalThis)||_checkXSS("object"==typeof window&&window)||_checkXSS("object"==typeof self&&self)||_checkXSS("object"==typeof __webpack_require__.g&&__webpack_require__.g)||Function("return this")();function _utf8_decode(e){let t="",n=0,r=0,i=0,o=0;for(;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(t+=String.fromCharCode((31&r)<<6|63&(o=e.charCodeAt(n+1))),n+=2):(o=e.charCodeAt(n+1),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&(i=e.charCodeAt(n+2))),n+=3);return t}function decode(e){let t,n,r,i,o,s,a;let c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");l<e.length;)i=c.indexOf(e.charAt(l++)),o=c.indexOf(e.charAt(l++)),s=c.indexOf(e.charAt(l++)),a=c.indexOf(e.charAt(l++)),t=i<<2|o>>4,n=(15&o)<<4|s>>2,r=(3&s)<<6|a,u+=String.fromCharCode(t),64!==s&&(u+=String.fromCharCode(n)),64!==a&&(u+=String.fromCharCode(r));return u=_utf8_decode(u)}function _utf8_encode(e){e=e.replace(/rn/g,"n");let t="";for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}function encode(e){let t,n,r,i,o,s,a;let c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=_utf8_encode(e);l<e.length;)t=e.charCodeAt(l++),n=e.charCodeAt(l++),r=e.charCodeAt(l++),i=t>>2,o=(3&t)<<4|n>>4,s=(15&n)<<2|r>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),u=u+c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a);return u}var _=null;function mergeObject(e,t){let n=parseJson(stringifyJson(e)),r=parseJson(stringifyJson(t)),i=n[1]||r[1];if(i)throw Error(i);for(let i in e=n[0],t=r[0])Object.prototype.hasOwnProperty.call(t,i)&&void 0===e[i]&&(e[i]=t[i]);for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let r=n;void 0===t[r]?t[r]=e[r]:"object"==typeof t[r]&&"object"==typeof e[r]&&(t[r]=mergeObject(e[r],t[r]))}return t}function addBabelPlugin({plugin:e,pluginFuncName:t,pluginLoaderName:n,compiler:r}){let i=r=>{let i=r.use||r,o="string"==typeof i?i:i.loader;if(!o||!o.includes("babel-loader")&&!o.includes("babel/loader"))return;if("string"==typeof i){r.use={loader:o,options:{plugins:[e]}};return}let s=i.options||{},{plugins:a=[]}=s;if(!a.some(e=>Array.isArray(e)&&("function"==typeof e[0]&&e[0].name===t||"string"==typeof e[0]&&e[0].includes(n))))a.unshift(e),s.plugins=a,i.options=s},o=t=>{let n=t.use.findIndex(e=>{let t="string"==typeof e?e:e.loader;return!!(t&&(t.includes("babel-loader")||t.includes("babel/loader")))||!1});if(-1!==n){if("string"==typeof t.use[n]){t.use[n]={loader:t.use[n],options:{plugins:[e]}};return}i(t.use[n])}};(e=>{e.forEach(e=>{if(e.oneOf){e.oneOf.forEach(e=>{Array.isArray(e.use)?o(e):i(e)});return}Array.isArray(e.use)?o(e):i(e)})})(r.options.module.rules)}function addSwcPlugin({plugin:e,pluginLoaderName:t,compiler:n}){let r=n=>{var r,i,o;let s=n.use||n,a="string"==typeof s?s:s.loader;if(!a||!a.includes("swc-loader"))return;if("string"==typeof s){n.use={loader:a,options:{jsc:{experimental:{plugins:[e]}}}};return}let c=s.options||{jsc:{experimental:{}}},{plugins:u=[]}=(null==(r=null==c?void 0:c.jsc)?void 0:r.experimental)||{};if(!u.some(e=>Array.isArray(e)&&"string"==typeof e[0]&&e[0].includes(t)))u.unshift(e),!(null==(o=null==(i=c.jsc)?void 0:i.experimental)?void 0:o.plugins)&&(!c.jsc&&(c.jsc={}),!c.jsc.experimental&&(c.jsc.experimental={}),c.jsc.experimental.plugins=u),s.options=c},i=e=>{let t=e.use.findIndex(e=>{let t="string"==typeof e?e:e.loader;return!!(t&&t.includes("swc-loader"))||!1});if(-1!==t)r(e.use[t])};(e=>{e.forEach(e=>{if(e.oneOf){e.oneOf.forEach(e=>{Array.isArray(e.use)?i(e):r(e)});return}Array.isArray(e.use)?i(e):r(e)})})(n.options.module.rules)}function addRule({compiler:e,rule:t,PluginName:n}){var r,i;let o;if(e&&e.webpack&&(o=e.webpack.rspackVersion),o){let s=Number(o.split(".")[0]);s>=3&&(null==(i=null==(r=e.options.experiments)?void 0:r.rspackFuture)?void 0:i.disableTransformByDefault)||s>=5?e.hooks.run.tapPromise(n,()=>__async(this,null,function*(){e.options.module.rules.push(__spreadProps(__spreadValues({},t),{type:"javascript/auto"}))})):e.hooks.run.tapPromise(n,()=>__async(this,null,function*(){e.options.module.rules.push(t)}))}else e.hooks.run.tapPromise(n,()=>__async(this,null,function*(){e.options.module.rules.push(t)}))}function addArgusSwcPlugin({plugin:e,swcRuleOptions:t={},swcLoaderOptions:n={},compiler:r,PluginName:i,argusSwcLoderPath:o}){let s;if(!o)throw Error("\u3010Argus Plugin Error\u3011\u82E5\u4F7F\u7528 argus-swc-plugin \u6784\u5EFA\uFF0C\u8BF7\u5148\u5B89\u88C5 @ies/argus-swc-loader");try{s=__spreadValues({test:/\.(?:js|jsx|mjs|cjs|ts|tsx|mts|cts)$/,enforce:"pre",use:[{loader:o,options:mergeObject(defaultSwcLoaderOptions,n)}]},t)}catch(e){console.log("\u3010Argus Error\u3011",e);return}!Array.isArray(s.use[0].options.jsc.experimental.plugins)&&(s.use[0].options.jsc.experimental.plugins=[]),s.use[0].options.jsc.experimental.plugins.unshift(e),addRule({compiler:r,rule:s,PluginName:i})}function sleep(e){return new Promise(t=>{setTimeout(()=>{t("")},e)})}function retry(e,t,n=3,r){return __async(this,null,function*(){try{return yield e()}catch(i){if(0!==n&&!i.message.includes("404"))return console.warn(`[\u{5269}\u{4F59}\u{91CD}\u{8BD5}\u{6B21}\u{6570}:${n-1}]:${i},msg:${t}`),yield sleep(2e3),yield retry(e,t,n-1,r);r&&"function"==typeof r?r(i):console.error(`[fail]:${i},msg:${t}`)}return null})}function getHashSalt({options:e,crypto:t}){var n;let r=t.createHash("md5").update(JSON.stringify(e)).digest("hex");return(null==(n=e.common)?void 0:n.hashSalt)||r}function customHash(e){let t=0;for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);t=(((t=(31*t+r)%0x3fffffb)<<5)-t+r)%0x3fffffb}return t}function isExcludes(e){let{filename:t,options:n}=e,{excludes:r=[]}=n;return 0!==r.length&&r.some(e=>t.match(e))}function isIncludes(e){let{filename:t,options:n}=e,{includes:r=[]}=n;return 0===r.length||r.some(e=>t.match(e))}var Reporter=class{constructor(){__publicField(this,"batchData",[]),__publicField(this,"uniqKeys",new Set),__publicField(this,"config"),__publicField(this,"timeout",2e3),__publicField(this,"lock",!1),__publicField(this,"gerReportUrl",()=>{let e={cn:decode("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:decode("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:decode("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:decode("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:decode("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:decode("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:decode("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),"sg-capcut":decode("aHR0cHM6Ly9tb24tc2cuY2FwY3V0YXBpLmNvbS9tb25pdG9yX2Jyb3dzZXIvY29sbGVjdC9iYXRjaC9zZWN1cml0eS8/YmlkPQ==")};if(!this.config)return;let{region:t="cn",bid:n}=this.config,r=e[t];if(!!r)return r+n})}setConfig(e){this.config=e}reportByFectch(e,t){return __async(this,null,function*(){yield retry(()=>__async(this,null,function*(){return yield _global.fetch(e,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}),"argus report error")})}upload(){let e=this.gerReportUrl();if(!this.lock&&!!e&&0!==this.batchData.length)this.lock=!0,setTimeout(()=>{let t=this.batchData.slice(0,100);this.batchData=this.batchData.slice(100),this.send(e,t),this.lock=!1,this.upload()},this.timeout)}push(e){this.batchData.push(e),this.upload()}report({data:e}){if(!_global.fetch)return;let t={age:Math.floor(Date.now()),type:"compiler-info",url:"compiler",body:e,"user-agent":""};this.push(t)}send(e,t){return __async(this,null,function*(){if("undefined"!=typeof window&&void 0!==window.navigator&&"function"==typeof window.navigator.sendBeacon)try{!window.navigator.sendBeacon(e,JSON.stringify(t))&&(yield this.reportByFectch(e,t))}catch(e){console.log("Argus Open Redirect sendBencon error")}else yield this.reportByFectch(e,t)})}reportNow(e){let t=this.gerReportUrl();this.send(t,[e])}reportBatchDataNow(e){return __async(this,null,function*(){let t=this.gerReportUrl();e=e.map(e=>({age:Math.floor(Date.now()),type:"compiler-info",url:"compiler",body:e,"user-agent":""})),yield this.send(t,e)})}reportCompilerData(e){return __async(this,arguments,function*({abilityData:e,timeData:t,reportOptions:n,projectId:r,subProjectName:i,version:o}){this.setConfig(n||{});let s=Object.keys(e).map(n=>({abilityType:n,time:Math.floor(t[n]/1e3),processTimes:e[n].length,filesNumber:e[n].filter((e,t,n)=>t===n.findIndex(t=>void 0!==t.filename&&t.filename===e.filename)).length,projectId:String(r),subProjectName:i,version:o})),a={abilityType:"summary",time:s.reduce((e,t)=>{var n;return e+(null!=(n=t.time)?n:0)},0),processTimes:s.reduce((e,t)=>{var n;return e+(null!=(n=t.processTimes)?n:0)},0),filesNumber:s.reduce((e,t)=>{var n;return e+(null!=(n=t.filesNumber)?n:0)},0)};yield this.reportBatchDataNow([...s,a]);let c=e.csp.map(e=>__spreadProps(__spreadValues({},e),{abilityType:"csp",projectId:String(r),subProjectName:i,version:o})),u=e.encode.map(e=>__spreadProps(__spreadValues({},e),{abilityType:"encode",projectId:String(r),subProjectName:i,version:o})),l=e.filter.map(e=>__spreadProps(__spreadValues({},e),{abilityType:"filter",projectId:String(r),subProjectName:i,version:o})),f=e.xss.map(e=>__spreadProps(__spreadValues({},e),{abilityType:"xss",projectId:String(r),subProjectName:i,version:o})),h=e.openRedirect.map(e=>__spreadProps(__spreadValues({},e),{abilityType:"openRedirect",projectId:String(r),subProjectName:i,version:o}));yield this.reportBatchDataNow([...c,...u,...l,...f,...h])})}},reporter=new Reporter},2910:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}n.d(t,{C:function(){return eE},J:function(){return eS}});var f="<%= isUseNewFunction =>",h=function(e){return e&&e.Math==Math&&e},d=h("object"==typeof globalThis&&globalThis)||h("object"==typeof window&&window)||h("object"==typeof self&&self)||h("object"==typeof n.g&&n.g)||Function("return this")();try{f=!!(f=String(f)).startsWith("<%=")||JSON.parse(f),(!0===f||"true"===f)&&(d=Function("\nvar _checkXSS = function (it) {\n  return it && it.Math == Math && it;\n};\nreturn _checkXSS(typeof globalThis === 'object' && globalThis) ||\n_checkXSS(typeof window === 'object' && window) ||\n_checkXSS(typeof self === 'object' && self) ||\n_checkXSS(typeof global === 'object' && global) ||\nFunction('return this')();\n")())}catch(e){console.log(e)}var p=/[^a-zA-Z0-9\\_:.-]/gim,g=/</g,v=/>/g,y=/&#([a-zA-Z0-9]*);?/gim,m=/&quot;/g,b=/&colon;?/gim,_=/&newline;?/gim,w=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,S=/u\s*r\s*l\s*\(.*/gi,E=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,O=/"/g,k=function(e){return e.replace(g,"&lt;").replace(v,"&gt;")};function A(e){return e.replace(m,'"')}var R={indexOf:function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1},forEach:function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},some:function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return!0;return!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},includes:function(e,t){if("string"==typeof e)return -1!==e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},uniq:function(e){for(var t={},n=[],r=0;r<e.length;r++)!t[e[r]]&&(n.push(e[r]),t[e[r]]=!0);return n},from:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},keys:function(e){var t=[];for(var n in e)t.push(n);return t}};function C(e){return null==e}function I(e){var t,n=R.spaceIndex(e);return t=-1===n?e.slice(1,-1):e.slice(1,n+1),"/"===(t=R.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function T(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n){if("="===n)return t;break}}return -1}function j(e,t){for(;t>0;t--){var n=e[t];if(" "!==n){if("="===n)return t;break}}return -1}function x(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]||!1}function D(e){return x(e)?e.substr(1,e.length-2):e}function P(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n){if("'"===n||'"'===n)return t;break}}return -1}function L(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}function N(e){for(var t="",n=0,r=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(t+=String.fromCharCode((31&r)<<6|63&(o=e.charCodeAt(n+1))),n+=2):(o=e.charCodeAt(n+1),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&(i=e.charCodeAt(n+2))),n+=3);return t}function M(e){var t,n,r,i,o,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=L(e);l<e.length;)t=e.charCodeAt(l++),n=e.charCodeAt(l++),r=e.charCodeAt(l++),i=t>>2,o=(3&t)<<4|n>>4,s=(15&n)<<2|r>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),u=u+c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a);return u}function B(e){var t,n,r,i,o,s,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");l<e.length;)i=c.indexOf(e.charAt(l++)),o=c.indexOf(e.charAt(l++)),s=c.indexOf(e.charAt(l++)),a=c.indexOf(e.charAt(l++)),t=i<<2|o>>4,n=(15&o)<<4|s>>2,r=(3&s)<<6|a,u+=String.fromCharCode(t),64!==s&&(u+=String.fromCharCode(n)),64!==a&&(u+=String.fromCharCode(r));return u=N(u)}function z(e){return"</"===e.slice(0,2)}function G(e,t,n){var r="",i=0,o=!1,s=!1,a=0,c=e.length,u="",l="";t:for(a=0;a<c;a++){var f=e.charAt(a);if(!1===o){if("<"===f){o=a;continue}}else if(!1===s){if("<"===f){r+=n(e.slice(i,a)),o=a,i=a;continue}if(">"===f||a===c-1){r+=n(e.slice(i,o)),u=I(l=e.slice(o,a+1)),r+=t(o,r.length,u,l,z(l)),i=a+1,o=!1;continue}if('"'===f||"'"===f){for(var h=1,d=e.charAt(a-h);""===d.trim()||"="===d;){if("="===d){s=f;continue t}d=e.charAt(a-++h)}}}else if(f===s){s=!1;continue}}return i<c&&(r+=n(e.substr(i))),r}function U(e,t){var n=0,r=0,i=[],o=!1,s=e.length;function a(e,n){if(!((e=(e=R.trim(e)).replace(p,"").toLowerCase()).length<1)){var r=t(e,n||"");r&&i.push(r)}}for(var c=0;c<s;c++){var u=e.charAt(c),l=void 0,f=void 0;if(!1===o&&"="===u){o=e.slice(n,c),n=c+1,r='"'===e.charAt(n)||"'"===e.charAt(n)?n:P(e,c+1);continue}if(!1!==o&&c===r){if(-1===(f=e.indexOf(u,c+1)))break;a(o,l=R.trim(e.slice(r+1,f))),o=!1,n=(c=f)+1;continue}if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(f=T(e,c))){a(l=R.trim(e.slice(n,c))),o=!1,n=c+1;continue}c=f-1;continue}if(-1!==(f=j(e,c-1)))continue;a(o,l=D(l=R.trim(e.slice(n,c)))),o=!1,n=c+1;continue}}return n<e.length&&(!1===o?a(e.slice(n)):a(o,D(R.trim(e.slice(n))))),R.trim(i.join(" "))}function F(e){return e.replace(y,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function W(e){return e.replace(b,":").replace(_," ")}function J(e){for(var t="",n=0,r=e.length;n<r;n++)t+=32>e.charCodeAt(n)?" ":e.charAt(n);return R.trim(t)}function K(e){return e=J(e=W(e=F(e=A(e))))}function q(e){return e.replace(O,"&quot;")}function V(e){return e=k(e=q(e))}function H(e,t,n){if(n=K(n),"href"===t||"src"===t){if("#"===(n=R.trim(n)))return"#";if(!("http://"===n.substr(0,7)||"https://"===n.substr(0,8)||"mailto:"===n.substr(0,7)||"tel:"===n.substr(0,4)||"data:image/"===n.substr(0,11)||"ftp://"===n.substr(0,6)||"./"===n.substr(0,2)||"../"===n.substr(0,3)||"#"===n[0]||"/"===n[0]))return""}else if("background"===t){if(w.lastIndex=0,w.test(n))return""}else if("style"===t){if(E.lastIndex=0,E.test(n))return"";if(S.lastIndex=0,S.test(n)&&(w.lastIndex=0,w.test(n)))return""}return n=V(n)}function Z(e){var t={};for(var n in e)t[n]=e[n];return t}function $(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);if(127===t)return!1;if(t<=31)return 10===t||13===t||!1;return!0})).join("")}function X(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("\x3c!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var i=e.indexOf("--\x3e",r);if(-1===i)break;n=i+3}return t}function Y(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e);function r(t){return!!n||-1!==R.indexOf(e,t)}var i=[],o=!1;return{onIgnoreTag:function(e,n,s){if(!r(e))return t(e,n,s);if(!s.isClosing)return!o&&(o=s.position),"[removed]";var a="[/removed]",c=s.position+a.length;return i.push([!1!==o?o:s.position,c]),o=!1,a},remove:function(e){var t="",n=0;return R.forEach(i,function(r){t+=e.slice(n,r[0]),n=r[1]}),t+=e.slice(n)}}}function Q(e){var t=R.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=R.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=R.trim(e.slice(0,-1))),{html:e,closing:n}}var ee=function(e){return"string"==typeof e?e.replace(/'/g,'"').replace('=""',"").replace(/\s+/g,"").toLowerCase():""},et=function(){var e=!1;if("function"==typeof d.useWebSecsdkApi){var t=d.useWebSecsdkApi("compiler");t&&!1===t.enableXssFilter&&(e=!0)}return d.__msite_app_conf&&!1===d.__msite_app_conf.enable_xss_filter&&(e=!0),d.tccAppConfig&&!1===d.tccAppConfig.enable_xss_filter&&(e=!0),e},en=function(){function e(t){r(this,e),s(this,"options",void 0);var n=Z(t||{});n.stripIgnoreTag&&(n.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),n.onIgnoreTag=function(){return""}),n.whiteList={},n.onTag=function(){},n.onTagAttr=function(){},n.onIgnoreTag=function(){},n.onIgnoreTagAttr=function(){},n.safeAttrValue=H,n.escapeHtml=k,this.options=Object.assign(n,t)}return o(e,[{key:"process",value:function(e){if(!(e=(e=e||"").toString()))return"";var t=this,n=t.options,r=n.whiteList,i=n.onTag,o=n.onIgnoreTag,s=n.onTagAttr,a=n.onIgnoreTagAttr,c=n.safeAttrValue,u=n.escapeHtml;n.stripBlankChar&&(e=$(e)),!n.allowCommentTag&&(e=X(e));var l=!1;n.stripIgnoreTagBody&&(o=(l=Y(n.stripIgnoreTagBody,o)).onIgnoreTag);var f=G(e,function(e,t,n,l,f){var h={sourcePosition:e,position:t,isClosing:f,isWhite:Object.prototype.hasOwnProperty.call(r,n)},d=i(n,l,h);if(!C(d))return d;if(h.isWhite){if(h.isClosing)return"</".concat(n,">");var p=Q(l),g=r[n],v=U(p.html,function(e,t){var r=-1!==R.indexOf(g,e),i=s(n,e,t,r);if(!C(i))return i;if(r)return(t=c(n,e,t,null))?"".concat(e,'="').concat(t,'"'):e;return C(i=a(n,e,t,r))?void 0:i});return l="<".concat(n),v&&(l+=" ".concat(v)),p.closing&&(l+=" /"),l+=">"}return C(d=o(n,l,h))?u(l):d},"no-escape"===n.escapeRule?function(e){return e}:u);return l&&(f=l.remove(f)),f}}]),e}(),er=new(function(){function e(){var t=this;r(this,e),s(this,"batchData",[]),s(this,"uniqKeys",new Set),s(this,"config",void 0),s(this,"timeout",2e3),s(this,"lock",!1),s(this,"isSetedConfig",!1),s(this,"getSlardarBid",function(){var e,n,r="<%= bid =>";if(!R.includes(r,"bid"))return r;if(t.config&&t.config.bid)return t.config.bid;var i=d;if(i&&i._xssBid)return i._xssBid;if(i&&i.slardar&&"function"==typeof i.slardar.config){var o=(i.slardar.config()||{}).bid;if(o)return o}if(i&&i.Slardar&&"function"==typeof i.Slardar.config){var s=(i.Slardar.config()||{}).bid;if(s)return s}return(null==i?void 0:null===(n=i.Slardar)||void 0===n?void 0:null===(e=n._baseParams)||void 0===e?void 0:e.bid)||"argus"}),s(this,"getConfigRegion",function(){var e,n="<%= region =>";return R.includes(n,"region")?t.config&&t.config.region?t.config.region:((null==d?void 0:null===(e=d.gfdatav1)||void 0===e?void 0:e.region)||"cn").toLowerCase():n}),s(this,"gerReportUrl",function(){var e={cn:B("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:B("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:B("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:B("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:B("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:B("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:B("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),"sg-capcut":B("aHR0cHM6Ly9tb24tc2cuY2FwY3V0YXBpLmNvbS9tb25pdG9yX2Jyb3dzZXIvY29sbGVjdC9iYXRjaC9zZWN1cml0eS8/YmlkPQ==")}[t.getConfigRegion()];if(!!e)return e+t.getSlardarBid()})}return o(e,[{key:"setConfig",value:function(e){if(!this.isSetedConfig)this.config=e}},{key:"upload",value:function(){var e=this;if(this.config&&this.config.isCloseSSRReport&&!(null==d?void 0:d.document))return;var t="<%= isCloseSSRReport =>";t=String(t);try{if(t=!t.startsWith("<%=")&&JSON.parse(t),(!0===t||"true"===t)&&!(null==d?void 0:d.document))return}catch(e){console.log(e)}var n=this.gerReportUrl();if(!this.lock&&!!n&&0!==this.batchData.length)this.lock=!0,setTimeout(function(){var t=e.batchData.slice(0,100);e.batchData=e.batchData.slice(100),d.fetch(n,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).catch(function(e){console.warn("xss defense report error",e)}),e.lock=!1,e.upload()},this.timeout)}},{key:"generateKey",value:function(e){return e.collectKey?[e.collectMode,e.collectKey].join("___"):""}},{key:"push",value:function(e){this.batchData.push(e),this.upload()}},{key:"report",value:function(e){var t=this.generateKey(e);if(!!d.fetch&&!!e.collectKey){var n="SSR";void 0!==d&&void 0!==d.location&&void 0!==d.location.href&&(n=d.location.href),e.documentUrl=n;var r=e.documentUrl;r&&"function"==typeof r.split&&(r=r.split("?")[0]);var i="";if(null==d?void 0:d.gfdatav1){var o=d.gfdatav1;i="".concat(o.env,"_").concat(o.region,"_").concat(o.ver)}var s={age:Math.floor(Date.now()),type:"xss",url:n,body:e,"user-agent":""},a=et();s.url="".concat(t,"___").concat(r),a&&(s.body.type="".concat(s.body.type,"_remote_close")),s.body.collectMode="".concat(s.body.collectMode,"_").concat(i),"SSR"===n&&(s.url="SSR___".concat(s.url),s.body.ssr=!0),this.push(s)}}}]),e}()),ei=function(e){var t=0,n=!0,r=!1,i=void 0;try{for(var o,s=function(){var n=o.value;Array.isArray(e[n])?0===e[n].length?delete e[n]:(e[n]=R.from(R.uniq(e[n])),t+=e[n].length):0===R.keys(e[n]).length?delete e[n]:R.keys(e[n]).forEach(function(r){e[n][r]=R.from(R.uniq(e[n][r])),t+=e[n][r].length})},a=R.keys(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)s()}catch(e){r=!0,i=e}finally{try{!n&&null!=a.return&&a.return()}finally{if(r)throw i}}return{count:t,ret:e}};function eo(e,t){return er.setConfig(t),new en(t).process(e)}var es=function(e,t){var n=Number("<%= htmlLimit =>");return void 0!==t&&(n=t),"NaN"!==n.toString()&&-1!==n&&!!(e.length>=n)||!1},ea=function(e){return -1===(e=(e=(e=(e=e.replace(/&colon;/gi,":")).replace(/&tab;/gi,"")).replace(/&newline;/gi,"")).replace(/(\t|\n|\r)/g,"")).indexOf("&#")?e.trim().toLowerCase():e.trim().replace(/&#(?:(x)([0-9a-f]+)|([0-9]+));?/gi,function(e,t,n,r){return String.fromCharCode(t?parseInt(n,16):parseInt(r))}).replace(/(\t|\n|\r)/g,"").toLowerCase()};function ec(e){if(""===e||""===e.trim())return!0;try{return!R.includes(e,"data:text/html;base64")}catch(e){return!0}}function eu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("string"!=typeof e)return!0;if("currentscript"===(e=ea(e)))return t&&t("currentScript"),!1;if(R.includes(e,"base64")&&!ec(e))return t&&t("data:text/html;base64"),!1;var n=["expression(","behavior:","view-source:"];if(R.some(n,function(t){return -1!==e.indexOf(t)}))return R.forEach(n,function(n){-1!==e.indexOf(n)&&t&&t(n)}),!1;var r=["data:application","data:javascript","data:text/html","data:texthtml"];if(R.some(r,function(t){return -1!==e.indexOf(t)}))return R.forEach(r,function(n){-1!==e.indexOf(n)&&t&&t(n)}),!1;if(e.indexOf("javascript:")>0)return t&&t("javascript:"),!1;if(/^javascript:/i.test(e)){var i=e.slice(11).replace(/\s/g,"").trim(),o=["void","void(0)","void0","false","undefined",";"];return!!R.some(o,function(e){return e===i})||(t&&t("javascript:"),!1)}return!0}var el=function(e,t){var n=Number("<%= urlLimit =>");return void 0!==t&&(n=t),"NaN"!==n.toString()&&-1!==n&&!!(e.length>=n)||!1},ef=function(e,t){var n="<%= isSaveValidUrl =>";if(n=String(n),"string"!=typeof e||el(e)||eu(e,t))return e;try{if(n=!n.startsWith("<%=")&&JSON.parse(n),!0===n||"true"===n){console.log("========");var r=new URL(e);return r.origin+r.pathname}}catch(e){console.log(e)}return"#"},eh=function(e){var t=e.sourceText,n=e.saveValidUrl,r=void 0!==n&&n,i=e.limit,o=void 0===i?-1:i,s=e.callback;if("string"!=typeof t||el(t,Number(o))||eu(t,s))return t;try{if(!0===r){var a=new URL(t);return a.origin+a.pathname}}catch(e){console.log(e)}return"#"};function ed(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}function ep(e){var t=ed(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=e.slice(t+1,-1).trim())[e.length-1];return n&&(e=e.slice(0,-1).trim()),{html:e,closing:n}}var eg=function(e,t){var n={},r=R.keys(e),i=!0,o=!1,s=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;Array.isArray(e[u])?n[u]=R.from(e[u]):n[u]=eg({},e[u])}}catch(e){o=!0,s=e}finally{try{!i&&null!=c.return&&c.return()}finally{if(o)throw s}}var l=R.keys(t),f=!0,h=!1,d=void 0;try{for(var p,g=l[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var v=p.value;v in e?Array.isArray(e[v])?n[v]=e[v].concat(t[v]):n[v]=eg(e[v],t[v]):Array.isArray(t[v])?n[v]=R.from(t[v]):n[v]=eg({},t[v])}}catch(e){h=!0,d=e}finally{try{!f&&null!=g.return&&g.return()}finally{if(h)throw d}}return n},ev={blackList:{a:["folder"],meta:["content"],iframe:["srcdoc"],input:["pattern"],vmlframe:["xmlns"]},blackTags:["script","xml","embed","isindex","object","base","set","handler","animate","payload","import"],blackAttrs:["charset","ns","namespace","formaction","xlink:href","xmlns:xlink","handler","repeat","repeat-start","repeat-end"],blackAttrRegExps:[/^on/],filterList:{param:["value"],video:["poster"],form:["action"]},filterAttrs:["href","src","background","style","dynsrc","lowsrc","content","name"]};try{var ey="<%= blackConfig =>";ey.blackAttrRegExps&&(ey.blackAttrRegExps=ey.blackAttrRegExps.map(function(e){return new RegExp(e.toString().slice(1,e.toString().length-1))}));var em="<%= configMode =>";R.includes(em,"override")&&(ev=ey),R.includes(em,"merge")&&(ev=eg(ev,ey))}catch(e){console.log(e)}var eb={mode:"black",whiteList:{},blackConfig:ev,collect:null,isSetedConfigForModule:!1,escapeRule:"escape-report",initCollect:function(){eb.collect={blackList:{},blackTags:[],blackAttrs:[],blackAttrRegExps:[],filterAttrs:[],filterList:{},filterProtocol:[]}},removeCollect:function(){var e=ei(eb.collect),t=e.count,n=e.ret;return eb.collect=null,{collectKey:0===t?null:JSON.stringify(n),collectMode:"black"}},setConfigForModule:function(e){if(!eb.isSetedConfigForModule)try{eb.bid=e.bid,eb.region=e.region,eb.enabled=!0,eb.isCloseSSRReport=e.isCloseSSRReport,eb.escapeRule=e.escapeRule;var t=JSON.parse(e.blackConfig||"{}");t.blackAttrRegExps&&(t.blackAttrRegExps=t.blackAttrRegExps.map(function(e){return new RegExp(e.toString().slice(1,e.toString().length-1))}));var n=e.configMode,r=void 0===n?"":n;R.includes(r,"override")&&(ev=t),R.includes(r,"merge")&&(ev=eg(ev,t)),eb.isSetedConfigForModule=!0}catch(e){console.log(e)}},onIgnoreTag:function(e,t){if(R.includes(ev.blackTags,e)){var n;null===(n=eb.collect)||void 0===n||n.blackTags.push(e);return}return G(t,function(e,t,n,r,i){if(-1!==n.indexOf("/"))return"no-escape"===eb.escapeRule?r:k(r);var o=i;if(o)return"</".concat(n,">");var s=ep(r),a=U(s.html,function(e,t){var r=0;if(ev.blackList[n]&&R.includes(ev.blackList[n],e)&&(eb.collect.blackList[n]=eb.collect.blackList[n]||[],eb.collect.blackList[n].push(e),r++),ev.blackAttrRegExps.length&&ev.blackAttrRegExps.some(function(t){return t.test(e)})&&R.forEach(ev.blackAttrRegExps,function(t){t.test(e)&&(eb.collect.blackAttrRegExps.push("".concat(t.toString(),"->").concat(e)),r++)}),ev.blackAttrs.length&&R.includes(ev.blackAttrs,e)&&(ev.blackAttrs.push(e),r++),!r){if(ev.filterList&&ev.filterList[n]&&R.includes(ev.filterList[n],e)){var i=ef(t,function(e){var t;null===(t=eb.collect)||void 0===t||t.filterProtocol.push(e)});return i!==t&&(eb.collect.filterList[n]=eb.collect.filterList[n]||[],eb.collect.filterList[n].push(e)),t?"".concat(e,"='").concat(i,"'"):e}if(ev.filterAttrs&&R.includes(ev.filterAttrs,e)){var o,s=ef(t,function(e){var t;null===(t=eb.collect)||void 0===t||t.filterProtocol.push(e)});return s!==t&&(null===(o=eb.collect)||void 0===o||o.filterAttrs.push(e)),t?"".concat(e,"='").concat(s,"'"):e}return""===t?"".concat(e,"=''"):t?"".concat(e,"='").concat(t,"'"):e}});return r="<".concat(n),a&&(r+=" ".concat(a)),s.closing&&(r+=" /"),r+=">"},"no-escape"===eb.escapeRule?function(e){return e}:k)}},e_=function(e){var t=e.reportOnly,n=void 0===t||t,r=e.block;return n&&"all"===n?"report":("string"==typeof n&&("true"===n&&(n=!0),"false"===n&&(n=!1)),r)?"enforce":n?"report":"enforce"},ew=function(e){return function(t,n,r){var i=et();er.setConfig(r);var o=[],s=e({sourceText:t,callback:function(e){o.push(e)},saveValidUrl:r?r.isSaveValidUrl:void 0,limit:r?r.urlLimit:void 0});if(s===t)return t;o=R.from(R.uniq(o));var a=n||r||{};if(!a)return i?t:s;var c=a.logType,u=e_(r);return(er.report({type:c,disposition:u,collectKey:o.join("___"),collectData:JSON.stringify(o),collectMode:"black",sourceText:M(t),filterText:M(s)}),r.isRuntimeLog&&"enforce"===u&&console.warn("\u5F53\u524D\u9875\u9762\u90E8\u5206\u6570\u636E\u88AB\u300CArgus XSS\u300D\u8FC7\u6EE4"),i)?t:"enforce"===u?s:t}},eS=function(e){return function(t,n,r){var i=t;if(!t||"string"!=typeof t||es(t,Number(r.htmlLimit)))return t;try{if("function"==typeof DOMParser&&r.isDOMParser){var o=new DOMParser;"function"==typeof o.parseFromString&&(t=new DOMParser().parseFromString(t,"text/html").body.innerHTML)}}catch(e){}var s=et();eb.setConfigForModule(n||r);var a=eb;a.initCollect();var u=e(t,a),f=r.logType,h=e_(r),d=ee(u),p=ee(t),g=ee(i);if(d===p)return(r.isDOMParser&&g!==p&&er.report({type:f,disposition:h,collectKey:"DOMParser",collectMode:"black",collectData:"body_innerHTML",sourceText:M(i.replace(/'/g,'"')),filterText:M(u.replace(/'/g,'"'))}),s)?i:"enforce"===h?t:i;if(!r)return s?i:u;var v=a.removeCollect();return((!v||!v.collectKey)&&g!==d&&"escape-report"===r.escapeRule&&(v={collectKey:"default",collectMode:"black"}),er.report(l(c({type:f,disposition:h},v),{sourceText:M(i.replace(/'/g,'"')),filterText:M(u.replace(/'/g,'"'))})),s)?i:(r.isRuntimeLog&&"enforce"===h&&console.warn("\u5F53\u524D\u9875\u9762\u90E8\u5206\u6570\u636E\u88AB\u300CArgus XSS\u300D\u8FC7\u6EE4"),"enforce"===h?u:i)}}(eo),eE=ew(eh)},660178:function(e,t,n){"use strict";n.d(t,{w:function(){return w}});var r=n(349728);function i(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var f=new(function(){function e(){var t=this;i(this,e),a(this,"batchData",[]),a(this,"uniqKeys",new Set),a(this,"config",void 0),a(this,"timeout",2e3),a(this,"lock",!1),a(this,"gerReportUrl",function(){var e={cn:(0,r.Jx)("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:(0,r.Jx)("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:(0,r.Jx)("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:(0,r.Jx)("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:(0,r.Jx)("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:(0,r.Jx)("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:(0,r.Jx)("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9")};if(!t.config)return;var n=t.config,i=n.region,o=n.bid,s=e[i];if(!!s)return s+o})}return s(e,[{key:"setConfig",value:function(e){this.config=e}},{key:"reportByFectch",value:function(e,t){r.nh.fetch(e,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).catch(function(e){console.warn("argus report error",e)})}},{key:"upload",value:function(){var e=this,t=this.gerReportUrl();if(!this.lock&&!!t&&0!==this.batchData.length)this.lock=!0,setTimeout(function(){var n=e.batchData.slice(0,100);e.batchData=e.batchData.slice(100),e.send(t,n),e.lock=!1,e.upload()},this.timeout)}},{key:"push",value:function(e){this.batchData.push(e),this.upload()}},{key:"report",value:function(e){var t,n,i=e.data,o=e.isBlank,s=void 0===o||o;if(!!r.nh.fetch){var a=(null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.href)||"SSR";i.documentUrl=a;var c={age:Math.floor(Date.now()),type:"open-redirect",url:a,body:i,"user-agent":""};s?this.push(c):this.reportNow(c)}}},{key:"send",value:function(e,t){if("undefined"!=typeof window&&void 0!==window.navigator&&"function"==typeof window.navigator.sendBeacon)try{!window.navigator.sendBeacon(e,JSON.stringify(t))&&this.reportByFectch(e,t)}catch(e){console.log("Argus Open Redirect sendBencon error")}else this.reportByFectch(e,t)}},{key:"reportNow",value:function(e){var t=this.gerReportUrl();this.send(t,[e])}}]),e}()),h="https://security.".concat((0,r.Jx)("emlqaWVhcGkuY29t"));function d(e){var t=e.storageKey,n=e.value,r=e.cacheKey,i=e.serverErrorTime,o=e.closeFromRemoteTime,s=e.reason;try{var u=JSON.parse(localStorage.getItem(t)||"{}");if(i){localStorage.setItem(t,JSON.stringify(l(c({},u),{serverErrorTime:i,reason:s})));return}if(o){localStorage.setItem(t,JSON.stringify(l(c({},u),{closeFromRemoteTime:o})));return}if(!r)return;localStorage.setItem(t,JSON.stringify(l(c({},u),a({serverErrorTime:null,closeFromRemoteTime:null,reason:null},r,l(c({},n),{time:Date.now()})))))}catch(e){console.error("\u7F13\u5B58\u5199\u5165\u5931\u8D25",e),localStorage.removeItem(t)}}function p(e){var t,n,i=e.storageKey,o=e.targetUrl,s=e.argusUrl,a=e.config,c=e.cacheKey,u=e.shouldReport,l=void 0===u?"noReport":u,f=e.limitLevel,h=e.reportOnly,p=e.filename,g="?projectId=".concat(a.projectId,"&subProjectName=").concat(a.subProjectName,"&bid=").concat(a.bid,"&region=").concat(a.region,"&documentUrl=").concat(encodeURIComponent((null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.href)||"SSR"),"&targetUrl=").concat(encodeURIComponent(o),"&shouldReport=").concat(l,"&limitLevel=").concat(f,"&reportOnly=").concat(h,"&filename=").concat(encodeURIComponent(p||"none"));r.nh.fetch("".concat(s).concat(g),{method:"get"}).then(function(e){if(200!==e.status)throw d({storageKey:i,serverErrorTime:Date.now(),reason:"status != 200"}),Error("status != 200");return e.json()}).then(function(e){if(e.isClose){d({storageKey:i,closeFromRemoteTime:Date.now()});return}if(e.err){d({storageKey:i,serverErrorTime:Date.now(),reason:e.err});return}d({storageKey:i,value:{level:void 0!==e.level?e.level:-1,isHitBlack:void 0!==e.isHitBlack&&e.isHitBlack,isHitWhite:void 0!==e.isHitWhite&&e.isHitWhite},cacheKey:c})}).catch(function(e){d({storageKey:i,serverErrorTime:Date.now(),reason:e.message})})}function g(e,t){return t.endsWith(e)}var v=function(e){var t=e.storageKey,n=e.reportOnly,r=e.targetUrl,i=e.projectId,o=e.subProjectName,s={},a=0,c=0;try{a=(s=JSON.parse(localStorage.getItem(t)||"{}")).serverErrorTime,c=s.closeFromRemoteTime}catch(e){console.error("\u524D\u7AEF\u7F13\u5B58\u8BFB\u53D6\u5931\u8D25",e),s={},a=0,c=0,localStorage.removeItem(t),f.report({data:{disposition:n?"report":"enforce",errorMsg:"\u300Cfront storage load\u300D".concat(t,", error = ").concat(e),sourceText:r,projectId:String(i),subProjectName:o}})}return{storageValue:s,serverErrorTime:a,closeFromRemoteTime:c}},y=function(e){var t=e.documentUrl,n=e.targetUrl,r=!0,i="";try{var o=new URL(t),s=new URL(n,t);s.hostname===o.hostname&&(r=!1,i=""),i=""===s.hostname?t:s.host+s.pathname}catch(e){r=!1,i=""}return{isValidUrl:r,cacheKey:i}},m=function(e){var t=e.storageValue[e.cacheKey]||{level:-1,isHitBlack:!1,isHitWhite:!1,time:0};return t.level=isNaN(Number(t.level))?-1:Number(t.level),{urlCache:t}},b=function(e){var t,n,i,o=e.bid,s=e.region,a=e.projectId,c=e.limitLevel,u=e.documentUrl,l=e.targetUrl,f=e.subProjectName,d=e.isBlank,p=e.isHitBlack,g=e.reportOnly,v=e.urlCache,y=e.customRoute,m=e.filename;d=!0;var b="?bid=".concat(o,"&region=").concat(s,"&projectId=").concat(a,"&subProjectName=").concat(f,"&limitLevel=").concat(c,"&reportOnly=").concat(g,"&documentUrl=").concat(encodeURIComponent(u),"&targetUrl=").concat(encodeURIComponent(l),"&isBlank=").concat(d,"&filename=").concat(encodeURIComponent(m||"none"));p?(t=10,n=!0,i=!1):(t=v.level||-1,n=v.isHitBlack||!1,i=v.isHitWhite||!1),b="".concat(b,"&level=").concat(t,"&isHitBlack=").concat(n,"&isHitWhite=").concat(i),y&&"/"!==y[0]&&(y="/".concat(y));var _=y?"".concat(y).concat(b):"".concat(h,"/api/link").concat(b),w=o+s+a+f+c+g+d+t+n+i+u.split("?")[0]+l.split("?")[0];return{resultUrl:_+="&random=".concat((0,r.sb)(String((0,r.sb)(w+"argus"))))}},_=function(e){var t=e.bid,n=e.region,r=e.projectId,i=e.limitLevel,o=e.targetUrl,s=e.subProjectName,a=e.isBlank,c=e.reportOnly,u=e.customRoute,l=e.frontWhiteUrl,f=e.filename;if(!(o.startsWith("https")||o.startsWith("http")||o.startsWith("//")))return{url:o};for(var h=b({bid:t,region:n,projectId:r,limitLevel:i,documentUrl:"SSR",targetUrl:o,subProjectName:s,isBlank:a,isHitBlack:!1,reportOnly:c,urlCache:{level:-1,isHitBlack:"false",isHitWhite:"false"},customRoute:u,filename:f}).resultUrl,d=new URL(o),p=0;p<l.length;++p)if(g(l[p],d.hostname))return{url:o};return{url:h}},w=new(function(){function e(){i(this,e),a(this,"isSetedConfig",!1),a(this,"config",{projectId:-1,subProjectName:"",customRoute:"",reportOnly:!0,whiteUrl:[],blackUrl:[],storageKey:"ARGUS_STORAGE",bid:"",region:"",cacheTimeFront:12,checkTimeLimit:1.5,limitLevel:10,frontBlackUrl:[],frontWhiteUrl:[]})}return s(e,[{key:"setConfig",value:function(e){try{if(this.isSetedConfig)return;var t=e.bid,n=e.region,r=e.frontBlackUrl,i=void 0===r?[]:r,o=e.frontWhiteUrl,s=void 0===o?[]:o;if(f.setConfig({bid:t,region:n}),this.config=Object.assign(this.config,l(c({},e),{frontWhiteUrl:"string"==typeof s?JSON.parse(s):s,frontBlackUrl:"string"==typeof i?JSON.parse(i):i})),"undefined"==typeof window&&"undefined"!=typeof localStorage){var a=this.config.storageKey;try{var u=this.config.cacheTimeFront;u*=36e5;var h=Date.now(),d={};d=JSON.parse(localStorage.getItem(a)||"{}");var p=[];Object.keys(d).forEach(function(e){d[e]&&d[e].time&&h-d[e].time>u&&p.push(e)});var g={};Object.keys(d).forEach(function(e){!p.includes(e)&&(g[e]=d[e])}),localStorage.setItem(a,JSON.stringify(g))}catch(e){console.error("\u524D\u7AEF\u7F13\u5B58\u8BFB\u53D6\u5931\u8D25",e),localStorage.removeItem(a)}}this.isSetedConfig=!0}catch(e){console.log("\u300CArgus Open Redirect\u300D",e)}}},{key:"protectDangerouslySet",value:function(e){var t=e.targetHTML,n=e.filename;try{if(!t||"string"!=typeof t||"undefined"==typeof DOMParser)return t;for(var r=new DOMParser().parseFromString(t,"text/html"),i=r.getElementsByTagName("a"),o=0;o<i.length;++o){var s=i[o].getAttribute("href"),a=i[o].getAttribute("target");if(!!s)i[o].setAttribute("href",this.protectUrl({targetUrl:s||"",isBlank:"_blank"===a,filename:n}))}return r.body.innerHTML}catch(e){return console.log("\u300CArgus Open Redirect\u300D",e),t}}},{key:"protectUrl",value:function(e){var t=e.targetUrl,n=e.isBlank,r=e.filename;try{var i=this.config,o=i.reportOnly,s=i.storageKey,a=i.limitLevel,c=i.projectId,u=i.checkTimeLimit,l=i.bid,d=i.region,w=i.frontBlackUrl,S=i.frontWhiteUrl,E=i.subProjectName,O=i.customRoute;if(!t||"string"!=typeof t||!(t.startsWith("https")||t.startsWith("http")||t.startsWith("//"))||t.startsWith(h))return t;if("undefined"==typeof window||void 0===window.location||"undefined"==typeof localStorage)return _({bid:l,region:d,projectId:c,limitLevel:a,targetUrl:t,subProjectName:E,isBlank:n,reportOnly:o,customRoute:O,frontWhiteUrl:S,filename:r}).url;var k=window.location.href||"";try{var A=this.config.cacheTimeFront;A*=36e5;var R=Date.now(),C=v({storageKey:s,reportOnly:o,targetUrl:t,projectId:c,subProjectName:E}),I=C.storageValue,T=C.serverErrorTime,j=C.closeFromRemoteTime,x=y({documentUrl:k,targetUrl:t}),D=x.isValidUrl,P=x.cacheKey;if(!D)return t;if(T&&R-T<A)return p({storageKey:s,argusUrl:"".concat(h,"/api/link/scan"),targetUrl:t,config:this.config,cacheKey:P,checkTimeLimit:u,reportOnly:o,limitLevel:a,filename:r}),t;if(j&&R-j<A)return p({storageKey:s,argusUrl:"".concat(h,"/api/link/scan"),targetUrl:t,config:this.config,cacheKey:P,checkTimeLimit:u,limitLevel:a,reportOnly:o,filename:r}),t;for(var L=m({storageValue:I,cacheKey:P}).urlCache,N=!1,M=new URL(t,k),B=0;B<w.length;++B)if(g(w[B],M.hostname)){N=!0;break}var z=b({bid:l,region:d,projectId:c,limitLevel:a,documentUrl:k,targetUrl:t,subProjectName:E,isBlank:n,isHitBlack:N,reportOnly:o,urlCache:L,customRoute:O,filename:r}).resultUrl;if(N)return z;for(var G=0;G<S.length;++G)if(g(S[G],M.hostname))return t;if(L&&-1!==L.level&&R-L.time<A){if(L.level<a)return t;return z}var U="report";return I[P]&&L&&-1===L.level&&(U="noReport"),p({storageKey:s,argusUrl:"".concat(h,"/api/link/scan"),targetUrl:t,config:this.config,cacheKey:P,checkTimeLimit:u,shouldReport:U,reportOnly:o,limitLevel:a,filename:r}),z}catch(e){return console.log("\u300CArgus Open Redirect\u300D",e),f.report({data:{disposition:o?"report":"enforce",errorMsg:"\u300Cfront protect func call error\u300D, error = ".concat(e),sourceText:t,projectId:String(c),subProjectName:this.config.subProjectName,extra:r||"none"},isBlank:n}),t}}catch(e){return console.log("\u300CArgus Open Redirect\u300D",e),t}}}]),e}())},269307:function(e,t,n){"use strict";n.d(t,{p6:()=>u});var r=n("218571"),i=n("459684"),o=n("207321"),s=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(!r&&(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function a(e){var t=e.t.bind(e);e.t=function(n,a,c){var u;if(!Object.entries(a||{}).map(function(e){var t=e[0],n=e[1];return(0,r.isValidElement)(n)?t:null}).filter(function(e){return!!e}).length)return t(n,a,c);try{var l=e.i18nInstance.instance.options||{},f=(a||{}).ns||l.ns||"translation";f=Array.isArray(f)?f[0]:"translation";var h=function(t){return e.i18nInstance.instance.getResource(t,f,n)},d=l.fallbackLng,p=function(){return d?Array.isArray(d)&&d.length?"array":typeof d:"null"},g=function(){var t;switch(p()){case"array":d.find(function(e){return t=h(e)});break;case"function":var r=d(e.language);if(!Array.isArray(r))return console.error("fallbackLng must be return array"),c||n;r.find(function(e){return t=h(e)})}return void 0===t&&(t=c||n),t},v=h(e.language)||g();Array.isArray(v)&&(v=v[0]);var y=new i.C(v,e.language,{},{ignoreTag:!!(null===(u=l.formatOptions)||void 0===u?void 0:u.ignoreTag)});try{var m=y.formatToParts(a);if(1===m.length)return m[0].value;var b=m.reduce(function(e,t){return e.length&&t.type===o.du.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e},[]);return r.createElement.apply(void 0,s([r.Fragment,{}],b,!1))}catch(e){console.warn("[intl-react-plugin] Key ".concat(JSON.stringify(n)," has missing some interpolation, use fallback target text ").concat(JSON.stringify(v)," fallback. More: ").concat(e));var _=t(n,a,c);return(0,r.createElement)(r.Fragment,{},_)}}catch(e){return console.error("[intl-react-plugin] Some error occurred",e),t(n,a,c)}}}function c(e){}r.createContext({i18n:void 0,locale:void 0});var u={type:"intl3rdParty",init:function(e){a(e)}}},184568:function(e,t,n){"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r={value:!0};class o{constructor(e){i(this,"type","backend"),i(this,"name","@ies/intl-backend-plugin"),i(this,"_services",void 0),i(this,"_options",void 0),i(this,"_allOptions",void 0),i(this,"_configLng",void 0),this._options=e}_emit(e,t,n,r){let i=(this._options.on||{})[e];"function"==typeof i&&i(t,n),r(null,n)}_getStorageKey(e){let{apiKey:t,namespace:n}=this._options.loadOptions||{};if(t&&n)return`text.${t}.${n}.${e}`}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._options=Object.assign({},t,this._options),this._allOptions=n,this._services=e,this._services.resourceStore.options.initImmediate=t.initImmediate||!1}read(e,t,r){if(this._configLng||(this._configLng=this._services.resourceStore.options.lng),"string"!=typeof this._configLng){if(this._services.languageDetector&&"function"==typeof this._services.languageDetector.detect)try{this._configLng=this._services.languageDetector.detect()}catch(e){this._configLng="zh-CN"}else this._configLng="zh-CN"}if(this._options.simpleLoad&&e!==this._configLng)return this._emit("simpleBlocked",e,{},r);let{initialTexts:i,fallbackTexts:o={}}=this._options,s={};if("function"==typeof i?s=i(e,this._getStorageKey(e),t):i&&"object"==typeof i&&(s=i[e]||{}),"object"!=typeof s)try{s=JSON.parse(s)}catch(e){s={}}let a=o[e]||{},c=Object.assign({locale:e,namespace:"",apiKey:"",fallbackLang:this._allOptions.fallbackLng||[this._allOptions.lng]},this._options.loadOptions||{});this._emit("receiveInit",e,s,r),(async()=>{let t=this._options.client||null;if(!t)try{let e=n(56889);if("function"==typeof e.default)t=e.default;else{if("function"!=typeof e)throw Error('Error: can not get any client instance, intl backend plugin will emit "fallback" events');t=e}}catch(t){return this._emit("fallback",e,a,r)}try{t=new t(c)}catch(e){}try{if(!t||"function"!=typeof t.load)throw Error();let n=await t.load(t=>this._emit("chunk",e,t,r),{options:c,callback:t=>this._emit("chunk",e,t,r)});this._emit("done",e,n,r)}catch(t){this._emit("fallback",e,a,r)}})()}save(){}create(e,t,n,r){}}i(o,"type","backend"),r=o,r=o,t.registerBackendPlugin=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o(e)}},56889:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eU}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?n(e.value):i(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var l=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.code=t,i.message=n,i.originError=r,i.name="StarlingError",i.code=t,i.message=n,i.originError=r,Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return s(t,e),t}(Error),f={API_PARAMS_ERROR:{ERROR_CODE:103,ERROR_MESSAGE:"Request failed, confirm your apiKey and namespace is correct"},PARAMS_ERROR:{ERROR_CODE:110,ERROR_MESSAGE:"Check your params, parameter apiKey, namespace and zoneHost is required!"},PARAMS_ERROR_2:{ERROR_CODE:111,ERROR_MESSAGE:"Check your params, parameter request and store is required!"},CACHE_ERROR:{ERROR_CODE:112,ERROR_MESSAGE:"Cache error!"},VERSION_NOT_FOUND:{ERROR_CODE:120,ERROR_MESSAGE:"Version is not found, please check your param [version]!"}},h={zone:"CN",locale:"zh",timeout:15e3,test:!1,mode:"normal",format:"merged",lazyUpdate:!1,fallbackLang:["zh"],tracker:function(){},cache:!0};function d(e){var t=(e=Object.assign({},h,e)).namespace,n=e.apiKey,r=e.request,i=e.store,o=e.zoneHost;if(e.test&&(e.mode="test"),e.namespace=t=t?Array.isArray(t)?t:[t]:[],e.apiKey=n=n||e.api_key,!r||!i){var s=f.PARAMS_ERROR_2,a=s.ERROR_CODE,c=s.ERROR_MESSAGE;throw new l(a,c,null)}if(!n||!t.length||!o){var u=f.PARAMS_ERROR,a=u.ERROR_CODE,c=u.ERROR_MESSAGE;throw new l(a,c,null)}return e}var p=function(){function e(e){this.options=e,this.options=e}return e.prototype.getText=function(e,t){return c(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this._request(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map(function(e){var n=e[0],r=e[1];return t.getText(n,r)}))},e.prototype._request=function(e,t){return c(this,void 0,void 0,function(){var n,r,i,o,s,a,c,h,d,p,g;return u(this,function(u){switch(u.label){case 0:if(n=(0,this.options.getReleaseVersion)(e),e&&n&&t)return[2,{}];return r=this.getUrl(e,t),o=(i=this.options).request,[4,o(r,{timeout:i.timeout})];case 1:if(a=(s=u.sent().data).status,c=s.message,200==+a)return[2,this._mapResponse(c)];if(1001==+a)throw d=(h=f.VERSION_NOT_FOUND).ERROR_CODE,new l(d,h.ERROR_MESSAGE);throw g=(p=f.API_PARAMS_ERROR).ERROR_CODE,new l(g,p.ERROR_MESSAGE)}})})},e.prototype.getUrl=function(e,t){var n=this.options,r=n.apiKey,i=n.locale,o=n.fallbackLang,s=n.zoneHost,a=n.mode,c=n.getReleaseVersion,u=[i].concat(o),l=s+"/check_and_get_text/"+r+"/"+a+"/"+e+"?lang="+u,f=c(e);return f&&(l=s+"/text_by_release_version/"+r+"/"+a+"/"+e+"/"+f+"?lang="+u),"string"==typeof t&&(l+="&version="+t),l},e.prototype._mapResponse=function(e){return e?Object.keys(e).reduce(function(t,n){return t[n.toLowerCase()]=e[n],t},{}):{}},e}(),g=function(){function e(e){this.options=e,this.options=e}return e.prototype._setCache=function(e,t){try{return this.options.store.set(e,t)}catch(e){var n=f.CACHE_ERROR.ERROR_CODE;this.options.tracker("cache_error",{code:n,message:e.message,stack:e.stack});return}},e.prototype._getCache=function(e){var t=this.options,n=t.store,r=t.cache;try{return r&&n.get(e)}catch(e){var i=f.CACHE_ERROR.ERROR_CODE;this.options.tracker("cache_error",{code:i,message:e.message,stack:e.stack});return}},e.prototype.getVersion=function(e){var t=this.options,n=t.apiKey,r=t.locale,i=t.getReleaseVersion,o="version."+n+"."+e+"."+r,s=i(e);return(s&&(o+="."+s),this.getText(e))?this._getCache(o):null},e.prototype.getVersions=function(e){var t=this;return Promise.all(e.map(function(e){return t.getVersion(e)}))},e.prototype.getText=function(e){var t=this.options,n=t.apiKey,r=t.locale,i=t.getReleaseVersion,o="text."+n+"."+e+"."+r,s=i(e);return s&&(o+="."+s),this._getCache(o)},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map(function(e){return t.getText(e)}))},e.prototype.refresh=function(e,t,n,r){return c(this,void 0,void 0,function(){var i,o,s,a,c,l=this;return u(this,function(u){switch(u.label){case 0:return o=(i=this.options).apiKey,s=i.getReleaseVersion,a=i.cache,c=[],t.forEach(function(i,u){var f="text."+o+"."+e[u]+"."+r[u],h="version."+o+"."+e[u]+"."+r[u],d=s(e[u]);d&&(f+="."+d,h+="."+d),a&&(c.push(l._setCache(f,t[u])),c.push(l._setCache(h,n[u])))}),[4,Promise.all(c)];case 1:return u.sent(),[2,t.reduce(function(e,t){return Object.assign(e,t)},{})]}})})},e}();function v(e,t){return(t?e.concat(t):e).reduce(function(e,t){return Object.assign(e,t)},{})}var y=function(){function e(e){void 0===e&&(e=[]),this._list=[],this._list=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.getList=function(){return this._list},e.prototype.getNamespaces=function(){return this._list.map(function(e){return e.namespace})},e.prototype.addNamespace=function(e){this._list.push(e)},e.prototype.insertTexts=function(e){this._list.forEach(function(t,n){t.texts=e[n]})},e.prototype.sortByPrior=function(){return this._list.sort(function(e,t){return e.prior-t.prior}),this._list},e.prototype.concat=function(t){return new e(this._list.concat(t.getList()))},e}(),m=function(){function e(e,t,n){this._promiseRefresh=Promise.resolve(null),this.remote=e,this.local=t,this.options=n}return e.prototype._checkVersions=function(e){return c(this,void 0,void 0,function(){var t,n,r,i,o,s;return u(this,function(a){switch(a.label){case 0:return t=this.options.locale,[4,this.local.getVersions(e)];case 1:return n=a.sent(),r=e.map(function(e,t){return[e,n[t]]}),[4,this.remote.getTexts(r)];case 2:return i=a.sent(),o=new y,s=new y,e.forEach(function(e,r){var a=i[r],c=a.updated,u=a.version,l=a.data,f=a.lang;c?s.addNamespace({namespace:e,prior:r,version:u,texts:l,lang:f}):o.addNamespace({namespace:e,prior:r,version:n[r],lang:t})}),[2,{equalNs:o,diffNs:s}]}})})},e.prototype.waitForRefresh=function(){return this._promiseRefresh},e.prototype._refresh=function(e){var t=e.getList(),n=[],r=[],i=[],o=[];return t.forEach(function(e){n.push(e.namespace),r.push(e.version),i.push(e.texts),o.push(e.lang)}),this.local.refresh(n,i,r,o)},e.prototype._getLocalTexts=function(e){return c(this,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:return[4,this.local.getTexts(e.getNamespaces())];case 1:return t=n.sent(),e.insertTexts(t),[2,t]}})})},e.prototype.load=function(e){return c(this,void 0,void 0,function(){var t,n,r,i,o,s;return u(this,function(a){switch(a.label){case 0:return t=this.options.format,[4,this._checkVersions(e)];case 1:if(r=(n=a.sent()).equalNs,i=n.diffNs,!r.length)return[3,3];return[4,this._getLocalTexts(r)];case 2:return a.sent(),[3,4];case 3:a.label=4;case 4:if(o=this._formatTexts(t,i.concat(r)),!(s=i.length))return[3,6];return[4,this._refresh(i)];case 5:s=a.sent(),a.label=6;case 6:return[2,{texts:o,diffNs:i.getNamespaces(),equalNs:r.getNamespaces()}]}})})},e.prototype._getCacheText=function(e){return c(this,void 0,void 0,function(){var t,n,r,i,o,s;return u(this,function(a){switch(a.label){case 0:return n=(t=this.options).locale,r=t.format,[4,this.local.getTexts(e)];case 1:return i=a.sent(),[4,this.local.getVersions(e)];case 2:return o=a.sent(),s=new y(i.map(function(t,r){if(t)return{namespace:e[r],version:o[r],lang:n,texts:t}}).filter(function(e){return!!e})),[2,this._formatTexts(r,s)]}})})},e.prototype.lazyLoad=function(e){return c(this,void 0,void 0,function(){var t,n,r;return u(this,function(i){switch(i.label){case 0:return[4,this._getCacheText(e)];case 1:if(n=0===Object.keys(t=i.sent()).length,this._promiseRefresh=this.load(e),!n)return[3,3];return[4,this._promiseRefresh];case 2:t=(r=i.sent()).texts,i.label=3;case 3:return[2,{texts:t,diffNs:n?r&&r.diffNs:[],equalNs:n?r&&r.equalNs:e}]}})})},e.prototype._formatTexts=function(e,t){return"splitted"===e?t.getList().reduce(function(e,t){var n=t.namespace,r=t.lang,i=t.texts,o=t.version;return e[n]={lang:r,texts:i,version:o},e},{}):v(t.sortByPrior().map(function(e){return e.texts}))},e}();"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},writable:!0,configurable:!0});var b={EVENT_EXCEPTION:"client_exception",EVENT_LOAD:"client_load",EVENT_CACHE:"client_cache",EVENT_LOAD_TIME:"client_load_time"};!function(e){e.AfterLoad="afterLoad"}(D||(D={}));var _=function(){function e(e){this.afterLoadPlugins=[],this.setConfig(e)}return e.prototype._init=function(e){var t=this;this.options=d(e);var n=this.options,r=n.apiKey,i=n.locale,o=n.zoneHost,s=n.request,c=n.timeout,u=n.fallbackLang,l=n.store,f=n.lazyUpdate,h=n.test,v=n.mode,y=n.format,b=n.cache,_={mode:f?"lazy":h?"test":"prod",zone:o,locale:i,apiKey:r};this._tracker=function(e,n){try{t.options.tracker(e,a(a({},_),n))}catch(e){console.log(e)}};var w=this._getReleaseVersionByNamespace.bind(this),S=new p({request:s,timeout:c,apiKey:r,locale:i,zoneHost:o,fallbackLang:u,mode:v,getReleaseVersion:w}),E=new g({apiKey:r,locale:i,store:l,tracker:this._tracker,getReleaseVersion:w,cache:b});this._textManager=new m(S,E,{locale:i,format:y}),this.initPlugin()},e.prototype.initPlugin=function(){var e=this,t=this.options.plugins||[];Array.isArray(t)&&t.every(function(e){return"object"==typeof e})&&t.forEach(function(t){t.type===D.AfterLoad&&e.afterLoadPlugins.push(t)})},e.prototype._getReleaseVersionByNamespace=function(e){var t=this.options.namespace,n=this.options.version,r=null;return Array.isArray(n)?r=n[t.findIndex(function(t){return t===e})]:n&&"object"==typeof n?r=n[e]:"string"==typeof n&&(r=n),r},e.prototype.setConfig=function(e){var t=Object.assign({},this.options,e);this._init(t)},e.prototype.waitForRefresh=function(){return c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,this._textManager.waitForRefresh()];case 1:return[2,(e=t.sent())?e.texts:null]}})})},e.prototype._load=function(){return c(this,void 0,void 0,function(){var e,t,n,r,i;return u(this,function(o){switch(o.label){case 0:if(t=(e=this.options).namespace,n=e.lazyUpdate,r=t,!n)return[3,2];return[4,this._textManager.lazyLoad(r)];case 1:return i=o.sent(),[3,4];case 2:return[4,this._textManager.load(r)];case 3:i=o.sent(),o.label=4;case 4:return[2,i]}})})},e.prototype.load=function(e,t){return c(this,void 0,void 0,function(){var n,r,i,o,s,a,c,l,f,h,d,p,g,v=this;return u(this,function(u){switch(u.label){case 0:n=Date.now(),r=this.options.namespace,u.label=1;case 1:return u.trys.push([1,5,,10]),this._tracker(b.EVENT_LOAD,{state:"start",version:"0.5.9"}),[4,this._load()];case 2:if(o=(i=u.sent()).diffNs,s=i.equalNs,a=i.texts,!(Array.isArray(c=this.afterLoadPlugins)&&c.length))return[3,4];return[4,c.reduce(function(e,t){return e.then(function(e){return"function"==typeof t.process?t.process(e||a,v.options):e})},Promise.resolve(a))];case 3:a=u.sent()||a,u.label=4;case 4:return e&&e(a),this._tracker(b.EVENT_LOAD_TIME,{time:Date.now()-n}),this._tracker(b.EVENT_LOAD,{state:"success",version:"0.5.9"}),l=o.length,f=s.length,d=(f/(h=r.length)).toFixed(2),this._tracker(b.EVENT_CACHE,{diffLen:l,diff:o.join(","),equalLen:f,equal:s.join(","),namespaces:s.join(","),namespacesLen:h,ratio:d}),[2,a];case 5:if(p=u.sent(),this._tracker(b.EVENT_LOAD,{state:"fail"}),this._tracker(b.EVENT_EXCEPTION,{code:p.code,message:p.message,stack:p.stack}),!(p||{}).useWebCache)return[3,9];u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this._textManager._getCacheText(r)];case 7:return(g=u.sent())&&"object"==typeof g?p.response.data=g:p.response.data={},[3,9];case 8:return u.sent(),[3,9];case 9:if(!t)return[2,Promise.reject(p)];t(p);return[3,10];case 10:return[2]}})})},e}();function w(e){return JSON.stringify(e)}function S(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}}var E=new(function(){function e(){}return e.prototype.get=function(e){if(localStorage&&localStorage.getItem)return S(localStorage.getItem(e))},e.prototype.set=function(e,t){localStorage&&localStorage.setItem&&localStorage.setItem(e,w(t))},e}()),O=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.url=n,a.code=r,a.request=i,a.response=o,a.useWebCache=s,a.url=n,a.code=r,a.request=i,a.response=o,a.useWebCache=!!s,a}return i(t,e),t}(Error);function k(e){try{return JSON.parse(e)}catch(e){return{}}}function A(e){return e.message&&"object"==typeof e.message?e:null}function R(e,t,n,r){var i=(r||{}).message||"";i=i?", reason is: ".concat(i):"",t(new O("Request failed with status code "+e.status+i,n,null,e,{data:{}},!0))}function C(e,t){var n=t.timeout;return new Promise(function(t,r){var i=new XMLHttpRequest;i.open("GET",e),i.overrideMimeType("application/json; charset=utf-8"),i.withCredentials=!1,i.onreadystatechange=function(){if(!!i&&4===i.readyState&&(0!==i.status||!!(i.responseURL&&0===i.responseURL.indexOf("file:")))){var n=k(i.responseText),o=A(n);if(i.status<200||i.status>=300||!o){R(i,r,e,n),i=null;return}t({data:o,status:i.status,statusText:i.statusText,request:i}),i=null}},i.onerror=function(){r(new O("Network Error",e,null,i,{data:{}},!0)),i=null},i.timeout=n,i.ontimeout=function(){r(new O("timeout of "+n+"ms exceeded",e,"ECONNABORTED",i,{data:{}},!0)),i=null},i.send()})}var I=function(e){function t(t){var n=this;return!t.store&&(t.store=E),!t.request&&(t.request=C),n=e.call(this,t)||this}return i(t,e),t}(_),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function j(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function x(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j(arguments[t]));return e}var D,P,L=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,function r(i){t(i),n.off(e,r)})},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length){if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]}},e.prototype.emit=function(e,t,n){n?!!e&&(-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))):this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&x(this._hooks[e]).forEach(function(e){try{e(t)}catch(e){}})},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),N=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},M=(P=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return P+=1}),B=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof n){var r,i=[],o=String.fromCharCode((n=n<=25?n:n%25)+97);r=e.split(o);for(var s=0;s<r.length;s++){var a=parseInt(r[s],n),c=String.fromCharCode(a=1*a^t);i.push(c)}return i.join("")}}(e,64,25)},z=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,r=Date.now()+t;return n=window.setTimeout(function i(){var o=Date.now()-r;e(),r+=t,n=window.setTimeout(i,Math.max(0,t-o))},t),function(){window.clearTimeout(n)}},G=function(e){var t=document.createElement("a");return t.href=e,t},U=function(e){var t={};try{var n=G(e).search;(n=n.slice(1)).split("&").forEach(function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(e){t[n]=r}})}catch(e){}return t},F=function(e){for(var t=0,n=0,r=(e+="").length,i=0;i<r;i++)((t=31*t+e.charCodeAt(n++))>0x7fffffffffff||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t},W,J=(function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,!0!==o[c]&&(a+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}(function(){})},e.exports=n()}(W={exports:{}},W.exports),W.exports),K=function(e,t){try{return J.get(e,{domain:t||document.domain})}catch(e){return""}},q=function(e,t,n,r){try{var i=r||document.domain,o=+new Date+(n||6048e5);J.set(e,t,{expires:new Date(o),path:"/",domain:i})}catch(e){}},V=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return K(e,t)},e.prototype.setCookie=function(e,t,n,r){q(e,t,n,r)},e}(),H,Z,$={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return K(e,t)},setCookie:function(e,t,n,r){q(e,t,n,r)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},X={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return K(e,t)},setCookie:function(e,t,n,r){q(e,t,n,r)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},Y=function(){function e(e,t){this._storage=t&&"session"===t?X:!e&&$.isSupportLS?$:new V}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),Q=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,r=n?G(n).hostname:"",i=U(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=function(e,t,n,r){var i=new Y(!1),o=new Y(!1,"session"),s=e?"_tea_utm_cache_"+e:"_tea_utm_cache",a=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},u=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],l={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var f=!1;for(var h in l)l[h]&&(-1!==u.indexOf(h)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[h]=l[h]):c[h]=l[h],f=!0);if(f)o.setItem(a,"1"),i.setCookie(s,JSON.stringify(c),r,n);else{var d=i.getCookie(s,n);d&&(c=JSON.parse(d))}o.getItem(a)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(e){return l}return c}(this.appid,i,this.domain,this.cookie_expire);var s=this.browser(),a=this.os();return{browser:s.browser,browser_version:s.browser_version,platform:o,os_name:a.os_name,os_version:a.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(a.os_name),language:t,referrer:n,referrer_host:r,utm:this.utm,latest_data:this.last(n,r)}},e.prototype.last=function(e,t){var n="",r="",i="",o=location.hostname,s=!1;if(e&&t&&o!==t){n=e,r=t,s=!0;var a=U(e);a.keyword&&(i=a.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:s}},e.prototype.browser=function(){var e,t,n="",r=""+parseFloat(this.appVersion),i=this.userAgent;return -1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(n="Lark",r=i.substring(e+5,e+11)):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):-1!==(e=i.indexOf("Chrome"))?(n="Chrome",r=i.substring(e+7)):-1!==(e=i.indexOf("Chrome"))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))&&(n="Firefox",r=i.substring(e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}},e.prototype.os=function(){for(var e,t,n="",r="",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],o=0;o<i.length;o++){var s=i[o];if(s.r.test(this.userAgent)){"Mac OS X"===(n=s.s)&&this.isNewIpad()&&(n="iOS");break}}var a=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(n)&&(r=a(/Windows (.*)/,n),n="windows"),n){case"Mac OS X":r=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),n="mac";break;case"Android":(t=a(/Android ([\.\_\d]+)/,e=this.userAgent))||(t=a(/Android\/([\.\_\d]+)/,e)),r=t,n="android";break;case"iOS":r=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(r=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?r[1]+"."+r[2]+"."+(0|r[3]):"",n="ios"}return{os_name:n,os_version:r}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach(function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))});else if("ios"===e||"mac"===e||"windows"===e){if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}}catch(e){}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),ee={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},et={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},en={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k"},er={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az23z21z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az23z21z4az22z1gz1iz22z1mz1iz4az1az1mz1k"},ei="5.0.39_oversea",eo=function(){function e(e,t){this.collector=e,this.config=t,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return e.prototype.checkVerify=function(e){var t=this;if(!e||!e.length)return!1;var n=e[0];if(!n)return!1;var r=n.events,i=n.header;if(!r||!r.length)return!1;var o=!0;return r.forEach(function(e){if(!e)return o=!1,void(e.checkEvent="\u4E8B\u4EF6\u5F02\u5E38");t.checkEventName(e.event)||(o=!1,e.checkEvent="\u4E8B\u4EF6\u540D\u4E0D\u80FD\u4EE5 $ or __\u5F00\u5934"),t.checkEventParams(e.params)||(o=!1,e.checkParams="\u5C5E\u6027\u540D\u4E0D\u80FD\u4EE5 $ or __\u5F00\u5934")}),this.checkEventParams(i)||(o=!1),o},e.prototype.checkEventName=function(e){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var n in t)return!!this.calculate(n,"params")&&(!("string"==typeof t[n]&&t[n].length>1024)||(console.warn("params: "+n+" can not over 1024 byte, please check;"),!1));return!0},e.prototype.calculate=function(e,t){return -1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||!RegExp("^\\$").test(e)&&!RegExp("^__").test(e)||(console.warn(("event"===t?"event":"params")+" name: "+e+" can not start with $ or __, pleace check;"),!1)},e}();!function(e){e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report"}(H||(H={})),function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(Z||(Z={}));var es=H,ea=void 0,ec=(new Date).getTimezoneOffset(),eu=parseInt(""+-ec/60,10),el=60*ec,ef=6048e5,eh=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new Q(t.app_id,t.cookie_domain||"",t.cookie_expire||ef).init();this.eventCheck=new eo(e,t);var r="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new Y(!1,"session"),this.localStorage=new Y(!1,"local"),this.channelUrl="tcpy"===t.channel_type||"ttp"===t.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"},t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var i=this.localStorage.getItem(r);i&&1==i?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(r,"1")),this.envInfo={user:{user_unique_id:ea,user_type:ea,user_id:ea,user_is_auth:ea,user_is_login:ea,device_id:ea,web_id:ea,ip_addr_id:ea,user_unique_id_type:ea},header:{app_id:ea,app_name:ea,app_install_id:ea,install_id:ea,app_package:ea,app_channel:ea,app_version:ea,ab_version:ea,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:ea,traffic_type:ea,client_ip:ea,device_brand:ea,os_api:ea,access:ea,language:n.language,region:ea,app_language:ea,app_region:ea,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:ea,rnd:ea,platform:n.platform,sdk_version:ei,sdk_lib:"js",province:ea,city:ea,timezone:eu,tz_offset:el,tz_name:ea,sim_region:ea,carrier:ea,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{},wechat_unionid:ea,wechat_openid:ea}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var n=e||this.initConfig.channel,r=this.initConfig&&this.initConfig.channel_type?"tcpy"===this.initConfig.channel_type?en[n]:er[n]:ee[n];this.domain=B(r)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.initABData=function(){var e="__tea_sdk_ab_version_"+this.initConfig.app_id,t=null;if(this.initConfig.ab_cross){var n=this.localStorage.getCookie(e,this.initConfig.ab_cookie_domain);t=n?JSON.parse(n):null}else t=this.localStorage.getItem(e);this.setAbCache(t)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbUuidCache=function(e,t){var n=t||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+n]||(this.ab_uuid_cache[""+n]=[]),-1===this.ab_uuid_cache[""+n].indexOf(e)&&this.ab_uuid_cache[""+n].push(e)},e.prototype.getAbUuidCache=function(e){return this.ab_uuid_cache[""+e]},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version="+ei+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.setAppid=function(e){this.envInfo.header.app_id=e},e.prototype.set=function(e){var t=this;Object.keys(e).forEach(function(n){void 0!==e[n]&&null!==e[n]||t.delete(n);try{t.eventCheck.calculate(n,"config")}catch(e){}if("traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=T({},t.evtParams||{},e.evtParams||{});else if("_staging_flag"===n)t.evtParams=T({},t.evtParams||{},{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",i="";if(n.indexOf(".")>-1){var o=n.split(".");r=o[0],i=o[1]}r?"user"===r||"header"===r?t.envInfo[r][i]=e[n]:t.envInfo.header.custom[i]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=!!e[n]:"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}})},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){console.log("get config stringify error "),this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e){console.log("setStore error"),this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message}),console.log("delete error")}},e}(),ed=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("[instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("[instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),Error(e)},e}(),ep=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Sogou News Spider","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach(function(e){-1!==t.indexOf(e)&&(n=!0)}),n},e}(),eg=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e){return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise(function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted(function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)}):n(!1)}catch(e){console.log("AppLogBridge, error:"+JSON.stringify(e.stack)),n(!1)}})},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch(e){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach(function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)})}catch(e){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge\u57CB\u70B9\u4E0A\u62A5",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),ev={XHR_ON:500,TIMEOUT:5005};function ey(e,t,n,r,i,o,s,a,c){try{var u=new XMLHttpRequest,l=a||"POST";u.open(l,""+e,!0),u.setRequestHeader("Content-Type","application/json; charset=utf-8"),s&&u.setRequestHeader("X-MCS-AppKey",""+s),r&&(u.withCredentials=!0),u.onload=function(){if(i){var e=null;if(u.responseText){try{e=JSON.parse(u.responseText)}catch(t){e={}}i(e,t)}}},n&&(u.timeout=n,u.ontimeout=function(){o&&o(t,ev.TIMEOUT)}),u.onerror=function(){u.abort(),o&&o(t,ev.XHR_ON)},c?u.send(t):u.send(JSON.stringify(t))}catch(e){}}var em=4001,eb=4e3,e_=4002,ew=4003,eS=function(e,t,n,r){try{var i=e.match(/\/v\d\//),o="";o=i?i[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/";var s=e.split(o)[0];if(!s)return void r(e,t,em);t.forEach(function(i){var o=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return t="&"===t[0]?t.slice(1):t}(i),a=new Image(1,1);a.onload=function(){a=null,n&&n()},a.onerror=function(){a=null,r&&r(e,t,eb)},a.src=s+"/gif?"+o})}catch(n){r&&r(e,t,e_,n.message)}},eE=function(e,t,n,r,i,o,s,a){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(s)return window.navigator&&window.navigator.sendBeacon?void(window.navigator.sendBeacon(e,JSON.stringify(t))?i():o(e,t,ew)):void eS(e,t,i,o)}else eS(e,t,i,o);ey(e,t,n,r,i,o,"","",a)},eO=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new eo(e,t),this.cacheStorgae=new Y(!0),this.localStorage=new Y(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.collect.on(es.Ready,function(){n.reportAll(!1)}),this.collect.on(es.ConfigDomain,function(){n.reportUrl=n.configManager.getUrl("event")}),this.collect.on(es.Event,function(e){n.event(e)}),this.collect.on(es.BeconEvent,function(e){n.beconEvent(e)}),this.collect.on(es.CleanEvents,function(){n.reportAll(!1)}),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",function(){e.reportAll(!0)},!1),function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)}(function(){e.reportAll(!0)}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e.reportAll(!0)},!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;try{var n=x(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=setTimeout(function(){t.report(!1),t.reportTimeout=null},r)}}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e){var t=x(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.destroyInstance||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))},e.prototype.reportBecon=function(){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){r=e.slice(n,n+this.eventLimit);var r,i=this.split(this.merge(r));this.send(i,t)}else i=this.split(this.merge(e)),this.send(i,t)},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this,r=this.configManager.get(),i=r.header,o=r.user;i.custom=JSON.stringify(i.custom),i.referrer=this.handleRefer();var s=this.configManager.get("evtParams"),a=this.configManager.get("user_unique_id_type"),c=JSON.parse(JSON.stringify({events:e.map(function(e){try{Object.keys(s).length&&!t&&(e.params=T({},s,e.params)),a&&(e.params.$user_unique_id_type=a);var r=n.configManager.getAbCache(),i=n.configManager.getAbUuidCache(o.user_unique_id);if(r&&r.uuid&&r.uuid===o.user_unique_id){var c=n.configManager.getAbVersion();if(n.config.enable_ab_uuid){if(i&&i.length){var u=i.join(",");c&&c.includes(u)&&(e.ab_sdk_version=c)}}else c&&(e.ab_sdk_version=c)}return e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(t){return n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:t.message}),e}}),user:o,header:i}));c.local_time=Math.floor(Date.now()/1e3),c.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,c.verbose=1;var u=[];return u.push(c),u},e.prototype.split=function(e){return e=e.map(function(e){var t=[];return t.push(e),t})},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach(function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&((r=n.config.filter(r))||console.warn("filter must return data !!")),n.collect.eventFilter&&r&&((r=n.collect.eventFilter(r))||console.warn("filterEvent api must return data !!"));var i=r||e,o=JSON.parse(JSON.stringify(i));if(n.eventCheck.checkVerify(o),!i.length)return;n.collect.emit(es.SubmitBefore,i),n.collect.emit(es.SubmitVerify,i),eE(n.reportUrl,i,n.timeout,n.enable_ttwebid,function(e,t){e&&0!==e.e?(n.collect.emit(es.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"\u57CB\u70B9\u4E0A\u62A5\u5931\u8D25",time:Date.now(),data:o,code:e.e,failType:"\u6570\u636E\u5F02\u5E38",status:"fail"})):(n.collect.emit(es.SubmitScuess,{eventData:t,res:e}),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"\u57CB\u70B9\u4E0A\u62A5\u6210\u529F",time:Date.now(),data:o,code:200,status:"success"}))},function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(es.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"\u57CB\u70B9\u4E0A\u62A5\u7F51\u7EDC\u5F02\u5E38",time:Date.now(),data:o,code:t,failType:"\u7F51\u7EDC\u5F02\u5E38",status:"fail"})},t,!1),n.collect.emit(es.SubmitAfter,i)}catch(e){console.warn("something error, "+JSON.stringify(e.stack)),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}}))},e}(),ek=function(){return(function e(t){return t?(t^16*Math.random()>>t/4).toString(10):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)})().replace(/-/g,"").slice(0,19)},eA=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Y(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(es.ConfigUuid,function(e){n.setUuid(e)}),this.collect.on(es.ConfigWebId,function(e){n.setWebId(e)}),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;if(this.enableCookie){var t=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=t&&"string"==typeof t?JSON.parse(t):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(es.CustomWebId,function(){e.tokenReady=!0,e.collect.emit(es.TokenComplete)}):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:ek(),user_unique_id:this.configManager.get("user_unique_id")||ek()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=U(window.location.href);return!(!t||!t.Web_ID)&&(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),!0)}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u53D1\u8D77WEBID\u8BF7\u6C42",logType:"fetch",level:"info",time:Date.now(),data:n});var r=ek();ey(t,n,3e5,!1,function(t){var n;t&&0===t.e?(n=t.web_id,e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8BF7\u6C42\u6210\u529F",logType:"fetch",level:"info",time:Date.now(),data:t})):(n=r,e.collect.configManager.set({localWebId:r}),e.collect.emit(es.TokenError),e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8BF7\u6C42\u8FD4\u56DE\u503C\u5F02\u5E38",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})},function(){e.complete({web_id:e.configManager.get("web_id")||r,user_unique_id:e.configManager.get("user_unique_id")||r}),e.collect.configManager.set({localWebId:r}),e.collect.emit(es.TokenError),e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8BF7\u6C42\u7F51\u7EDC\u5F02\u5E38",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")})},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(es.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(es.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;(t!==n||t!==r)&&(this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(es.TokenChange,"uuid"),this.collect.emit(es.SessionReset))}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(es.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(es.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(es.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete e.web_id,this.storage.setItem(this.tokenKey,e))):this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this,t=this.configManager.getUrl("tobid");return new Promise(function(n){ey(t,{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,function(e){e&&0===e.e?n(e.tobid):n("")},function(){n("")})})},e}(),eR=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},eC=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new Y(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(es.SessionReset,function(){n.resetSessionId()}),this.collect.on(es.SessionResetTime,function(){n.updateSessionIdTime()}))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:eR(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:eR(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.sessionExp=setInterval(function(){e.checkEXp()},this.expireTime)},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval(function(){e.checkEXp()},this.expireTime))},e.prototype.resetSessionId=function(){var e={sessionId:eR(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,e)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:eR(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),eI=function(){function e(e,t){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.collect=e,this.config=t,this.app_id=t.app_id,this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],t.enable_debug&&this.load()}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){console.log("devTool load fail, "+e.message)}},e.prototype.load=function(){try{this.loadBaseInfo(),this.loadHook();var e=U(window.location.href);if(!e.open_devtool_web||parseInt(e.app_id)!==this.app_id)return;this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e){console.log("debug fail, "+e.message)}},e.prototype.loadDevTool=function(){this.loadScript("https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/devtool/debug-web.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"\u57FA\u672C\u4FE1\u606F",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,\u4E0A\u62A5\u57DF\u540D:this.collect.configManager.getDomain(),SDK\u7248\u672C:ei,SDK\u5F15\u5165\u65B9\u5F0F:"npm"}},{title:"\u7528\u6237\u4FE1\u606F",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"\u70B9\u51FB\u83B7\u53D6SSID"}},{title:"\u516C\u5171\u53C2\u6570\u4FE1\u606F",type:2,infoName:{\u6D4F\u89C8\u5668:this.collect.configManager.get("browser"),\u6D4F\u89C8\u5668\u7248\u672C:this.collect.configManager.get("browser_version"),\u5E73\u53F0:this.collect.configManager.get("platform"),\u8BBE\u5907\u578B\u53F7:this.collect.configManager.get("device_model"),\u64CD\u4F5C\u7CFB\u7EDF:this.collect.configManager.get("os_name"),\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C:this.collect.configManager.get("os_version"),\u5C4F\u5E55\u5206\u8FA8\u7387:this.collect.configManager.get("os_version"),\u6765\u6E90:this.collect.configManager.get("referrer"),\u81EA\u5B9A\u4E49\u4FE1\u606F:""}},{title:"\u914D\u7F6E\u4FE1\u606F",type:3,infoName:{\u5168\u57CB\u70B9:!!this.config.autotrack,\u505C\u7559\u65F6\u957F:!!this.config.enable_stay_duration}},{title:"A/B\u914D\u7F6E\u4FE1\u606F",type:4,infoName:{"A/B\u5B9E\u9A8C":!!this.config.enable_ab_test}},{title:"\u5BA2\u6237\u7AEF\u4FE1\u606F",type:3,infoName:{\u6253\u901A\u5F00\u5173:!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(es.Ready,function(){e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id,e.info[2].infoName["\u81EA\u5B9A\u4E49\u4FE1\u606F"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["\u5DF2\u66DD\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/B\u57DF\u540D"]=e.config.ab_channel_domain||B(et[e.config.channel]),e.info[4].infoName["\u5168\u90E8\u914D\u7F6E"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["\u662F\u5426\u6253\u901A"]=!!e.collect.bridgeReport)})},e.prototype.loadHook=function(){var e=this;this.collect.on(Z.DEBUGGER_MESSAGE,function(t){switch(t.type){case Z.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.info[4].infoName["\u5DF2\u66DD\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["\u5168\u90E8\u914D\u7F6E"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case Z.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var r=t.data[0],i=r.events;if(!i.length)return;i.forEach(function(n){n.checkShow=!0,n.searchShow=!0,n.success=t.status,n.type=-1!==e.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=e.collect.bridgeReport?"bridge":n.type,n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"\uFF0C msg: "+t.failType})}),e.updateEvent(r)}return}})},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",function(t){if(t.origin===location.origin){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;console.log("inittttt"),e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken(function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()})}})},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};(window.opener||window.parent).postMessage(n,this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode("#debugger-applog-web {\n      position: absolute;\n      width: 90px;\n      height: 30px;\n      background: #23c243;\n      border-radius: 6px;\n      color: #fff;\n      font-size: 12px;\n      bottom: 5%;\n      right: 10%;\n      text-align: center;\n      line-height: 30px;\n      cursor: pointer;\n      z-index:100;\n    }")),e.appendChild(t);var n=document.createElement("div");n.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web">AppLog\u8C03\u8BD5</div>';var r=document.createElement("div");r.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(n),document.getElementsByTagName("body")[0].appendChild(r),document.getElementById("debugger-applog-web").addEventListener("click",function(){(window.opener||window.parent).postMessage({type:"devtool:web:open-draw"},location.origin)})},e}(),eT=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroyInstance=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.name=e,this.hook=new L,this.remotePlugin=new Map,this.Types=es,this.adapters.fetch=ey,this.adapters.storage=Y}return e.usePlugin=function(t,n,r){if(n){for(var i=!1,o=0,s=e.plugins.length;o<s;o++)if(e.plugins[o].name===n){e.plugins[o].plugin=t,e.plugins[o].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&this.remotePlugin.get(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n,r,i=this;try{n=JSON.parse(JSON.stringify(t))}catch(e){n=t}if(this.logger=new ed(this.name,n.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(n&&N(n)){if(n.app_id&&"number"==typeof(r=n.app_id)&&!isNaN(r)){if(!n.app_key||function(e){return"string"==typeof e}(n.app_key)){var o=n.channel_type&&"tcpy"===n.channel_type?["sg","va","in"]:["sg","va"];n.channel_domain||-1!==o.indexOf(n.channel)||(this.logger.warn("channel must "+o.join(" ,")+"!!!"),n.channel="sg"),this.spider=new ep,this.spider.checkSpider(n)?this.logger.warn("The current environment may be a spider, can not report!"):(this.logger=new ed(this.name,n.log),this.appBridge=new eg(this,n.enable_native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new eh(this,n),this.debugger=new eI(this,n),this.initConfig=n,this.emit(es.Init),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CINIT",data:n,level:"info",time:Date.now()}),n.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(n.app_id),this.eventManager=new eO,this.tokenManager=new eA,this.sessionManager=new eC,Promise.all([new Promise(function(e){i.once(es.TokenComplete,function(){e(!0)})}),new Promise(function(e){i.once(es.Start,function(){e(!0)})})]).then(function(){try{e.plugins.reduce(function(e,t){var n=t.plugin,r=t.options,o=Object.assign(i.initConfig,r),s=new n;return s.apply(i,o),e.push(s),e},i.pluginInstances)}catch(e){console.warn("load plugin error, "+e.message),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}i.sdkReady=!0,i.emit(es.Ready),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u521D\u59CB\u5316\u5B8C\u6210",time:Date.now(),level:"info",data:i.configManager.get("user")}),i.logger.info("appid: "+n.app_id+", userInfo:"+JSON.stringify(i.configManager.get("user"))),i.logger.info("appid: "+n.app_id+", sdk is ready, version is "+ei+", you can report now !!!"),n.disable_auto_pv&&(i.disableAutoPageView=!0);try{("full"===i.loadType&&n.enable_ab_test||n.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}i.pageView(),i.on(es.TokenChange,function(e){"webid"===e&&i.pageView(),i.logger.info("appid: "+n.app_id+" token change, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u8BBE\u7F6E\u4E86\u7528\u6237\u4FE1\u606F",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user")})}),i.on(es.TokenReset,function(){i.logger.info("appid: "+n.app_id+" token reset, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u91CD\u7F6E\u4E86\u7528\u6237\u4FE1\u606F",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user")})}),i.on(es.RouteChange,function(e){e.init||n.disable_route_report||i.pageView()})}),this.tokenManager.apply(this,n),this.eventManager.apply(this,n),this.sessionManager.apply(this,n)),this.inited=!0)}else this.logger.warn("app_key param is error, must be string, please check!")}else this.logger.warn("app_id param is error, must be number, please check!")}else this.logger.warn("init params error,please check")},e.prototype.config=function(e){if(this.inited){if(e&&N(e)){var t;try{t=JSON.parse(JSON.stringify(t))}catch(n){t=e}if(this.bridgeReport)this.appBridge.setConfig(t);else{t._staging_flag&&1===t._staging_flag&&(this.staging=!0),t.disable_auto_pv&&(this.disableAutoPageView=!0,delete t.disable_auto_pv);var n=T({},t);if(this.initConfig&&this.initConfig.configPersist){var r=this.configManager.getStore();r&&(n=Object.assign(r,t)),this.configManager.setStore(t)}n.web_id,n.user_unique_id;var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&(n[r[i]]=e[r[i]])}return n}(n,["web_id","user_unique_id"]);n.hasOwnProperty("web_id")&&this.emit(es.ConfigWebId,n.web_id),n.hasOwnProperty("user_unique_id")&&this.emit(es.ConfigUuid,n.user_unique_id),this.configManager.set(i),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CCONFIG",level:"info",time:Date.now(),data:n})}}else this.logger.warn("config params is error, please check")}else this.logger.warn("config must be use after function init")},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(es.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(es.Start),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CSTART",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(es.Ready)))},e.prototype.event=function(e,t){var n=this;try{var r=[];if(Array.isArray(e))e.forEach(function(e){var t=n.processEvent(e[0],e[1]||{});t&&r.push(t)});else{var i=this.processEvent(e,t);if(!i)return;r.push(i)}this.bridgeReport?r.forEach(function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))}):r.length&&(this.emit(es.Event,r),this.emit(es.SessionResetTime))}catch(e){this.logger.warn("something error, please check"),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))this.logger.warn("beconEvent not support batch report, please check");else{var n=[],r=this.processEvent(e,t||{});r&&(n.push(r),n.length&&(this.emit(es.BeconEvent,n),this.emit(es.SessionResetTime)))}},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return this.logger.warn("eventName is null\uFF0C please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;"object"!=typeof r&&(r={}),r.profile?delete r.profile:r.event_index=M();var i=void 0;return r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:n.message}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=T({},t,e);this.event("predefine_pageview",n)}else this.logger.warn("predefinePageView should call after init")},e.prototype.clearEventCache=function(){this.emit(es.CleanEvents)},e.prototype.setWebIDviaUnionID=function(e){if(e){var t=F(e);this.config({web_id:""+t,wechat_unionid:e}),this.emit(es.CustomWebId)}},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setWebIDviaOpenID=function(e){if(e){var t=F(e);this.config({web_id:""+t,wechat_openid:e}),this.emit(es.CustomWebId)}},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(es.ResetStay,{url_path:e,title:t,url:n},es.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(es.SetStay,{url_path:e,title:t,url:n},es.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var r=!1,i=function(t){if(!r){r=!0;var i=n.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(T({},i))}},o=function(){n.tokenManager.getTobId().then(function(e){i(e)})};this.sdkReady?o():(t&&setTimeout(function(){i()},t),this.on(es.Ready,function(){o()}))}else this.logger.warn("predefinePageView should call after init")},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(es.ProfileSet,e,es.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CprofileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(es.ProfileSetOnce,e,es.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CprofileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(es.ProfileIncrement,e,es.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CprofileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(es.ProfileUnset,e,es.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CprofileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(es.ProfileAppend,e,es.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884CprofileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(es.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,es.Ab)},e.prototype.getVar=function(e,t,n,r){this.emit(es.AbVar,{name:e,defaultValue:t,callback:n,uuid:r},es.Ab)},e.prototype.getABconfig=function(e,t){this.emit(es.AbConfig,{params:e,callback:t},es.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(es.AbVersionChangeOn,e,es.Ab),function(){t.emit(es.AbVersionChangeOff,e,es.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(es.AbVersionChangeOff,e,es.Ab)},e.prototype.openOverlayer=function(){this.emit(es.AbOpenLayer,"",es.Ab)},e.prototype.closeOverlayer=function(){this.emit(es.AbCloseLayer,"",es.Ab)},e.prototype.getAllVars=function(e){this.emit(es.AbAllVars,e,es.Ab)},e.prototype.autoInitializationRangers=function(e){var t,n,r,i,o,s,a,c;n=(t=e).app_id,r=t.channel,i=t.onTokenReady,o=ee[r]+"/webid",s=new Y(!1),a="__tea_cache_tokens_"+n,(c=s.getItem(a))&&c.web_id?i(c.web_id):eE(o,{app_key:"",app_id:n,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},3e3,!1,function(e){if(e&&0===e.e){i(e.web_id);var t={web_id:e.web_id,user_unique_id:e.web_id,timestamp:Date.now()};s.setItem(a,t)}else i("")},function(){i("")},!0)},e.prototype.destoryInstace=function(){this.destroyInstance||(this.destroyInstance=!0,this.off(es.TokenComplete))},e.plugins=[],e}(),ej=function(){function e(){}return e.prototype.apply=function(e,t){var n=this,r=e.adapters.fetch;if(t.event_verify_url){if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var i=e.Types;e.on(i.SubmitBefore,function(e){r(n.url,e,3e4)})}}else console.log("please use correct et_test url")}},e}(),ex=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.duration=6e4,this.reportUrl=e.configManager.getDomain()+"/profile/list";var r=e.Types,i=e.adapters.fetch;this.eventCheck=new eo(e,t),this.fetch=i,this.cache={},this.collect.on(r.ProfileSet,function(e){n.setProfile(e)}),this.collect.on(r.ProfileSetOnce,function(e){n.setOnceProfile(e)}),this.collect.on(r.ProfileUnset,function(e){n.unsetProfile(e)}),this.collect.on(r.ProfileIncrement,function(e){n.incrementProfile(e)}),this.collect.on(r.ProfileAppend,function(e){n.appendProfile(e)}),this.collect.on(r.ProfileClear,function(){n.cache={}}),this.ready(r.Profile)},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach(function(n){t.collect.hook.emit(e,n)})};for(var i in n)r(i)}},e.prototype.report=function(e,t){void 0===t&&(t={});try{if(this.config.disable_track_event)return;var n=[];n.push(this.collect.processEvent(e,t));var r=this.collect.eventManager.merge(n);this.fetch(this.reportUrl,r),this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"\u57CB\u70B9\u4E0A\u62A5\u6210\u529F",time:Date.now(),data:r,code:200,status:"success"})}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}},e.prototype.setProfile=function(e){var t=this.formatParams(e);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set",T({},t,{profile:!0})))},e.prototype.setOnceProfile=function(e){var t=this.formatParams(e,!0);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set_once",T({},t,{profile:!0})))},e.prototype.incrementProfile=function(e){e?this.report("__profile_increment",T({},e,{profile:!0})):console.warn("please check the params, must be object!!!")},e.prototype.unsetProfile=function(e){if(e){var t={};t[e]="1",this.report("__profile_unset",T({},t,{profile:!0}))}else console.warn("please check the key, must be string!!!")},e.prototype.appendProfile=function(e){if(e){var t={};for(var n in e)"string"==typeof e[n]||"Array"===Object.prototype.toString.call(e[n]).slice(8,-1)?t[n]=e[n]:console.warn("please check the value of param: "+n+", must be string or array !!!");Object.keys(t).length&&this.report("__profile_append",T({},t,{profile:!0}))}else console.warn("please check the params, must be object!!!")},e.prototype.pushCache=function(e){var t=this;Object.keys(e).forEach(function(n){t.cache[n]={val:t.clone(e[n]),timestamp:Date.now()}})},e.prototype.formatParams=function(e,t){var n=this;void 0===t&&(t=!1);try{if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void console.warn("please check the params type, must be object !!!");var r={};for(var i in e)"string"==typeof e[i]||"number"==typeof e[i]||"Array"===Object.prototype.toString.call(e[i]).slice(8,-1)?r[i]=e[i]:console.warn("please check the value of params:"+i+", must be string,number,Array !!!");var o=Object.keys(r);if(!o.length||!this.eventCheck.checkEventParams(r))return;var s=Date.now();return o.filter(function(r){var i=n.cache[r];return t?!i:!(i&&n.compare(i.val,e[r])&&s-i.timestamp<n.duration)}).reduce(function(e,t){return e[t]=r[t],e},{})}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message}),console.log("error")}},e.prototype.compare=function(e,t){try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message}),!1}},e.prototype.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:t.message}),e}},e.prototype.unReady=function(){console.warn("sdk is not ready, please use this api after start")},e}(),eD=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=z(function(){e.isSessionhasEvent&&e.endCurrentSession()},e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionReset,function(){n.process()})}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),eP=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){var r=e.adapters.fetch;this.fetch=r,this.url=e.configManager.getUrl("event");var i=this.collect.Types;this.collect.on(i.Ready,function(){n.sdkOnload()}),this.collect.on(i.SubmitError,function(e){var t=e.type,r=e.eventData,i=e.errorCode;"f_data"===t&&n.sdkError(r,i)})}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,i=n.app_id,o=n.app_name,s=n.sdk_version,a=r.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:o||"",sdk_version:s,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA"}),local_time_ms:Date.now()}],user:{user_unique_id:a},header:{}};setTimeout(function(){e.fetch(e.url,[c],3e4,!1,function(){},function(){},"566f58151b0ed37e")},16)}catch(e){}},e.prototype.sdkError=function(e,t){var n=this;try{var r=e[0],i=r.user,o=r.header,s=[];e.forEach(function(e){e.events.forEach(function(e){s.push(e)})});var a={events:s.map(function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:o.app_id,app_name:o.app_name||"",error_event:e.event,sdk_version:o.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(o),user:JSON.stringify(i)}),local_time_ms:Date.now()}}),user:{user_unique_id:i.user_unique_id},header:{}};setTimeout(function(){n.fetch(n.url,[a],3e4,!1,function(){},function(){},"566f58151b0ed37e")},16)}catch(e){}},e}(),eL={autotrack:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},visual:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},eN="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,eM=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach(function(t,n){if("sdk"===t){if(eL.hasOwnProperty(n)){var r=eL[n].object,i=""+eL[n].src[e.channel];e.exist(n,r,i)}else console.warn("your "+n+" is not exist\uFF0Cplease check plugin name")}else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))})}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var r=this;eN[t]?(this.process(e,eN[t]),console.log("\u5DF2\u6709"+e+"\u63D2\u4EF6\uFF0C\u907F\u514D\u91CD\u590D\u52A0\u8F7D~")):this.loadPlugin(e,n,function(){r.process(e,eN[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","\u2013","load plugin:"+e+" success","-")},function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","\u2013","load plugin:"+e+" error","-")})},e.prototype.process=function(e,t,n){try{if(n){var r=new t;r.apply&&r.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(t){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:t.message}),console.log("excude "+e+" error, message:"+t.message)}},e.prototype.loadPlugin=function(e,t,n,r){var i=this;try{var o=document.createElement("script");o.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),o.onerror=function(){r(t)},o.onload=function(){i._plugin[e].forEach(function(e){e()})},document.getElementsByTagName("head")[0].appendChild(o)}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"\u53D1\u751F\u4E86\u5F02\u5E38",level:"error",time:Date.now(),data:e.message})}},e}();eT.usePlugin(eM,"extend"),eT.usePlugin(ej,"et"),eT.usePlugin(ex,"profile"),eT.usePlugin(eD,"heartbeat"),eT.usePlugin(eP,"monitor");var eB=new eT("default"),ez={CN:3053,OVERSEA:3297};function eG(e){var t=e.isTest,n=e.channel_domain,r=e.channel_type,i=e.channel,o=/snssdk|zijieapi/g.test(n)&&/ttp|tcpy/g.test(r)&&/va|sg|in/g.test(i)?ez.CN:ez.OVERSEA;return eB.init({app_id:o,channel_type:r,channel:i,channel_domain:n}),eB.config({_staging_flag:t?1:0,enable_et_test:t}),eB.start(),eB.event.bind(eB)}var eU=function(e){function t(t){var n=this,r=t.test,i=t.TEAChannelDomain,o=void 0===i?"":i,s=t.mode,a=t.TEAChannel,c=t.TEAChannelType;return t.tracker=o||c||a?eG({isTest:r||"test"===s,channel_domain:o,channel_type:c,channel:a}):function(){},n=e.call(this,t)||this}return i(t,e),t}(I)},150615:function(e,t,n){"use strict";n.d(t,{oc:()=>ex,ZP:()=>eD});var r,i,o=n("460129"),s=n("649200"),a=n("605763"),c=n("327298"),u=n("851047"),l=n("586704"),f=n("527605"),h=n("664816"),d={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},p=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.Z)(this,e),this.init(t,n)}return(0,c.Z)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||d,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,(0,s.Z)({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),g=function(){function e(){(0,a.Z)(this,e),this.observers={}}return(0,c.Z)(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)}),this}},{key:"off",value:function(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e]=this.observers[e].filter(function(e){return e!==t})}}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach(function(e){e.apply(void 0,n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(t){t.apply(t,[e].concat(n))})}}]),e}();function v(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function y(e){return null==e?"":""+e}function m(e,t,n){e.forEach(function(e){t[e]&&(n[e]=t[e])})}function b(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var s=r(o.shift());!e[s]&&n&&(e[s]=new n),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function _(e,t,n){var r=b(e,t,Object);r.obj[r.k]=n}function w(e,t,n,r){var i=b(e,t,Object),o=i.obj,s=i.k;o[s]=o[s]||[],r&&(o[s]=o[s].concat(n)),!r&&o[s].push(n)}function S(e,t){var n=b(e,t),r=n.obj,i=n.k;if(r)return r[i]}function E(e,t,n){var r=S(e,n);return void 0!==r?r:S(t,n)}function O(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):O(e[r],t[r],n):e[r]=t[r]);return e}function k(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function R(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return A[e]}):e}var C="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,I=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,a.Z)(this,t),n=(0,u.Z)(this,(0,l.Z)(t).call(this)),C&&g.call((0,f.Z)(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return(0,h.Z)(t,e),(0,c.Z)(t,[{key:"addNamespaces",value:function(e){0>this.options.ns.indexOf(e)&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split(".")),S(this.data,o)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(s=e.split("."),r=t,t=s[1]),this.addNamespaces(t),_(this.data,s,r),!i.silent&&this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)("string"==typeof n[i]||"[object Array]"===Object.prototype.toString.apply(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});!r.silent&&this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);var c=S(this.data,a)||{};r?O(c,n,i):c=(0,s.Z)({},c,n),_(this.data,a,c),!o.silent&&this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return(!t&&(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI)?(0,s.Z)({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(g),T={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach(function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))}),t}},j={},x=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.Z)(this,t),n=(0,u.Z)(this,(0,l.Z)(t).call(this)),C&&g.call((0,f.Z)(n)),m(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,(0,f.Z)(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=p.create("translator"),n}return(0,h.Z)(t,e),(0,c.Z)(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var o=e.match(this.interpolator.nestingRegexp);if(o&&o.length>0)return{key:e,namespaces:i};var s=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(s[0])>-1)&&(i=s.shift()),e=s.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==(0,o.Z)(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),!n&&(n={}),null==e)return"";!Array.isArray(e)&&(e=[String(e)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,c=this.extractFromKey(e[e.length-1],n),u=c.key,l=c.namespaces,f=l[l.length-1],h=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&"cimode"===h.toLowerCase())return d?f+(n.nsSeparator||this.options.nsSeparator)+u:u;var p=this.resolve(e,n),g=p&&p.res,v=p&&p.usedKey||u,y=p&&p.exactUsedKey||u,m=Object.prototype.toString.apply(g),b=["[object Number]","[object Function]","[object RegExp]"],_=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,S="string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g;if(w&&g&&S&&0>b.indexOf(m)&&!("string"==typeof _&&"[object Array]"===m)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,g,n):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");if(a){var E="[object Array]"===m,O=E?[]:{},k=E?y:v;for(var A in g)if(Object.prototype.hasOwnProperty.call(g,A)){var R="".concat(k).concat(a).concat(A);O[A]=this.translate(R,(0,s.Z)({},n,{joinArrays:!1,ns:l})),O[A]===R&&(O[A]=g[A])}g=O}}else if(w&&"string"==typeof _&&"[object Array]"===m)(g=g.join(_))&&(g=this.extendTranslation(g,e,n,r));else{var C=!1,I=!1,T=void 0!==n.count&&"string"!=typeof n.count,j=t.hasDefaultValue(n),x=T?this.pluralResolver.getSuffix(h,n.count):"",D=n["defaultValue".concat(x)]||n.defaultValue;!this.isValidLookup(g)&&j&&(C=!0,g=D),!this.isValidLookup(g)&&(I=!0,g=u);var P=j&&D!==g&&this.options.updateMissing;if(I||C||P){if(this.logger.log(P?"updateKey":"missingKey",h,f,u,P?D:g),a){var L=this.resolve(u,(0,s.Z)({},n,{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var N=[],M=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&M&&M[0])for(var B=0;B<M.length;B++)N.push(M[B]);else"all"===this.options.saveMissingTo?N=this.languageUtils.toResolveHierarchy(n.lng||this.language):N.push(n.lng||this.language);var z=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,f,t,P?r:g,P,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,f,t,P?r:g,P,n),i.emit("missingKey",e,f,t,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?N.forEach(function(e){i.pluralResolver.getSuffixes(e).forEach(function(t){z([e],u+t,n["defaultValue".concat(t)]||D)})}):z(N,u,D))}g=this.extendTranslation(g,e,n,p,r),I&&g===u&&this.options.appendNamespaceToMissingKey&&(g="".concat(f,":").concat(u)),I&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(g))}return g}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init((0,s.Z)({},n,{interpolation:(0,s.Z)({},this.options.interpolation,n.interpolation)}));var a,c=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(c){var u=e.match(this.interpolator.nestingRegexp);a=u&&u.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=(0,s.Z)({},this.options.interpolation.defaultVariables,l)),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),c){var f=e.match(this.interpolator.nestingRegexp);a<(f&&f.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))},n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,d="string"==typeof h?[h]:h;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=T.handle(d,e,t,this.options&&this.options.postProcessPassResolved?(0,s.Z)({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!s.isValidLookup(t)){var c=s.extractFromKey(e,a),u=c.key;n=u;var l=c.namespaces;s.options.fallbackNS&&(l=l.concat(s.options.fallbackNS));var f=void 0!==a.count&&"string"!=typeof a.count,h=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,d=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);l.forEach(function(e){!s.isValidLookup(t)&&(o=e,!j["".concat(d[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(j["".concat(d[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach(function(n){if(!s.isValidLookup(t)){i=n;var o,c,l=u,d=[l];for(s.i18nFormat&&s.i18nFormat.addLookupKeys?s.i18nFormat.addLookupKeys(d,u,n,e,a):(f&&(o=s.pluralResolver.getSuffix(n,a.count)),f&&h&&d.push(l+o),h&&d.push(l+="".concat(s.options.contextSeparator).concat(a.context)),f&&d.push(l+=o));c=d.pop();)!s.isValidLookup(t)&&(r=c,t=s.getResource(n,e,c,a))}}))})}}),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}(g);function D(e){return e.charAt(0).toUpperCase()+e.slice(1)}var P=function(){function e(t){(0,a.Z)(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=p.create("languageUtils")}return(0,c.Z)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||0>e.indexOf("-"))return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase())?null:this.formatLanguageCode(t.join("-"))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||0>e.indexOf("-"))return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=D(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=D(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=D(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach(function(e){if(!t){var r=n.formatLanguageCode(e);(!n.options.supportedLngs||n.isSupportedCode(r))&&(t=r)}}),!t&&this.options.supportedLngs&&e.forEach(function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find(function(e){if(0===e.indexOf(r))return e})}}),!t&&(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return!n&&(n=e[this.getScriptPartFromCode(t)]),!n&&(n=e[this.formatLanguageCode(t)]),!n&&(n=e[this.getLanguagePartFromCode(t)]),!n&&(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach(function(e){0>i.indexOf(e)&&o(n.formatLanguageCode(e))}),i}}]),e}(),L=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],N={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function M(){var e={};return L.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:N[t.fc]}})}),e}var B=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.Z)(this,e),this.languageUtils=t,this.options=n,this.logger=p.create("pluralResolver"),this.rules=M()}return(0,c.Z)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map(function(e){return t+e})}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map(function(n){return t.getSuffix(e,n)}):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var s=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};if("v1"===this.options.compatibilityJSON)return 1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):s();if("v2"===this.options.compatibilityJSON)return s();else if(this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0])return s();return this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.Z)(this,e),this.logger=p.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return(0,c.Z)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!e.interpolation&&(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:R,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?k(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?k(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?k(t.nestingPrefix):t.nestingPrefixEscaped||k("$t("),this.nestingSuffix=t.nestingSuffix?k(t.nestingSuffix):t.nestingSuffixEscaped||k(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,s,a=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(0>e.indexOf(a.formatSeparator)){var i=E(t,c,e);return a.alwaysFormat?a.format(i,void 0,n):i}var o=e.split(a.formatSeparator),s=o.shift().trim(),u=o.join(a.formatSeparator).trim();return a.format(E(t,c,s),u,n,r)};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?u(a.escape(e)):u(e)}}].forEach(function(t){for(s=0;i=t.regex.exec(e);){if(void 0===(o=l(i[1].trim()))){if("function"==typeof f){var n=f(e,i,r);o="string"==typeof n?n:""}else if(h){o=i[0];continue}else a.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),o=""}else"string"!=typeof o&&!a.useRawValueToEscape&&(o=y(o));if(e=e.replace(i[0],t.safeValue(o)),t.regex.lastIndex=0,++s>=a.maxReplaces)break}}),e}},{key:"nest",value:function(e,t){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,s.Z)({},o);function c(e,t){var n=this.nestingOptionsSeparator;if(0>e.indexOf(n))return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),t&&(a=(0,s.Z)({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(i)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var u=[],l=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var f=n[1].split(this.formatSeparator).map(function(e){return e.trim()});n[1]=f.shift(),u=f,l=!0}if((r=t(c.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=y(r)),!r&&(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=u.reduce(function(e,t){return i.format(e,t,o.lng,o)},r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function G(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}var U=function(e){function t(e,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,a.Z)(this,t),i=(0,u.Z)(this,(0,l.Z)(t).call(this)),C&&g.call((0,f.Z)(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=o,i.logger=p.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return(0,h.Z)(t,e),(0,c.Z)(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o=[],s=[],a=[],c=[];return e.forEach(function(e){var r=!0;t.forEach(function(t){var a="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[a]=2:i.state[a]<0||(1===i.state[a]?0>s.indexOf(a)&&s.push(a):(i.state[a]=1,r=!1,0>s.indexOf(a)&&s.push(a),0>o.indexOf(a)&&o.push(a),0>c.indexOf(t)&&c.push(t)))}),!r&&a.push(e)}),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:r}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:c}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach(function(n){w(n.loaded,[i],o),G(n.pending,e),t&&n.errors.push(t),0===n.pending.length&&!n.done&&(Object.keys(n.loaded).forEach(function(e){!s[e]&&(s[e]=[]),n.loaded[e].length&&n.loaded[e].forEach(function(t){0>s[e].indexOf(t)&&s[e].push(t)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,function(a,c){if(a&&c&&i<5){setTimeout(function(){r.read.call(r,e,t,n,i+1,2*o,s)},o);return}s(a,c)}):s(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return!o.pending.length&&i(),null;o.toLoad.forEach(function(e){n.loadOne(e)})}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,function(r,s){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),s),t.loaded(e,r,s)})}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(null!=n&&""!==n)this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,(0,s.Z)({},o,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r)}}]),t}(g);function F(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===(0,o.Z)(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===(0,o.Z)(e[2])||"object"===(0,o.Z)(e[3])){var n=e[3]||e[2];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function W(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&0>e.whitelist.indexOf("cimode")&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&0>e.supportedLngs.indexOf("cimode")&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function J(){}var K=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if((0,a.Z)(this,t),e=(0,u.Z)(this,(0,l.Z)(t).call(this)),C&&g.call((0,f.Z)(e)),e.options=W(n),e.services={},e.logger=p,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),(0,u.Z)(e,(0,f.Z)(e));setTimeout(function(){e.init(n,r)},0)}return e}return(0,h.Z)(t,e),(0,c.Z)(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=(0,s.Z)({},F(),this.options,W(t)),this.format=this.options.interpolation.format,!n&&(n=J),!this.options.isClone){this.modules.logger?p.init(r(this.modules.logger),this.options):p.init(null,this.options);var i=new P(this.options);this.store=new I(this.options.resources,this.options);var o=this.services;o.logger=p,o.resourceStore=this.store,o.languageUtils=i,o.pluralResolver=new B(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new z(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new U(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new x(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}});var c=v(),u=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,!e.options.isClone&&e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],s=function(e){if(e){var n=t.services.languageUtils.toResolveHierarchy(e);n.forEach(function(e){0>o.indexOf(e)&&o.push(e)})}};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return s(e)}),this.options.preload&&this.options.preload.forEach(function(e){return s(e)}),this.services.backendConnector.load(o,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=v();return!e&&(e=this.languages),!t&&(t=this.options.ns),!n&&(n=J),this.services.backendConnector.reload(e,t,function(e){r.resolve(),n(e)}),r}},{key:"use",value:function(e){if(!e)throw Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&T.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=v();this.emit("languageChanging",e);var i=function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve(function(){return n.t.apply(n,arguments)}),t&&t(e,function(){return n.t.apply(n,arguments)})},o=function(e){var t="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);t&&(!n.language&&(n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t)),!n.translator.language&&n.translator.changeLanguage(t),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(t)),n.loadResources(t,function(e){i(e,t)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i;if("object"!==(0,o.Z)(r)){for(var a=arguments.length,c=Array(a>2?a-2:0),u=2;u<a;u++)c[u-2]=arguments[u];i=n.options.overloadTranslationOptionHandler([t,r].concat(c))}else i=(0,s.Z)({},r);return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var s=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return -1===r||2===r};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||s(r,e)&&(!i||s(o,e)))||!1}},{key:"loadNamespaces",value:function(e,t){var n=this,r=v();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(function(e){0>n.options.ns.indexOf(e)&&n.options.ns.push(e)}),this.loadResources(function(e){r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=v();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter(function(e){return 0>r.indexOf(e)});return i.length?(this.options.preload=r.concat(i),this.loadResources(function(e){n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return(!e&&(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),e)?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J,i=(0,s.Z)({},this.options,n,{isClone:!0}),o=new t(i);return["store","services","language"].forEach(function(t){o[t]=e[t]}),o.services=(0,s.Z)({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new x(o.services,o.options),o.translator.on("*",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),o.init(i,r),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}}]),t}(g)),q=n("92233"),V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function H(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}void 0===n&&(n=null);for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var s=r(o.shift());!e[s]&&n&&(e[s]=new n),e=e[s]}return i()?{}:{obj:e,k:r(o.shift())}}function Z(e,t,n){var r=H(e,t,Object);r.obj[r.k]=n}function $(e,t){var n=H(e,t),r=n.obj,i=n.k;if(r)return r[i]}!function(e){e.keepRaw="keepRaw",e.replaceAnyway="replaceAnyway"}(r||(r={})),r.replaceAnyway;var X={memoize:!1,memoizeFallback:!1,bindI18n:!1,bindI18nStore:!1,onParseError:r.replaceAnyway},Y=function(){function e(){this.mem={}}return e.staticInit=function(t){e._i18nextInstance=t},e.prototype.init=function(t,n){var r=this;void 0===t&&(t=e._i18nextInstance);var i={};if((null==t?void 0:t.options)&&(t.options.i18nFormat&&(i=t.options.i18nFormat),i.onParseError=t.options.onParseError,i.missingInterpolationHandler=t.options.missingInterpolationHandler,i.icuConfig=t.options.icuConfig,i.ignoreWarning=!!t.options.ignoreWarning),this.options=Object.assign(X,n,i),this.formats=this.options.formats,t){var o=this.options,s=o.bindI18n,a=o.bindI18nStore,c=o.memoize;t.IntlMessageFormat=q.ZP,this.IntlMessageFormat=q.ZP,t.ICU=this,c&&(s&&t.on(s,function(){return r.clearCache()}),a&&t.store.on(a,function(){return r.clearCache()}))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach(function(e){return r.addLocaleData(e)}):this.addLocaleData(this.options.localeData))},e.prototype.addLocaleData=function(e){("[object Array]"===Object.prototype.toString.apply(e)?e:[e]).forEach(function(e){e&&e.locale&&q.ZP.__addLocaleData(e)})},e.prototype.addUserDefinedFormats=function(e){this.formats=this.formats?V(V({},this.formats),e):e},e.prototype.checkMissingInterpolation=function(e,t,n,i,o){if(!1===(this.options.icuConfig||{}).strict)return n;for(var s={},a=0,c=e;a<c.length;a++){var u=c[a];if(1!==u.type)continue;var l=u.value;if(null===n[l]||void 0===n[l]){if("function"==typeof this.options.missingInterpolationHandler){var f=this.options.missingInterpolationHandler({key:o,text:t,locale:i,interpolation:{key:l,val:n[l]}});if("string"==typeof f){s[l]=f;continue}}switch(this.options.onParseError){case r.keepRaw:throw Error();case r.replaceAnyway:s[l]="{"+l+"}";continue}if("function"==typeof this.options.onParseError){console.warn("[DEPRECATED] onParseError is deprecated, please use 'missingInterpolationHandler' instead of");var h=this.options.onParseError(t,l,i,this.IntlMessageFormat);if(!0===h)throw Error();s[l]="string"==typeof h?h:"{"+l+"}"}else!this.options.ignoreWarning&&console.warn('[Starling ICU Warning] The interpolation parameter "{'+l+'}" is missing in the translation text "'+t+'" for the key "'+o+"\"\nSuggestions: check whether the value is null or undefined. Try using empty string '' as fallback! e.g I18n.t('key', { apple: count || '' })"),s[l]="{"+l+"}"}}return Object.assign({},n,s)},e.prototype.parse=function(e,t,n,r,i,o){var s,a=o&&o.resolved&&o.resolved.res,c=this.options.memoize&&n+"."+r+"."+i.replace(/\./g,"###");!a&&t.thirdParamFallback&&t.fallbackText&&(e=t.fallbackText),this.options.memoize&&(s=$(this.mem,c));try{return!s&&(s=new this.IntlMessageFormat(e,n,this.formats,(this.options.icuConfig||{}).formatOptions),this.options.memoize&&(this.options.memoizeFallback||!o||a)&&Z(this.mem,c,s)),s.format(this.checkMissingInterpolation(s.getAst(),e,t||{},n,i))}catch(t){return e}},e.prototype.addLookupKeys=function(e,t,n,r,i){return e},e.prototype.clearCache=function(){this.mem={}},e.type="i18nFormat",e._i18nextInstance=null,e}();Y.name;var Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ee="INCONTEXT-KEY-MATCH",et=/^\s*\[\[__starling_(\d+)_(.*)__\]\]\s*$/,en=function(){return document.getElementById(ee)};"undefined"!=typeof window&&(window.__STARLING_INCONTEXT_GLOBAL__HOOK__=Q({},window.__STARLING_INCONTEXT_GLOBAL__HOOK__||{payload:{}}));var er={name:"inContext",type:"postProcessor",process:function(e,t,n,r){if(!(window&&en())||n.__STARLING_INCONTEXT_FLAG__)return e;!window.__STARLING_INCONTEXT_GLOBAL_I18N__&&(window.__STARLING_INCONTEXT_GLOBAL_I18N__=r),delete n.keySeparator,delete n.lngs;var i=0;if(t=t.toString(),et.test(t)){var o=t.match(et);o[0];var s=o[1],a=o[2];i=s,t=a}if(et.test(e)){var o=e.match(et);o[0];var s=o[1],a=o[2];e=a}if(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]){var c=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].findIndex(function(e){return JSON.stringify(e.options)===JSON.stringify(n)});c>-1?(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t][c].default=e,i=c):i=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].push({options:n,default:e})-1}else window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]=[{options:n,default:e}],i=0;return"[[__starling_"+i+"_"+t+"__]]"}};function ei(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function es(e,t,n){return t&&eo(e.prototype,t),n&&eo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ea(e){return ec(e)||eu(e)||el(e)||eh()}function ec(e){if(Array.isArray(e))return ef(e)}function eu(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function el(e,t){if(e){if("string"==typeof e)return ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ef(e,t)}}function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eh(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ed(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=el(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(a)throw o}}}}for(var ep=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],eg={},ev=0;ev<ep.length;ev++)eg[ep[ev]]={style:"currency",currency:ep[ev]};var ey={number:eg},em="languageTransformer";function eb(e){return function(t){return t.type===e}}function e_(e,t){var n=e;return(t||[]).map(function(t){n=t.process(e)||n}),n}var ew={lng:"zh-CN",fallbackLng:["en-US"],inContext:!0},eS=[Y,er],eE=function(){function e(t,n){if(ei(this,e),this._waitingToAddResourceBundle=[],null!=t&&t.copiedI18nextInstance){this.instance=t.copiedI18nextInstance;return}this._handlePlugins(n),this._handleConfigs(t),this.instance=K.createInstance(),this.instance.isInitialized=!1}return es(e,[{key:"_handlePlugins",value:function(e){var t,n;(null===(t=this.config)||void 0===t?void 0:null===(n=t.icuConfig)||void 0===n?void 0:n.open)===!1&&eS.shift(),this.plugins=Array.isArray(e)?e.concat(eS):eS}},{key:"_handleConfigs",value:function(e){this.userLng=(null==e?void 0:e.lng)||null,this.config=Object.assign({},ew,e||{})}},{key:"language",get:function(){return(this.instance||{}).language}},{key:"createInstance",value:function(){var e=this;return new Promise(function(t,n){"undefined"!=typeof window&&!window.CocosEngine&&e.config.inContext&&(e.config.postProcess=[].concat(["inContext"],e.config.postProcess||[]),window.__STARLING_DEVTOOLS_I18N=e.instance),e.plugins.map(function(t){"IES_INTL_ICU_PLUGIN"===t.name&&t.staticInit(e.instance),e.instance.use(t)});var r=e.config;e.config.formats=Object.assign({},e.config.formats,ey);var i=e_(r.lng,e.plugins.filter(eb(em)));e.instance.init(Object.assign({},r,{lng:i,i18nFormat:{formats:e.config.formats}}),function(r,i){try{var o,s=ed(e._waitingToAddResourceBundle);try{for(s.s();!(o=s.n()).done;){var a,c=o.value;(a=e.instance).addResourceBundle.apply(a,ea(c))}}catch(e){s.e(e)}finally{s.f()}e._waitingToAddResourceBundle=[]}catch(e){}!r&&(e._updateLanguages(),t({t:i,err:r})),e.init=!0,n({t:i,err:r})})})}},{key:"_updateLanguages",value:function(){this.languages=this.instance?Array.from(new Set([this.instance.language].concat(ea(this.instance.languages)))):null}},{key:"getLanguages",value:function(){return this.languages}},{key:"changeLanguage",value:function(e,t){var n=this;this.config.lng=e,this.instance.changeLanguage(e,function(e,r){!e&&n._updateLanguages(),t&&t(e,r)})}},{key:"changeLanguageWithPromise",value:function(e){var t=this;return new Promise(function(n,r){t.config.lng=e,t.instance.changeLanguage(e,function(e,i){e&&r({err:e,t:i}),t._updateLanguages(),n({err:e,t:i})})})}},{key:"getDir",value:function(e){return this.instance.dir(e)}},{key:"t",value:function(e,t,n){var r=Array.isArray(e)?Array.from(e).map(function(){return" "}).join(""):Array(e.length).fill(" "),i=Object.assign({keySeparator:r,nsSeparator:r},t);return"thirdParamFallback"in this.config&&this.config.thirdParamFallback&&(i.thirdParamFallback=!0),this.instance.t(e,n,i)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.instance.isInitialized?this.instance.addResourceBundle(e,t,n,r,i):(this._waitingToAddResourceBundle.push([e,t,n,!!r,!!i]),this.instance)}},{key:"cloneInstance",value:function(t,n){var r=this.instance.cloneInstance(t,n),i=new e({copiedI18nextInstance:r});return i.t=this.t.bind(i),i.config=this.config,i.plugins=this.plugins,i.languages=this.languages,i.init=r.isInitialized||!!this.init,i.userLng=this.userLng,r.on("initialized",function(){i.init=!0}),i}}]),e}(),eO="Starling_intl:",ek={warn:function(){for(var e,t="".concat(eO," [WARNING]"),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console).warn.apply(e,[t].concat(r))},error:function(){for(var e,t="".concat(eO," [ERROR]"),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console).error.apply(e,[t].concat(r))}};function eA(e){return new Promise(function(t,n){if(!Array.isArray(e)&&(e=Array.from(e)),e.length<=0)return t([]);var r=[];(e=e.map(function(i,o){return function(){("function"==typeof i?new Promise(i):Promise.resolve(i)).then(function(n){r[o]=n,o===e.length-1?t(r):e[o+1]()},n)}}))[0]()})}function eR(e,t,n){return n?t?t(e):e:((!e||!e.then)&&(e=Promise.resolve(e)),t?e.then(t):e)}function eC(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function eI(){}function eT(e,t){if(!t)return e&&e.then?e.then(eI):Promise.resolve()}function ej(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}!function(e){e.intl3rdParty="intl3rdParty",e.backend="backend",e.logger="logger",e.languageDetector="languageDetector",e.postProcessor="postProcessor",e.i18nFormat="i18nFormat",e["3rdParty"]="3rdParty"}(i||(i={}));var ex=new(function(){function e(t){var n;ei(this,e),this.plugins=[],this.i18nInstance=null!==(n=null==t?void 0:t.i18nInstance)&&void 0!==n?n:new eE}return es(e,[{key:"use",value:function(e){return this.plugins.includes(e)?(ek.warn("Plugin: ".concat(e.name," has beeninit installed.")),this):(this.plugins.push(e),this)}},{key:"init",value:function(e,t){try{var n=this;return n.ignoreWarning=e.ignoreWarning,n.i18nInstance._handleConfigs(e),n.i18nInstance._handlePlugins(n.plugins),eR(eC(function(){return eR(n.i18nInstance.createInstance(),function(e){var r=e.err,o=e.t,s=n.plugins.filter(function(e){return e.type===i.intl3rdParty});return eR(eA(s.map(ej(function(e){if(!!e&&"function"==typeof e.init){var t=e.init instanceof Promise?e.init:ej(function(t){return Promise.resolve(e.init(t))});return eT(t(n))}}))),function(){return"function"==typeof t&&t(r,o),{err:r,t:o}})})},function(e){return ek.error("The instance init error: ".concat(e)),{err:e,t:function(e){return e}}}))}catch(e){return Promise.reject(e)}}},{key:"language",get:function(){return(this.i18nInstance||{}).language}},{key:"setLang",value:function(e,t){var n=e_(e,this.plugins.filter(eb(em)));this.i18nInstance.changeLanguage(n,t)}},{key:"getLanguages",value:function(){return this.i18nInstance.getLanguages()}},{key:"setLangWithPromise",value:function(e){var t=e_(e,this.plugins.filter(eb(em)));return this.i18nInstance.changeLanguageWithPromise(t)}},{key:"dir",value:function(e){return this.i18nInstance.getDir(e)}},{key:"t",value:function(e,t,n){return this.ignoreWarning||this.i18nInstance&&this.i18nInstance.init?e&&("string"!=typeof e||e.trim())?this.i18nInstance.t(e,t,n):"":(ek.error("The instance has not been initialized: i18n.t('".concat(e,"'").concat(t?","+JSON.stringify(t):"",");")),null!=n?n:Array.isArray(e)?e[0]:e)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.i18nInstance.addResourceBundle(e,t,n,r,i)}},{key:"cloneInstance",value:function(t){var n=new e({i18nInstance:this.i18nInstance.cloneInstance(t)});return n.t=this.t.bind(n),n.plugins=this.plugins,n.ignoreWarning=this.ignoreWarning,n}}]),e}()),eD=ex},298069:function(e,t,n){"use strict";n.d(t,{B:function(){return l},Q:function(){return s}});var r=Object.defineProperty,i=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t,n)=>(i(e,"symbol"!=typeof t?t+"":t,n),n);let s="/__opfs_system_root";class a{constructor(e){o(this,"_module"),this._module=e}mkdirAdvanced(e,t){let n=l.ensureRootPath(e),{skipExist:r=!0,recursive:i=!1}=null!=t?t:{};this.isExist(n)&&r||(i?n.split("/").reduce((e,t)=>{let n=e+"/"+t;return"/"!==n[0]&&(n="/"+n),this.isExist(n)||this.mkdir(n),n}):this.mkdir(n))}readDir(e){return this._module.FS.readdir(e)}getPathType(e){let t=this._module.FS.findObject(e);return null===t?"not_found":!0===t.isFolder?"directory":"file"}isDir(e){return"directory"===this.getPathType(e)}isFile(e){return"file"===this.getPathType(e)}isExist(e){return"not_found"!==this.getPathType(e)}}class c extends a{constructor(e){super(e),o(this,"idb",null),o(this,"promiseQueue",[])}async init(){}async flushFs(){await Promise.all(this.promiseQueue),this.promiseQueue=[]}async mkdir(e){this._module.FS.mkdir(e)}async rmdir(e){this._module.FS.rmdir(e)}async unlink(e){this._module.FS.unlink(e)}writeFileSyncInternal(e,t){return this._module.veFS_JS_HUB.writeFile(e,t,!0)}readFileSyncInternal(e){return this._module.veFS_JS_HUB.readFile(e)}async writeFileInternal(e,t){return this.writeFileSyncInternal(e,t)}async readFileInternal(e){return this.readFileSyncInternal(e)}}class u extends a{constructor(e){super(e),o(this,"promiseQueue",[]),o(this,"root",null)}removeSystemRoot(e){return e.startsWith(s)?e.substring(s.length):e}splitPath(e){return e.split("/").filter(e=>e.length>0)}async getPathHandle(e,t=!1){let n=this.root;for(let r of e)n=await n.getDirectoryHandle(r,{create:t});return n}async flushFs(){await Promise.all(this.promiseQueue),this.promiseQueue=[]}async init(){return this.root=await navigator.storage.getDirectory(),new Promise(e=>{let t=this._module;t.WASMFS_INIT_DONE?e():t.WASMFS_INIT_DONE_CALLBACK=e})}async mkdir(e){e=this.removeSystemRoot(e);let t=this.splitPath(e);await this.getPathHandle(t,!0)}async rmdir(e){e=this.removeSystemRoot(e);let t=this.splitPath(e),n=t.pop();await (await this.getPathHandle(t)).removeEntry(n,{recursive:!0})}async unlink(e){e=this.removeSystemRoot(e);let t=this.splitPath(e),n=t.pop();await (await this.getPathHandle(t)).removeEntry(n)}async writeFileInternal(e,t){e=this.removeSystemRoot(e);let n=this.splitPath(e),r=n.pop(),i=(await (await (await this.getPathHandle(n)).getFileHandle(r,{create:!0})).createWritable()).getWriter();return await i.write({type:"truncate",size:t.length}),await i.write({type:"seek",position:0}),await i.write(t),await i.close(),t.length}async readFileInternal(e){e=this.removeSystemRoot(e);let t=this.splitPath(e),n=t.pop(),r=await (await (await this.getPathHandle(t)).getFileHandle(n)).getFile(),i=r.stream().getReader(),o=new Uint8Array(r.size),s=0;for(;;){let e=await i.read();if(e.done)break;e.value&&(o.set(e.value,s),s+=e.value.length)}return await i.releaseLock(),o}writeFileSyncInternal(e,t){throw Error("OPFS does not support sync IO.")}readFileSyncInternal(e){throw Error("OPFS does not support sync IO.")}}class l{constructor(e){o(this,"_module"),o(this,"_fs"),this._module=e;let t=e,n=!1;void 0===t.wasmFS_type?t.use_vefs_force=!0:n="opfs"===t.wasmFS_type,n?this._fs=new u(this._module):this._fs=new c(this._module)}async init(){await this._fs.init()}static ensureRootPath(e){return e.startsWith(s)||(e=s+e),"/"==(e=e.replace(/\/\//g,"/"))[e.length-1]&&(e=e.substring(0,e.length-1)),e}mkdir(e,t){e=l.ensureRootPath(e),this._fs.mkdirAdvanced(e,t)}async flushFs(){await this._fs.flushFs()}rmdir(e){e=l.ensureRootPath(e),this._fs.rmdir(e)}unlink(e){e=l.ensureRootPath(e),this._fs.unlink(e)}stat(e){return e=l.ensureRootPath(e),this._module.FS.stat(e)}async writeFile(e,t,n=!1){if(e=l.ensureRootPath(e),n&&this.unlink(e),"string"==typeof t){var r=new Uint8Array(this._module.lengthBytesUTF8(t)+1),i=this._module.stringToUTF8Array(t,r,0,r.length);t=r.subarray(0,i)}return await this._fs.writeFileInternal(e,t)}writeFileSync(e,t,n=!1){if(e=l.ensureRootPath(e),n&&this.unlink(e),"string"==typeof t){var r=new Uint8Array(this._module.lengthBytesUTF8(t)+1),i=this._module.stringToUTF8Array(t,r,0,r.length);t=r.subarray(0,i)}return this._fs.writeFileSyncInternal(e,t)}async readFile(e,t="binary"){e=l.ensureRootPath(e);let n=await this._fs.readFileInternal(e);if("number"==typeof n)throw Error("file not found");return("utf8"===t||"utf-8"===t)&&(n=this._module.UTF8ArrayToString(n,0)),n}readFileSync(e,t="binary"){e=l.ensureRootPath(e);let n=this._fs.readFileSyncInternal(e);if("number"==typeof n)throw Error("file not found");return("utf8"===t||"utf-8"===t)&&(n=this._module.UTF8ArrayToString(n,0)),n}getPathType(e){return e=l.ensureRootPath(e),this._fs.getPathType(e)}readDir(e){return e=l.ensureRootPath(e),this._fs.readDir(e)}isDir(e){return e=l.ensureRootPath(e),"directory"===this.getPathType(e)}isFile(e){return e=l.ensureRootPath(e),"file"===this.getPathType(e)}isExist(e){return e=l.ensureRootPath(e),"not_found"!==this.getPathType(e)}}}}]);