"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["6514"],{565733:function(e,t,r){r.d(t,{b:function(){return o}});var n=r(259273),i=r(580030),o=[{id:n.$W.GlobalRedirect,loader:()=>Promise.resolve({contribution:i.a})}]},355793:function(e,t,r){r.d(t,{N:function(){return L}});var n=r(876826),i=r(789786),o=r(601135),a=r(852603),s=r(14598),c=r(695581),u=r(216342),d=r(247170),l=r(608358),_=r(252805),p=r(519927),v=r(651712),h=r(490165),f=r(894412),g=r(293037),m=r(131754),y=r(557856),b=r(417699),T=r(246940),w=r(558032),S=r(259273),k=r(103152),R=r(596638),I=r(642273),C=r(113557),A=r(649679),E=r(178589);class L extends a.s{_executePhase(e,t){switch(t){case c.B.Render:this._whenRender(e);break;case c.B.Completed:this._whenCompleted(e)}}_whenRender(e){var t=this;return(0,n._)(function*(){var r,{environmentService:n,preloadService:i,platformUiConfigurationService:o}=t._containerService.invokeFunction(e=>({extensionService:e.get(v.Q),environmentService:e.get(b.e),preloadService:e.get(_.f),platformUiConfigurationService:e.get(E.e)})),a=(0,l.ko)(t._containerService,h.D);a.hasLogin&&T.T.updateUserId(null===(r=a.userProfile)||void 0===r?void 0:r.uid),(0,g.E)(t._containerService,location.pathname),(0,s.b)(A.B,(0,d.fC)(),n,t._containerService);var{pageLoadEventService:c}=t._containerService.invokeFunction(e=>({pageLoadEventService:e.get(w.tu)}));c.registerRouteMeasurementConfig(y.C,[S.Sj.Activity,S.Sj.Asset,S.Sj.ImageGenerate,S.Sj.VideoGenerate,S.Sj.LipSync,S.Sj.ActionCopy,S.Sj.AudioGenerate,S.Sj.Home,S.Sj.Explore,S.Sj.GuestPerson,S.Sj.InviteFission]),c.bootstrap(),i.registerPageLifecycleSignalProvider(c);var u=t._containerService.createInstance(m.I,{ctx:e,currentRoute:t._options.currentRoute});yield u.bootstrap(),(0,k.e)(t._containerService);var f=o.getRouteManager();i.addPreloadTask({signal:p.l.PAGE_IDLE,runTask:()=>{var e,t,r,n=null===(e=f.currentKeepAliveData)||void 0===e?void 0:e.routeId;(n===S.Sj.Home||n===S.Sj.Asset)&&(null===(r=window)||void 0===r||null===(t=r.beginPrefetchEditorResources)||void 0===t||t.call(r))}})})()}_registerFallbackSSRRemover(){var{platformUiConfigurationService:e,pageLoadEventService:t}=this._containerService.invokeFunction(e=>({platformUiConfigurationService:e.get(E.e),pageLoadEventService:e.get(w.tu)})),r=e.getRouteManager(),n=e=>{var n=document.getElementById("root");if(n){var i,o=null===(i=r.currentKeepAliveData)||void 0===i?void 0:i.routeId;(0,R.s)(this._containerService,{removeReason:e,routeId:o?I.EZ[o]:o}),t.manualReportAbnormalCCFMP(C.J.timeout,{listenerName:"init_contribution_job"}),null==n||n.remove()}};setTimeout(()=>{n("timeout")},4e3)}_whenCompleted(e){var{preloadService:t,userMaterialsService:r}=this._containerService.invokeFunction(e=>({preloadService:e.get(_.f),userMaterialsService:e.get(f.b)}));if(this._registerFallbackSSRRemover(),this._options.currentRoute===I.EZ[S.Sj.Home]||this._options.currentRoute===I.EZ[S.Sj.Explore]||(0,o.LX)(I.EZ[S.Sj.GuestPerson],this._options.currentRoute))t.addPreloadTask({signal:p.l.PAGE_IDLE,runTask:()=>{var e=r.getBaseEvercloud();null==e||e.prefetchWasmCode()}});else{var n=r.getBaseEvercloud();null==n||n.prefetchWasmCode()}}constructor(e,t){super(),this._containerService=e,this._options=t,this._name="contribution"}}(0,i.gn)([(0,u.lI)("contribution-job","_whenRender"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,i.w6)("design:returntype",Promise)],L.prototype,"_whenRender",null),(0,i.gn)([(0,u.lI)("contribution-job","_whenCompleted"),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,i.w6)("design:returntype",void 0)],L.prototype,"_whenCompleted",null)},535014:function(e,t,r){r.d(t,{e:function(){return i}});var n=r(19658);function i(e){e.invokeFunction(e=>{e.get(n.S).abTestManager.initAndExposeAbTest()})}},313773:function(e,t,r){r.d(t,{a:function(){return s}});var n=r(44938),i=r(727279);function o(e){e?localStorage.setItem(n.u.authorInviteCode,e):localStorage.removeItem(n.u.authorInviteCode)}function a(e){return function(t){t?localStorage.setItem(e,t):localStorage.removeItem(e)}}function s(){var e=new URLSearchParams(window.location.search),t={[i.m.authorInviteCode]:o,[i.m.ugCampaignKey]:a(n.u.ugCampaignKey),[i.m.ugInviteParams]:a(n.u.ugInviteParams),[i.m.ugSecFromUid]:a(n.u.ugSecFromUid)};Object.values(i.m).forEach(r=>{var n,i=e.get(r);null===(n=t[r])||void 0===n||n.call(t,i)})}},35706:function(e,t,r){r.d(t,{s:function(){return a}});var n=r(259273),i=r(19349),o=[n.Sj.Login,n.Sj.DataSubjectRequestDownload,n.Sj.DataSubjectRequest,n.Sj.DataSubjectRequestSubmit,n.Sj.DataSubjectRequestBlock];function a(e){var t=()=>{var t,r=null===(t=e.currentKeepAliveData)||void 0===t?void 0:t.routeId;if(!!r)o.includes(r)?i.S.resetViewport():i.S.setViewportScaleInMobileNotIpad()};t(),e.onKeepAliveChange(t)}},550318:function(e,t,r){r.d(t,{Z:function(){return y}});var n=r(789786),i=r(852603),o=r(14598),a=r(489216),s=r(98902),c=r(350195),u=r(216342),d=r(503006),l=r(557343),_=r(490165),p=r(695581),v=r(628886),h=r(646204),f=r(731525),g=r(261623),m=r(95719);class y extends i.s{_executePhase(e,t){switch(t){case p.B.UserInit:this._whenUserInit(e);break;case p.B.Prepare:this._whenPrepare(e);break;case p.B.Completed:this._whenCompleted(e)}}_whenUserInit(e){(0,o.b)(a.Z,e,this._storageService),(0,o.b)(s.T6,e,this._slardarAdapterService)}_whenPrepare(e){(0,v.L)(this._containerService),(0,h.Q)(this._containerService),(0,f.y)(this._containerService),(0,m.j)(this._containerService)}_whenCompleted(e){var{accountService:t,slardarService:r,storageService:n}=this._containerService.invokeFunction(e=>({accountService:e.get(_.D),slardarService:e.get(l.L),storageService:e.get(d.U)}));try{if(t.hasLogin){var{uid:i}=t.userProfile;(0,c.n)({bid:"cn_mweb",userId:i,region:"cn",storageService:n,slardarService:r})}}catch(t){(0,u.uf)(e,t)}this._params.customReportEvents.forEach(e=>e(this._containerService))}constructor(e,t,r){super(),this._params=e,this._containerService=t,this._slardarAdapterService=r,this._name="report",this._storageService=t.invokeFunction(e=>e.get(d.U)),(0,g.H)(t)}}(0,n.gn)([(0,u.lI)("report-job","_whenUserInit"),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,n.w6)("design:returntype",void 0)],y.prototype,"_whenUserInit",null),(0,n.gn)([(0,u.lI)("report-job","_whenPrepare"),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,n.w6)("design:returntype",void 0)],y.prototype,"_whenPrepare",null),(0,n.gn)([(0,u.lI)("report-job","whenCompleted"),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,n.w6)("design:returntype",void 0)],y.prototype,"_whenCompleted",null)},775475:function(e,t,r){r.d(t,{K:function(){return p},g:function(){return v}});var n,i=r(876826),o=r(936226),a=r(637923),s=r(314443),c=r(608358),u=r(339459),d=r(351350),l=r(642273),_=r(259273),p=e=>{if(!!(0,u.g)()){var t=(0,c.ko)(e,o.Gw);s.S4.onLoginStatusChange(r=>{var n,{isLogin:i}=null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{};i?(0,d.Q)(e):t.logout("".concat(location.origin).concat(l.NU).concat(l.EZ[_.Sj.Home]))})}};var v=(n=(0,i._)(function*(e){var t=(0,c.ko)(e,o.Gw),r=(0,a.r)("isPcLogin");(0,u.g)()&&r&&!(null==t?void 0:t.hasLogin)&&(yield(0,d.Q)(e))}),function(e){return n.apply(this,arguments)})},219925:function(e,t,r){r.d(t,{k:()=>A});var n,i=r("876826"),o=r("85728"),a=r("929753"),s=r("150615"),c=r("121608"),u=r.n(c),d=r("52533"),l=r("57465"),_=r("467475"),p=r("702251"),v=r("578771"),h=r("73809"),f=new Map;function g(){return(g=(0,i._)(function*(e,t){var{cacheKey:r,maxAge:n=36e5,noCache:i=!1}=t,o=f.get(r);if(!i&&o&&new Date().getTime()-o.cacheStartTime<o.maxAge)try{return yield o.promise,o.promise}catch(e){}var a=e();return f.set(r,{promise:a,cacheStartTime:new Date().getTime(),maxAge:n}),a})).apply(this,arguments)}var m=function(e,t){return g.apply(this,arguments)},y="__locationCountryCode",b="__locationInfo",T="12.4.0",w=function(){try{var e,t,r;if(!window)return"US";if(window[y])return null!==(e=window[y])&&void 0!==e?e:"US";if(window[b])return null!==(r=null===(t=window[b])||void 0===t?void 0:t.code)&&void 0!==r?r:"US";return"US"}catch(e){return"US"}}(),S={baseURL:"/commerce",method:"POST",headers:{appid:_.yM.APP_ID,loc:w,lan:s.ZP.language||_.yM.LAN,pf:_.yM.APP_PF,appvr:T,tdid:"","sign-ver":1,"app-sdk-version":_.yM.APP_SDK_VERSION},useCommerceApi:!0},k=p.ZP.createAxios(S);k.interceptors.request.use(e=>{var{pf:t,appvr:r,tdid:n}=S.headers;return Object.assign(e.headers,(0,h.O)({url:"".concat(e.baseURL).concat(e.url),pf:t,appvr:r,tdid:n})),e});k.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);var t,r,n,i=e.data;return"0"!==i.ret?Promise.reject(e):(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.url)&&e.config.url.indexOf("user_info")>0?Promise.resolve({data:i.data,signContext:{sign:i.sign,ret:i.ret,response:i.response,"device-time":null==e?void 0:null===(n=e.config)||void 0===n?void 0:null===(r=n.headers)||void 0===r?void 0:r["device-time"],systime:null==i?void 0:i.systime}}):Promise.resolve(i.data)}),(0,v.Z)(k,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:e=>![l.up.CROSS_GROUP,l.up.CROSS_PLATFORM_IOS,l.up.CROSS_PLATFORM_MAC,l.up.RISK_ERROR,l.up.SHARK_RISK_ERROR].includes(e.data.ret)&&!0});var R=e=>{var t=[];return Object.entries(e).forEach(e=>{!(0,d.Z)(e[1])&&t.push("".concat(e[0],"=").concat(e[1]))}),t.join("&")};var I=(n=(0,i._)(function*(e,t,n){var i=new(yield r.e("187").then(r.bind(r,357994))).default;return i.setPublicKey(n),i.verify(e,t,u().SHA256)}),function(e,t,r){return n.apply(this,arguments)}),C=!0,A={getSubscriptionUserInfo:e=>(0,i._)(function*(){var{data:t,signContext:r}=yield k({url:"/v1/subscription/user_info",data:{aid:_.yM.APP_ID,scene:"vip",from_db:e}}),n={appid:_.yM.APP_ID,appvr:T,"device-time":null==r?void 0:r["device-time"],pf:_.yM.APP_PF,response:null==r?void 0:r.response,ret:r.ret,systime:null==r?void 0:r.systime},{sign:i}=r;if(i){var s=yield I(R(n),i,"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1I/Ml9Qkp6reos86Tjbd1R6q+\nbQwviSEmZzqtrhfGI+iMGKA74XSctUu8ZnWhOKsG5+PujMrIJX2WMRP0E5lhJpCh\nfgK3aiNikvgigORzf0Lz39XS46eAHJrPbMaQiabDfd/+CjkvxbV+LW3oPdoZj9Mn\n38OEHt9qVkUlvpv76wIDAQAB\n-----END PUBLIC KEY-----");if(r.sign&&s)return function(e){if(!(0,l.EE)(e))return e;var t=e.flag&&e.cur_vip_level===l.rH.pro;return(0,a._)((0,o._)({},e),{flag:null!=t&&t})}(t)}throw Error("Error: Auth sign")})(),getEntrances:()=>(0,i._)(function*(){C&&performance.mark("GET_ENTRANCES_START");var e="/lv/v1/commerce/get_entrances",t=(0,h.O)((0,o._)({url:e},S.headers)),r=yield m(()=>{try{var r=window.__entrances;if(r&&"0"===r.ret)return window.__entrances=null,Promise.resolve(r.data)}catch(e){}return k({baseURL:"/",url:e,headers:(0,o._)({},t)})},{cacheKey:"promiseCache_getEntrances"});return C&&performance.mark("GET_ENTRANCES_END"),C=!1,r})(),getSpaceList:e=>(0,i._)(function*(){var t="/v1/subscription/workspace/space_list",r=(0,h.O)((0,o._)({url:t},S.headers)),n=yield k({url:t,headers:(0,o._)({},r),data:{aid:Number(_.yM.APP_ID),workspace_id:e}});return{spaceList:n.space_list,isFirstSubscribe:n.is_first_subscribe,isAutoSubscribe:n.is_auto_subscribe,isWebAutoSubscribe:n.is_web_auto_subscribe,isCancelSubscribe:n.is_cancel_subscribe,jointActivitySpaceList:n.joint_activity_space_list}})(),getPriceList:e=>(0,i._)(function*(){var t,r,n,i,s="/v1/subscription/cc_web_price_list",c=(0,h.O)((0,o._)({url:s},S.headers)),u={aid:Number(_.yM.APP_ID),scene:"workspace",region:e},[d,l]=yield m(()=>Promise.all([k({url:s,headers:(0,o._)({},c),data:u}),k({url:s,headers:(0,o._)({},c),data:(0,a._)((0,o._)({},u),{scene:"web"})})]),{cacheKey:"promiseCache_getPriceList_".concat(JSON.stringify(u))}),p=(null!==(t=d.all_price_list)&&void 0!==t?t:[]).reduce((e,t)=>(e[t.product_id]=t,e),{}),v=(null!==(r=d.tab_list)&&void 0!==r?r:[]).map(e=>({as_default:e.as_default,products:e.product_ids.map(e=>p[e])}));return{allPriceList:[...null!==(n=d.all_price_list)&&void 0!==n?n:[],...null!==(i=l.all_price_list)&&void 0!==i?i:[]],groupProductList:v,ccWebDisplayInfo:d.cc_web_display_info}})(),getSubscriptionList:e=>(0,i._)(function*(){return yield k({url:"/v1/subscription/order_record_list",data:{aid:Number(_.yM.APP_ID),workspace_id:e,cursor:0,count:1}})})(),getVipPriceList(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{noCache:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i._)(function*(){var n,i,s={aid:_.yM.APP_ID,scene:"vip",region:e,language:t},c=yield m(()=>k({url:"/v1/subscription/cc_price_list",data:s}),{cacheKey:"promiseCache_getVipPriceList_".concat(JSON.stringify(s)),noCache:r}),u={month:[],year:[]};return(null!==(n=c.all_price_list)&&void 0!==n?n:[]).forEach(e=>{var{cycle_unit:t,subscribe_cycle:r}=e;"MONTH"===t&&12!==r?u.month.push(e):u.year.push(e)}),{allVipPriceList:(null!==(i=c.all_price_list)&&void 0!==i?i:[]).map(e=>(0,a._)((0,o._)({},e),{parsed_display_content:function(e){try{var t;return JSON.parse(null!==(t=e.display_content)&&void 0!==t?t:"{}")}catch(e){return{}}}(e)})),vipGroupProductList:u,ccWebDisplayInfo:c.cc_web_display_info}})()},getSubscribeInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return(0,i._)(function*(){return yield k({url:"/v1/subscription/get_subscribe_info",data:{language:e}})})()},getSubscribeInfoV3:e=>(0,i._)(function*(){var t=(0,a._)((0,o._)({},e),{app_id:Number(_.yM.APP_ID)});return yield m(()=>k({url:"/v3/trade/subscription_infos",data:t}),{cacheKey:"promiseCache_getSubscribeInfoV3_".concat(JSON.stringify({app_id:t.app_id,scene:t.scene,vip_levels:t.vip_levels})),noCache:e.use_master})})(),getVimoSlot(e){var{noCache:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i._)(function*(){var r="/commerce/v1/resource_position",n=(0,h.O)((0,o._)({url:r},S.headers));return yield m(()=>k({baseURL:"/",url:r,headers:(0,o._)({},n),data:e}),{cacheKey:"promiseCache_getVimoSlot_".concat(JSON.stringify(e)),noCache:t})})()},recordVimoSlotAction:e=>(0,i._)(function*(){var t="commerce/v1/record_resource_action",r=(0,h.O)((0,o._)({url:t},S.headers));return yield k({baseURL:"/",url:t,headers:(0,o._)({},r),data:e})})(),initTrade:e=>(0,i._)(function*(){var t,r="/v3/trade/init_trade",n=(0,h.O)((0,o._)({url:r},S.headers)),i=(0,a._)((0,o._)({},e),{app_id:Number(_.yM.APP_ID),sku_id:(null===(t=e.sku_id)||void 0===t?void 0:t.length)!==0?e.sku_id:void 0});return yield k({url:r,headers:(0,o._)({},n),data:i})})(),queryTrade:e=>(0,i._)(function*(){var t="/v3/trade/query_trade",r=(0,h.O)((0,o._)({url:t},S.headers)),n=(0,a._)((0,o._)({},e),{app_id:Number(_.yM.APP_ID)});return yield k({url:t,headers:(0,o._)({},r),data:n})})(),cancelVipSubscription:e=>(0,i._)(function*(){var t,r="/v3/trade/cancel_subscription",n=(0,h.O)((0,o._)({url:r},S.headers)),i=(0,a._)((0,o._)({},e),{app_id:null!==(t=e.app_id)&&void 0!==t?t:Number(_.yM.APP_ID)});return yield k({url:r,headers:(0,o._)({},n),data:i})})()}},229192:function(e,t,r){r.d(t,{e:function(){return n}});var n={GOOGLE_UNAUTHORIZED:1904}},421626:function(e,t,r){r.d(t,{Gs:function(){return n}});function n(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[r,n]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(".");return t.length<=1?[e,""]:[t.slice(0,-1).join("."),t[t.length-1]]}(e),i="".concat(r,"-").concat(n?".":"").concat(n),o=0,a=i;t.includes(a);)o++,a="".concat(r,"-").concat(o).concat(n?".":"").concat(n);return a}},320402:function(e,t,r){r.d(t,{a:function(){return o},s:function(){return a}});var n,i,o=((n={}).Sg="sg-capcut",n.Cn="cn",n);var a=((i={})[i.Boe=0]="Boe",i[i.Ppe=1]="Ppe",i[i.Online=2]="Online",i)},599998:function(e,t,r){r.d(t,{P:function(){return n}});var n={id:"resource-request",version:1,tables:[r(188294).m]}},861534:function(e,t,r){r.d(t,{g:function(){return i}});var n=r(765652),i={id:"resource-v2",version:1,tables:[n.d,n.z]}},269486:function(e,t,r){r.d(t,{z:function(){return i}});var n=r(259273),i=[n.Sj.Explore,n.Sj.Home,n.Sj.Asset,n.Sj.SearchResult]},990539:function(e,t,r){r.d(t,{r:function(){return c}});var n=r(85728),i=r(929753),o=r(379311),a=!0;class s{getEventParams(){var e=(0,i._)((0,n._)({},this._params),{isFirstTime:a?"true":"false"});return a=!1,e}constructor(e){this._params=e,this.eventName="page_load"}}function c(e,t){(0,o.S$)(e,s,[t])}},761436:function(e,t,r){r.d(t,{J:function(){return i}});var n=r(168179);function i(e){if(!!e){var t=new n.DAHistoryOption;return t.storyId=e.storyId,t}}},851612:function(e,t,r){r.d(t,{A:function(){return n}});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];document.prerendering?addEventListener("prerenderingchange",()=>e(),{capture:!0,once:t}):e()}},419887:function(e,t,r){r.d(t,{s:function(){return m}});var n=r(876826),i=r(85728),o=r(929753),a=r(789786),s=r(680564),c=r(588735),u=r(978420),d=r(77922),l=r(85952),_=r(260963),p=r(568409),v=r(474956),h=r(839694),f=r(94012),g=r(247170);class m{clearList(e){e===h.Sc.Inspiration?(this._exploreFeedListLength=0,this.exploreVideoList.length=0):e===h.Sc.ShortFilm&&(this.storyFeedList.length=0)}get activeAiVideoFeed(){return this.exploreVideoList.length?{list:this.exploreVideoList,loading:!1,loadingFailure:!1,isInitialized:!0,hasMore:!1}:null}addFeedList(e,t){if(e===h.Sc.Inspiration){var r=this._exploreFeedListLength;this._exploreFeedListLength+=t.length;var n=t.map((e,t)=>(0,o._)((0,i._)({},e),{mixedItemIndex:t+r})).filter(e=>(0,s.B)(e));this.exploreVideoList.push(...n)}else if(e===h.Sc.ShortFilm){var a=t.map((e,t)=>(0,o._)((0,i._)({},e),{type:v._g.DreaminaShowCaseVideo}));this.storyFeedList.push(...a)}}markFavorite(e,t){var r=this;return(0,n._)(function*(){var n=r.storyFeedList.findIndex(t=>t.key===e);if(n>-1){var i=r.storyFeedList[n];(0,_.z)(()=>{i.statistic.hasFavorited=t,i.statistic.favoriteNum+=t?1:-1}),yield r._inspirationFeedDataService.markFavorite({itemId:i.publishedItemId,op:t?c.Ix.Like:c.Ix.UnLike})}else(0,p._)(e)&&(yield r._inspirationFeedDataService.markFavorite({itemId:(0,p.S)(e),op:t?c.Ix.Like:c.Ix.UnLike}))})()}markDownloadable(e,t){var r=this;return(0,n._)(function*(){var n=(0,g.fC)();yield r._productionService.repository.updateProductionItem(n,{itemId:e,downloadable:t})})()}constructor(e,t,r){this._inspirationFeedDataService=e,this._resourceService=t,this._productionService=r,this._exploreFeedListLength=0,this.exploreVideoList=[],this.storyFeedList=[],this.updateVideoLikeStatus=(e,t)=>{if((0,p._)(e)){var r=this.exploreVideoList.findIndex(t=>t.key===e);if(r>-1){var n=this.exploreVideoList[r];(0,_.z)(()=>{n.statistic.hasFavorited=t,n.statistic.favoriteNum+=t?1:-1})}}},this.setActiveFeedItemId=e=>{this.activeFeedItemId=e},(0,_.rC)(this),f.S.getInstance().setSearchFeedService(this)}}(0,a.gn)([_.LO,(0,a.w6)("design:type",Array)],m.prototype,"exploreVideoList",void 0),(0,a.gn)([_.LO,(0,a.w6)("design:type",Array)],m.prototype,"storyFeedList",void 0),(0,a.gn)([_.LO,(0,a.w6)("design:type",Object)],m.prototype,"activeFeedItemId",void 0),(0,a.gn)([_.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===h.Sc?Object:h.Sc]),(0,a.w6)("design:returntype",void 0)],m.prototype,"clearList",null),(0,a.gn)([_.Fl,(0,a.w6)("design:type",void 0),(0,a.w6)("design:paramtypes",[])],m.prototype,"activeAiVideoFeed",null),(0,a.gn)([_.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===h.Sc?Object:h.Sc,Array]),(0,a.w6)("design:returntype",void 0)],m.prototype,"addFeedList",null),m=(0,a.gn)([(0,a.fM)(0,u.t),(0,a.fM)(1,d.c),(0,a.fM)(2,l.p),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===u.t?Object:u.t,void 0===d.c?Object:d.c,void 0===l.p?Object:l.p])],m)},326099:function(e,t,r){r.d(t,{G:function(){return a}});var n=r(85728),i=r(929753),o=r(260963);class a{markDownloadable(e,t){this.downloadableDataMap=(0,i._)((0,n._)({},this.downloadableDataMap),{[e]:t})}constructor(){this.downloadableDataMap={},(0,o.ky)(this)}}},276879:function(e,t,r){r.d(t,{R:function(){return i}});var n,i=((n={}).recordId="recordId",n.itemId="itemId",n)},724086:function(e,t,r){r.d(t,{X:function(){return m},s:function(){return g}});var n=r(876826),i=r(789786),o=r(719800),a=r(874800),s=r(836413),c=r(352983),u=r(490165),d=r(951729),l=r(591586),_=r(149614),p=r(462126),v=r(671154),h=r(997825),f=r(267728),g=6e4;class m extends a.JT{submitDraftData(e){var t=this;return(0,n._)(function*(){try{var{hostNameType:r}=h.uk.SaveDraftUrl,n=new v.T(e,{uid:t._accountService.userProfile.uid,isUseInCn:f.zL.hasDependencyCN}),i=yield t._draftRepository.saveDraftData(n.data,{[c.T]:r,timeout:g});return(0,s.oW)({packageId:i.package_id})}catch(e){l.t.error("DraftManagerService: save draft error ".concat(e));var o=(0,_.v)(e.ret);if(o===d.W.DRAFT_DUPLICATE_CREATION)return(0,s.oW)({packageId:e.data.package_id});return(0,s.wf)(o,e.ret,e.errmsg)}})()}constructor(e,t){super(),this._instantiationService=e,this._accountService=t,this._draftRepository=this._instantiationService.createInstance(p.a)}}m=(0,i.gn)([(0,i.fM)(0,o.T),(0,i.fM)(1,u.D),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===o.T?Object:o.T,void 0===u.D?Object:u.D])],m)},462126:function(e,t,r){r.d(t,{a:function(){return d}});var n=r(789786),i=r(997825),o=r(442452),a=r(643590),s=r(416105),c=r(875649),u=r(689739);class d{saveDraftData(e,t){return this._networkClient.post(this._httpApiSettingService.getRequestURL({domainType:o.Y.DEFAULT,path:i.uk.SaveDraftUrl.url}),e,t)}constructor(e){var t;this._httpApiSettingService=e,this._networkClient=(t=new a.y().build({headers:{"Content-Type":"application/json"},withCredentials:!0}),(0,s.mH)(t),(0,c.e_)(t),t)}}(0,n.gn)([(0,u.K)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof SaveDraftDataRequest?Object:SaveDraftDataRequest,"undefined"==typeof NetworkRequestConfig?Object:NetworkRequestConfig]),(0,n.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],d.prototype,"saveDraftData",null),d=(0,n.gn)([(0,n.fM)(0,o.x),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.x?Object:o.x])],d)},173683:function(e,t,r){r.d(t,{YE:function(){return c},nq:function(){return a},pX:function(){return s}});var n=e=>{if("[object Window]"!==e.toString()){var{ownerDocument:t}=e;return t&&t.defaultView||window}return e},i=e=>{var t,r;return((r=n(t=e).Element,t instanceof r||t instanceof Element)?e.ownerDocument:e.document)||window.document},o=e=>i(e).documentElement,a=e=>"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=a(e);if(!n)return null;var i=o(n),{scrollWidth:s,scrollTop:c}=i,{scrollHeight:u}=i;u=Math.min(u,i.getBoundingClientRect().height),i.style.overflow="hidden";var d=n.getBoundingClientRect(),{height:l,width:_,left:p}=d,v=d.top+(r?0:c);return t?{width:s,height:u,borderTopWidth:Math.max(v,0),borderBottomWidth:Math.max(u-l-v,0),borderRightWidth:Math.max(s-_-p,0),borderLeftWidth:Math.max(p,0)}:{width:_,height:l,left:p,top:v}};function c(e){return!(0===e.width&&0===e.height&&0===e.left&&0===e.top)}},32138:function(e,t,r){r.d(t,{b:function(){return i}});var n=r(422779);class i extends n.m{dispose(){this._keybindingService.removeContext(this),super.dispose()}constructor(e,t,r={}){super(t,r),this._keybindingService=e}}},36097:function(e,t,r){r.d(t,{e:function(){return _}});var n=r(789786),i=r(280166),o=r(53588),a=r(745228),s=r(700645),c=r(867713),u=r(843698),d=r(874800),l=r(651531);class _ extends d.JT{get _hasEnableFeature(){return this._enableRecordFrameTime||this._enableRecordLongTask}_bootstrap(e){var{isDev:t}=this._environmentService,{enableRecordFrameTime:r=!1,enableRecordLongTask:n=!1,enableReport:i=!1,forceEnableAllFeature:o=!1}=e;this._hasForceEnableAllFeature=o,t||o?(this._enableRecordFrameTime=!0,this._enableRecordLongTask=!0,this._enableReport=!1):(this._enableRecordFrameTime=r,this._enableRecordLongTask=n,this._enableReport=i),this._enableRecordFrameTime&&this._recordFrameTime(),this._enableRecordLongTask&&new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this._longTaskEntries.push(e)})}).observe({type:"longtask",buffered:!0}),this._injectDebug()}_injectDebug(){window.__debugger&&(window.__debugger.performanceMonitorService=this)}_fireOnReportIfNeed(){if(!!this._enableReport&&0!==this._history.length)(0===this._reportTaskQueue.length||Date.now()>=6e4+this._lastReportTime)&&(this._onReport.fire({history:this.dumpHistory(),analyzeHistory:this.dumpAnalyzeHistory()}),this.clear(),this._lastReportTime=Date.now())}_handleIdle(){if(0===this._reportTaskQueue.length)return;var e=this._reportTaskQueue.shift();if(!!e)e(),this._fireOnReportIfNeed(),(0,s.n)(this._handleIdle.bind(this),{priorityLevel:c.q.IdlePriority})}_reportIfIdle(){(0,s.n)(this._handleIdle.bind(this),{priorityLevel:c.q.IdlePriority})}_recordFrameTime(){performance.mark("_recordFrameTime:start"),this._ticks.push(performance.now()),performance.mark("_recordFrameTime:end"),requestAnimationFrame(this._recordFrameTime.bind(this)),this._measureAndClearMarks("_recordFrameTime","_recordFrameTime:start","_recordFrameTime:end")}_measureAndClearMarks(e,t,r){try{performance.measure(e,t,r),performance.clearMarks(t),performance.clearMarks(r)}catch(e){this._logger.error("[PerformanceMonitorService]_measureAndClearMarks error",e)}}_getMaxFromArray(e){return e.reduce((e,t)=>Math.max(e,t),-1/0)}extract(e,t,r){performance.mark("extract:start");var n=this._ticks.findIndex(e=>e>=t),i=this._ticks.findLastIndex(e=>e<=r),o=this._ticks.slice(n,i-1).map((e,t,r)=>{var n;return(null!==(n=null==r?void 0:r[t+1])&&void 0!==n?n:0)-e}).filter(e=>e>=0),a=this._longTaskEntries.filter(e=>e.startTime>=t&&e.startTime<=r),s={Named:!0,Meta:!0,name:e,duration:r-t};return this._enableRecordFrameTime&&0!==o.length&&Object.assign(s,{FrameInfo:!0,frameTimes:o,AFT:o.reduce((e,t)=>e+t,0)/o.length,MFT:this._getMaxFromArray(o),FPS:Math.round(1e3/((r-t)/o.length))}),this._enableRecordLongTask&&0!==a.length&&Object.assign(s,{LongTaskInfo:!0,longTaskCount:a.length,averageLongTaskDuration:a.map(e=>e.duration).reduce((e,t)=>e+t,0)/a.length,maximumLongTaskDuration:this._getMaxFromArray(a.map(e=>e.duration).concat([0])),longTasks:a}),performance.mark("extract:end"),this._measureAndClearMarks("extract","extract:start","extract:end"),s}merge(e,t){var r={Named:!0,name:e.name,Meta:!0,duration:e.duration+t.duration};if((0,a.er)(e)&&(0,a.er)(t)){var n=e.frameTimes.concat(t.frameTimes),i=(e.AFT*e.duration+t.AFT*t.duration)/(e.duration+t.duration),o=Math.max(e.MFT,t.MFT);Object.assign(r,{FrameInfo:!0,frameTimes:n,AFT:i,MFT:o,FPS:(e.FPS*e.duration+t.FPS*t.duration)/(e.duration+t.duration)})}else(0,a.er)(e)?Object.assign(r,{FrameInfo:!0,frameTimes:e.frameTimes,AFT:e.AFT,MFT:e.MFT,FPS:e.FPS}):(0,a.er)(t)&&Object.assign(r,{FrameInfo:!0,frameTimes:t.frameTimes,AFT:t.AFT,MFT:t.MFT,FPS:t.FPS});if((0,a.fk)(e)&&(0,a.fk)(t)){var s=e.longTaskCount+t.longTaskCount,c=(e.averageLongTaskDuration*e.duration+t.averageLongTaskDuration*t.duration)/(e.duration+t.duration),u=Math.max(e.maximumLongTaskDuration,t.maximumLongTaskDuration);Object.assign(r,{LongTaskInfo:!0,longTaskCount:s,averageLongTaskDuration:c,maximumLongTaskDuration:u,longTasks:e.longTasks.concat(t.longTasks)})}else(0,a.fk)(e)?Object.assign(r,{LongTaskInfo:!0,longTaskCount:e.longTaskCount,averageLongTaskDuration:e.averageLongTaskDuration,maximumLongTaskDuration:e.maximumLongTaskDuration,longTasks:e.longTasks}):(0,a.fk)(t)&&Object.assign(r,{LongTaskInfo:!0,longTaskCount:t.longTaskCount,averageLongTaskDuration:t.averageLongTaskDuration,maximumLongTaskDuration:t.maximumLongTaskDuration,longTasks:t.longTasks});return r}record(e){if(!!this._hasEnableFeature)!this._recordStarTimingMap[e]&&(performance.mark("[".concat(e,"]-record:start")),Object.assign(this._recordStarTimingMap,{[e]:performance.now()}))}stop(e){if(!!this._hasEnableFeature){if(this._recordStarTimingMap[e]){performance.mark("[".concat(e,"]-record:end")),this._measureAndClearMarks("[".concat(e,"]-measure"),"[".concat(e,"]-record:start"),"[".concat(e,"]-record:end"));var t,r=null===(t=this._recordStarTimingMap)||void 0===t?void 0:t[e],n=performance.now();this._reportTaskQueue.push(()=>{if(r){var t,i=this.extract(e,r,n);this._logger.info("".concat(r,"-").concat(n),i),this._history.push(i),null===(t=this._recordStarTimingMap)||void 0===t||delete t[e]}}),this._reportIfIdle()}}}dumpHistory(){return this._history}dumpAnalyzeHistory(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0!==this._history.length){var t={};this._history.forEach(e=>{var r=null==t?void 0:t[e.name];if(!r){Object.assign(t,{[e.name]:e});return}Object.assign(t,{[e.name]:this.merge(r,e)})});var r={};for(var n in t){if(!!Object.hasOwn(t,n)){var i=t[n];if((0,a.er)(i)){r[n]=(0,a.$O)((0,a.bc)(i),e);continue}r[n]=(0,a.$O)(i,e)}}return r}}enableReport(){this._enableReport=!0}forceEnableAllFeature(){if(!this._hasForceEnableAllFeature)this._bootstrap({forceEnableAllFeature:!0})}clear(){this._history.splice(0,this._history.length),this._ticks.splice(0,this._ticks.length),this._longTaskEntries.splice(0,this._longTaskEntries.length)}get onReport(){return this._onReport.event}constructor(e={},t,r){super(),this._options=e,this._environmentService=t,this._loggerService=r,this._onReport=new u.Q,this._history=[],this._reportTaskQueue=[],this._recordStarTimingMap={},this._ticks=[],this._longTaskEntries=[],this._lastReportTime=-1,this._enableRecordFrameTime=!1,this._enableRecordLongTask=!1,this._enableReport=!1,this._hasForceEnableAllFeature=!1,this._logger=this._loggerService.createLogger(o.Yd.id,{logPrefix:o.Yd.prefix}),this._bootstrap(this._options)}}_=(0,n.gn)([(0,n.fM)(1,i.Y),(0,n.fM)(2,l.VZ),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",["undefined"==typeof Partial?Object:Partial,void 0===i.Y?Object:i.Y,void 0===l.VZ?Object:l.VZ])],_)},732884:function(e,t,r){r.d(t,{v:function(){return n}});var n=(0,r(971245).yh)("runtime-prefetch-service")},119866:function(e,t,r){r.d(t,{e:function(){return v}});var n=r(876826),i=r(789786),o=r(836413),a=r(56935),s=r(938157),c=r(902668),u=r(638098),d=r(840976),l=r(671769),_=r(434712),p=r(558085);class v extends c.X{uploadVideo(e){var t=this;return(0,n._)(function*(){var{file:r,cancellationToken:n}=e,i=yield t._uploadVideoAndGetTask(r,n);if(!i.ok)return i;var o=i.value;return(0,s.i)(o)})()}uploadVideoAndGetTask(e){var t=this;return(0,n._)(function*(){var{file:r,cancellationToken:n}=e,i=yield t._uploadVideoAndGetTask(r,n);return i.ok?i.value:new l.y(i)})()}uploadFile(e){var t=this;return(0,n._)(function*(){var{file:r,cancellationToken:n}=e,i=yield t._uploadFileAndGetTask(r,n);if(!i.ok)return i;var o=i.value;return(0,s.i)(o)})()}uploadFileAndGetTask(e){var t=this;return(0,n._)(function*(){var{file:r,cancellationToken:n}=e,i=yield t._uploadFileAndGetTask(r,n);return i.ok?i.value:new l.y(i)})()}_getToken(){return this._spaceConfig.getVodToken()}_getSdkDriver(){return this._sdkDriver?this._sdkDriver:(!this._sdkDriver&&(this._sdkDriver=new u.d({appId:this._appId,userId:this._userIdProvider.userId,getSliceFunc:this._uploadSettings.sliceSize,actions:this._uploadSettings.actions},this._spaceConfig.host)),this._sdkDriver)}_uploadVideoAndGetTask(e,t){var r=this,i=()=>super._flushToken;return(0,n._)(function*(){return((0,a.Y2)(r._spaceConfig.permissionSlots&1<<d.rA.Video,"this vod space no support upload video."),yield i().call(r),r._token)?r._getSdkDriver().uploadVideo(r._token,e,t):(0,o.wf)(-1,"stsToken undefined.")})()}_uploadFileAndGetTask(e,t){var r=this,i=()=>super._flushToken;return(0,n._)(function*(){return((0,a.Y2)(r._spaceConfig.permissionSlots&1<<d.rA.File,"this vod space no support upload file."),yield i().call(r),r._token)?r._getSdkDriver().uploadFile(r._token,e,t):(0,o.wf)(-1,"stsToken undefined.")})()}constructor(e,t,r,n){super(),this._appId=e,this._spaceConfig=t,this._uploadSettings=r,this._containerService=n,void 0!==this._uploadSettings.userId?this._userIdProvider=new p.k(this._uploadSettings.userId):this._userIdProvider=this._containerService.createInstance(p.w),this._userIdProvider.onUserIdChange(()=>{if(!!this._sdkDriver)this._sdkDriver.setUserId(this._userIdProvider.userId)})}}v=(0,i.gn)([(0,i.fM)(3,_.t),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[Number,"undefined"==typeof IVodUploaderConfigProxy?Object:IVodUploaderConfigProxy,"undefined"==typeof IVodSettings?Object:IVodSettings,void 0===_.t?Object:_.t])],v)},911727:function(e,t,r){r.d(t,{I:function(){return d}});var n=r(843698),i=r(874800),o=r(836413),a=r(638106),s=r(478164),c=r(697294);class u extends i.JT{cancel(){this._sdk.cancel(this._key),this._onError.fire((0,o.wf)(a.pY.Cancelled,"upload task cancelled."))}constructor(e,t){super(),this._sdk=e,this._key=t,this._onCompleted=new n.Q,this._onError=new n.Q,this._onProgress=new n.Q,this.onComplete=this._onCompleted.event,this.onError=this._onError.event,this.onProgress=this._onProgress.event,this._sdk.on("complete",e=>{if(e.key===this._key){var t,r,n,i,o,a,s,{uploadResult:c}=e;this._onCompleted.fire({vid:null!==(s=c.Vid)&&void 0!==s?s:"",duration:null===(t=c.VideoMeta)||void 0===t?void 0:t.Duration,width:null===(r=c.VideoMeta)||void 0===r?void 0:r.Width,height:null===(n=c.VideoMeta)||void 0===n?void 0:n.Height,format:null===(i=c.VideoMeta)||void 0===i?void 0:i.Format,md5:null===(o=c.VideoMeta)||void 0===o?void 0:o.Md5,uri:null===(a=c.VideoMeta)||void 0===a?void 0:a.Uri,runId:c.RunId})}}),this._sdk.on("error",e=>{var t;if(e.key===this._key)this._onError.fire((0,o.wf)(null!==(t=e.extra.errorCode)&&void 0!==t?t:-1,e.extra.message))}),this._sdk.on("progress",e=>{if(e.key===this._key)this._onProgress.fire(e.percent)})}}function d(e,t){var r=e.addFile({file:t.file,stsToken:t.stsToken,type:s.A.Video});e.start(r);var n=new u(e,r);return t.cancellationToken&&(0,c.x)(n,t.cancellationToken),n}},221266:function(e,t,r){r.d(t,{X:function(){return s}});var n=r(876826),i=r(700645),o=r(867713),a=r(743880);class s extends a.L{getFrame(e){var t=this,r=()=>super.getFrame;return(0,n._)(function*(){return yield new Promise(a=>{(0,i.n)((0,n._)(function*(){a((yield r().call(t,e)))}),{priorityLevel:o.q.IdlePriority})})})()}}},959736:function(e,t,r){r.d(t,{b:function(){return i}});var n,i=((n={}).Music="music",n.SoundEffect="soundEffect",n)},895131:function(e,t,r){r.d(t,{C:function(){return w}});var n=r(876826),i=r(85728),o=r(929753),a=r(789786),s=r(643590),c=r(416105),u=r(875649),d=r(243494),l=r(927457),_=r(423719),p=r(793723),v=r(836413),h=r(346526),f=r(699137),g=r(442452),m=r(917598),y=r(280166),b=r(879976),T=r(530989);class w{get _networkClient(){if(!this._networkClientInstance){var e,t;this._networkClientInstance=(e={ch:this._environmentService.isDev?"local_test":"online"},t=new s.y().build({headers:(0,i._)({"Content-Type":"application/json","Device-Type":"web","app-sdk-version":m.wQ},e),withCredentials:!0}),(0,b.V)(t),(0,c.mH)(t),(0,u.i3)(t),(0,h.V)(t),t)}return this._networkClientInstance}getResources(e){var t=this;return(0,n._)(function*(){try{var r,n,i=yield t._networkClient.post(t.getResourcesApi,t._convertParamsToRequest(e),t.requestConfig),o=Number(null!==(r=i.ret)&&void 0!==r?r:0),a=null!==(n=i.errmsg)&&void 0!==n?n:"";if(0!==o)return(0,v.wf)(null!=o?o:-1,null!=a?a:"");var s=e instanceof d.yt?e.config:e,c=yield t._convertResponseToQueryToken(s,i);return(0,v.oW)(c)}catch(e){return(0,l.m)(e,-1,"[] getResources api error")}})()}get defaultQueryToken(){return{offset:0,count:50}}get getResourcesApi(){return this._httpApiSettingService.getRequestURL({domainType:g.Y.DEFAULT,path:f.b.GET_RESOURCE_BY_CATEGORY})}get requestConfig(){return{}}buildCustomRequest(e){return{}}_convertParamsToRequest(e){var t,r,n,a=e instanceof d.yt?e.config:e,s=this.buildCustomRequest(a),c=(0,d.ky)(e)?{count:null!==(t=e.config.limit)&&void 0!==t?t:50,offset:null!==(r=e.offset)&&void 0!==r?r:0}:(0,o._)((0,i._)({},this.defaultQueryToken,e.limit?{count:e.limit}:void 0),{offset:null!==(n=e.offset)&&void 0!==n?n:0});return(0,i._)({},s,c)}_convertResponseToQueryToken(e,t){var r=this;return(0,n._)(function*(){var n=t.cache_sync_token,a=t.logid;if(n){var s=yield T.Li.decryptIV(n,a);yield(0,_.sh)(T.Li.decrypt.bind(T.Li),t.data.item_list,s)}var c=yield T.sn.getSignOptions();(0,p.$U)(T.sn.sign.bind(T.sn),t.data.item_list,c);var u=t.data.item_list.map(e=>r.parseHeycanResponseDataToResources((0,o._)((0,i._)({},e),{request_id:t.data.request_id,impression_id:t.data.request_id}))),l=t.data.next_offset,v=t.data.has_more;return(0,d.ib)(e,{list:u},{hasMore:v,offset:l})})()}constructor(e,t){this._httpApiSettingService=e,this._environmentService=t}}w=(0,a.gn)([(0,a.fM)(0,g.x),(0,a.fM)(1,y.Y),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===g.x?Object:g.x,void 0===y.Y?Object:y.Y])],w)},343638:function(e,t,r){r.d(t,{mT:function(){return i}});var n,i=((n={}).Free="free",n.LimitedTimeFree="limited_time_free",n.Subscribe="subscribe",n.Oneoff="oneoff",n)},128581:function(e,t,r){r.d(t,{i:function(){return m}});var n=r(876826),i=r(85728),o=r(929753),a=r(789786),s=r(936226),c=r(636601),u=r(643590),d=r(875649),l=r(243494),_=r(927457),p=r(836413),v=r(346526),h=r(807744),f=r(12939),g=r(150615);class m{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new u.y().build(u.D),(0,d.i3)(e),(0,v.V)(e),e)}return this._networkClientInstance}getResources(e){var t=this;return(0,n._)(function*(){try{var r,n,i=yield t._networkClient.post(t._getResourcesApi,t._convertParamsToRequest(e),(0,f._)(t._accountService.userProfile.region,g.ZP.language)),o=Number(null!==(r=i.ret)&&void 0!==r?r:0),a=null!==(n=i.errmsg)&&void 0!==n?n:"";if(0!==o)return(0,p.wf)(null!=o?o:-1,null!=a?a:"");var s=e instanceof l.yt?e.config:e,c=t._convertResponseToQueryToken(s,i);return(0,p.oW)(c)}catch(e){return(0,_.m)(e,-1,"[".concat(t.resourceType,"] getResources api error"))}})()}get defaultQueryToken(){return{offset:0,count:50}}buildCustomRequest(e){return{}}_convertParamsToRequest(e){var t,r,n=e instanceof l.yt?e.config:e,a=this.buildCustomRequest(n),s=(0,l.ky)(e)?(0,o._)((0,i._)({},{count:null!==(t=e.config.limit)&&void 0!==t?t:50}),{offset:null!==(r=e.offset)&&void 0!==r?r:0}):(0,i._)({},this.defaultQueryToken,e.limit?{count:e.limit}:void 0);return(0,i._)({effect_type:this.resourceType},a,s)}_convertResponseToQueryToken(e,t){var r=t.data.effect_item_list.map(e=>this.parseHeycanResponseDataToResources(e)),n=t.data.next_offset,i=t.data.has_more;return(0,l.ib)(e,{list:r},{hasMore:i,offset:n,requestId:t.logid})}get _getResourcesApi(){return"".concat(c._L.getVar("web_domain")).concat(h.bl.GET_RECOMMENDS)}constructor(e){this._accountService=e}}m=(0,a.gn)([(0,a.fM)(0,s.Gw),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===s.Gw?Object:s.Gw])],m)},395399:function(e,t,r){r.d(t,{E:function(){return p}});var n=r(876826),i=r(836413),o=r(346526),a=r(628281),s=r(643590),c=r(875649),u=r(416105),d=r(927457),l=r(173130),_=r(330594);class p{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new s.y().build(s.D),(0,c.i3)(e),(0,u.mH)(e),(0,o.V)(e),e)}return this._networkClientInstance}getEffectAbTest(){var e=this;return(0,n._)(function*(){try{var t,r=yield e._networkClient.post(e._urlGenerator.url("GET_EFFECT_AB_PARAM"),{},{withCredentials:!0});if("0"!==r.ret)return(0,i.wf)(Number(r.ret),null!==(t=r.errmsg)&&void 0!==t?t:"");return(0,i.oW)((0,_.o)(r))}catch(e){return(0,d.m)(e,-1,"getEffectAbTest api error")}})()}constructor(){this._urlGenerator=new l.w(a.c)}}},602040:function(e,t,r){r.d(t,{b:function(){return n}});var n={GET_EVERCLOUD_TOKEN:"/cc/v1/workspace/get_ever_photo_token"}},552639:function(e,t,r){r.d(t,{$:()=>h});var n=r("876826"),i=r("789786"),o=r("442452"),a=r("643590"),s=r("875649"),c=r("416105"),u=r("820266"),d=r("927457"),l=r("836413"),_=r("346526"),p={FEATURE_PERMISSION:"/mweb/v1/feature_permission",FEATURE_SUBMIT_SURVEY:"/mweb/v1/submit_survey"},v=r("879976");class h{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new a.y().build(a.D),(0,v.V)(e),(0,s.i3)(e),(0,c.mH)(e),(0,_.V)(e),e)}return this._networkClientInstance}getFeatureBetaTestPermission(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getUrl(p.FEATURE_PERMISSION),(0,u.X)(e),{withCredentials:!0});if("0"!==r.ret)return(0,l.wf)(Number(r.ret),r.errmsg);return(0,l.oW)((0,u.b)(r.data))}catch(e){return(0,d.m)(e,-1,"feedback task fail error")}})()}submitFeatureBetaTestSurvey(e){var t=this;return(0,n._)(function*(){try{var r=yield t._networkClient.post(t._getUrl(p.FEATURE_SUBMIT_SURVEY),(0,u.X)(e),{withCredentials:!0});if("0"!==r.ret)return(0,l.wf)(Number(r.ret),r.errmsg);return(0,l.oW)(r.data)}catch(e){return(0,d.m)(e,-1,"feedback task fail error")}})()}_getUrl(e){return this._httpApiSettingService.getRequestURL({domainType:o.Y.DEFAULT,path:e})}constructor(e){this._httpApiSettingService=e}}h=(0,i.gn)([(0,i.fM)(0,o.x),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===o.x?Object:o.x])],h)},606505:function(e,t,r){r.d(t,{P:function(){return a}});var n=r(789786),i=r(719800),o=r(562778);class a{submitArtwork(e){return this._competitionRepository.submitArtwork(e)}previewVideo(e){return this._competitionRepository.previewVideo(e)}constructor(e){this._instantiationService=e,this._competitionRepository=this._instantiationService.createInstance(o.S)}}a=(0,n.gn)([(0,n.fM)(0,i.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===i.T?Object:i.T])],a)},471462:function(e,t,r){r.d(t,{M:function(){return s}});var n=r(789786),i=r(719800),o=r(216342),a=r(664107);class s{ssrWarmup(e,t){return this._bffDataRepository.ssrWarmup(e,t)}constructor(e){this._instantiationService=e,this._bffDataRepository=(0,o.bu)("dreamina-bff-data-repository",this._instantiationService.createInstance(a.P))}}s=(0,n.gn)([(0,n.fM)(0,i.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===i.T?Object:i.T])],s)},928114:function(e,t,r){r.d(t,{k:function(){return s}});var n=r(789786),i=r(327697),o=r(719800),a=r(247170);class s{getCanvasDetail(e){return this._dreaminaCanvasTemplateRepository.getCanvasDetail((0,a.fC)(),e)}constructor(e){this._instantiationService=e,this._dreaminaCanvasTemplateRepository=this._instantiationService.createInstance(i.f)}}s=(0,n.gn)([(0,n.fM)(0,o.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.T?Object:o.T])],s)},159197:function(e,t,r){r.d(t,{b:function(){return n}});var n={DELETE_CHARACTER:"/mweb/v1/delete_character",GET_CHARACTER_LIST:"/mweb/v1/get_character_list",UPDATE_CHARACTER:"/mweb/v1/update_character",MGet_CHARACTER:"/mweb/v1/mget_character",CREATE_CHARACTER:"/mweb/v1/create_character",GET_CHARACTER_REF_IMAGE_LIST:"/mweb/v1/get_character_ref_image_list"}},978420:function(e,t,r){r.d(t,{t:function(){return n}});var n=(0,r(971245).yh)("dreamina-inspiration-feed-data-service")},536170:function(e,t,r){r.d(t,{C:function(){return d}});var n=r(876826),i=r(295834),o=r(789786),a=r(719800),s=r(584072),c=r(947259),u=r(372814);class d{generateTextArt(e,t){return this._textArtRepository.generateTextArt(e,t)}queryTextArtItems(e){return this._textArtRepository.queryTextArtItems(e)}queryTextArtGenerationTask(e){this._pollTextArtGenerationTaskResult(e)}_pollTextArtGenerationTaskResult(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this;return(0,n._)(function*(){var{type:n,callback:u}=e,d=(0,i._)(e,["type","callback"]),{signal:l}=d;if(Date.now()-t>=4e4){u(Error("timeout"));return}if(r>=5&&o){u(o);return}try{var _=yield a._textArtRepository.queryTextArtGenerationTask(d);if(!_.ok){l.throwIfAborted(),yield Promise.race([(0,c._)(1e3),(0,s.kn)(l)]),yield a._pollTextArtGenerationTaskResult(e,t,r+1,Error(_.msg));return}if("item"===n&&"itemConf"in _.value&&_.value.itemConf.iconFileUrl){u(null,_.value);return}if("rune"===n&&"remainingSize"in _.value&&(u(null,_.value),!_.value.remainingSize))return;yield Promise.race([(0,c._)(1e3),(0,s.kn)(l)]),yield a._pollTextArtGenerationTaskResult(e,t)}catch(n){if(!(n instanceof Error))return;try{yield Promise.race([(0,c._)(1e3),(0,s.kn)(l)])}catch(e){}if(l.aborted&&l.reason instanceof Error){u(l.reason);return}yield a._pollTextArtGenerationTaskResult(e,t,r+1,n)}})()}constructor(e){this._textArtRepository=e.createInstance(u.t)}}d=(0,o.gn)([(0,o.fM)(0,a.T),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===a.T?Object:a.T])],d)},707752:function(e,t,r){r.d(t,{b:function(){return n}});var n={SUBMIT_TASK:"/mweb/v1/voice/submit_task",GET_LOCAL_ITEM_LIST:"/mweb/v1/get_local_item_list",GET_USER_LOCAL_ITEM_LIST:"/mweb/v1/get_user_local_item_list",DELETE_VOICE:"/mweb/v1/voice/delete",UPDATE_VOICE:"/mweb/v1/voice/update",QUERY_TASK:"/mweb/v1/voice/query_task"}},933787:function(e,t,r){r.d(t,{e:function(){return n}});var n={GET_IMAGEX_TOKEN:{url:"/mweb/v1/get_upload_token"}}},904761:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(789786),i=r(277161),o=r(434712);class a{genToken(){return this._helpDeskRepository.genToken()}constructor(e){this._containerService=e,this._helpDeskRepository=this._containerService.createInstance(i.Q)}}a=(0,n.gn)([(0,n.fM)(0,o.t),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o.t?Object:o.t])],a)},589543:function(e,t,r){r.d(t,{X:function(){return n}});var n=(0,r(971245).yh)("dreamina-transfer-ai-materials-data-service")},87021:function(e,t,r){r.d(t,{f:function(){return m}});var n=r(876826),i=r(85728),o=r(929753),a=r(789786),s=r(836413),c=r(903355),u=r(346526),d=r(643590),l=r(875649),_=r(727828),p=r(442452),v=r(927457),h=r(820266),f=r(107520),g=r(136548);class m{get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=(0,c.e)((0,o._)((0,i._)({},d.D),{withCredentials:!0})),(0,l.i3)(e),(0,u.V)(e),(0,_.m)(e),e)}return this._networkClientInstance}batchGetResources(e){var t=this;return(0,n._)(function*(){try{var r,n,i=t._httpApiSettingService.getRequestURL({domainType:p.Y.DEFAULT,path:g.C.batchGetPhoto.url}),o=yield t._networkClient.post(i,t._convertParamsToRequest(e),{headers:{loc:t._httpApiSettingService.userLocationInfo.region}}),a=Number(null!==(r=o.ret)&&void 0!==r?r:0),c=null!==(n=o.errmsg)&&void 0!==n?n:"";if(0!==a)return(0,s.wf)(null!=a?a:-1,null!=c?c:"");var u=t._convertResponseToResourcesData(o);return(0,s.oW)(u)}catch(e){return(0,v.m)(e,-1,"[photoDreamina] batchGetResources api error")}})()}_convertParamsToRequest(e){return{item_id_list:e.resourceIds,image_info:e.imageInfo}}_convertResponseToResourcesData(e){return{list:(0,h.b)(e.data).itemList.map(e=>(0,f.Z)(e))}}constructor(e){this._httpApiSettingService=e}}m=(0,a.gn)([(0,a.fM)(0,p.x),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0===p.x?Object:p.x])],m)},628125:function(e,t,r){r.d(t,{u:function(){return s}});var n=r(789786),i=r(719800),o=r(874800),a=r(561351);class s extends o.JT{batchGetVideos(e){return this._batchGetVideoRepository.batchGetResources(e)}constructor(e){super(),this._instantiationService=e,this._batchGetVideoRepository=this._instantiationService.createInstance(a.m)}}s=(0,n.gn)([(0,n.fM)(0,i.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===i.T?Object:i.T])],s)},621795:function(e,t,r){r.d(t,{b:function(){return n}});var n={GET_WOKRSPACES:"/cc/v1/workspace/get_user_workspaces"}},497091:function(e,t,r){r.d(t,{Y:function(){return p}});var n=r(876826),i=r(643590),o=r(875649),a=r(416105),s=r(927457),c=r(636601),u=r(836413),d=r(56935),l=r(346526),_=r(621795);class p{get _getWorkspacesApi(){return"".concat(c._L.getVar("web_domain")).concat(_.b.GET_WOKRSPACES)}get _networkClient(){if(!this._networkClientInstance){var e;this._networkClientInstance=(e=new i.y().build({headers:{"Content-Type":"application/json"}}),(0,o.i3)(e),(0,a.mH)(e),(0,l.V)(e),e)}return this._networkClientInstance}getChanelWorkspace(e){var t=this;return(0,n._)(function*(){try{var r,n,i=yield t._networkClient.post("".concat(t._getWorkspacesApi),{count:1},{withCredentials:!0,params:{lite_aid:e.chanelAppId}});if("0"!==i.ret)return(0,u.wf)(Number(i.ret),i.errmsg);return(0,u.oW)((r=i.data.workspace_infos,(0,d.Y2)(1===r.length),{workspaceId:(n=r[0]).workspace_id,name:n.name,spaceId:n.space_id,role:n.role,callerNickname:n.caller_nickname,memberLimit:n.member_limit,memberCnt:n.member_cnt,owner:n.owner,ownerName:n.owner_name,quota:n.quota,usage:n.usage,avatarColor:n.avatar_color,region:n.region,idc:Number(n.idc),spaceIdc:n.space_idc,spaceHost:n.space_host,spaceType:n.space_type,spaceResHost:n.space_res_host,rawSpaceType:n.raw_space_type,hasBrandPermission:n.has_brand_permission}))}catch(e){return(0,s.m)(e,-1,"getChanelWorkspace api error.")}})()}}},63113:function(e,t,r){r.d(t,{K:function(){return c}});var n=r(789786),i=r(497973),o=r(841401),a=r(201031),s=r(434712);class c extends a.J{register(e,t){if(!this._services.has(e))!(t instanceof i.M)&&(t=new i.M(t,[])),this._servicesCollection.set(e,t)}constructor(e){var t=new o.y;super(t,e),this._servicesCollection=t}}c=(0,n.gn)([(0,n.fM)(0,s.t),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object])],c)},685626:function(){let e=new WeakMap;function t(t,r){return e.get(t)&&e.get(t).get(r)}function r(e,r,n){if(void 0===r)throw TypeError();let i=t(r,n);return i&&i.get(e)}function n(r,n,i,o){if(o&&!["string","symbol"].includes(typeof o))throw TypeError();(t(i,o)||function(t,r){let n=e.get(t)||new Map;e.set(t,n);let i=n.get(r)||new Map;return n.set(r,i),i}(i,o)).set(r,n)}function i(e,t,n){return r(e,t,n)?r(e,t,n):Object.getPrototypeOf(t)?i(e,Object.getPrototypeOf(t),n):void 0}Object.assign(Reflect,{decorate:function(e,t,r,n){var i,o,a,s,c,u;if(!Array.isArray(e)||0===e.length)throw TypeError();if(void 0!==r){;return i=e,o=t,a=r,s=n,i.reverse().forEach(e=>{s=e(o,a,s)||s}),s}if("function"==typeof t){;return c=e,u=t,c.reverse().forEach(e=>{let t=e(u);t&&(u=t)}),u}},defineMetadata:function(e,t,r,i){n(e,t,r,i)},getMetadata:function(e,t,r){return i(e,t,r)},getOwnMetadata:function(e,t,n){return r(e,t,n)},hasMetadata:function(e,t,r){return!!i(e,t,r)},hasOwnMetadata:function(e,t,n){return!!r(e,t,n)},metadata:function(e,t){return function(r,i){n(e,t,r,i)}}})},480277:function(e,t,r){r.d(t,{m:function(){return i}});var n=r(614863);class i{constructor({region:e}){let t={boe:"https://jianying-boe._____________/cc/logger",cn:"https://www.jianying.com/cc/logger",va:"https://edit-api-va.capcut.com/cc/logger",sg:"https://edit-api-sg.capcut.com/cc/logger"};this._baseURL=t[e]}async reportDetail(e){await (0,n.h)({baseURL:this._baseURL,url:"/reports",method:"POST",data:e})}async reportErrorDetail(e){await (0,n.h)({baseURL:this._baseURL,url:"/reports/errors",method:"POST",data:e})}getGainTaskList(e){return(0,n.h)({baseURL:this._baseURL,url:"/gain/query?userId="+e})}updateGainTask(e){let{id:t,userId:r,startTime:i,endTime:o}=e;return t?(0,n.h)({baseURL:this._baseURL,url:"/gain/"+t,method:"PATCH",data:{status:"completed"}}):(0,n.h)({baseURL:this._baseURL,url:"/gain",method:"POST",data:{userId:r,mode:"push",startTime:i,endTime:o,status:"completed"}})}getTraceRetrievalTasks(e,t){return(0,n.h)({baseURL:this._baseURL,url:`/gain-trace/query?userId=${t}&bid=${e}`})}finishRetrievalTask(e){return(0,n.h)({baseURL:this._baseURL,url:"/gain-trace/"+e,method:"PATCH",data:{status:"completed"}})}saveLog(e,t){return(0,n.h)({baseURL:this._baseURL,url:"/log/report",method:"POST",data:{app_id:e,log:t}})}}}}]);